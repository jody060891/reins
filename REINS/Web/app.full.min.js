if(window.Modernizr=function(a,b,c){function d(a){t.cssText=a}function e(a,b){return d(x.join(a+";")+(b||""))}function f(a,b){return typeof a===b}function g(a,b){return!!~(""+a).indexOf(b)}function h(a,b){for(var d in a)if(t[a[d]]!==c)return"pfx"==b?a[d]:!0;return!1}function i(a,b,d){for(var e in a){var g=b[a[e]];if(g!==c)return d===!1?a[e]:f(g,"function")?g.bind(d||b):g}return!1}function j(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+z.join(d+" ")+d).split(" ");return f(b,"string")||f(b,"undefined")?h(e,b):(e=(a+" "+A.join(d+" ")+d).split(" "),i(e,b,c))}function k(){o.input=function(c){for(var d=0,e=c.length;e>d;d++)E[c[d]]=!!(c[d]in u);return E.list&&(E.list=!(!b.createElement("datalist")||!a.HTMLDataListElement)),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),o.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)u.setAttribute("type",e=a[g]),d="text"!==u.type,d&&(u.value=v,u.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&u.style.WebkitAppearance!==c?(q.appendChild(u),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(u,null).WebkitAppearance&&0!==u.offsetHeight,q.removeChild(u)):/^(search|tel)$/.test(e)||(/^(url|email)$/.test(e)?d=u.checkValidity&&u.checkValidity()===!1:/^color$/.test(e)?(q.appendChild(u),q.offsetWidth,d=u.value!=v,q.removeChild(u)):d=u.value!=v)),D[a[g]]=!!d;return D}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,m,n="2.5.3",o={},p=!0,q=b.documentElement,r="modernizr",s=b.createElement(r),t=s.style,u=b.createElement("input"),v=":)",w={}.toString,x=" -webkit- -moz- -o- -ms- ".split(" "),y="Webkit Moz O ms",z=y.split(" "),A=y.toLowerCase().split(" "),B={svg:"http://www.w3.org/2000/svg"},C={},D={},E={},F=[],G=F.slice,H=function(a,c,d,e){var f,g,h,i=b.createElement("div"),j=b.body,k=j?j:b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:r+(d+1),i.appendChild(h);return f=["&#173;","<style>",a,"</style>"].join(""),i.id=r,k.innerHTML+=f,k.appendChild(i),j||(k.style.background="",q.appendChild(k)),g=c(i,a),j?i.parentNode.removeChild(i):k.parentNode.removeChild(k),!!g},I=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return H("@media "+b+" { #"+r+" { position: absolute; } }",function(b){d="absolute"==(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position}),d},J=function(){function a(a,e){e=e||b.createElement(d[a]||"div"),a="on"+a;var g=a in e;return g||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(a,""),g=f(e[a],"function"),f(e[a],"undefined")||(e[a]=c),e.removeAttribute(a))),e=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),K={}.hasOwnProperty;m=f(K,"undefined")||f(K.call,"undefined")?function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")}:function(a,b){return K.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=G.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(G.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(G.call(arguments)))};return d});(function(c,d){var e=c.join(""),f=d.length;H(e,function(c,d){for(var e=b.styleSheets[b.styleSheets.length-1],g=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"",h=c.childNodes,i={};f--;)i[h[f].id]=h[f];o.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||9===(i.touch&&i.touch.offsetTop),o.csstransforms3d=9===(i.csstransforms3d&&i.csstransforms3d.offsetLeft)&&3===i.csstransforms3d.offsetHeight,o.generatedcontent=(i.generatedcontent&&i.generatedcontent.offsetHeight)>=1,o.fontface=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])},f,d)})(['@font-face {font-family:"font";src:url("https://")}',["@media (",x.join("touch-enabled),("),r,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",x.join("transform-3d),("),r,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join(""),['#generatedcontent:after{content:"',v,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);C.flexbox=function(){return j("flexOrder")},C["flexbox-legacy"]=function(){return j("boxDirection")},C.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},C.canvastext=function(){return!(!o.canvas||!f(b.createElement("canvas").getContext("2d").fillText,"function"))},C.webgl=function(){try{var d,e=b.createElement("canvas");d=!(!a.WebGLRenderingContext||!e.getContext("experimental-webgl")&&!e.getContext("webgl")),e=c}catch(f){d=!1}return d},C.touch=function(){return o.touch},C.geolocation=function(){return!!navigator.geolocation},C.postmessage=function(){return!!a.postMessage},C.websqldatabase=function(){return!!a.openDatabase},C.indexedDB=function(){return!!j("indexedDB",a)},C.hashchange=function(){return J("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},C.history=function(){return!(!a.history||!history.pushState)},C.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},C.websockets=function(){for(var b=-1,c=z.length;++b<c;)if(a[z[b]+"WebSocket"])return!0;return"WebSocket"in a},C.rgba=function(){return d("background-color:rgba(150,255,150,.5)"),g(t.backgroundColor,"rgba")},C.hsla=function(){return d("background-color:hsla(120,40%,100%,.5)"),g(t.backgroundColor,"rgba")||g(t.backgroundColor,"hsla")},C.multiplebgs=function(){return d("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(t.background)},C.backgroundsize=function(){return j("backgroundSize")},C.borderimage=function(){return j("borderImage")},C.borderradius=function(){return j("borderRadius")},C.boxshadow=function(){return j("boxShadow")},C.textshadow=function(){return""===b.createElement("div").style.textShadow},C.opacity=function(){return e("opacity:.55"),/^0.55$/.test(t.opacity)},C.cssanimations=function(){return j("animationName")},C.csscolumns=function(){return j("columnCount")},C.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return d((a+"-webkit- ".split(" ").join(b+a)+x.join(c+a)).slice(0,-a.length)),g(t.backgroundImage,"gradient")},C.cssreflections=function(){return j("boxReflect")},C.csstransforms=function(){return!!j("transform")},C.csstransforms3d=function(){var a=!!j("perspective");return a&&"webkitPerspective"in q.style&&(a=o.csstransforms3d),a},C.csstransitions=function(){return j("transition")},C.fontface=function(){return o.fontface},C.generatedcontent=function(){return o.generatedcontent},C.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},C.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},C.localstorage=function(){try{return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch(a){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(r,r),sessionStorage.removeItem(r),!0}catch(a){return!1}},C.webworkers=function(){return!!a.Worker},C.applicationcache=function(){return!!a.applicationCache},C.svg=function(){return!!b.createElementNS&&!!b.createElementNS(B.svg,"svg").createSVGRect},C.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==B.svg},C.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(w.call(b.createElementNS(B.svg,"animate")))},C.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(w.call(b.createElementNS(B.svg,"clipPath")))};for(var L in C)m(C,L)&&(l=L.toLowerCase(),o[l]=C[L](),F.push((o[l]?"":"no-")+l));return o.input||k(),o.addTest=function(a,b){if("object"==typeof a)for(var d in a)m(a,d)&&o.addTest(d,a[d]);else{if(a=a.toLowerCase(),o[a]!==c)return o;b="function"==typeof b?b():b,q.className+=" "+(b?"":"no-")+a,o[a]=b}return o},d(""),s=u=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=k.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var d=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&d.canHaveChildren&&!j.test(a)?f.appendChild(d):d},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function f(a){var b;return a.documentShived?a:(k.shivCSS&&!g&&(b=!!c(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),h||(b=!e(a)),b&&(a.documentShived=b),a)}var g,h,i=a.html5||{},j=/^<|^(?:button|form|map|select|textarea)$/i;!function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,h=1==a.childNodes.length||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return"undefined"==typeof c.cloneNode||"undefined"==typeof c.createDocumentFragment||"undefined"==typeof c.createElement}()}();var k={elements:i.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!(i.shivCSS===!1),shivMethods:!(i.shivMethods===!1),type:"default",shivDocument:f};a.html5=k,f(b)}(this,b),o._version=n,o._prefixes=x,o._domPrefixes=A,o._cssomPrefixes=z,o.mq=I,o.hasEvent=J,o.testProp=function(a){return h([a])},o.testAllProps=j,o.testStyles=H,o.prefixed=function(a,b,c){return b?j(a,b,c):j(a,"pfx")},q.className=q.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+F.join(" "):""),o}(this,this.document),function(a){"use strict";a.matchMedia=a.matchMedia||function(a,b){var c,d=a.documentElement,e=d.firstElementChild||d.firstChild,f=a.createElement("body"),g=a.createElement("div");return g.id="mq-test-1",g.style.cssText="position:absolute;top:-100em",f.style.background="none",f.appendChild(g),function(a){return g.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',d.insertBefore(f,e),c=42===g.offsetWidth,d.removeChild(f),{matches:c,media:a}}}(a.document)}(this),function(a){"use strict";function b(){v(!0)}var c={};a.respond=c,c.update=function(){};var d=[],e=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),f=function(a,b){var c=e();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},g=function(a){return a.replace(c.regex.minmaxwh,"").match(c.regex.other)};if(c.ajax=f,c.queue=d,c.unsupportedmq=g,c.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},c.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var h,i,j,k=a.document,l=k.documentElement,m=[],n=[],o=[],p={},q=30,r=k.getElementsByTagName("head")[0]||l,s=k.getElementsByTagName("base")[0],t=r.getElementsByTagName("link"),u=function(){var a,b=k.createElement("div"),c=k.body,d=l.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=k.createElement("body"),c.style.background="none"),l.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&l.insertBefore(c,l.firstChild),a=b.offsetWidth,f?l.removeChild(c):c.removeChild(b),l.style.fontSize=d,e&&(c.style.fontSize=e),a=j=parseFloat(a)},v=function(b){var c="clientWidth",d=l[c],e="CSS1Compat"===k.compatMode&&d||k.body[c]||d,f={},g=t[t.length-1],p=(new Date).getTime();if(b&&h&&q>p-h)return a.clearTimeout(i),void(i=a.setTimeout(v,q));h=p;for(var s in m)if(m.hasOwnProperty(s)){var w=m[s],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?j||u():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?j||u():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(n[w.rules]))}for(var C in o)o.hasOwnProperty(C)&&o[C]&&o[C].parentNode===r&&r.removeChild(o[C]);o.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=k.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,r.insertBefore(E,g.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(k.createTextNode(F)),o.push(E)}},w=function(a,b,d){var e=a.replace(c.regex.comments,"").replace(c.regex.keyframes,"").match(c.regex.media),f=e&&e.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=function(a){return a.replace(c.regex.urls,"$1"+b+"$2$3")},i=!f&&d;b.length&&(b+="/"),i&&(f=1);for(var j=0;f>j;j++){var k,l,o,p;i?(k=d,n.push(h(a))):(k=e[j].match(c.regex.findStyles)&&RegExp.$1,n.push(RegExp.$2&&h(RegExp.$2))),o=k.split(","),p=o.length;for(var q=0;p>q;q++)l=o[q],g(l)||m.push({media:l.split("(")[0].match(c.regex.only)&&RegExp.$2||"all",rules:n.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(c.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(c.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}v()},x=function(){if(d.length){var b=d.shift();f(b.href,function(c){w(c,b.href,b.media),p[b.href]=!0,a.setTimeout(function(){x()},0)})}},y=function(){for(var b=0;b<t.length;b++){var c=t[b],e=c.href,f=c.media,g=c.rel&&"stylesheet"===c.rel.toLowerCase();e&&g&&!p[e]&&(c.styleSheet&&c.styleSheet.rawCssText?(w(c.styleSheet.rawCssText,e,f),p[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!s||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),d.push({href:e,media:f})))}x()};y(),c.update=y,c.getEmValue=u,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=ea.type(a);return"function"===c||ea.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(ea.isFunction(b))return ea.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ea.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ma.test(b))return ea.filter(b,a,c);b=ea.filter(b,a)}return ea.grep(a,function(a){return ea.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ua[a]={};return ea.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function g(){oa.addEventListener?(oa.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(oa.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(oa.addEventListener||"load"===event.type||"complete"===oa.readyState)&&(g(),ea.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(za,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ya.test(c)?ea.parseJSON(c):c}catch(e){}ea.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!ea.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(ea.acceptData(a)){var e,f,g=ea.expando,h=a.nodeType,i=h?ea.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||ea.guid++:g),i[j]||(i[j]=h?{}:{toJSON:ea.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=ea.extend(i[j],b):i[j].data=ea.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[ea.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[ea.camelCase(b)])):e=f,e}}function l(a,b,c){if(ea.acceptData(a)){var d,e,f=a.nodeType,g=f?ea.cache:a,h=f?a[ea.expando]:ea.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){ea.isArray(b)?b=b.concat(ea.map(b,ea.camelCase)):b in d?b=[b]:(b=ea.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!ea.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?ea.cleanData([a],!0):ca.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return oa.activeElement}catch(a){}}function p(a){var b=Ka.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||ea.nodeName(d,b)?f.push(d):ea.merge(f,q(d,b));return void 0===b||b&&ea.nodeName(a,b)?ea.merge([a],f):f}function r(a){Ea.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return ea.nodeName(a,"table")&&ea.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==ea.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Va.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)ea._data(c,"globalEval",!b||ea._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&ea.hasData(a)){var c,d,e,f=ea._data(a),g=ea._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ea.event.add(b,c,h[c][d])}g.data&&(g.data=ea.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ca.noCloneEvent&&b[ea.expando]){e=ea._data(b);for(d in e.events)ea.removeEvent(b,d,e.handle);b.removeAttribute(ea.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ca.html5Clone&&a.innerHTML&&!ea.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Ea.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=ea(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ea.css(e[0],"display");return e.detach(),f}function z(a){var b=oa,c=_a[a];return c||(c=y(a,b),"none"!==c&&c||($a=($a||ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($a[0].contentWindow||$a[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$a.detach()),_a[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mb.length;e--;)if(b=mb[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ea._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ca(d)&&(f[g]=ea._data(d,"olddisplay",z(d.nodeName)))):(e=Ca(d),(c&&"none"!==c||!e)&&ea._data(d,"olddisplay",e?c:ea.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ib.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ea.css(a,c+Ba[f],!0,e)),d?("content"===c&&(g-=ea.css(a,"padding"+Ba[f],!0,e)),"margin"!==c&&(g-=ea.css(a,"border"+Ba[f]+"Width",!0,e))):(g+=ea.css(a,"padding"+Ba[f],!0,e),"padding"!==c&&(g+=ea.css(a,"border"+Ba[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ab(a),g=ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=bb(a,b,f),(0>e||null==e)&&(e=a.style[b]),db.test(e))return e;d=g&&(ca.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nb=void 0}),nb=ea.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Ba[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tb[b]||[]).concat(tb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ca(a),p=ea._data(a,"fxshow");c.queue||(h=ea._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ea.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ea.css(a,"display"),k="none"===j?ea._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===ea.css(a,"float")&&(ca.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ca.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ea.style(a,d)}else j=void 0;if(ea.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ea._data(a,"fxshow",{}),f&&(p.hidden=!o),o?ea(a).show():l.done(function(){ea(a).hide()}),l.done(function(){var b;ea._removeData(a,"fxshow");for(b in m)ea.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=ea.camelCase(c),e=b[d],f=a[c],ea.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ea.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sb.length,h=ea.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ea.extend({},b),opts:ea.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ea.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=sb[f].call(j,a,k,j.opts))return d;return ea.map(k,J,j),ea.isFunction(j.opts.start)&&j.opts.start.call(a,j),ea.fx.timer(ea.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ea.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,ea.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=ea.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&ea.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(ea.isArray(b))ea.each(b,function(b,e){c||Vb.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ea.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return ea.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},aa=_.toString,ba=_.hasOwnProperty,ca={},da="1.11.3",ea=function(a,b){return new ea.fn.init(a,b)},fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ga=/^-ms-/,ha=/-([\da-z])/gi,ia=function(a,b){return b.toUpperCase()};ea.fn=ea.prototype={jquery:da,constructor:ea,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=ea.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ea.each(this,a,b)},map:function(a){return this.pushStack(ea.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},ea.extend=ea.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ea.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(ea.isPlainObject(c)||(b=ea.isArray(c)))?(b?(b=!1,f=a&&ea.isArray(a)?a:[]):f=a&&ea.isPlainObject(a)?a:{},g[d]=ea.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},ea.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ea.type(a)},isArray:Array.isArray||function(a){return"array"===ea.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!ea.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==ea.type(a)||a.nodeType||ea.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(ca.ownLast)for(b in a)return ba.call(a,b);for(b in a);return void 0===b||ba.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[aa.call(a)]||"object":typeof a},globalEval:function(b){b&&ea.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ga,"ms-").replace(ha,ia)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ea.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),ea.isFunction(a)?(c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||ea.guid++,d):void 0},now:function(){return+new Date},support:ca}),ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var ja=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){
for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ea.find=ja,ea.expr=ja.selectors,ea.expr[":"]=ea.expr.pseudos,ea.unique=ja.uniqueSort,ea.text=ja.getText,ea.isXMLDoc=ja.isXML,ea.contains=ja.contains;var ka=ea.expr.match.needsContext,la=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;ea.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ea.find.matchesSelector(d,a)?[d]:[]:ea.find.matches(a,ea.grep(b,function(a){return 1===a.nodeType}))},ea.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ea(a).filter(function(){for(b=0;e>b;b++)if(ea.contains(d[b],this))return!0}));for(b=0;e>b;b++)ea.find(a,d[b],c);return c=this.pushStack(e>1?ea.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ka.test(a)?ea(a):a||[],!1).length}});var na,oa=a.document,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=ea.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ea?b[0]:b,ea.merge(this,ea.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:oa,!0)),la.test(c[1])&&ea.isPlainObject(b))for(c in b)ea.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=oa.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return na.find(a);this.length=1,this[0]=d}return this.context=oa,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ea.isFunction(a)?"undefined"!=typeof na.ready?na.ready(a):a(ea):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ea.makeArray(a,this))};qa.prototype=ea.fn,na=ea(oa);var ra=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};ea.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!ea(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ea.fn.extend({has:function(a){var b,c=ea(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ea.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ka.test(a)||"string"!=typeof a?ea(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ea.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ea.unique(f):f)},index:function(a){return a?"string"==typeof a?ea.inArray(this[0],ea(a)):ea.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ea.unique(ea.merge(this.get(),ea(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ea.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ea.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ea.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ea.dir(a,"nextSibling")},prevAll:function(a){return ea.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ea.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ea.dir(a,"previousSibling",c)},siblings:function(a){return ea.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ea.sibling(a.firstChild)},contents:function(a){return ea.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ea.merge([],a.childNodes)}},function(a,b){ea.fn[a]=function(c,d){var e=ea.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ea.filter(d,e)),this.length>1&&(sa[a]||(e=ea.unique(e)),ra.test(a)&&(e=e.reverse())),this.pushStack(e)}});var ta=/\S+/g,ua={};ea.Callbacks=function(a){a="string"==typeof a?ua[a]||f(a):ea.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&e>g;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){ea.each(b,function(b,c){var d=ea.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&ea.each(arguments,function(a,c){for(var d;(d=ea.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,g>=d&&g--)}),this},has:function(a){return a?ea.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},ea.extend({Deferred:function(a){var b=[["resolve","done",ea.Callbacks("once memory"),"resolved"],["reject","fail",ea.Callbacks("once memory"),"rejected"],["notify","progress",ea.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ea.Deferred(function(c){ea.each(b,function(b,f){var g=ea.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ea.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ea.extend(a,d):d}},e={};return d.pipe=d.then,ea.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&ea.isFunction(a.promise)?g:0,i=1===h?a:ea.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ea.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var va;ea.fn.ready=function(a){return ea.ready.promise().done(a),this},ea.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ea.readyWait++:ea.ready(!0)},ready:function(a){if(a===!0?!--ea.readyWait:!ea.isReady){if(!oa.body)return setTimeout(ea.ready);ea.isReady=!0,a!==!0&&--ea.readyWait>0||(va.resolveWith(oa,[ea]),ea.fn.triggerHandler&&(ea(oa).triggerHandler("ready"),ea(oa).off("ready")))}}}),ea.ready.promise=function(b){if(!va)if(va=ea.Deferred(),"complete"===oa.readyState)setTimeout(ea.ready);else if(oa.addEventListener)oa.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{oa.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&oa.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ea.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),ea.ready()}}()}return va.promise(b)};var wa,xa="undefined";for(wa in ea(ca))break;ca.ownLast="0"!==wa,ca.inlineBlockNeedsLayout=!1,ea(function(){var a,b,c,d;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ca.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=oa.createElement("div");if(null==ca.deleteExpando){ca.deleteExpando=!0;try{delete a.test}catch(b){ca.deleteExpando=!1}}a=null}(),ea.acceptData=function(a){var b=ea.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,za=/([A-Z])/g;ea.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ea.cache[a[ea.expando]]:a[ea.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),ea.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ea.data(f),1===f.nodeType&&!ea._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ea.camelCase(d.slice(5)),i(f,d,e[d])));ea._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ea.data(this,a)}):arguments.length>1?this.each(function(){ea.data(this,a,b)}):f?i(f,a,ea.data(f,a)):void 0},removeData:function(a){return this.each(function(){ea.removeData(this,a)})}}),ea.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ea._data(a,b),c&&(!d||ea.isArray(c)?d=ea._data(a,b,ea.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ea.queue(a,b),d=c.length,e=c.shift(),f=ea._queueHooks(a,b),g=function(){ea.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ea._data(a,c)||ea._data(a,c,{empty:ea.Callbacks("once memory").add(function(){ea._removeData(a,b+"queue"),ea._removeData(a,c)})})}}),ea.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ea.queue(this[0],a):void 0===b?this:this.each(function(){var c=ea.queue(this,a,b);ea._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ea.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ea.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ea.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ea._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=["Top","Right","Bottom","Left"],Ca=function(a,b){return a=b||a,"none"===ea.css(a,"display")||!ea.contains(a.ownerDocument,a)},Da=ea.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ea.type(c)){e=!0;for(h in c)ea.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ea.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ea(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=/^(?:checkbox|radio)$/i;!function(){var a=oa.createElement("input"),b=oa.createElement("div"),c=oa.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ca.leadingWhitespace=3===b.firstChild.nodeType,ca.tbody=!b.getElementsByTagName("tbody").length,ca.htmlSerialize=!!b.getElementsByTagName("link").length,ca.html5Clone="<:nav></:nav>"!==oa.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),ca.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",ca.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",ca.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,ca.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){ca.noCloneEvent=!1}),b.cloneNode(!0).click()),null==ca.deleteExpando){ca.deleteExpando=!0;try{delete b.test}catch(d){ca.deleteExpando=!1}}}(),function(){var b,c,d=oa.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(ca[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),ca[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fa=/^(?:input|select|textarea)$/i,Ga=/^key/,Ha=/^(?:mouse|pointer|contextmenu)|click/,Ia=/^(?:focusinfocus|focusoutblur)$/,Ja=/^([^.]*)(?:\.(.+)|)$/;ea.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=ea.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof ea===xa||a&&ea.event.triggered===a.type?void 0:ea.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(ta)||[""],h=b.length;h--;)f=Ja.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=ea.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=ea.event.special[n]||{},l=ea.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ea.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),ea.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea.hasData(a)&&ea._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ja.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ea.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ea.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ea.event.remove(a,n+b[j],c,d,!0);ea.isEmptyObject(k)&&(delete q.handle,ea._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||oa],n=ba.call(b,"type")?b.type:b,o=ba.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||oa,3!==d.nodeType&&8!==d.nodeType&&!Ia.test(n+ea.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[ea.expando]?b:new ea.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ea.makeArray(c,[b]),j=ea.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!ea.isWindow(d)){for(i=j.delegateType||n,Ia.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||oa)&&m.push(k.defaultView||k.parentWindow||a);
}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(ea._data(h,"events")||{})[b.type]&&ea._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&ea.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&ea.acceptData(d)&&g&&d[n]&&!ea.isWindow(d)){k=d[g],k&&(d[g]=null),ea.event.triggered=n;try{d[n]()}catch(p){}ea.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=ea.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(ea._data(this,"events")||{})[a.type]||[],j=ea.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ea.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((ea.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?ea(c,this).index(i)>=0:ea.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[ea.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ha.test(e)?this.mouseHooks:Ga.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ea.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||oa),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||oa,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===o()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ea.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return ea.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ea.extend(new ea.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ea.event.trigger(e,null,b):ea.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ea.removeEvent=oa.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xa&&(a[d]=null),a.detachEvent(d,c))},ea.Event=function(a,b){return this instanceof ea.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&ea.extend(this,b),this.timeStamp=a&&a.timeStamp||ea.now(),void(this[ea.expando]=!0)):new ea.Event(a,b)},ea.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ea.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ea.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ea.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ca.submitBubbles||(ea.event.special.submit={setup:function(){return ea.nodeName(this,"form")?!1:void ea.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=ea.nodeName(b,"input")||ea.nodeName(b,"button")?b.form:void 0;c&&!ea._data(c,"submitBubbles")&&(ea.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),ea._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ea.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ea.nodeName(this,"form")?!1:void ea.event.remove(this,"._submit")}}),ca.changeBubbles||(ea.event.special.change={setup:function(){return Fa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ea.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ea.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ea.event.simulate("change",this,a,!0)})),!1):void ea.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fa.test(b.nodeName)&&!ea._data(b,"changeBubbles")&&(ea.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ea.event.simulate("change",this.parentNode,a,!0)}),ea._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ea.event.remove(this,"._change"),!Fa.test(this.nodeName)}}),ca.focusinBubbles||ea.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ea.event.simulate(b,a.target,ea.event.fix(a),!0)};ea.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ea._data(d,b);e||d.addEventListener(a,c,!0),ea._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ea._data(d,b)-1;e?ea._data(d,b,e):(d.removeEventListener(a,c,!0),ea._removeData(d,b))}}}),ea.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return ea().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=ea.guid++)),this.each(function(){ea.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ea(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=n),this.each(function(){ea.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ea.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ea.event.trigger(a,b,c,!0):void 0}});var Ka="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,Ma=new RegExp("<(?:"+Ka+")[\\s/>]","i"),Na=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pa=/<([\w:]+)/,Qa=/<tbody/i,Ra=/<|&#?\w+;/,Sa=/<(?:script|style|link)/i,Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/^$|\/(?:java|ecma)script/i,Va=/^true\/(.*)/,Wa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ca.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ya=p(oa),Za=Ya.appendChild(oa.createElement("div"));Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td,ea.extend({clone:function(a,b,c){var d,e,f,g,h,i=ea.contains(a.ownerDocument,a);if(ca.html5Clone||ea.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Za.innerHTML=a.outerHTML,Za.removeChild(f=Za.firstChild)),!(ca.noCloneEvent&&ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ea.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===ea.type(f))ea.merge(n,f.nodeType?[f]:f);else if(Ra.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pa.exec(f)||["",""])[1].toLowerCase(),k=Xa[i]||Xa._default,h.innerHTML=k[1]+f.replace(Oa,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ca.leadingWhitespace&&Na.test(f)&&n.push(b.createTextNode(Na.exec(f)[0])),!ca.tbody)for(f="table"!==i||Qa.test(f)?"<table>"!==k[1]||Qa.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ea.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ea.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),ca.appendChecked||ea.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||-1===ea.inArray(f,d))&&(g=ea.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ua.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ea.expando,i=ea.cache,j=ca.deleteExpando,k=ea.event.special;null!=(c=a[g]);g++)if((b||ea.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ea.event.remove(c,d):ea.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xa?c.removeAttribute(h):c[h]=null,W.push(e))}}}),ea.fn.extend({text:function(a){return Da(this,function(a){return void 0===a?ea.text(this):this.empty().append((this[0]&&this[0].ownerDocument||oa).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ea.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ea.cleanData(q(c)),c.parentNode&&(b&&ea.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ea.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ea.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ea.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(La,""):void 0;if("string"==typeof a&&!Sa.test(a)&&(ca.htmlSerialize||!Ma.test(a))&&(ca.leadingWhitespace||!Na.test(a))&&!Xa[(Pa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Oa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ea.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ea.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ea.isFunction(m);if(n||j>1&&"string"==typeof m&&!ca.checkClone&&Ta.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=ea.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=ea.map(q(h,"script"),t),e=f.length;j>i;i++)d=h,i!==l&&(d=ea.clone(d,!0,!0),e&&ea.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,ea.map(f,u),i=0;e>i;i++)d=f[i],Ua.test(d.type||"")&&!ea._data(d,"globalEval")&&ea.contains(g,d)&&(d.src?ea._evalUrl&&ea._evalUrl(d.src):ea.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"")));h=c=null}return this}}),ea.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ea.fn[a]=function(a){for(var c,d=0,e=[],f=ea(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ea(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $a,_a={};!function(){var a;ca.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=oa.getElementsByTagName("body")[0],c&&c.style?(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(oa.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ab,bb,cb=/^margin/,db=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),eb=/^(top|right|bottom|left)$/;a.getComputedStyle?(ab=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||ea.contains(a.ownerDocument,a)||(g=ea.style(a,b)),db.test(g)&&cb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):oa.documentElement.currentStyle&&(ab=function(a){return a.currentStyle},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),db.test(g)&&!eb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(oa.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(e)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=oa.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",ca.opacity="0.5"===d.opacity,ca.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===c.style.backgroundClip,ca.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,ea.extend(ca,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),ea.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fb=/alpha\([^)]*\)/i,gb=/opacity\s*=\s*([^)]*)/,hb=/^(none|table(?!-c[ea]).+)/,ib=new RegExp("^("+Aa+")(.*)$","i"),jb=new RegExp("^([+-])=("+Aa+")","i"),kb={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:"0",fontWeight:"400"},mb=["Webkit","O","Moz","ms"];ea.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ca.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ea.camelCase(b),i=a.style;if(b=ea.cssProps[h]||(ea.cssProps[h]=B(i,h)),g=ea.cssHooks[b]||ea.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ea.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ea.cssNumber[h]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=ea.camelCase(b);return b=ea.cssProps[h]||(ea.cssProps[h]=B(a.style,h)),g=ea.cssHooks[b]||ea.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bb(a,b,d)),"normal"===f&&b in lb&&(f=lb[b]),""===c||c?(e=parseFloat(f),c===!0||ea.isNumeric(e)?e||0:f):f}}),ea.each(["height","width"],function(a,b){ea.cssHooks[b]={get:function(a,c,d){return c?hb.test(ea.css(a,"display"))&&0===a.offsetWidth?ea.swap(a,kb,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e=d&&ab(a);return D(a,c,d?E(a,b,d,ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,e),e):0)}}}),ca.opacity||(ea.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ea.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ea.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),ea.cssHooks.marginRight=A(ca.reliableMarginRight,function(a,b){return b?ea.swap(a,{display:"inline-block"},bb,[a,"marginRight"]):void 0}),ea.each({margin:"",padding:"",border:"Width"},function(a,b){ea.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Ba[d]+b]=f[d]||f[d-2]||f[0];return e}},cb.test(a)||(ea.cssHooks[a+b].set=D)}),ea.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(ea.isArray(b)){for(d=ab(a),e=b.length;e>g;g++)f[b[g]]=ea.css(a,b[g],!1,d);return f}return void 0!==c?ea.style(a,b,c):ea.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?ea(this).show():ea(this).hide()})}}),ea.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ea.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.options.duration?this.pos=b=ea.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ea.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ea.fx.step[a.prop]?ea.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ea.cssProps[a.prop]]||ea.cssHooks[a.prop])?ea.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ea.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ea.fx=G.prototype.init,ea.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),rb=/queueHooks$/,sb=[K],tb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qb.exec(b),f=e&&e[3]||(ea.cssNumber[a]?"":"px"),g=(ea.cssNumber[a]||"px"!==f&&+d)&&qb.exec(ea.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ea.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ea.Animation=ea.extend(M,{tweener:function(a,b){ea.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],tb[c]=tb[c]||[],tb[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}}),ea.speed=function(a,b,c){var d=a&&"object"==typeof a?ea.extend({},a):{complete:c||!c&&b||ea.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ea.isFunction(b)&&b};return d.duration=ea.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ea.fx.speeds?ea.fx.speeds[d.duration]:ea.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ea.isFunction(d.old)&&d.old.call(this),d.queue&&ea.dequeue(this,d.queue)},d},ea.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ea.isEmptyObject(a),f=ea.speed(b,c,d),g=function(){var b=M(this,ea.extend({},a),f);(e||ea._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ea.timers,g=ea._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ea.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ea._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ea.timers,g=d?d.length:0;for(c.finish=!0,ea.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ea.each(["toggle","show","hide"],function(a,b){var c=ea.fn[b];ea.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),ea.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ea.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ea.timers=[],ea.fx.tick=function(){var a,b=ea.timers,c=0;for(nb=ea.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||ea.fx.stop(),nb=void 0},ea.fx.timer=function(a){ea.timers.push(a),a()?ea.fx.start():ea.timers.pop()},ea.fx.interval=13,ea.fx.start=function(){ob||(ob=setInterval(ea.fx.tick,ea.fx.interval))},ea.fx.stop=function(){clearInterval(ob),ob=null},ea.fx.speeds={slow:600,fast:200,_default:400},ea.fn.delay=function(a,b){return a=ea.fx?ea.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=oa.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=oa.createElement("select"),e=c.appendChild(oa.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",ca.getSetAttribute="t"!==b.className,ca.style=/top/.test(d.getAttribute("style")),ca.hrefNormalized="/a"===d.getAttribute("href"),ca.checkOn=!!a.value,ca.optSelected=e.selected,ca.enctype=!!oa.createElement("form").enctype,c.disabled=!0,ca.optDisabled=!e.disabled,a=oa.createElement("input"),a.setAttribute("value",""),ca.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),ca.radioValue="t"===a.value}();var ub=/\r/g;ea.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ea.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ea(this).val()):a,null==e?e="":"number"==typeof e?e+="":ea.isArray(e)&&(e=ea.map(e,function(a){return null==a?"":a+""})),b=ea.valHooks[this.type]||ea.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ea.valHooks[e.type]||ea.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ea.extend({valHooks:{option:{get:function(a){var b=ea.find.attr(a,"value");return null!=b?b:ea.trim(ea.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(ca.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ea.nodeName(c.parentNode,"optgroup"))){if(b=ea(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ea.makeArray(b),g=e.length;g--;)if(d=e[g],ea.inArray(ea.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),ea.each(["radio","checkbox"],function(){ea.valHooks[this]={set:function(a,b){return ea.isArray(b)?a.checked=ea.inArray(ea(a).val(),b)>=0:void 0}},ca.checkOn||(ea.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb,wb,xb=ea.expr.attrHandle,yb=/^(?:checked|selected)$/i,zb=ca.getSetAttribute,Ab=ca.input;ea.fn.extend({attr:function(a,b){return Da(this,ea.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ea.removeAttr(this,a)})}}),ea.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xa?ea.prop(a,b,c):(1===f&&ea.isXMLDoc(a)||(b=b.toLowerCase(),d=ea.attrHooks[b]||(ea.expr.match.bool.test(b)?wb:vb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ea.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ea.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ea.propFix[c]||c,ea.expr.match.bool.test(c)?Ab&&zb||!yb.test(c)?a[d]=!1:a[ea.camelCase("default-"+c)]=a[d]=!1:ea.attr(a,c,""),a.removeAttribute(zb?c:d)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&ea.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wb={set:function(a,b,c){return b===!1?ea.removeAttr(a,c):Ab&&zb||!yb.test(c)?a.setAttribute(!zb&&ea.propFix[c]||c,c):a[ea.camelCase("default-"+c)]=a[c]=!0,c}},ea.each(ea.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xb[b]||ea.find.attr;xb[b]=Ab&&zb||!yb.test(b)?function(a,b,d){var e,f;return d||(f=xb[b],xb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xb[b]=f),e}:function(a,b,c){return c?void 0:a[ea.camelCase("default-"+b)]?b.toLowerCase():null}}),Ab&&zb||(ea.attrHooks.value={set:function(a,b,c){return ea.nodeName(a,"input")?void(a.defaultValue=b):vb&&vb.set(a,b,c)}}),zb||(vb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},xb.id=xb.name=xb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},ea.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:vb.set},ea.attrHooks.contenteditable={set:function(a,b,c){vb.set(a,""===b?!1:b,c)}},ea.each(["width","height"],function(a,b){ea.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),ca.style||(ea.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bb=/^(?:input|select|textarea|button|object)$/i,Cb=/^(?:a|area)$/i;ea.fn.extend({prop:function(a,b){return Da(this,ea.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ea.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),ea.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ea.isXMLDoc(a),f&&(b=ea.propFix[b]||b,e=ea.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ea.find.attr(a,"tabindex");return b?parseInt(b,10):Bb.test(a.nodeName)||Cb.test(a.nodeName)&&a.href?0:-1}}}}),ca.hrefNormalized||ea.each(["href","src"],function(a,b){ea.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ca.optSelected||(ea.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ea.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ea.propFix[this.toLowerCase()]=this}),ca.enctype||(ea.propFix.enctype="encoding");var Db=/[\t\r\n\f]/g;ea.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ea.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;
if(ea.isFunction(a))return this.each(function(b){ea(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ea.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ea.isFunction(a)?this.each(function(c){ea(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ea(this),f=a.match(ta)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===xa||"boolean"===c)&&(this.className&&ea._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ea._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Db," ").indexOf(b)>=0)return!0;return!1}}),ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ea.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ea.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb=ea.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ea.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=ea.trim(b+"");return e&&!ea.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():ea.error("Invalid JSON: "+b)},ea.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||ea.error("Invalid XML: "+b),c};var Hb,Ib,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Rb={},Sb="*/".concat("*");try{Ib=location.href}catch(Tb){Ib=oa.createElement("a"),Ib.href="",Ib=Ib.href}Hb=Pb.exec(Ib.toLowerCase())||[],ea.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ib,type:"GET",isLocal:Mb.test(Hb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ea.parseJSON,"text xml":ea.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,ea.ajaxSettings),b):P(ea.ajaxSettings,a)},ajaxPrefilter:N(Qb),ajaxTransport:N(Rb),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ea.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(ea.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--ea.active||ea.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ea.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ea(m):ea.event,o=ea.Deferred(),p=ea.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lb.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ib)+"").replace(Jb,"").replace(Ob,Hb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ea.trim(l.dataType||"*").toLowerCase().match(ta)||[""],null==l.crossDomain&&(d=Pb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hb[1]&&d[2]===Hb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hb[3]||("http:"===Hb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ea.param(l.data,l.traditional)),O(Qb,l,b,v),2===t)return v;i=ea.event&&l.global,i&&0===ea.active++&&ea.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kb.test(f)?f.replace(Kb,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(ea.lastModified[f]&&v.setRequestHeader("If-Modified-Since",ea.lastModified[f]),ea.etag[f]&&v.setRequestHeader("If-None-Match",ea.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rb,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ea.get(a,b,c,"json")},getScript:function(a,b){return ea.get(a,void 0,b,"script")}}),ea.each(["get","post"],function(a,b){ea[b]=function(a,c,d,e){return ea.isFunction(c)&&(e=e||d,d=c,c=void 0),ea.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ea._evalUrl=function(a){return ea.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ea.fn.extend({wrapAll:function(a){if(ea.isFunction(a))return this.each(function(b){ea(this).wrapAll(a.call(this,b))});if(this[0]){var b=ea(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ea.isFunction(a)?this.each(function(b){ea(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ea(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ea.isFunction(a);return this.each(function(c){ea(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ea.nodeName(this,"body")||ea(this).replaceWith(this.childNodes)}).end()}}),ea.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ca.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||ea.css(a,"display"))},ea.expr.filters.visible=function(a){return!ea.expr.filters.hidden(a)};var Ub=/%20/g,Vb=/\[\]$/,Wb=/\r?\n/g,Xb=/^(?:submit|button|image|reset|file)$/i,Yb=/^(?:input|select|textarea|keygen)/i;ea.param=function(a,b){var c,d=[],e=function(a,b){b=ea.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ea.ajaxSettings&&ea.ajaxSettings.traditional),ea.isArray(a)||a.jquery&&!ea.isPlainObject(a))ea.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Ub,"+")},ea.fn.extend({serialize:function(){return ea.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ea.prop(this,"elements");return a?ea.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ea(this).is(":disabled")&&Yb.test(this.nodeName)&&!Xb.test(a)&&(this.checked||!Ea.test(a))}).map(function(a,b){var c=ea(this).val();return null==c?null:ea.isArray(c)?ea.map(c,function(a){return{name:b.name,value:a.replace(Wb,"\r\n")}}):{name:b.name,value:c.replace(Wb,"\r\n")}}).get()}}),ea.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zb=0,$b={},_b=ea.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in $b)$b[a](void 0,!0)}),ca.cors=!!_b&&"withCredentials"in _b,_b=ca.ajax=!!_b,_b&&ea.ajaxTransport(function(a){if(!a.crossDomain||ca.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $b[g],b=void 0,f.onreadystatechange=ea.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$b[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),ea.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ea.globalEval(a),a}}}),ea.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ea.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=oa.head||ea("head")[0]||oa.documentElement;return{send:function(d,e){b=oa.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ac=[],bc=/(=)\?(?=&|$)|\?\?/;ea.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ac.pop()||ea.expando+"_"+Eb++;return this[a]=!0,a}}),ea.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ea.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ea.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ac.push(e)),g&&ea.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ea.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||oa;var d=la.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ea.buildFragment([a],b,e),e&&e.length&&ea(e).remove(),ea.merge([],d.childNodes))};var cc=ea.fn.load;ea.fn.load=function(a,b,c){if("string"!=typeof a&&cc)return cc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ea.trim(a.slice(h,a.length)),a=a.slice(0,h)),ea.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&ea.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?ea("<div>").append(ea.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},ea.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ea.fn[b]=function(a){return this.on(b,a)}}),ea.expr.filters.animated=function(a){return ea.grep(ea.timers,function(b){return a===b.elem}).length};var dc=a.document.documentElement;ea.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ea.css(a,"position"),l=ea(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ea.css(a,"top"),i=ea.css(a,"left"),j=("absolute"===k||"fixed"===k)&&ea.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ea.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ea.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ea.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,ea.contains(b,e)?(typeof e.getBoundingClientRect!==xa&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ea.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ea.nodeName(a[0],"html")||(c=a.offset()),c.top+=ea.css(a[0],"borderTopWidth",!0),c.left+=ea.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ea.css(d,"marginTop",!0),left:b.left-c.left-ea.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dc;a&&!ea.nodeName(a,"html")&&"static"===ea.css(a,"position");)a=a.offsetParent;return a||dc})}}),ea.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);ea.fn[a]=function(d){return Da(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?ea(f).scrollLeft():e,c?e:ea(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),ea.each(["top","left"],function(a,b){ea.cssHooks[b]=A(ca.pixelPosition,function(a,c){return c?(c=bb(a,b),db.test(c)?ea(a).position()[b]+"px":c):void 0})}),ea.each({Height:"height",Width:"width"},function(a,b){ea.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ea.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Da(this,function(b,c,d){var e;return ea.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ea.css(b,c,g):ea.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ea.fn.size=function(){return this.length},ea.fn.andSelf=ea.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ea});var ec=a.jQuery,fc=a.$;return ea.noConflict=function(b){return a.$===ea&&(a.$=fc),b&&a.jQuery===ea&&(a.jQuery=ec),ea},typeof b===xa&&(a.jQuery=a.$=ea),ea}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal());
},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a;
}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qa.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&da.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ta[a]||Ua[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}da[b]=function(e,f){var g,h,i=da.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=da().utc().set(d,a);return i.call(da.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ja]<0||a._a[ja]>11?ja:a._a[ka]<1||a._a[ka]>t(a._a[ia],a._a[ja])?ka:a._a[la]<0||a._a[la]>23?la:a._a[ma]<0||a._a[ma]>59?ma:a._a[na]<0||a._a[na]>59?na:a._a[oa]<0||a._a[oa]>999?oa:-1,a._pf._overflowDayOfYear&&(ia>b||b>ka)&&(b=ka),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?da(a).zone(b._offset||0):da(a).local()}function A(a,b){return b.abbr=a,pa[a]||(pa[a]=new e),pa[a].set(b),pa[a]}function B(a){delete pa[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pa[a]&&ra)try{require("./lang/"+a)}catch(b){}return pa[a]};if(!a)return da.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return da.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(va);for(b=0,c=d.length;c>b;b++)Ya[d[b]]?d[b]=Ya[d[b]]:d[b]=D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Va[b]||(Va[b]=E(b)),Va[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wa.lastIndex=0;d>=0&&wa.test(a);)a=a.replace(wa,c),wa.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ia;case"YYYY":case"GGGG":case"gggg":return d?Ja:za;case"Y":case"G":case"g":return La;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ka:Aa;case"S":if(d)return Ga;case"SS":if(d)return Ha;case"SSS":if(d)return Ia;case"DDD":return ya;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ca;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fa;case"Z":case"ZZ":return Da;case"T":return Ea;case"SSSS":return Ba;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ha:xa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xa;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Da)||[],c=b[b.length-1]||[],d=(c+"").match(Qa)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ja]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[ja]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ka]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ia]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ia]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[la]=s(b);break;case"m":case"mm":e[ma]=s(b);break;case"s":case"ss":e[na]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[oa]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[ka]&&null==a._a[ja]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ia]?da().weekYear():a._a[ia]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ia]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ia]?d[ia]:a._a[ia],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[ja]=c.getUTCMonth(),a._a[ka]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[la]+=s((a._tzm||0)/60),l[ma]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(va)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ya[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[la]<12&&(a._a[la]+=12),a._isPm===!1&&12===a._a[la]&&(a._a[la]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Ma.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Oa.length;c>b;b++)if(Oa[b][1].exec(d)){a._f=Oa[b][0]+(e[6]||" ");break}for(b=0,c=Pa.length;c>b;b++)if(Pa[b][1].exec(d)){a._f+=Pa[b][0];break}d.match(Da)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sa.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ha(Math.abs(a)/1e3),e=ha(d/60),f=ha(e/60),g=ha(f/24),h=ha(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ha(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=da(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?da.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),da.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){da.fn[a]=da.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),da.updateOffset(this),this):this._d["get"+c+b]()}}function aa(a){da.duration.fn[a]=function(){return this._data[a]}}function ba(a,b){da.duration.fn["as"+a]=function(){return+this/b}}function ca(a){var b=!1,c=da;"undefined"==typeof ender&&(a?(ga.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(ga.moment,c)):ga.moment=da)}for(var da,ea,fa="2.5.1",ga=this,ha=Math.round,ia=0,ja=1,ka=2,la=3,ma=4,na=5,oa=6,pa={},qa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ra="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sa=/^\/?Date\((\-?\d+)/i,ta=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ua=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,va=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xa=/\d\d?/,ya=/\d{1,3}/,za=/\d{1,4}/,Aa=/[+\-]?\d{1,6}/,Ba=/\d+/,Ca=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Da=/Z|[\+\-]\d\d:?\d\d/gi,Ea=/T/i,Fa=/[\+\-]?\d+(\.\d{1,3})?/,Ga=/\d/,Ha=/\d\d/,Ia=/\d{3}/,Ja=/\d{4}/,Ka=/[+-]?\d{6}/,La=/[+-]?\d+/,Ma=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Na="YYYY-MM-DDTHH:mm:ssZ",Oa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pa=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qa=/([\+\-]|\d\d)/gi,Ra="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sa={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ta={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ua={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Va={},Wa="DDD w W M D d".split(" "),Xa="M D H h m s w W".split(" "),Ya={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Za=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wa.length;)ea=Wa.pop(),Ya[ea+"o"]=d(Ya[ea],ea);for(;Xa.length;)ea=Xa.pop(),Ya[ea+ea]=c(Ya[ea],2);for(Ya.DDDD=c(Ya.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=da.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),da=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},da.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},da.unix=function(a){return da(1e3*a)},da.duration=function(a,b){var c,d,e,f=a,h=null;return da.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=ta.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[ka])*c,h:s(h[la])*c,m:s(h[ma])*c,s:s(h[na])*c,ms:s(h[oa])*c}):(h=ua.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),da.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},da.version=fa,da.defaultFormat=Na,da.updateOffset=function(){},da.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pa[a]||C(a),c=da.duration.fn._lang=da.fn._lang=C(a),c._abbr):da.fn._lang._abbr},da.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},da.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},da.isDuration=function(a){return a instanceof g},ea=Za.length-1;ea>=0;--ea)r(Za[ea]);for(da.normalizeUnits=function(a){return p(a)},da.invalid=function(a){var b=da.utc(NaN);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},da.parseZone=function(a){return da(a).parseZone()},h(da.fn=f.prototype,{clone:function(){return da(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=da(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?da.utc(this._a):da(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||da.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-da(this).startOf("month")-(f-da(f).startOf("month")))/d,e-=6e4*(this.zone()-da(this).startOf("month").zone()-(f.zone()-da(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return da.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(da(),a)},calendar:function(){var a=z(da(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),da.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+da(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+da(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=da.apply(null,arguments),this>a?this:a},max:function(a){return a=da.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,da.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?da(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ha((da(this).startOf("day")-da(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),ea=0;ea<Ra.length;ea++)_(Ra[ea].toLowerCase().replace(/s$/,""),Ra[ea]);_("year","FullYear"),da.fn.days=da.fn.day,da.fn.months=da.fn.month,da.fn.weeks=da.fn.week,da.fn.isoWeeks=da.fn.isoWeek,da.fn.toJSON=da.fn.toISOString,h(da.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=da.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=da.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:da.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ea in Sa)Sa.hasOwnProperty(ea)&&(ba(ea,Sa[ea]),aa(ea.toLowerCase()));ba("Weeks",6048e5),da.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},da.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),ra?(module.exports=da,ca(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&ca(d.config().noGlobal===a),da}):ca()}.call(this),function(a,b,c){"use strict";function d(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?Q(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.2.32/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));return new Error(b)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:u(a)||Gc(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d);else if(Gc(a)||e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=Fc.length;b;){if(b--,a=Fc[b].charCodeAt(0),57==a)return Fc[b]="A",Fc.join("");if(90!=a)return Fc[b]=String.fromCharCode(a+1),Fc.join("");Fc[b]="0"}return Fc.unshift("0"),Fc.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===Cc.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===Cc.call(a)}function z(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===Cc.call(a)}function C(a){return"[object Blob]"===Cc.call(a)}function D(a){return a&&x(a.then)}function E(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function F(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function G(a,b){return-1!=H(a,b)}function H(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function I(a,b){var c=H(a,b);return c>=0&&a.splice(c,1),b}function J(a,b,c,d){if(z(a)||A(a))throw Dc("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw Dc("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=H(c,a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(Gc(a)){b.length=0;for(var h=0;h<a.length;h++)g=J(a[h],null,c,d),
t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;Gc(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)g=J(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g;k(b,i)}}else b=a,a&&(Gc(a)?b=J(a,[],c,d):w(a)?b=new Date(a.getTime()):y(a)?(b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex):t(a)&&(b=J(a,{},c,d)));return b}function K(a,b){if(Gc(a)){b=b||[];for(var c=0;c<a.length;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var d in a)!rc.call(a,d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(b[d]=a[d])}return b||a}function L(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!Gc(a)){if(w(a))return w(b)?isNaN(a.getTime())&&isNaN(b.getTime())||a.getTime()===b.getTime():!1;if(y(a)&&y(b))return a.toString()==b.toString();if(A(a)||A(b)||z(a)||z(b)||Gc(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!L(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!Gc(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!L(a[e],b[e]))return!1;return!0}}return!1}function M(a,b,c){return a.concat(Ac.call(b,c))}function N(a,b){return Ac.call(a,b||0)}function O(a,b){var c=arguments.length>2?N(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(Ac.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function P(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function Q(a,b){return"undefined"==typeof a?c:JSON.stringify(a,P,b?"  ":null)}function R(a){return u(a)?JSON.parse(a):a}function S(a){if("function"==typeof a)a=!0;else if(a&&0!==a.length){var b=qc(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function T(a){a=wc(a).clone();try{a.empty()}catch(b){}var c=3,d=wc("<div>").append(a).html();try{return a[0].nodeType===c?qc(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+qc(b)})}catch(b){return qc(d)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;rc.call(d,c)?Gc(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){Gc(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function Z(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function $(c,d){var e=function(){if(c=wc(c),c.injector()){var a=c[0]===b?"document":T(c);throw Dc("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),d.unshift("ng");var e=Ha(d);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),e},g=/^NG_DEFER_BOOTSTRAP!/;return a&&!g.test(a.name)?e():(a.name=a.name.replace(g,""),void(Ec.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),e()}))}function _(a,b){return b=b||"_",a.replace(Jc,function(a,c){return(c?b:"")+a.toLowerCase()})}function aa(){xc=a.jQuery,xc&&xc.fn.on?(wc=xc,l(xc.fn,{scope:Xc.scope,isolateScope:Xc.isolateScope,controller:Xc.controller,injector:Xc.injector,inheritedData:Xc.inheritedData}),ka("remove",!0,!0,!1),ka("empty",!1,!1,!1),ka("html",!1,!1,!0)):wc=oa,Ec.element=wc}function ba(a,b,c){if(!a)throw Dc("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function ca(a,b,c){return c&&Gc(a)&&(a=a[a.length-1]),ba(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function da(a,b){if("hasOwnProperty"===a)throw Dc("badname","hasOwnProperty is not a valid {0} name",b)}function ea(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?O(f,a):a}function fa(a){var b=a[0],c=a[a.length-1];if(b===c)return wc(b);var d=b,e=[d];do{if(d=d.nextSibling,!d)break;e.push(d)}while(d!==c);return wc(e)}function ga(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),i}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=a("$injector","invoke"),i={_invokeQueue:b,_runBlocks:e,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:h,run:function(a){return e.push(a),this}};return g&&h(g),i})}})}function ha(b){l(b,{bootstrap:$,copy:J,extend:l,equals:L,element:wc,forEach:f,injector:Ha,noop:o,bind:O,toJson:Q,fromJson:R,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:E,isArray:Gc,version:Kc,isDate:w,lowercase:qc,uppercase:sc,callbacks:{counter:0},$$minErr:d,$$csp:Ic}),yc=ga(a);try{yc("ngLocale")}catch(c){yc("ngLocale",[]).provider("$locale",cb)}yc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Gb}),a.provider("$compile",Oa).directive({a:Hd,input:Sd,textarea:Sd,form:Ld,script:Ae,select:De,style:Fe,option:Ee,ngBind:ce,ngBindHtml:ee,ngBindTemplate:de,ngClass:fe,ngClassEven:he,ngClassOdd:ge,ngCloak:ie,ngController:je,ngForm:Md,ngHide:ue,ngIf:me,ngInclude:ne,ngInit:pe,ngNonBindable:qe,ngPluralize:re,ngRepeat:se,ngShow:te,ngStyle:ve,ngSwitch:we,ngSwitchWhen:xe,ngSwitchDefault:ye,ngOptions:Ce,ngTransclude:ze,ngModel:Yd,ngList:_d,ngChange:Zd,required:$d,ngRequired:$d,ngValue:be}).directive({ngInclude:oe}).directive(Id).directive(ke),a.provider({$anchorScroll:Ia,$animate:ed,$browser:La,$cacheFactory:Ma,$controller:Ra,$document:Sa,$exceptionHandler:Ta,$filter:Rb,$interpolate:ab,$interval:bb,$http:Ya,$httpBackend:$a,$location:qb,$log:rb,$parse:Bb,$rootScope:Fb,$q:Cb,$sce:Lb,$sceDelegate:Kb,$sniffer:Mb,$templateCache:Na,$timeout:Nb,$window:Qb,$$rAF:Eb,$$asyncCallback:Ja})}])}function ia(){return++Mc}function ja(a){return a.replace(Pc,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Qc,"Moz$1")}function ka(a,b,c,d){function e(a){var e,g,h,i,j,k,l,m=c&&a?[this.filter(a)]:[this],n=b;if(!d||null!=a)for(;m.length;)for(e=m.shift(),g=0,h=e.length;h>g;g++)for(i=wc(e[g]),n?i.triggerHandler("$destroy"):n=!n,j=0,k=(l=i.children()).length;k>j;j++)m.push(xc(l[j]));return f.apply(this,arguments)}var f=xc.fn[a];f=f.$original||f,e.$original=f,xc.fn[a]=e}function la(a){return!Tc.test(a)}function ma(a,b){var c,d,e,f,g,h,i=b.createDocumentFragment(),j=[];if(la(a))j.push(b.createTextNode(a));else{for(c=i.appendChild(b.createElement("div")),d=(Uc.exec(a)||["",""])[1].toLowerCase(),e=Wc[d]||Wc._default,c.innerHTML="<div>&#160;</div>"+e[1]+a.replace(Vc,"<$1></$2>")+e[2],c.removeChild(c.firstChild),f=e[0];f--;)c=c.lastChild;for(g=0,h=c.childNodes.length;h>g;++g)j.push(c.childNodes[g]);c=i.firstChild,c.textContent=""}return i.textContent="",i.innerHTML="",j}function na(a,c){c=c||b;var d;return(d=Sc.exec(a))?[c.createElement(d[1])]:ma(a,c)}function oa(a){if(a instanceof oa)return a;if(u(a)&&(a=Hc(a)),!(this instanceof oa)){if(u(a)&&"<"!=a.charAt(0))throw Rc("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new oa(a)}if(u(a)){ya(this,na(a));var c=wc(b.createDocumentFragment());c.append(this)}else ya(this,a)}function pa(a){return a.cloneNode(!0)}function qa(a){sa(a);for(var b=0,c=a.childNodes||[];b<c.length;b++)qa(c[b])}function ra(a,b,c,d){if(s(d))throw Rc("offargs","jqLite#off() does not support the `selector` argument");var e=ta(a,"events"),g=ta(a,"handle");g&&(r(b)?f(e,function(b,c){Oc(a,c,b),delete e[c]}):f(b.split(" "),function(b){r(c)?(Oc(a,b,e[b]),delete e[b]):I(e[b]||[],c)}))}function sa(a,b){var d=a.ng339,e=Lc[d];if(e){if(b)return void delete Lc[d].data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),ra(a)),delete Lc[d],a.ng339=c}}function ta(a,b,c){var d=a.ng339,e=Lc[d||-1];return s(c)?(e||(a.ng339=d=ia(),e=Lc[d]={}),void(e[b]=c)):e&&e[b]}function ua(a,b,c){var d=ta(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||ta(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function va(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function wa(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Hc((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Hc(b)+" "," ")))})}function xa(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Hc(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Hc(c))}}function ya(a,b){if(b){b=b.nodeName||!s(b.length)||z(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function za(a,b){return Aa(a,"$"+(b||"ngController")+"Controller")}function Aa(a,b,d){9==a.nodeType&&(a=a.documentElement);for(var e=Gc(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=wc.data(a,e[f]))!==c)return d;a=a.parentNode||11===a.nodeType&&a.host}}function Ba(a){for(var b=0,c=a.childNodes;b<c.length;b++)qa(c[b]);for(;a.firstChild;)a.removeChild(a.firstChild)}function Ca(a,b){var c=Yc[b.toLowerCase()];return c&&Zc[a.nodeName]&&c}function Da(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||d.returnValue===!1};var h=K(c[e||d.type]||[]);f(h,function(b){b.call(a,d)}),8>=vc?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function Ea(a,b){var d,e=typeof a;return"function"==e||"object"==e&&null!==a?"function"==typeof(d=a.$$hashKey)?d=a.$$hashKey():d===c&&(d=a.$$hashKey=(b||j)()):d=a,e+":"+d}function Fa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Ga(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],a.length&&(c=a.toString().replace(bd,""),d=c.match($c),f(d[1].split(_c),function(a){a.replace(ad,function(a,c,d){b.push(d)})})),a.$inject=b):Gc(a)?(e=a.length-1,ca(a[e],"fn"),b=a.slice(0,e)):ca(a,"fn",!0),b}function Ha(a){function b(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function c(a,b){if(da(a,"service"),(x(b)||Gc(b))&&(b=v.instantiate(b)),!b.$get)throw cd("pget","Provider '{0}' must define $get factory method.",a);return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){da(a,"constant"),s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=y.invoke(d,c);return y.invoke(b,null,{$delegate:a})}}function k(a){var b,c,d,e,g=[];return f(a,function(a){if(!r.get(a)){r.put(a,!0);try{if(u(a))for(b=yc(a),g=g.concat(k(b.requires)).concat(b._runBlocks),c=b._invokeQueue,d=0,e=c.length;e>d;d++){var f=c[d],h=v.get(f[0]);h[f[1]].apply(h,f[2])}else x(a)?g.push(v.invoke(a)):Gc(a)?g.push(v.invoke(a)):ca(a,"module")}catch(i){throw Gc(a)&&(a=a[a.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),cd("modulerr","Failed to instantiate module {0} due to:\n{1}",a,i.stack||i.message||i)}}}),g}function l(a,b){function c(c){if(a.hasOwnProperty(c)){if(a[c]===m)throw cd("cdep","Circular dependency found: {0}",c+" <- "+p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}catch(d){throw a[c]===m&&delete a[c],d}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=Ga(a);for(f=0,e=i.length;e>f;f++){if(g=i[f],"string"!=typeof g)throw cd("itkn","Incorrect injection token! Expected service name as string, got {0}",g);h.push(d&&d.hasOwnProperty(g)?d[g]:c(g))}return Gc(a)&&(a=a[e]),a.apply(b,h)}function e(a,b){var c,e,f=function(){};return f.prototype=(Gc(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)||x(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:Ga,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new Fa([],!0),s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw cd("unpr","Unknown provider: {0}",p.join(" <- "))}),w={},y=w.$injector=l(w,function(a){var b=v.get(a+n);return y.invoke(b.$get,b)});return f(k(a),function(a){y.invoke(a||o)}),y}function Ia(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==qc(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Ja(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Ka(a,b,d,e){function g(a){try{a.apply(null,N(arguments,1))}finally{if(t--,0===t)for(;v.length;)try{v.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");return-1===b?"":a.substr(b+1)}function i(a,b){!function c(){f(x,function(a){a()}),w=b(c,a)}()}function j(){y!=k.url()&&(y=k.url(),f(B,function(a){a(k.url())}))}var k=this,l=b[0],m=a.location,n=a.history,p=a.setTimeout,q=a.clearTimeout,s={};k.isMock=!1;var t=0,v=[];k.$$completeOutstandingRequest=g,k.$$incOutstandingRequestCount=function(){t++},k.notifyWhenNoOutstandingRequests=function(a){f(x,function(a){a()}),0===t?a():v.push(a)};var w,x=[];k.addPollFn=function(a){return r(w)&&i(100,p),x.push(a),a};var y=m.href,z=b.find("base"),A=null;k.url=function(b,c){if(m!==a.location&&(m=a.location),n!==a.history&&(n=a.history),b){if(y==b)return;var d=y&&hb(y)===hb(b);return y=b,!d&&e.history?c?n.replaceState(null,"",b):(n.pushState(null,"",b),z.attr("href",z.attr("href"))):(d||(A=b),c?m.replace(b):d?m.hash=h(b):m.href=b),k}return A||m.href.replace(/%27/g,"'")};var B=[],C=!1;k.onUrlChange=function(b){return C||(e.history&&wc(a).on("popstate",j),e.hashchange?wc(a).on("hashchange",j):k.addPollFn(j),C=!0),B.push(b),b},k.$$checkUrlChange=j,k.baseHref=function(){var a=z.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var D={},E="",F=k.baseHref();k.cookies=function(a,b){var e,f,g,h,i;if(!a){if(l.cookie!==E)for(E=l.cookie,f=E.split("; "),D={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=unescape(g.substring(0,i)),D[a]===c&&(D[a]=unescape(g.substring(i+1))));return D}b===c?l.cookie=escape(a)+"=;path="+F+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(l.cookie=escape(a)+"="+escape(b)+";path="+F).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},k.defer=function(a,b){var c;return t++,c=p(function(){delete s[c],g(a)},b||0),s[c]=!0,c},k.defer.cancel=function(a){return s[a]?(delete s[a],q(a),g(o),!0):!1}}function La(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Ka(a,d,b,c)}]}function Ma(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Na(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Oa(a,d){var e={},g="Directive",h=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,j=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,k=/^(on[a-z]+|formaction)$/;this.directive=function m(b,c){return da(b,"directive"),u(b)?(ba(c,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+g,["$injector","$exceptionHandler",function(a,c){var d=[];return f(e[b],function(e,f){try{var g=a.invoke(e);x(g)?g={compile:q(g)}:!g.compile&&g.link&&(g.compile=q(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||b,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",d.push(g)}catch(h){c(h)}}),d}])),e[b].push(c)):f(b,i(m)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,i,m,o,q,r,s,v,w,y,z){function A(a,b,c,d,e){a instanceof wc||(a=wc(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=b=wc(b).wrap("<span></span>").parent()[0])});var g=C(a,b,a,c,d,e);return B(a,"ng-scope"),function(b,c,d,e){ba(b,"scope");var h=c?Xc.clone.call(a):a;f(d,function(a,b){h.data("$"+b+"Controller",a)});for(var i=0,j=h.length;j>i;i++){var k=h[i],l=k.nodeType;(1===l||9===l)&&h.eq(i).data("$scope",b)}return c&&c(h,b),g&&g(b,h,h,e),h}}function B(a,b){try{a.addClass(b)}catch(c){}}function C(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,p=d.length,q=new Array(p);for(k=0;p>k;k++)q[k]=d[k];for(k=0,m=0,l=o.length;l>k;m++)i=q[m],g=o[k++],h=o[k++],g?(g.scope?(j=a.$new(),wc.data(i,"$scope",j)):j=a,n=g.transcludeOnThisElement?D(a,g.transclude,f):!g.templateOnThisElement&&f?f:!f&&b?D(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o=[],p=0;p<a.length;p++)i=new X,j=E(a[p],[],i,0===p?e:c,f),k=j.length?H(j,a[p],i,b,d,null,[],[],g):null,k&&k.scope&&B(i.$$element,"ng-scope"),m=k&&k.terminal||!(l=a[p].childNodes)||!l.length?null:C(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),o.push(k,m),n=n||k||m,g=null;return n?h:null}function D(a,b,c){var d=function(d,e,f){var g=!1;d||(d=a.$new(),d.$$transcluded=!0,g=!0);var h=b(d,e,f,c);return g&&h.on("$destroy",function(){d.$destroy()}),h};return d}function E(a,b,c,d,e){var f,g,i,k=a.nodeType,l=c.$attr;switch(k){case 1:g=zc(a).toLowerCase(),J(b,Pa(g),"E",d,e);for(var m,n,o,p,q,r,s=a.attributes,t=0,v=s&&s.length;v>t;t++){var w=!1,x=!1;if(m=s[t],!vc||vc>=8||m.specified){n=m.name,q=Hc(m.value),p=Pa(n),(r=aa.test(p))&&(n=_(p.substr(6),"-"));var y=p.replace(/(Start|End)$/,"");p===y+"Start"&&(w=n,x=n.substr(0,n.length-5)+"end",n=n.substr(0,n.length-6)),o=Pa(n.toLowerCase()),l[o]=n,(r||!c.hasOwnProperty(o))&&(c[o]=q,Ca(a,o)&&(c[o]=!0)),U(a,b,q,o),J(b,o,"A",d,e,w,x)}}if("input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off"),i=a.className,u(i)&&""!==i)for(;f=j.exec(i);)o=Pa(f[2]),J(b,o,"C",d,e)&&(c[o]=Hc(f[3])),i=i.substr(f.index+f[0].length);break;case 3:if(11===vc)for(;a.parentNode&&a.nextSibling&&3===a.nextSibling.nodeType;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);R(b,a.nodeValue);break;case 8:try{f=h.exec(a.nodeValue),f&&(o=Pa(f[1]),J(b,o,"M",d,e)&&(c[o]=Hc(f[2])))}catch(z){}}return b.sort(P),b}function F(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw fd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return wc(d)}function G(a,b,c){return function(d,e,f,g,h){return e=F(e[0],b,c),a(d,e,f,g,h)}}function H(a,e,g,h,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=G(a,c,d)),a.require=w.require,a.directiveName=y,(P===w||w.$$isolateScope)&&(a=W(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=G(b,c,d)),b.require=w.require,b.directiveName=y,(P===w||w.$$isolateScope)&&(b=W(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g="data",h=!1;if(u(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(g="inheritedData"),h=h||"?"==e;if(e=null,d&&"data"===g&&(e=d[b]),e=e||c[g]("$"+b+"Controller"),!e&&!h)throw fd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e}return Gc(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function s(a,b,h,j,k){function n(a,b){var d;return arguments.length<2&&(b=a,a=c),Z&&(d=z),k(a,b,d)}var o,s,t,u,v,w,x,y,z={};if(o=e===h?g:K(g,new X(wc(h),g.$attr)),s=o.$$element,P){var A=/^\s*([@=&])(\??)\s*(\w*)\s*$/;x=b.$new(!0),!R||R!==P&&R!==P.$$originalDirective?s.data("$isolateScopeNoTemplate",x):s.data("$isolateScope",x),B(s,"ng-isolate-scope"),f(P.scope,function(a,c){var e,f,g,h,i=a.match(A)||[],j=i[3]||c,k="?"==i[2],l=i[1];switch(x.$$isolateBindings[c]=l+j,l){case"@":o.$observe(j,function(a){x[c]=a}),o.$$observers[j].$$scope=b,o[j]&&(x[c]=d(o[j])(b));break;case"=":if(k&&!o[j])return;f=q(o[j]),h=f.literal?L:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=x[c]=f(b),fd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",o[j],P.name)},e=x[c]=f(b),x.$watch(function(){var a=f(b);return h(a,x[c])||(h(a,e)?g(b,a=x[c]):x[c]=a),e=a},null,f.literal);break;case"&":f=q(o[j]),x[c]=function(a){return f(b,a)};break;default:throw fd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",P.name,c,a)}})}for(y=k&&n,J&&f(J,function(a){var c,d={$scope:a===P||a.$$isolateScope?x:b,$element:s,$attrs:o,$transclude:y};w=a.controller,"@"==w&&(w=o[a.name]),c=r(w,d),z[a.name]=c,Z||s.data("$"+a.name+"Controller",c),a.controllerAs&&(d.$scope[a.controllerAs]=c)}),t=0,u=l.length;u>t;t++)try{v=l[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}var D=b;for(P&&(P.template||null===P.templateUrl)&&(D=x),a&&a(D,h.childNodes,c,k),t=m.length-1;t>=0;t--)try{v=m[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}}n=n||{};for(var v,w,y,z,C,D,H=-Number.MAX_VALUE,J=n.controllerDirectives,P=n.newIsolateScopeDirective,R=n.templateDirective,S=n.nonTlbTranscludeDirective,U=!1,Y=!1,Z=n.hasElementTranscludeDirective,_=g.$$element=wc(e),aa=k,ba=h,ca=0,da=a.length;da>ca;ca++){w=a[ca];var ea=w.$$start,fa=w.$$end;if(ea&&(_=F(e,ea,fa)),z=c,H>w.priority)break;if((D=w.scope)&&(v=v||w,w.templateUrl||(Q("new/isolated scope",P,w,_),t(D)&&(P=w))),y=w.name,!w.templateUrl&&w.controller&&(D=w.controller,J=J||{},Q("'"+y+"' controller",J[y],w,_),J[y]=w),(D=w.transclude)&&(U=!0,w.$$tlb||(Q("transclusion",S,w,_),S=w),"element"==D?(Z=!0,H=w.priority,z=_,_=g.$$element=wc(b.createComment(" "+y+": "+g[y]+" ")),e=_[0],V(j,N(z),e),ba=A(z,h,H,aa&&aa.name,{nonTlbTranscludeDirective:S})):(z=wc(pa(e)).contents(),_.empty(),ba=A(z,h))),w.template)if(Y=!0,Q("template",R,w,_),R=w,D=x(w.template)?w.template(_,g):w.template,D=$(D),w.replace){if(aa=w,z=la(D)?[]:wc(Hc(D)),e=z[0],1!=z.length||1!==e.nodeType)throw fd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");V(j,_,e);var ga={$attr:{}},ha=E(e,[],ga),ia=a.splice(ca+1,a.length-(ca+1));P&&I(ha),a=a.concat(ha).concat(ia),M(g,ga),da=a.length}else _.html(D);if(w.templateUrl)Y=!0,Q("template",R,w,_),R=w,w.replace&&(aa=w),s=O(a.splice(ca,a.length-ca),_,g,j,U&&ba,l,m,{controllerDirectives:J,newIsolateScopeDirective:P,templateDirective:R,nonTlbTranscludeDirective:S}),da=a.length;else if(w.compile)try{C=w.compile(_,g,ba),x(C)?o(null,C,ea,fa):C&&o(C.pre,C.post,ea,fa)}catch(ja){i(ja,T(_))}w.terminal&&(s.terminal=!0,H=Math.max(H,w.priority))}return s.scope=v&&v.scope===!0,s.transcludeOnThisElement=U,s.templateOnThisElement=Y,s.transclude=ba,n.hasElementTranscludeDirective=Z,s}function I(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function J(b,d,f,h,j,k,l){if(d===j)return null;var m=null;if(e.hasOwnProperty(d))for(var o,p=a.get(d+g),q=0,r=p.length;r>q;q++)try{o=p[q],(h===c||h>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){i(s)}return m}function M(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(B(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function O(a,b,c,d,e,g,h,i){var j,k,n=[],p=b[0],q=a.shift(),r=l({},q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),s=x(q.templateUrl)?q.templateUrl(b,c):q.templateUrl;return b.empty(),m.get(w.getTrustedResourceUrl(s),{cache:o}).success(function(l){var m,o,u,v;if(l=$(l),q.replace){if(u=la(l)?[]:wc(Hc(l)),m=u[0],1!=u.length||1!==m.nodeType)throw fd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",q.name,s);o={$attr:{}},V(d,b,m);var w=E(m,[],o);t(q.scope)&&I(w),a=w.concat(a),M(c,o)}else m=p,b.html(l);for(a.unshift(r),j=H(a,m,c,e,b,q,g,h,i),f(d,function(a,c){a==m&&(d[c]=b[0])}),k=C(b[0].childNodes,e);n.length;){var x=n.shift(),y=n.shift(),z=n.shift(),A=n.shift(),F=b[0];if(y!==p){var G=y.className;i.hasElementTranscludeDirective&&q.replace||(F=pa(m)),V(z,wc(y),F),B(wc(F),G)}v=j.transcludeOnThisElement?D(x,j.transclude,A):A,j(k,x,F,d,v)}n=null}).error(function(a,b,c,d){throw fd("tpload","Failed to load template: {0}",d.url)}),function(a,b,c,d,e){var f=e;n?(n.push(b),n.push(c),n.push(d),n.push(f)):(j.transcludeOnThisElement&&(f=D(b,j.transclude,e)),j(k,b,c,d,f))}}function P(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Q(a,b,c,d){if(b)throw fd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function R(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=b.length;return d&&B(a.parent(),"ng-binding"),function(a,b){var e=b.parent(),f=e.data("$binding")||[];f.push(c),e.data("$binding",f),d||B(e,"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function S(a,b){if("srcdoc"==b)return w.HTML;var c=zc(a);return"xlinkHref"==b||"FORM"==c&&"action"==b||"LINK"==c&&"href"==b||"IMG"!=c&&("src"==b||"ngSrc"==b)?w.RESOURCE_URL:void 0}function U(a,b,c,e){var f=d(c,!0);if(f){if("multiple"===e&&"SELECT"===zc(a))throw fd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(b,c,g){var h=g.$$observers||(g.$$observers={});if(k.test(e))throw fd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");f=d(g[e],!0,S(a,e)),f&&(g[e]=f(b),(h[e]||(h[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||b).$watch(f,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1;break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),d[wc.expando]=g[wc.expando];for(var n=1,o=c.length;o>n;n++){var p=c[n];wc(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function W(a,b){return l(function(){return a.apply(null,arguments)},a,b)}var X=function(a,b){this.$$element=a,this.$attr=b||{}};X.prototype={$normalize:Pa,$addClass:function(a){a&&a.length>0&&y.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&y.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Qa(a,b),d=Qa(b,a);0===c.length?y.removeClass(this.$$element,d):0===d.length?y.addClass(this.$$element,c):y.setClass(this.$$element,c,d)},$set:function(a,b,d,e){var g,h=Ca(this.$$element[0],a);h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=_(a,"-"))),g=zc(this.$$element).toUpperCase(),("A"===g&&("href"===a||"xlinkHref"===a)||"IMG"===g&&"src"===a)&&(this[a]=b=z(b,"src"===a)),d!==!1&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b));var j=this.$$observers;j&&f(j[a],function(a){try{a(b)}catch(c){i(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var Y=d.startSymbol(),Z=d.endSymbol(),$="{{"==Y||"}}"==Z?p:function(a){return a.replace(/\{\{/g,Y).replace(/}}/g,Z)},aa=/^ngAttr[A-Z]/;return A}]}function Pa(a){return ja(a.replace(gd,""))}function Qa(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function Ra(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){da(b,"controller"),t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,e){return function(f,g){var h,i,j,k;if(u(f)&&(i=f.match(b),j=i[1],k=i[3],f=a.hasOwnProperty(j)?a[j]:ea(g.$scope,j,!0)||ea(e,j,!0),ca(f,j,!0)),h=c.instantiate(f,g),k){if(!g||"object"!=typeof g.$scope)throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",j||f.name,k);g.$scope[k]=h}return h}}]}function Sa(){this.$get=["$window",function(a){return wc(a.document)}]}function Ta(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function Ua(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=qc(Hc(a.substr(0,d))),c=Hc(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function Va(a){var b=t(a)?a:c;return function(c){return b||(b=Ua(a)),c?b[qc(c)]||null:b}}function Wa(a,b,c){return x(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function Xa(a){return a>=200&&300>a}function Ya(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={
"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=R(c))),c}],transformRequest:[function(a){return!t(a)||B(a)||C(a)?a:Q(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:K(e),put:K(e),patch:K(e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function b(a){var b=l({},a,{data:Wa(a.data,a.headers,e.transformResponse)});return Xa(a.status)?b:k.reject(b)}function d(a){function b(a){var b;f(a,function(c,d){x(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var c,d,e,h=g.headers,i=l({},a.headers);h=l({},h.common,h[qc(a.method)]);a:for(c in h){d=qc(c);for(e in i)if(qc(e)===d)continue a;i[c]=h[c]}return b(i),i}var e={method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},h=d(a);l(e,a),e.headers=h,e.method=sc(e.method);var i=function(a){h=a.headers;var c=Wa(a.data,Va(h),a.transformRequest);return r(c)&&f(h,function(a,b){"content-type"===qc(b)&&delete h[b]}),r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,c,h).then(b,b)},j=[i,c],m=k.when(e);for(f(z,function(a){(a.request||a.requestError)&&j.unshift(a.request,a.requestError),(a.response||a.responseError)&&j.push(a.response,a.responseError)});j.length;){var n=j.shift(),o=j.shift();m=m.then(n,o)}return m.success=function(a){return m.then(function(b){a(b.data,b.status,b.headers,e)}),m},m.error=function(a){return m.then(null,function(b){a(b.data,b.status,b.headers,e)}),m},m}function o(a){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(a){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(d,f,h){function i(a,b,c,d){m&&(Xa(a)?m.put(u,[a,b,Ua(c),d]):m.remove(u)),j(b,a,c,d),e.$$phase||e.$apply()}function j(a,b,c,e){b=Math.max(b,0),(Xa(b)?p.resolve:p.reject)({data:a,status:b,headers:Va(c),config:d,statusText:e})}function l(){var a=H(n.pendingRequests,d);-1!==a&&n.pendingRequests.splice(a,1)}var m,o,p=k.defer(),q=p.promise,u=v(d.url,d.params);if(n.pendingRequests.push(d),q.then(l,l),!d.cache&&!g.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(m=t(d.cache)?d.cache:t(g.cache)?g.cache:y),m)if(o=m.get(u),s(o)){if(D(o))return o.then(l,l),o;Gc(o)?j(o[1],o[0],K(o[2]),o[3]):j(o,200,{},"OK")}else m.put(u,q);if(r(o)){var w=Pb(d.url)?b.cookies()[d.xsrfCookieName||g.xsrfCookieName]:c;w&&(h[d.xsrfHeaderName||g.xsrfHeaderName]=w),a(d.method,u,f,i,h,d.timeout,d.withCredentials,d.responseType)}return q}function v(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(Gc(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():Q(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var y=d("$http"),z=[];return f(i,function(a){z.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);z.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=g,n}]}function Za(b){if(8>=vc&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw d("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $a(){this.$get=["$browser","$window","$document",function(a,b,c){return _a(a,Za,a.defer,b.angular.callbacks,c[0])}]}function _a(a,b,c,d,e){function g(a,b,c){var f=e.createElement("script"),g=null;return f.type="text/javascript",f.src=a,f.async=!0,g=function(a){Oc(f,"load",g),Oc(f,"error",g),e.body.removeChild(f),f=null;var h=-1,i="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Nc(f,"load",g),Nc(f,"error",g),8>=vc&&(f.onreadystatechange=function(){u(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))}),e.body.appendChild(f),g}var h=-1;return function(e,i,j,k,l,m,n,p){function q(){t=h,v&&v(),w&&w.abort()}function r(b,d,e,f,g){y&&c.cancel(y),v=w=null,0===d&&(d=e?200:"file"==Ob(i).protocol?404:0),d=1223===d?204:d,g=g||"",b(d,e,f,g),a.$$completeOutstandingRequest(o)}var t;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==qc(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a,d[u].called=!0};var v=g(i.replace("JSON_CALLBACK","angular.callbacks."+u),u,function(a,b){r(k,a,d[u].data,"",b),d[u]=o})}else{var w=b(e);if(w.open(e,i,!0),f(l,function(a,b){s(a)&&w.setRequestHeader(b,a)}),w.onreadystatechange=function(){if(w&&4==w.readyState){var a=null,b=null,c="";t!==h&&(a=w.getAllResponseHeaders(),b="response"in w?w.response:w.responseText),t===h&&10>vc||(c=w.statusText),r(k,t||w.status,b,a,c)}},n&&(w.withCredentials=!0),p)try{w.responseType=p}catch(x){if("json"!==p)throw x}w.send(j||null)}if(m>0)var y=c(q,m);else D(m)&&m.then(q)}}function ab(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,i,j){for(var k,l,m,n,o=0,p=[],q=f.length,r=!1,s=[];q>o;)-1!=(k=f.indexOf(a,o))&&-1!=(l=f.indexOf(b,k+g))?(o!=k&&p.push(f.substring(o,k)),p.push(m=c(n=f.substring(k+g,l))),m.exp=n,o=l+h,r=!0):(o!=q&&p.push(f.substring(o)),o=q);if((q=p.length)||(p.push(""),q=1),j&&p.length>1)throw hd("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);return!i||r?(s.length=q,m=function(a){try{for(var b,c=0,g=q;g>c;c++){if("function"==typeof(b=p[c]))if(b=b(a),b=j?e.getTrusted(j,b):e.valueOf(b),null==b)b="";else switch(typeof b){case"string":break;case"number":b=""+b;break;default:b=Q(b)}s[c]=b}return s.join("")}catch(h){var i=hd("interr","Can't interpolate: {0}\n{1}",f,h.toString());d(i)}},m.exp=f,m.parts=p,m):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function bb(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(d,f,g,h){var i=b.setInterval,j=b.clearInterval,k=c.defer(),l=k.promise,m=0,n=s(h)&&!h;return g=s(g)?g:0,l.then(null,null,d),l.$$intervalId=i(function(){k.notify(m++),g>0&&m>=g&&(k.resolve(m),j(l.$$intervalId),delete e[l.$$intervalId]),n||a.$apply()},f),e[l.$$intervalId]=k,l}var e={};return d.cancel=function(a){return a&&a.$$intervalId in e?(e[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0):!1},d}]}function cb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function db(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function eb(a,b,c){var d=Ob(a,c);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=m(d.port)||jd[d.protocol]||null}function fb(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);var e=Ob(a,c);b.$$path=decodeURIComponent(d&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),b.$$search=V(e.search),b.$$hash=decodeURIComponent(e.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function gb(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function hb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function ib(a){return a.replace(/(#.+)|#$/,"$1")}function jb(a){return a.substr(0,hb(a).lastIndexOf("/")+1)}function kb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function lb(a,b){this.$$html5=!0,b=b||"";var d=jb(a);eb(a,this,a),this.$$parse=function(b){var c=gb(d,b);if(!u(c))throw kd("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,d);fb(c,this,a),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){var g,h,i;return(g=gb(a,e))!==c?(h=g,i=(g=gb(b,g))!==c?d+(gb("/",g)||g):a+h):(g=gb(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function mb(a,b){var c=jb(a);eb(a,this,a),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f=gb(a,d)||gb(c,d),g="#"==f.charAt(0)?gb(b,f):this.$$html5?f:"";if(!u(g))throw kd("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);fb(g,this,a),this.$$path=e(this.$$path,g,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return hb(a)==hb(b)?(this.$$parse(b),!0):!1}}function nb(a,b){this.$$html5=!0,mb.apply(this,arguments);var c=jb(a);this.$$parseLinkUrl=function(d,e){var f,g;return a==hb(d)?f=d:(g=gb(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function ob(a){return function(){return this[a]}}function pb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function qb(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=kb(m)+(l||"/"),j=f.history?lb:nb):(k=hb(m),j=mb),i=new j(k,"#"+b),i.$$parseLinkUrl(m,m);var n=/^\s*(javascript|mailto):/i;g.on("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=wc(b.target);"a"!==qc(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href"),h=c.attr("href")||c.attr("xlink:href");t(f)&&"[object SVGAnimatedString]"===f.toString()&&(f=Ob(f.animVal).href),n.test(f)||!f||c.attr("target")||b.isDefaultPrevented()||i.$$parseLinkUrl(f,h)&&(b.preventDefault(),i.absUrl()!=e.url()&&(d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){i.absUrl()!=a&&(d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),d.$broadcast("$locationChangeStart",a,b).defaultPrevented?(i.$$parse(b),e.url(b)):h(b)}),d.$$phase||d.$digest())});var o=0;return d.$watch(function(){var a=ib(e.url()),b=ib(i.absUrl()),c=i.$$replace;return o&&a==b||(o++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),c),h(a))})),i.$$replace=!1,o}),i}]}function rb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function sb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw md("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function tb(a,b){if(a+="",!u(a))throw md("iseccst","Cannot convert object to primitive value! Expression: {0}",b);return a}function ub(a,b){if(a){if(a.constructor===a)throw md("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw md("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw md("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw md("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function vb(a,b){if(a){if(a.constructor===a)throw md("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===od||a===pd||qd&&a===qd)throw md("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function wb(a,b,d,e,f){ub(a,e),f=f||{};for(var g,h=b.split("."),i=0;h.length>1;i++){g=sb(h.shift(),e);var j=ub(a[g],e);j||(j={},a[g]=j),a=j,a.then&&f.unwrapPromises&&(ld(e),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===c&&(a.$$v={}),a=a.$$v)}return g=sb(h.shift(),e),ub(a[g],e),a[g]=d,d}function xb(a){return"constructor"==a}function yb(a,b,d,e,f,g,h){sb(a,g),sb(b,g),sb(d,g),sb(e,g),sb(f,g);var i=function(a){return ub(a,g)},j=h.expensiveChecks,k=j||xb(a)?i:p,l=j||xb(b)?i:p,m=j||xb(d)?i:p,n=j||xb(e)?i:p,o=j||xb(f)?i:p;return h.unwrapPromises?function(h,i){var j,p=i&&i.hasOwnProperty(a)?i:h;return null==p?p:(p=k(p[a]),p&&p.then&&(ld(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=k(a)})),p=k(p.$$v)),b?null==p?c:(p=l(p[b]),p&&p.then&&(ld(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=l(a)})),p=l(p.$$v)),d?null==p?c:(p=m(p[d]),p&&p.then&&(ld(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=m(a)})),p=m(p.$$v)),e?null==p?c:(p=n(p[e]),p&&p.then&&(ld(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=n(a)})),p=n(p.$$v)),f?null==p?c:(p=o(p[f]),p&&p.then&&(ld(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=o(a)})),p=o(p.$$v)),p):p):p):p):p)}:function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=k(i[a]),b?null==i?c:(i=l(i[b]),d?null==i?c:(i=m(i[d]),e?null==i?c:(i=n(i[e]),f?null==i?c:i=o(i[f]):i):i):i):i)}}function zb(a,b){return function(c,d){return a(c,d,ld,ub,b)}}function Ab(a,b,d){var e=b.expensiveChecks,g=e?wd:vd;if(g.hasOwnProperty(a))return g[a];var h,i=a.split("."),j=i.length;if(b.csp)h=6>j?yb(i[0],i[1],i[2],i[3],i[4],d,b):function(a,e){var f,g=0;do f=yb(i[g++],i[g++],i[g++],i[g++],i[g++],d,b)(a,e),e=c,a=f;while(j>g);return f};else{var k="var p;\n";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,c){sb(a,d);var f=(c?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+'["'+a+'"]',g=e||xb(a);g&&(f="eso("+f+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+f+";\n",b.unwrapPromises&&(k+='if (s && s.then) {\n pw("'+d.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(g?"eso(v)":"v")+";});\n}\n s="+(g?"eso(s.$$v)":"s.$$v")+"\n}\n")}),k+="return s;";var m=new Function("s","l","pw","eso","fe",k);m.toString=q(k),(l||b.unwrapPromises)&&(m=zb(m,d)),h=m}return"hasOwnProperty"!==a&&(g[a]=h),h}function Bb(){var a={},b={},c={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(a){return s(a)?(c.unwrapPromises=!!a,this):c.unwrapPromises},this.logPromiseWarnings=function(a){return s(a)?(c.logPromiseWarnings=a,this):c.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(d,e,f){c.csp=e.csp;var g={csp:c.csp,unwrapPromises:c.unwrapPromises,logPromiseWarnings:c.logPromiseWarnings,expensiveChecks:!0};return ld=function(a){c.logPromiseWarnings&&!nd.hasOwnProperty(a)&&(nd[a]=!0,f.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(e,f){var h;switch(typeof e){case"string":var i=f?b:a;if(i.hasOwnProperty(e))return i[e];var j=f?g:c,k=new td(j),l=new ud(k,d,j);return h=l.parse(e),"hasOwnProperty"!==e&&(i[e]=h),h;case"function":return e;default:return o}}}]}function Cb(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Db(function(b){a.$evalAsync(b)},b)}]}function Db(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=Gc(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,j=[];return g={resolve:function(b){if(j){var d=j;j=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1],a[2])})}},reject:function(a){g.resolve(k(a))},notify:function(b){if(j){var c=j;j.length&&a(function(){for(var a,d=0,e=c.length;e>d;d++)a=c[d],a[2](b)})}},promise:{then:function(a,c,g){var i=h(),k=function(c){try{i.resolve((x(a)?a:d)(c))}catch(e){i.reject(e),b(e)}},l=function(a){try{i.resolve((x(c)?c:e)(a))}catch(d){i.reject(d),b(d)}},m=function(a){try{i.notify((x(g)?g:d)(a))}catch(c){b(c)}};return j?j.push([k,l,m]):f.then(k,l,m),i.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return D(f)?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return D(b)?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(a){var b=h();return b.reject(a),b.promise},k=function(c){return{then:function(d,f){var g=h();return a(function(){try{g.resolve((x(f)?f:e)(c))}catch(a){g.reject(a),b(a)}}),g.promise}}},l=function(c,f,g,k){var l,m=h(),n=function(a){try{return(x(f)?f:d)(a)}catch(c){return b(c),j(c)}},o=function(a){try{return(x(g)?g:e)(a)}catch(c){return b(c),j(c)}},p=function(a){try{return(x(k)?k:d)(a)}catch(c){b(c)}};return a(function(){i(c).then(function(a){l||(l=!0,m.resolve(i(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))})}),m.promise};return{defer:h,reject:j,when:l,all:g}}function Eb(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Fb(){var a=10,b=d("$rootScope"),c=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,g,h,i){function k(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function l(a){if(r.$$phase)throw b("inprog","{0} already in progress",r.$$phase);r.$$phase=a}function m(){r.$$phase=null}function n(a,b){var c=h(a);return ca(c,b),c}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}k.prototype={constructor:k,$new:function(a){var b;return a?(b=new k,b.$root=this.$root,b.$$asyncQueue=this.$$asyncQueue,b.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),b=new this.$$childScopeClass),b["this"]=b,b.$parent=this,b.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=b,this.$$childTail=b):this.$$childHead=this.$$childTail=b,b},$watch:function(a,b,d){var e=this,f=n(a,"watch"),g=e.$$watchers,h={fn:b,last:q,get:f,exp:a,eq:!!d};if(c=null,!x(b)){var i=n(b||o,"listener");h.fn=function(a,b,c){i(c)}}if("string"==typeof a&&f.constant){var j=h.fn;h.fn=function(a,b,c){j.call(this,a,b,c),I(g,h)}}return g||(g=e.$$watchers=[]),g.unshift(h),function(){I(g,h),c=null}},$watchCollection:function(a,b){function c(){f=m(j);var a,b,c;if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),a=f.length,q!==a&&(l++,g.length=q=a);for(var d=0;a>d;d++)c=g[d]!==g[d]&&f[d]!==f[d],c||g[d]===f[d]||(l++,g[d]=f[d])}else{g!==o&&(g=o={},q=0,l++),a=0;for(b in f)f.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?(c=g[b]!==g[b]&&f[b]!==f[b],c||g[b]===f[b]||(l++,g[b]=f[b])):(q++,g[b]=f[b],l++));if(q>a){l++;for(b in g)g.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&(q--,delete g[b])}}else g!==f&&(g=f,l++);return l}function d(){if(p?(p=!1,b(f,f,j)):b(f,i,j),k)if(t(f))if(e(f)){i=new Array(f.length);for(var a=0;a<f.length;a++)i[a]=f[a]}else{i={};for(var c in f)rc.call(f,c)&&(i[c]=f[c])}else i=f}var f,g,i,j=this,k=b.length>1,l=0,m=h(a),n=[],o={},p=!0,q=0;return this.$watch(c,d)},$digest:function(){var d,e,f,h,j,k,n,o,p,r,s,t=this.$$asyncQueue,u=this.$$postDigestQueue,v=a,w=this,y=[];l("$digest"),i.$$checkUrlChange(),c=null;do{for(k=!1,o=w;t.length;){try{s=t.shift(),s.scope.$eval(s.expression)}catch(z){m(),g(z)}c=null}a:do{if(h=o.$$watchers)for(j=h.length;j--;)try{if(d=h[j])if((e=d.get(o))===(f=d.last)||(d.eq?L(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))){if(d===c){k=!1;break a}}else k=!0,c=d,d.last=d.eq?J(e,null):e,d.fn(e,f===q?e:f,o),5>v&&(p=4-v,y[p]||(y[p]=[]),r=x(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,r+="; newVal: "+Q(e)+"; oldVal: "+Q(f),y[p].push(r))}catch(z){m(),g(z)}if(!(n=o.$$childHead||o!==w&&o.$$nextSibling))for(;o!==w&&!(n=o.$$nextSibling);)o=o.$parent}while(o=n);if((k||t.length)&&!v--)throw m(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,Q(y))}while(k||t.length);for(m();u.length;)try{u.shift()()}catch(z){g(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==r&&(f(this.$$listenerCount,O(null,p,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=o,this.$on=this.$watch=function(){return o})}},$eval:function(a,b){return h(a)(this,b)},$evalAsync:function(a){r.$$phase||r.$$asyncQueue.length||i.defer(function(){r.$$asyncQueue.length&&r.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return l("$apply"),this.$eval(a)}catch(b){g(b)}finally{m();try{r.$digest()}catch(b){throw g(b),b}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=H(c,b);-1!==d&&(c[d]=null,p(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=M([j],arguments,1);do{for(c=h.$$listeners[a]||f,j.currentScope=h,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){g(l)}else c.splice(d,1),d--,e--;if(i)return j;h=h.$parent}while(h);return j},$broadcast:function(a,b){for(var c,d,e,f=this,h=f,i=f,j={name:a,targetScope:f,preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=M([j],arguments,1);h=i;){for(j.currentScope=h,c=h.$$listeners[a]||[],d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){g(l)}else c.splice(d,1),d--,e--;if(!(i=h.$$listenerCount[a]&&h.$$childHead||h!==f&&h.$$nextSibling))for(;h!==f&&!(i=h.$$nextSibling);)h=h.$parent}return j}};var r=new k;return r}]}function Gb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return vc&&!(vc>=8)||(e=Ob(c).href,""===e||e.match(f))?c:"unsafe:"+e}}}function Hb(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ib(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw xd("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Hb(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw xd("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Jb(a){var b=[];return s(a)&&f(a,function(a){b.push(Ib(a))}),b}function Kb(){this.SCE_CONTEXTS=yd;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Jb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Jb(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?Pb(b):!!a.exec(b.href)}function f(c){var d,f,g=Ob(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw xd("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw xd("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===yd.RESOURCE_URL){if(f(b))return b;throw xd("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===yd.HTML)return k(b);throw xd("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw xd("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[yd.HTML]=g(l),m[yd.CSS]=g(l),m[yd.URL]=g(l),m[yd.JS]=g(l),m[yd.RESOURCE_URL]=g(m[yd.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function Lb(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sniffer","$sceDelegate",function(b,c,d){if(a&&c.msie&&c.msieDocumentMode<8)throw xd("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=K(yd);e.isEnabled=function(){return a},e.trustAs=d.trustAs,e.getTrusted=d.getTrusted,e.valueOf=d.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=p),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return e.getTrusted(a,d(b,c))}};var g=e.parseAs,h=e.getTrusted,i=e.trustAs;return f(yd,function(a,b){var c=qc(b);e[ja("parse_as_"+c)]=function(b){return g(a,b)},e[ja("get_trusted_"+c)]=function(b){return h(a,b)},e[ja("trust_as_"+c)]=function(b){return i(a,b)}}),e}]}function Mb(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(qc((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=h.documentMode,j=/^(Moz|webkit|O|ms)(?=[A-Z])/,k=h.body&&h.body.style,l=!1,n=!1;if(k){for(var o in k)if(d=j.exec(o)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in k&&"webkit"),l=!!("transition"in k||c+"Transition"in k),n=!!("animation"in k||c+"Animation"in k),!f||l&&n||(l=u(h.body.style.webkitTransition),n=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hashchange:"onhashchange"in a&&(!i||i>7),hasEvent:function(a){if("input"==a&&9==vc)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:Ic(),vendorPrefix:c,transitions:l,animations:n,android:f,msie:vc,msieDocumentMode:i}}]}function Nb(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j=c.defer(),k=j.promise,l=s(h)&&!h;return i=b.defer(function(){try{j.resolve(e())}catch(b){j.reject(b),d(b)}finally{delete f[k.$$timeoutId]}l||a.$apply()},g),k.$$timeoutId=i,f[i]=j,k}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),delete f[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},e}]}function Ob(a,b){var c=a;return vc&&(zd.setAttribute("href",c),c=zd.href),zd.setAttribute("href",c),{href:zd.href,protocol:zd.protocol?zd.protocol.replace(/:$/,""):"",host:zd.host,search:zd.search?zd.search.replace(/^\?/,""):"",hash:zd.hash?zd.hash.replace(/^#/,""):"",hostname:zd.hostname,port:zd.port,pathname:"/"===zd.pathname.charAt(0)?zd.pathname:"/"+zd.pathname}}function Pb(a){var b=u(a)?Ob(a):a;return b.protocol===Ad.protocol&&b.host===Ad.host}function Qb(){this.$get=q(a)}function Rb(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Tb),b("date",_b),b("filter",Sb),b("json",ac),b("limitTo",bc),b("lowercase",Fd),b("number",Ub),b("orderBy",cc),b("uppercase",Gd)}function Sb(){return function(a,b,c){if(!Gc(a))return a;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return Ec.equals(a,b)}:function(a,b){if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var d in a)if("$"!==d.charAt(0)&&rc.call(a,d)&&c(a[d],b[d]))return!0;return!1}return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(var e=0;e<a.length;e++)if(f(a[e],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)!function(a){"undefined"!=typeof b[a]&&e.push(function(c){return f("$"==a?c:c&&c[a],b[a])})}(g);break;case"function":e.push(b);break;default:return a}for(var h=[],i=0;i<a.length;i++){var j=a[i];e.check(j)&&h.push(j);
}return h}}function Tb(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),Vb(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function Ub(a){var b=a.NUMBER_FORMATS;return function(a,c){return Vb(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Vb(a,b,c,d,e){if(null==a||!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?(g="0",a=0):(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{var l=(g.split(Bd)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e),0===a&&(f=!1);var m=(""+a).split(Bd),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Wb(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Xb(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Wb(f,b,d)}}function Yb(a,b){return function(c,d){var e=c["get"+a](),f=sc(b?"SHORT"+a:a);return d[f][e]}}function Zb(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Wb(Math[b>0?"floor":"ceil"](b/60),2)+Wb(Math.abs(b%60),2)}function $b(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function _b(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Ed.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=Dd.exec(d),g?(i=M(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=Cd[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function ac(){return function(a){return Q(a,!0)}}function bc(){return function(a,b){return Gc(a)||u(a)?(b=Math.abs(Number(b))===1/0?Number(b):m(b),b?b>0?a.slice(0,b):a.slice(b):u(a)?"":[]):a}}function cc(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return S(b)?function(b,c){return a(c,b)}:a}function h(a,b){var c=typeof a,d=typeof b;return c==d?(w(a)&&w(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=Gc(c)?c:[c],0===c.length&&(c=["+"]),c=F(c,function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(function(a,b){return h(a,b)},c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return h(a[e],b[e])},c)}}return g(function(a,b){return h(d(a),d(b))},c)}),Ac.call(b).sort(g(f,d))):b}}function dc(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function ec(a,b,c,d){function e(b,c){c=c?"-"+_(c,"-"):"",d.setClass(a,(b?Td:Ud)+c,(b?Ud:Td)+c)}var g=this,h=a.parent().controller("form")||Jd,i=0,j=g.$error={},k=[];g.$name=b.name||b.ngForm,g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,h.$addControl(g),a.addClass(Vd),e(!0),g.$addControl=function(a){da(a.$name,"input"),k.push(a),a.$name&&(g[a.$name]=a)},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],f(j,function(b,c){g.$setValidity(c,!0,a)}),I(k,a)},g.$setValidity=function(a,b,c){var d=j[a];if(b)d&&(I(d,c),d.length||(i--,i||(e(b),g.$valid=!0,g.$invalid=!1),j[a]=!1,e(!0,a),h.$setValidity(a,!0,g)));else{if(i||e(b),d){if(G(d,c))return}else j[a]=d=[],i++,e(!1,a),h.$setValidity(a,!1,g);d.push(c),g.$valid=!1,g.$invalid=!0}},g.$setDirty=function(){d.removeClass(a,Vd),d.addClass(a,Wd),g.$dirty=!0,g.$pristine=!1,h.$setDirty()},g.$setPristine=function(){d.removeClass(a,Wd),d.addClass(a,Vd),g.$dirty=!1,g.$pristine=!0,f(k,function(a){a.$setPristine()})}}function fc(a,b,d,e){return a.$setValidity(b,d),d?e:c}function gc(a,b){var c,d;if(b)for(c=0;c<b.length;++c)if(d=b[c],a[d])return!0;return!1}function hc(a,b,c,d,e){if(t(e)){a.$$hasNativeValidators=!0;var f=function(f){return a.$error[b]||gc(e,d)||!gc(e,c)?f:void a.$setValidity(b,!1)};a.$parsers.push(f)}}function ic(a,b,c,e,f,g){var h=b.prop(pc),i=b[0].placeholder,j={},k=qc(b[0].type);if(e.$$validityState=h,!f.android){var l=!1;b.on("compositionstart",function(a){l=!0}),b.on("compositionend",function(){l=!1,n()})}var n=function(d){if(!l){var f=b.val();if(vc&&"input"===(d||j).type&&b[0].placeholder!==i)return void(i=b[0].placeholder);"password"!==k&&S(c.ngTrim||"T")&&(f=Hc(f));var g=h&&e.$$hasNativeValidators;(e.$viewValue!==f||""===f&&g)&&(a.$root.$$phase?e.$setViewValue(f):a.$apply(function(){e.$setViewValue(f)}))}};if(f.hasEvent("input"))b.on("input",n);else{var o,p=function(){o||(o=g.defer(function(){n(),o=null}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||p()}),f.hasEvent("paste")&&b.on("paste cut",p)}b.on("change",n),e.$render=function(){b.val(e.$isEmpty(e.$viewValue)?"":e.$viewValue)};var q,r,s=c.ngPattern;if(s){var t=function(a,b){return fc(e,"pattern",e.$isEmpty(b)||a.test(b),b)};r=s.match(/^\/(.*)\/([gim]*)$/),r?(s=new RegExp(r[1],r[2]),q=function(a){return t(s,a)}):q=function(c){var e=a.$eval(s);if(!e||!e.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,T(b));return t(e,c)},e.$formatters.push(q),e.$parsers.push(q)}if(c.ngMinlength){var u=m(c.ngMinlength),v=function(a){return fc(e,"minlength",e.$isEmpty(a)||a.length>=u,a)};e.$parsers.push(v),e.$formatters.push(v)}if(c.ngMaxlength){var w=m(c.ngMaxlength),x=function(a){return fc(e,"maxlength",e.$isEmpty(a)||a.length<=w,a)};e.$parsers.push(x),e.$formatters.push(x)}}function jc(a,b,d,e,f,g){if(ic(a,b,d,e,f,g),e.$parsers.push(function(a){var b=e.$isEmpty(a);return b||Pd.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),hc(e,"number",Rd,null,e.$$validityState),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min){var h=function(a){var b=parseFloat(d.min);return fc(e,"min",e.$isEmpty(a)||a>=b,a)};e.$parsers.push(h),e.$formatters.push(h)}if(d.max){var i=function(a){var b=parseFloat(d.max);return fc(e,"max",e.$isEmpty(a)||b>=a,a)};e.$parsers.push(i),e.$formatters.push(i)}e.$formatters.push(function(a){return fc(e,"number",e.$isEmpty(a)||v(a),a)})}function kc(a,b,c,d,e,f){ic(a,b,c,d,e,f);var g=function(a){return fc(d,"url",d.$isEmpty(a)||Nd.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function lc(a,b,c,d,e,f){ic(a,b,c,d,e,f);var g=function(a){return fc(d,"email",d.$isEmpty(a)||Od.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function mc(a,b,c,d){r(c.name)&&b.attr("name",j()),b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function nc(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==e},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function oc(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(Gc(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);f=l(f,-1),e=l(e,1),0===e.length?c.removeClass(h,f):0===f.length?c.addClass(h,e):c.setClass(h,e,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!L(a,o)){var d=e(o);m(d,c)}}else j(c)}o=K(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}var pc="validity",qc=function(a){return u(a)?a.toLowerCase():a},rc=Object.prototype.hasOwnProperty,sc=function(a){return u(a)?a.toUpperCase():a},tc=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},uc=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(qc=tc,sc=uc);var vc,wc,xc,yc,zc,Ac=[].slice,Bc=[].push,Cc=Object.prototype.toString,Dc=d("ng"),Ec=a.angular||(a.angular={}),Fc=["0","0","0"];vc=m((/msie (\d+)/.exec(qc(navigator.userAgent))||[])[1]),isNaN(vc)&&(vc=m((/trident\/.*; rv:(\d+)/.exec(qc(navigator.userAgent))||[])[1])),o.$inject=[],p.$inject=[];var Gc=function(){return x(Array.isArray)?Array.isArray:function(a){return"[object Array]"===Cc.call(a)}}(),Hc=function(){return String.prototype.trim?function(a){return u(a)?a.trim():a}:function(a){return u(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();zc=9>vc?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?sc(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var Ic=function(){if(s(Ic.isActive_))return Ic.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Ic.isActive_=a},Jc=/[A-Z]/g,Kc={full:"1.2.32",major:1,minor:2,dot:32,codeName:"alternation-intention"};oa.expando="ng339";var Lc=oa.cache={},Mc=1,Nc=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},Oc=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},Pc=(oa._data=function(a){return this.cache[a[this.expando]]||{}},/([\:\-\_]+(.))/g),Qc=/^moz([A-Z])/,Rc=d("jqLite"),Sc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Tc=/<|&#?\w+;/,Uc=/<([\w:]+)/,Vc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wc={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wc.optgroup=Wc.option,Wc.tbody=Wc.tfoot=Wc.colgroup=Wc.caption=Wc.thead,Wc.th=Wc.td;var Xc=oa.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),oa(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return wc(a>=0?this[a]:this[this.length+a])},length:0,push:Bc,sort:[].sort,splice:[].splice},Yc={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Yc[qc(a)]=a});var Zc={};f("input,select,option,textarea,button,form,details".split(","),function(a){Zc[sc(a)]=!0}),f({data:ua,removeData:sa},function(a,b){oa[b]=a}),f({data:ua,inheritedData:Aa,scope:function(a){return wc.data(a,"$scope")||Aa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return wc.data(a,"$isolateScope")||wc.data(a,"$isolateScopeNoTemplate")},controller:za,injector:function(a){return Aa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:va,css:function(a,b,d){if(b=ja(b),!s(d)){var e;return 8>=vc&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=vc&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=qc(b);if(Yc[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,c){var d=b[a.nodeType];return r(c)?d?a[d]:"":void(a[d]=c)}var b=[];return 9>vc?(b[1]="innerText",b[3]="nodeValue"):b[1]=b[3]="textContent",a.$dv="",a}(),val:function(a,b){if(r(b)){if("SELECT"===zc(a)&&a.multiple){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)qa(d[c]);a.innerHTML=b},empty:Ba},function(a,b){oa.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Ba&&(2==a.length&&a!==va&&a!==za?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===ua)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:sa,dealoc:qa,on:function Ge(a,c,d,e){if(s(e))throw Rc("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var g=ta(a,"events"),h=ta(a,"handle");g||ta(a,"events",g={}),h||ta(a,"handle",h=Da(a,g)),f(c.split(" "),function(c){var e=g[c];if(!e){if("mouseenter"==c||"mouseleave"==c){var f=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[c]=[];var i={mouseleave:"mouseout",mouseenter:"mouseover"};Ge(a,i[c],function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!f(b,d))&&h(a,c)})}else Nc(a,c,h),g[c]=[];e=g[c]}e.push(d)})},off:ra,one:function(a,b,c){a=wc(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;qa(a),f(new oa(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){f(new oa(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new oa(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=wc(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){qa(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new oa(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:xa,removeClass:wa,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!va(a,b)),(d?xa:wa)(a,b)})},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:pa,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=(ta(a,"events")||{})[h];i&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=K(i),g=c?[d].concat(c):[d],f(e,function(b){b.apply(a,g)}))}},function(a,b){oa.prototype[b]=function(b,c,d){for(var e,f=0;f<this.length;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=wc(e))):ya(e,a(this[f],b,c,d));return s(e)?e:this},oa.prototype.bind=oa.prototype.on,oa.prototype.unbind=oa.prototype.off}),Fa.prototype={put:function(a,b){this[Ea(a,this.nextUid)]=b},get:function(a){return this[Ea(a,this.nextUid)]},remove:function(a){var b=this[a=Ea(a,this.nextUid)];return delete this[a],b}};var $c=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,_c=/,/,ad=/^\s*(_?)(\S+?)\1\s*$/,bd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,cd=d("$injector"),dd=d("$animate"),ed=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw dd("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(a,b){function c(a){a&&b(a)}return{enter:function(a,b,d,e){d?d.after(a):(b&&b[0]||(b=d.parent()),b.append(a)),c(e)},leave:function(a,b){a.remove(),c(b)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(a,b,d){b=u(b)?b:Gc(b)?b.join(" "):"",f(a,function(a){xa(a,b)}),c(d)},removeClass:function(a,b,d){b=u(b)?b:Gc(b)?b.join(" "):"",f(a,function(a){wa(a,b)}),c(d)},setClass:function(a,b,d,e){f(a,function(a){xa(a,b),wa(a,d)}),c(e)},enabled:o}}]}],fd=d("$compile");Oa.$inject=["$provide","$$sanitizeUriProvider"];var gd=/^(x[\:\-_]|data[\:\-_])/i,hd=d("$interpolate"),id=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,jd={http:80,https:443,ftp:21},kd=d("$location");nb.prototype=mb.prototype=lb.prototype={$$html5:!1,$$replace:!1,absUrl:ob("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=id.exec(a);return b[1]&&this.path(decodeURIComponent(b[1])),(b[2]||b[1])&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:ob("$$protocol"),host:ob("$$host"),port:ob("$$port"),path:pb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw kd("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:pb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};var ld,md=d("$parse"),nd={},od=Function.prototype.call,pd=Function.prototype.apply,qd=Function.prototype.bind,rd={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},sd={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},td=function(a){this.options=a};td.prototype={constructor:td,lex:function(a){for(this.text=a,this.index=0,this.ch=c,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var b=this.ch+this.peek(),d=b+this.peek(2),e=rd[this.ch],f=rd[b],g=rd[d];g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=3):f?(this.tokens.push({index:this.index,text:b,fn:f}),this.index+=2):e?(this.tokens.push({index:this.index,text:this.ch,fn:e}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw md("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=qc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,c,d,e=this,f="",g=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),f+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=f.substr(a-g+1),f=f.substr(0,a-g),this.index=b;break}if(!this.isWhitespace(d))break;b++}var h={index:g,text:f};if(rd.hasOwnProperty(f))h.fn=rd[f],h.literal=!0,h.constant=!0;else{var i=Ab(f,this.options,this.text);h.fn=l(function(a,b){return i(a,b)},{assign:function(a,b){return wb(a,f,b,e.text,e.options)}})}this.tokens.push(h),c&&(this.tokens.push({index:a,text:"."}),this.tokens.push({index:a+1,text:c}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=sd[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,literal:!0,constant:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var ud=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};ud.ZERO=l(function(){return 0},{constant:!0}),ud.prototype={constructor:ud,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),a.literal=!!b.literal,a.constant=!!b.constant}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw md("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw md("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.assignment(),(b=this.expect(":"))?this.ternaryFn(c,a,this.assignment()):void this.throwError("expected :",b)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(ud.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this,c=this.expect().text,d=Ab(c,this.options,this.text);return l(function(b,c,e){return d(e||a(b,c))},{assign:function(d,e,f){var g=a(d,f);return g||a.assign(d,g={}),wb(g,c,e,b.text,b.options)}})},objectIndex:function(a){var b=this,d=this.expression();return this.consume("]"),l(function(e,f){var g,h,i=a(e,f),j=tb(d(e,f),b.text);return sb(j,b.text),i?(g=ub(i[j],b.text),g&&g.then&&b.options.unwrapPromises&&(h=g,"$$v"in g||(h.$$v=c,h.then(function(a){h.$$v=a})),g=g.$$v),g):c},{assign:function(c,e,f){var g=sb(tb(d(c,f),b.text),b.text),h=ub(a(c,f),b.text);return h||a.assign(c,h={}),h[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(ub(c[i](e,f),d.text));var j=a(e,f,h)||o;ub(h,d.text),vb(j,d.text);var k=j.apply?j.apply(h,g):j(g[0],g[1],g[2],g[3],g[4]);return ub(k,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};var vd={},wd={},xd=d("$sce"),yd={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},zd=b.createElement("a"),Ad=Ob(a.location.href,!0);Rb.$inject=["$provide"],Tb.$inject=["$locale"],Ub.$inject=["$locale"];var Bd=".",Cd={yyyy:Xb("FullYear",4),yy:Xb("FullYear",2,0,!0),y:Xb("FullYear",1),MMMM:Yb("Month"),MMM:Yb("Month",!0),MM:Xb("Month",2,1),M:Xb("Month",1,1),dd:Xb("Date",2),d:Xb("Date",1),HH:Xb("Hours",2),H:Xb("Hours",1),hh:Xb("Hours",2,-12),h:Xb("Hours",1,-12),mm:Xb("Minutes",2),m:Xb("Minutes",1),ss:Xb("Seconds",2),s:Xb("Seconds",1),sss:Xb("Milliseconds",3),EEEE:Yb("Day"),EEE:Yb("Day",!0),a:$b,Z:Zb},Dd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Ed=/^\-?\d+$/;_b.$inject=["$locale"];var Fd=q(qc),Gd=q(sc);cc.$inject=["$parse"];var Hd=q({restrict:"E",compile:function(a,c){return 8>=vc&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),c.href||c.xlinkHref||c.name?void 0:function(a,b){var c="[object SVGAnimatedString]"===Cc.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),Id={};f(Yc,function(a,b){if("multiple"!=a){var c=Pa("ng-"+b);Id[c]=function(){return{priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(["src","srcset","href"],function(a){var b=Pa("ng-"+a);Id[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Cc.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(vc&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Jd={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};ec.$inject=["$element","$attrs","$scope","$animate"];var Kd=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:ec,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};Nc(d[0],"submit",g),d.on("$destroy",function(){b(function(){Oc(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&wb(a,i,f,i),h&&d.on("$destroy",function(){h.$removeControl(f),i&&wb(a,i,c,i),l(f,Jd)})}}}};return d}]},Ld=Kd(),Md=Kd(!0),Nd=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Od=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Pd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Qd={text:ic,number:jc,url:kc,email:lc,radio:mc,checkbox:nc,hidden:o,button:o,submit:o,reset:o,file:o},Rd=["badInput"],Sd=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Qd[qc(e.type)]||Qd.text)(c,d,e,f,b,a)}}}],Td="ng-valid",Ud="ng-invalid",Vd="ng-pristine",Wd="ng-dirty",Xd=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,b,c,e,g,h){function i(a,b){b=b?"-"+_(b,"-"):"",h.removeClass(e,(a?Ud:Td)+b),h.addClass(e,(a?Td:Ud)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var j=g(c.ngModel),k=j.assign;if(!k)throw d("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,T(e));
this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||Jd,m=0,n=this.$error={};e.addClass(Vd),i(!0),this.$setValidity=function(a,b){n[a]!==!b&&(b?(n[a]&&m--,m||(i(!0),this.$valid=!0,this.$invalid=!1)):(i(!1),this.$invalid=!0,this.$valid=!1,m++),n[a]=!b,i(b,a),l.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,h.removeClass(e,Wd),h.addClass(e,Vd)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,h.removeClass(e,Vd),h.addClass(e,Wd),l.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,k(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var p=this;a.$watch(function(){var b=j(a);if(p.$modelValue!==b){var c=p.$formatters,d=c.length;for(p.$modelValue=b;d--;)b=c[d](b);p.$viewValue!==b&&(p.$viewValue=b,p.$render())}return b})}],Yd=function(){return{require:["ngModel","^?form"],controller:Xd,link:function(a,b,c,d){var e=d[0],f=d[1]||Jd;f.$addControl(e),a.$on("$destroy",function(){f.$removeControl(e)})}}},Zd=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),$d=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&d.$isEmpty(a)?void d.$setValidity("required",!1):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},_d=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){if(!r(a)){var b=[];return a&&f(a.split(h),function(a){a&&b.push(Hc(a))}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return Gc(a)?a.join(", "):c}),e.$isEmpty=function(a){return!a||!a.length}}}},ae=/^(true|false|\d+)$/,be=function(){return{priority:100,compile:function(a,b){return ae.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},ce=dc({compile:function(a){return a.addClass("ng-binding"),function(a,b,d){b.data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}}}),de=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],ee=["$sce","$parse",function(a,b){return{compile:function(c){return c.addClass("ng-binding"),function(c,d,e){function f(){return(g(c)||"").toString()}d.data("$binding",e.ngBindHtml);var g=b(e.ngBindHtml);c.$watch(f,function(b){d.html(a.getTrustedHtml(g(c))||"")})}}}}],fe=oc("",!0),ge=oc("Odd",0),he=oc("Even",1),ie=dc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),je=[function(){return{scope:!0,controller:"@",priority:500}}],ke={},le={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Pa("ng-"+a);ke[b]=["$parse","$rootScope",function(c,d){return{compile:function(e,f){var g=c(f[b],!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};le[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var me=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(f){S(f)?i||(i=c.$new(),g(i,function(c){c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=fa(h.clone),a.leave(j,function(){j=null}),h=null))})}}}],ne=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,b,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ec.noop,compile:function(f,g){var h=g.ngInclude||g.src,i=g.onload||"",j=g.autoscroll;return function(f,g,k,l,m){var n,o,p,q=0,r=function(){o&&(o.remove(),o=null),n&&(n.$destroy(),n=null),p&&(d.leave(p,function(){o=null}),o=p,p=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!s(j)||j&&!f.$eval(j)||c()},k=++q;e?(a.get(e,{cache:b}).success(function(a){if(k===q){var b=f.$new();l.template=a;var c=m(b,function(a){r(),d.enter(a,null,g,h)});n=b,p=c,n.$emit("$includeContentLoaded"),f.$eval(i)}}).error(function(){k===q&&r()}),f.$emit("$includeContentRequested")):(r(),l.template=null)})}}}}],oe=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,c,d,e){c.html(e.template),a(c.contents())(b)}}}],pe=dc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),qe=dc({terminal:!0,priority:1e3}),re=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[qc(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],se=["$parse","$animate",function(a,c){function g(a){return a.clone[0]}function h(a){return a.clone[a.clone.length-1]}var i="$$NG_REMOVED",j=d("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(d,k,l,m,n){var o,p,q,r,s,t,u,v,w,x=l.ngRepeat,y=x.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),z={$id:Ea};if(!y)throw j("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",x);if(t=y[1],u=y[2],o=y[3],o?(p=a(o),q=function(a,b,c){return w&&(z[w]=a),z[v]=b,z.$index=c,p(d,z)}):(r=function(a,b){return Ea(b)},s=function(a){return a}),y=t.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!y)throw j("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",t);v=y[3]||y[1],w=y[2];var A={};d.$watchCollection(u,function(a){var l,m,o,p,t,u,y,z,B,C,D,E,F=k[0],G={},H=[];if(e(a))C=a,B=q||r;else{B=q||s,C=[];for(u in a)a.hasOwnProperty(u)&&"$"!=u.charAt(0)&&C.push(u);C.sort()}for(p=C.length,m=H.length=C.length,l=0;m>l;l++)if(u=a===C?l:C[l],y=a[u],z=B(u,y,l),da(z,"`track by` id"),A.hasOwnProperty(z))D=A[z],delete A[z],G[z]=D,H[l]=D;else{if(G.hasOwnProperty(z))throw f(H,function(a){a&&a.scope&&(A[a.id]=a)}),j("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",x,z,Q(y));H[l]={id:z},G[z]=!1}for(u in A)A.hasOwnProperty(u)&&(D=A[u],E=fa(D.clone),c.leave(E),f(E,function(a){a[i]=!0}),D.scope.$destroy());for(l=0,m=C.length;m>l;l++){if(u=a===C?l:C[l],y=a[u],D=H[l],H[l-1]&&(F=h(H[l-1])),D.scope){t=D.scope,o=F;do o=o.nextSibling;while(o&&o[i]);g(D)!=o&&c.move(fa(D.clone),null,wc(F)),F=h(D)}else t=d.$new();t[v]=y,w&&(t[w]=u),t.$index=l,t.$first=0===l,t.$last=l===p-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&l)),D.scope||n(t,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+x+" "),c.enter(a,null,wc(F)),F=a,D.scope=t,D.clone=a,G[D.id]=D})}A=G})}}}],te=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[S(b)?"removeClass":"addClass"](c,"ng-hide")})}}],ue=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[S(b)?"addClass":"removeClass"](c,"ng-hide")})}}],ve=dc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),we=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g=d.ngSwitch||d.on,h=[],i=[],j=[],k=[];b.$watch(g,function(c){var g,l;for(g=0,l=j.length;l>g;++g)j[g].remove();for(j.length=0,g=0,l=k.length;l>g;++g){var m=i[g];k[g].$destroy(),j[g]=m,a.leave(m,function(){j.splice(g,1)})}i.length=0,k.length=0,(h=e.cases["!"+c]||e.cases["?"])&&(b.$eval(d.change),f(h,function(c){var d=b.$new();k.push(d),c.transclude(d,function(b){var d=c.element;i.push(b),a.enter(b,d.parent(),d)})}))})}}}],xe=dc({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),ye=dc({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),ze=dc({link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Ae=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Be=d("ngOptions"),Ce=q({terminal:!0}),De=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){da(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Ea(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Fa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){L(d,c.$viewValue)||(d=K(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a=!1;if(t){var c=h.$modelValue;if(z&&Gc(c)){a=new Fa([]);for(var d={},e=0;e<c.length;e++)d[m]=c[e],a.put(z(b,d),c[e])}else a=new Fa(c)}return a}function j(){var a,c,d,e,j,k,u,y,B,C,D,E,F,G,H,I={"":[]},J=[""],K=h.$modelValue,L=r(b)||[],M=n?g(L):L,N={},O=i();for(D=0;B=M.length,B>D;D++){if(u=D,n){if(u=M[D],"$"===u.charAt(0))continue;N[n]=u}if(N[m]=L[u],a=o(b,N)||"",(c=I[a])||(c=I[a]=[],J.push(a)),t)E=s(O.remove(z?z(b,N):q(b,N)));else{if(z){var P={};P[m]=K,E=z(b,P)===z(b,N)}else E=K===q(b,N);O=O||E}H=l(b,N),H=s(H)?H:"",c.push({id:z?z(b,N):n?M[D]:D,label:H,selected:E})}for(t||(v||null===K?I[""].unshift({id:"",label:"",selected:!O}):O||I[""].unshift({id:"?",label:"",selected:!0})),C=0,y=J.length;y>C;C++){for(a=J[C],c=I[a],A.length<=C?(e={element:x.clone().attr("label",a),label:c.label},j=[e],A.push(j),f.append(e.element)):(j=A[C],e=j[0],e.label!=a&&e.element.attr("label",e.label=a)),F=null,D=0,B=c.length;B>D;D++)d=c[D],(k=j[D+1])?(F=k.element,k.label!==d.label&&(F.text(k.label=d.label),F.prop("label",k.label)),k.id!==d.id&&F.val(k.id=d.id),F[0].selected!==d.selected&&(F.prop("selected",k.selected=d.selected),vc&&F.prop("selected",k.selected))):(""===d.id&&v?G=v:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),j.push(k={element:G,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,G),F?F.after(G):e.element.append(G),F=G);for(D++;j.length>D;)d=j.pop(),p.removeOption(d.label),d.element.remove()}for(;A.length>C;)A.pop()[0].element.remove()}var k;if(!(k=u.match(e)))throw Be("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(f));var l=d(k[2]||k[1]),m=k[4]||k[6],n=k[5],o=d(k[3]||""),q=d(k[2]?k[1]:m),r=d(k[7]),y=k[8],z=y?d(k[8]):null,A=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.empty(),f.on("change",function(){b.$apply(function(){var a,d,e,g,i,k,l,o,p,s=r(b)||[],u={};if(t){for(e=[],k=0,o=A.length;o>k;k++)for(a=A[k],i=1,l=a.length;l>i;i++)if((g=a[i].element)[0].selected){if(d=g.val(),n&&(u[n]=d),z)for(p=0;p<s.length&&(u[m]=s[p],z(b,u)!=d);p++);else u[m]=s[d];e.push(q(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""===d)e=null;else if(z){for(p=0;p<s.length;p++)if(u[m]=s[p],z(b,u)==d){e=q(b,u);break}}else u[m]=s[d],n&&(u[n]=d),e=q(b,u);h.$setViewValue(e),j()})}),h.$render=j,b.$watchCollection(r,j),b.$watchCollection(function(){var a={},c=r(b);if(c){for(var d=new Array(c.length),e=0,f=c.length;f>e;e++)a[m]=c[e],d[e]=l(b,a);return d}},j),t&&b.$watchCollection(function(){return h.$modelValue},j)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=wc(b.createElement("option")),x=wc(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=v=A.eq(z);break}p.init(q,v,y),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Ee=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Fe=q({restrict:"E",terminal:!0});return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(aa(),ha(Ec),void wc(b).ready(function(){Z(b,$)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(a,b,c){"use strict";function d(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(){var a=n(),d=q.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!p?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(p=!1,c.$broadcast("$routeChangeStart",a,d),q.current=a,a&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(o(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==q.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==q.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function n(){var c,f;return b.forEach(d,function(d,g){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p=!1,q={routes:d,reload:function(){p=!0,c.$evalAsync(m)}};return c.$on("$locationChangeSuccess",m),q}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(n.remove(),n=null),l&&(l.$destroy(),l=null),m&&(d.leave(m,function(){n=null}),n=m,m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f,function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var h=b.module("ngRoute",["ng"]).provider("$route",d);h.provider("$routeParams",e),h.directive("ngView",f),h.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){b(c.offsetWidth)})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==m)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j=b.noop,k=b.forEach,l=e.$$selectors,m=1,n="$$ngAnimateState",o="$$ngAnimateChildren",p="ng-animate",q={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(a,c,d,m,r,s,t){function u(a){var b=a.data(n)||{};b.running=!0,a.data(n,b)}function v(a){if(a){var b=[],e={},f=a.substr(1).split(".");(d.transitions||d.animations)&&b.push(c.get(l[""]));for(var g=0;g<f.length;g++){var h=f[g],i=l[h];i&&!e[h]&&(b.push(c.get(i)),e[h]=!0)}return b}}function w(a,c,d){function e(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),u.push({event:b,fn:c}),r.push({event:b,fn:d}),!0):void 0}function f(b,c,e){function f(a){if(c){if((c[a]||j)(),++l<g.length)return;c=null}e()}var g=[];k(b,function(a){a.fn&&g.push(a)});var l=0;k(g,function(b,e){var g=function(){f(e)};switch(b.event){case"setClass":c.push(b.fn(a,h,i,g));break;case"addClass":c.push(b.fn(a,h||d,g));break;case"removeClass":c.push(b.fn(a,i||d,g));break;default:c.push(b.fn(a,g))}}),c&&0===c.length&&e()}var g=a[0];if(g){var h,i,l="setClass"==c,m=l||"addClass"==c||"removeClass"==c;b.isArray(d)&&(h=d[0],i=d[1],d=h+" "+i);var n=a.attr("class"),o=n+" "+d;if(D(o)){var p=j,q=[],r=[],s=j,t=[],u=[],w=(" "+o).replace(/\s+/g,".");return k(v(w),function(a){var b=e(a,c);!b&&l&&(e(a,"addClass"),e(a,"removeClass"))}),{node:g,event:c,className:d,isClassBased:m,isSetClassOperation:l,before:function(a){p=a,f(r,q,function(){p=j,a()})},after:function(a){s=a,f(u,t,function(){s=j,a()})},cancel:function(){q&&(k(q,function(a){(a||j)(!0)}),p(!0)),t&&(k(t,function(a){(a||j)(!0)}),s(!0))}}}}}function x(a,c,d,e,f,g,h){function i(b){var e="$animate:"+b;t&&t[e]&&t[e].length>0&&r(function(){d.triggerHandler(e,{event:a,className:c})})}function j(){i("before")}function l(){i("after")}function m(){i("close"),h&&r(function(){h()})}function o(){o.hasBeenRun||(o.hasBeenRun=!0,g())}function q(){if(!q.hasBeenRun){q.hasBeenRun=!0;var b=d.data(n);b&&(s&&s.isClassBased?z(d,c):(r(function(){var b=d.data(n)||{};H==b.index&&z(d,c,a)}),d.data(n,b))),m()}}var s=w(d,a,c);if(!s)return o(),j(),l(),void q();c=s.className;var t=b.element._data(s.node);t=t&&t.events,e||(e=f?f.parent():d.parent());var u,v=d.data(n)||{},x=v.active||{},y=v.totalActive||0,C=v.last;if(s.isClassBased&&(u=v.running||v.disabled||C&&!C.isClassBased),u||A(d,e))return o(),j(),l(),void q();var D=!1;if(y>0){var E=[];if(s.isClassBased){if("setClass"==C.event)E.push(C),z(d,c);else if(x[c]){var F=x[c];F.event==a?D=!0:(E.push(F),z(d,c))}}else if("leave"==a&&x["ng-leave"])D=!0;else{for(var G in x)E.push(x[G]),z(d,G);x={},y=0}E.length>0&&k(E,function(a){a.cancel()})}if(!s.isClassBased||s.isSetClassOperation||D||(D="addClass"==a==d.hasClass(c)),D)return o(),j(),l(),void m();"leave"==a&&d.one("$destroy",function(a){var c=b.element(this),d=c.data(n);if(d){var e=d.active["ng-leave"];e&&(e.cancel(),z(c,"ng-leave"))}}),d.addClass(p);var H=B++;y++,x[c]=s,d.data(n,{last:s,active:x,index:H,totalActive:y}),j(),s.before(function(b){var e=d.data(n);b=b||!e||!e.active[c]||s.isClassBased&&e.active[c].event!=a,o(),b===!0?q():(l(),s.after(q))})}function y(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(p):c.querySelectorAll("."+p);k(d,function(a){a=b.element(a);var c=a.data(n);c&&c.active&&k(c.active,function(a){a.cancel()})})}}function z(a,b){if(i(a,m))q.disabled||(q.running=!1,q.structural=!1);else if(b){var c=a.data(n)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass(p),a.removeData(n))}}function A(a,c){if(q.disabled)return!0;if(i(a,m))return q.running;var d,e,f;do{if(0===c.length)break;var g=i(c,m),h=g?q:c.data(n)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(o);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}var B=0;m.data(n,q),s.$$postDigest(function(){s.$$postDigest(function(){q.running=!1})});var C=e.classNameFilter(),D=C?function(a){return C.test(a)}:function(){return!0};return{enter:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),u(c),a.enter(c,d,e),s.$$postDigest(function(){c=h(c),x("enter","ng-enter",c,d,e,j,f)})},leave:function(c,d){c=b.element(c),y(c),u(c),s.$$postDigest(function(){x("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d)})},move:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),y(c),u(c),a.move(c,d,e),s.$$postDigest(function(){c=h(c),x("move","ng-move",c,d,e,j,f)})},addClass:function(c,d,e){c=b.element(c),c=h(c),x("addClass",d,c,null,null,function(){a.addClass(c,d)},e)},removeClass:function(c,d,e){c=b.element(c),c=h(c),x("removeClass",d,c,null,null,function(){a.removeClass(c,d)},e)},setClass:function(c,d,e,f){c=b.element(c),c=h(c),x("setClass",[d,e],c,null,null,function(){a.setClass(c,d,e)},f)},enabled:function(a,b){switch(arguments.length){case 2:if(a)z(b);else{var c=b.data(n)||{};c.disabled=!0,b.data(n,c)}break;case 1:q.disabled=!a;break;default:a=!q.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){K||(K=h(function(){X=[],K=null,V={}}))}function l(a,b){K&&K(),X.push(b),K=h(function(){k(X,function(a){a()}),X=[],K=null,V={}})}function n(a,c){var d=f(a);a=b.element(d),$.push(a);var e=Date.now()+c;Z>=e||(g.cancel(Y),Z=e,Y=g(function(){o($),$=[]},c,!1))}function o(a){k(a,function(a){var b=a.data(Q);b&&(b.closeAnimationFn||j)()})}function p(a,b){var c=b?V[b]:null;if(!c){var e,f,g,h,i=0,j=0,l=0,n=0;k(a,function(a){if(a.nodeType==m){var b=d.getComputedStyle(a)||{};g=b[F+L],i=Math.max(q(g),i),h=b[F+M],e=b[F+N],j=Math.max(q(e),j),f=b[H+N],n=Math.max(q(f),n);var c=q(b[H+L]);c>0&&(c*=parseInt(b[H+O],10)||1),l=Math.max(c,l)}}),c={total:0,transitionPropertyStyle:h,transitionDurationStyle:g,transitionDelayStyle:e,transitionDelay:j,transitionDuration:i,animationDelayStyle:f,animationDelay:n,animationDuration:l},b&&(V[b]=c)}return c}function q(a){var c=0,d=b.isString(a)?a.split(/\s*,\s*/):[];return k(d,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function r(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++W),c=W),c+"-"+f(a).getAttribute("class")}function s(a,b,c,d){var e=r(b),f=e+" "+c,g=V[f]?++V[f].total:0,h={};if(g>0){var i=c+"-stagger",k=e+" "+i,l=!V[k];l&&b.addClass(i),h=p(b,k),l&&b.removeClass(i)}d=d||function(a){return a()},b.addClass(c);var m=b.data(Q)||{},n=d(function(){return p(b,f)}),o=n.transitionDuration,q=n.animationDuration;if(0===o&&0===q)return b.removeClass(c),!1;b.data(Q,{running:m.running||0,itemIndex:g,stagger:h,timings:n,closeAnimationFn:j});var s=m.running>0||"setClass"==a;return o>0&&u(b,c,s),q>0&&h.animationDelay>0&&0===h.animationDuration&&v(b),!0}function t(a){return"ng-enter"==a||"ng-move"==a||"ng-leave"==a}function u(a,b,c){t(b)||!c?f(a).style[F+M]="none":a.addClass(R)}function v(a){f(a).style[H]="none 0s"}function w(a,b){var c=F+M,d=f(a);d.style[c]&&d.style[c].length>0&&(d.style[c]=""),a.removeClass(R)}function x(a){var b=H,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]="")}function y(a,b,c,d){function e(a){b.off(t,g),b.removeClass(j),D(b,c);var d=f(b);for(var e in v)d.style.removeProperty(v[e])}function g(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(S));Math.max(c-s,0)>=r&&e>=p&&d()}var h=f(b),i=b.data(Q);if(-1==h.getAttribute("class").indexOf(c)||!i)return void d();var j="";k(c.split(" "),function(a,b){j+=(b>0?" ":"")+a+"-active"});var l=i.stagger,m=i.timings,o=i.itemIndex,p=Math.max(m.transitionDuration,m.animationDuration),q=Math.max(m.transitionDelay,m.animationDelay),r=q*U,s=Date.now(),t=I+" "+G,u="",v=[];if(m.transitionDuration>0){var w=m.transitionPropertyStyle;-1==w.indexOf("all")&&(u+=J+"transition-property: "+w+";",u+=J+"transition-duration: "+m.transitionDurationStyle+";",v.push(J+"transition-property"),v.push(J+"transition-duration"))}if(o>0){if(l.transitionDelay>0&&0===l.transitionDuration){var x=m.transitionDelayStyle;u+=J+"transition-delay: "+z(x,l.transitionDelay,o)+"; ",v.push(J+"transition-delay")}l.animationDelay>0&&0===l.animationDuration&&(u+=J+"animation-delay: "+z(m.animationDelayStyle,l.animationDelay,o)+"; ",v.push(J+"animation-delay"))}if(v.length>0){var y=h.getAttribute("style")||"";h.setAttribute("style",y+"; "+u)}b.on(t,g),b.addClass(j),i.closeAnimationFn=function(){e(),d()};var A=o*(Math.max(l.animationDelay,l.transitionDelay)||0),B=(q+p)*T,C=(A+B)*U;return i.running++,n(b,C),e}function z(a,b,c){var d="";return k(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function A(a,b,c,d){return s(a,b,c,d)?function(a){a&&D(b,c)}:void 0}function B(a,b,c,d){return b.data(Q)?y(a,b,c,d):(D(b,c),void d())}function C(a,b,c,d){var e=A(a,b,c);if(!e)return i(),void d();var f=e;return l(b,function(){w(b,c),x(b),f=B(a,b,c,d)}),function(a){(f||j)(a)}}function D(a,b){a.removeClass(b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function E(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),k(a,function(a,b){a&&a.length>0&&(d+=(b>0?" ":"")+a+c)}),d}var F,G,H,I,J="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(J="-webkit-",F="WebkitTransition",G="webkitTransitionEnd transitionend"):(F="transition",G="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(J="-webkit-",H="WebkitAnimation",I="webkitAnimationEnd animationend"):(H="animation",I="animationend");var K,L="Duration",M="Property",N="Delay",O="IterationCount",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R="ng-animate-block-transitions",S=3,T=1.5,U=1e3,V={},W=0,X=[],Y=null,Z=0,$=[];return{enter:function(a,b){return C("enter",a,"ng-enter",b)},leave:function(a,b){return C("leave",a,"ng-leave",b)},move:function(a,b){return C("move",a,"ng-move",b)},beforeSetClass:function(a,b,c,d){var e=E(c,"-remove")+" "+E(b,"-add"),f=A("setClass",a,e,function(d){var e=a.attr("class");a.removeClass(c),a.addClass(b);var f=d();return a.attr("class",e),f});return f?(l(a,function(){w(a,e),x(a),d()}),f):(i(),void d())},beforeAddClass:function(a,b,c){var d=A("addClass",a,E(b,"-add"),function(c){a.addClass(b);var d=c();return a.removeClass(b),d});return d?(l(a,function(){w(a,b),x(a),c()}),d):(i(),void c())},setClass:function(a,b,c,d){c=E(c,"-remove"),b=E(b,"-add");var e=c+" "+b;return B("setClass",a,e,d)},addClass:function(a,b,c){return B("addClass",a,E(b,"-add"),c)},beforeRemoveClass:function(a,b,c){var d=A("removeClass",a,E(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);var e=c();return a.attr("class",d),e});return d?(l(a,function(){w(a,b),x(a),c()}),d):void c()},removeClass:function(a,b,c){return B("removeClass",a,E(b,"-remove"),c)}}}])}])}(window,window.angular),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(a,d){function h(a){return i(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function i(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function j(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function k(h,i,r){function s(a,b){var c={};return b=o({},i,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function t(a){return a.resource}function u(a){f(a||{},this)}var v=new j(h);return r=o({},l,r),n(r,function(e,h){var i=/^(POST|PUT|PATCH)$/i.test(e.method);u[h]=function(h,j,k,l){var r,w,x,y={};switch(arguments.length){case 4:x=l,w=k;case 3:case 2:if(!q(j)){y=h,r=j,w=k;break}if(q(h)){w=h,x=j;break}w=j,x=k;case 1:q(h)?w=h:i?r=h:y=h;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var z=this instanceof u,A=z?r:e.isArray?[]:new u(r),B={},C=e.interceptor&&e.interceptor.response||t,D=e.interceptor&&e.interceptor.responseError||c;n(e,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(B[b]=p(a))}),i&&(B.data=r),v.setUrlParams(B,o({},s(r,e.params||{}),y),e.url);var E=a(B).then(function(a){var c=a.data,d=A.$promise;if(c){if(b.isArray(c)!==!!e.isArray)throw g("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",e.isArray?"array":"object",b.isArray(c)?"array":"object");e.isArray?(A.length=0,
n(c,function(a){"object"==typeof a?A.push(new u(a)):A.push(a)})):(f(c,A),A.$promise=d)}return A.$resolved=!0,a.resource=A,a},function(a){return A.$resolved=!0,(x||m)(a),d.reject(a)});return E=E.then(function(a){var b=C(a);return(w||m)(b,a.headers),b},D),z?E:(A.$promise=E,A.$resolved=!1,A)},u.prototype["$"+h]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=u[h].call(this,a,this,b,c);return d.$promise||d}}),u.bind=function(a){return k(h,o({},i,a),r)},u}var l={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return j.prototype={setUrlParams:function(a,c,d){var e,f,i=this,j=d||i.template,k=i.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(i.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:i.defaults[d],b.isDefined(e)&&null!==e?(f=h(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),j=j.replace(/\/+$/,"")||"/",j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){i.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},k}])}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a,b){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c,d){function e(){f();var c=+a.interval;!isNaN(c)&&c>=0&&(h=b(g,c))}function f(){h&&(b.cancel(h),h=null)}function g(){i?(a.next(),e()):a.pause()}var h,i,j=this,k=j.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=function(d,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&d.$element){d.$element.addClass(f);d.$element[0].offsetWidth;angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(d,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(d.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(d,j.currentSlide)}else h(d,j.currentSlide);j.currentSlide=d,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(d);void 0===f&&(f=i>l?"next":"prev"),d&&d!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.select=function(a){j.select(a)},a.isActive=function(a){return j.currentSlide===a},a.slides=function(){return k},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?b>=k.length?j.select(k[b-1]):j.select(k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a,b){var c=null,d=angular.noop;return{restrict:"CA",link:function(b,e,f){b.$watch("$location.path",function(){d()}),e.parent().bind("click",function(){d()}),e.bind("click",function(b){var f=e===c;b.preventDefault(),b.stopPropagation(),c&&d(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),c=e,d=function(b){b&&(b.preventDefault(),b.stopPropagation()),a.unbind("click",d),e.parent().removeClass("open"),d=angular.noop,c=null},a.bind("click",d))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a,e){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(a,b){var c=f(s);return function(a,b,d){function f(){a.tt_isOpen?m():k()}function k(){(!z||a.$eval(d[l+"Enable"]))&&(a.tt_popupDelay?(v=g(p,a.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){a.$apply(function(){q()})}function p(){return a.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):b.after(t),A(),a.tt_isOpen=!0,a.$digest(),A):angular.noop}function q(){a.tt_isOpen=!1,g.cancel(v),a.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=c(a,function(){}),a.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var c,d,e,f;switch(c=w?j.offset(b):j.position(b),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),a.tt_placement){case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};a.tt_isOpen=!1,d.$observe(e,function(b){a.tt_content=b,!b&&a.tt_isOpen&&q()}),d.$observe(l+"Title",function(b){a.tt_title=b}),d.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),d.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(b.unbind(x.show,k),b.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?b.bind(x.show,f):(b.bind(x.show,k),b.bind(x.hide,m)),y=!0});var C=a.$eval(d[l+"Animation"]);a.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(b){w=angular.isDefined(b)?h(b)(a):w}),w&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&q()}),a.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g);
}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=angular.isDefined(b.ratingStates)?this.createRateObjects(angular.copy(a.$parent.$eval(b.ratingStates))):this.createRateObjects(new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(a){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(a){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(a){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(a,b){b=b||{},angular.forEach(b,function(b,c){angular.isString(b)&&(b={replace:!0,template:b}),a.directive(c,function(){return b})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(a){return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),f(b,{$event:a,$params:c}),b.$$phase||b.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(a,b){var c=a;if(angular.isString(c)&&void 0!==b)if(angular.isArray(b)||angular.isObject(b)||(b=[b]),angular.isArray(b)){var d=b.length,e=function(a,c){return c=parseInt(c,10),c>=0&&d>c?b[c]:a};c=c.replace(/\$([0-9]+)/g,e)}else angular.forEach(b,function(a,b){c=c.split(":"+b).join(a)});return c}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(a,b,c,d){return{restrict:"ECA",terminal:!0,compile:function(e,f){var g=f.uiInclude||f.src,h=f.fragment||"",i=f.onload||"",j=f.autoscroll;return function(e,f){function k(){var k=++m,o=e.$eval(g),p=e.$eval(h);o?a.get(o,{cache:b}).success(function(a){if(k===m){l&&l.$destroy(),l=e.$new();var b;b=p?angular.element("<div/>").html(a).find(p):angular.element("<div/>").html(a).contents(),f.html(b),d(b)(l),!angular.isDefined(j)||j&&!e.$eval(j)||c(),l.$emit("$includeContentLoaded"),e.$eval(i)}}).error(function(){k===m&&n()}):n()}var l,m=0,n=function(){l&&(l.$destroy(),l=null),f.html("")};e.$watch(h,k),e.$watch(g,k)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(a,b){return b.type&&"checkbox"===b.type.toLowerCase()?function(a,b,c){a.$watch(c.uiIndeterminate,function(a){b[0].indeterminate=!!a})}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}var c={humanize:function(c){return a(b(c," ").split("_").join(" "))},underscore:function(a){return a.substr(0,1).toLowerCase()+b(a.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(b){return b=b.substr(0,1).toLowerCase()+a(b.split("_").join(" ")).substr(1).split(" ").join("")}};return function(a,b){return b!==!1&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(a,b){return{restrict:"A",compile:function(c,d){if(!angular.isFunction(c[d.uiJq]))throw new Error('ui-jq: The "'+d.uiJq+'" function does not exist');var e=a&&a[d.uiJq];return function(a,c,d){function f(){b(function(){c[d.uiJq].apply(c,g)},0,!1)}var g=[];d.uiOptions?(g=a.$eval("["+d.uiOptions+"]"),angular.isObject(e)&&angular.isObject(g[0])&&(g[0]=angular.extend({},e,g[0]))):e&&(g=[e]),d.ngModel&&c.is("select,input,textarea")&&c.bind("change",function(){c.trigger("input")}),d.uiRefresh&&a.$watch(d.uiRefresh,function(){f()}),f()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(a){var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=!(!a.metaKey||a.ctrlKey),f=!!a.altKey,g=!!a.ctrlKey,h=!!a.shiftKey,j=a.keyCode;"keypress"===d&&!h&&j>=97&&122>=j&&(j-=32),angular.forEach(i,function(d){var i=d.keys[b[j]]||d.keys[j.toString()],k=!!d.keys.meta,l=!!d.keys.alt,m=!!d.keys.ctrl,n=!!d.keys.shift;i&&k===c&&l===f&&m===g&&n===h&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(a){return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(a){return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(a){return{link:function(b,c,d){a("keyup",b,c,d)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(a){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var b=a;return function(a,c,d,e){function f(a){return angular.isDefined(a)?(s(a),N?(k(),l(),!0):j()):j()}function g(a){angular.isDefined(a)&&(D=a,N&&w())}function h(a){return N?(G=o(a||""),I=n(G),e.$setValidity("mask",I),I&&G.length?p(G):void 0):a}function i(a){return N?(G=o(a||""),I=n(G),e.$viewValue=G.length?p(G):"",e.$setValidity("mask",I),""===G&&void 0!==e.$error.required&&e.$setValidity("required",!1),I?G:void 0):a}function j(){return N=!1,m(),angular.isDefined(P)?c.attr("placeholder",P):c.removeAttr("placeholder"),angular.isDefined(Q)?c.attr("maxlength",Q):c.removeAttr("maxlength"),c.val(e.$modelValue),e.$viewValue=e.$modelValue,!1}function k(){G=K=o(e.$modelValue||""),H=J=p(G),I=n(G);var a=I&&G.length?H:"";d.maxlength&&c.attr("maxlength",2*B[B.length-1]),c.attr("placeholder",D),c.val(a),e.$viewValue=a}function l(){O||(c.bind("blur",t),c.bind("mousedown mouseup",u),c.bind("input keyup click focus",w),O=!0)}function m(){O&&(c.unbind("blur",t),c.unbind("mousedown",u),c.unbind("mouseup",u),c.unbind("input",w),c.unbind("keyup",w),c.unbind("click",w),c.unbind("focus",w),O=!1)}function n(a){return a.length?a.length>=F:!0}function o(a){var b="",c=C.slice();return a=a.toString(),angular.forEach(E,function(b){a=a.replace(b,"")}),angular.forEach(a.split(""),function(a){c.length&&c[0].test(a)&&(b+=a,c.shift())}),b}function p(a){var b="",c=B.slice();return angular.forEach(D.split(""),function(d,e){a.length&&e===c[0]?(b+=a.charAt(0)||"_",a=a.substr(1),c.shift()):b+=d}),b}function q(a){var b=d.placeholder;return"undefined"!=typeof b&&b[a]?b[a]:"_"}function r(){return D.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function s(a){var b=0;if(B=[],C=[],D="","string"==typeof a){F=0;var c=!1,d=a.split("");angular.forEach(d,function(a,d){R.maskDefinitions[a]?(B.push(b),D+=q(d),C.push(R.maskDefinitions[a]),b++,c||F++):"?"===a?c=!0:(D+=a,b++)})}B.push(B.slice().pop()+1),E=r(),N=B.length>1?!0:!1}function t(){L=0,M=0,I&&0!==G.length||(H="",c.val(""),a.$apply(function(){e.$setViewValue("")}))}function u(a){"mousedown"===a.type?c.bind("mouseout",v):c.unbind("mouseout",v)}function v(){M=A(this),c.unbind("mouseout",v)}function w(b){b=b||{};var d=b.which,f=b.type;if(16!==d&&91!==d){var g,h=c.val(),i=J,j=o(h),k=K,l=!1,m=y(this)||0,n=L||0,q=m-n,r=B[0],s=B[j.length]||B.slice().shift(),t=M||0,u=A(this)>0,v=t>0,w=h.length>i.length||t&&h.length>i.length-t,C=h.length<i.length||t&&h.length===i.length-t,D=d>=37&&40>=d&&b.shiftKey,E=37===d,F=8===d||"keyup"!==f&&C&&-1===q,G=46===d||"keyup"!==f&&C&&0===q&&!v,H=(E||F||"click"===f)&&m>r;if(M=A(this),!D&&(!u||"click"!==f&&"keyup"!==f)){if("input"===f&&C&&!v&&j===k){for(;F&&m>r&&!x(m);)m--;for(;G&&s>m&&-1===B.indexOf(m);)m++;var I=B.indexOf(m);j=j.substring(0,I)+j.substring(I+1),l=!0}for(g=p(j),J=g,K=j,c.val(g),l&&a.$apply(function(){e.$setViewValue(j)}),w&&r>=m&&(m=r+1),H&&m--,m=m>s?s:r>m?r:m;!x(m)&&m>r&&s>m;)m+=H?-1:1;(H&&s>m||w&&!x(n))&&m++,L=m,z(this,m)}}}function x(a){return B.indexOf(a)>-1}function y(a){if(!a)return 0;if(void 0!==a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();return b.moveStart("character",-a.value.length),b.text.length}return 0}function z(a,b){if(!a)return 0;if(0!==a.offsetWidth&&0!==a.offsetHeight)if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function A(a){return a?void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var B,C,D,E,F,G,H,I,J,K,L,M,N=!1,O=!1,P=d.placeholder,Q=d.maxlength,R={};d.uiOptions?(R=a.$eval("["+d.uiOptions+"]"),angular.isObject(R[0])&&(R=function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]?angular.extend(b[c],a[c]):b[c]=angular.copy(a[c]));return b}(b,R[0]))):R=b,d.$observe("uiMask",f),d.$observe("placeholder",g),e.$formatters.push(h),e.$parsers.push(i),c.bind("mousedown mouseup",u),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(a){var b=null;return void 0!==a&&(b=a),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),
f.bind("click",function(c){c.preventDefault(),a.$apply(function(){d.uiReset?e.$setViewValue(a.$eval(d.uiReset)):e.$setViewValue(b),e.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(a,b){return{restrict:"AC",scope:!0,compile:function(c,d){var e;if(d.uiRoute)e="uiRoute";else if(d.ngHref)e="ngHref";else{if(!d.href)throw new Error("uiRoute missing a route or href property on "+c[0]);e="href"}return function(c,d,f){function g(b){var d=b.indexOf("#");d>-1&&(b=b.substr(d+1)),(j=function(){i(c,a.path().indexOf(b)>-1)})()}function h(b){var d=b.indexOf("#");d>-1&&(b=b.substr(d+1)),(j=function(){var d=new RegExp("^"+b+"$",["i"]);i(c,d.test(a.path()))})()}var i=b(f.ngModel||f.routeModel||"$uiRoute").assign,j=angular.noop;switch(e){case"uiRoute":f.uiRoute?h(f.uiRoute):f.$observe("uiRoute",h);break;case"ngHref":f.ngHref?g(f.ngHref):f.$observe("ngHref",g);break;case"href":g(f.href)}c.$on("$routeChangeSuccess",function(){j()}),c.$on("$stateChangeSuccess",function(){j()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(a,b){return{registerFor:function(a){var c,d,e,f,g,h,i;return d=angular.element.prototype.css,a.prototype.css=function(a,b){var c,e;return e=this,c=e[0],c&&3!==c.nodeType&&8!==c.nodeType&&c.style?d.call(e,a,b):void 0},h=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},i=function(a,b,c){var d,e,f,g,i;return d=a[0],i={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[b],e=i[0],g=i[1],f=i[2],h(d)?angular.isDefined(c)?d.scrollTo(a[f].call(a),c):g in d?d[g]:d.document.documentElement[e]:angular.isDefined(c)?d[e]=c:d[e]},b.getComputedStyle?(f=function(a){return b.getComputedStyle(a,null)},c=function(a,b){return parseFloat(b)}):(f=function(a){return a.currentStyle},c=function(a,b){var c,d,e,f,g,h,i;return c=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,f=new RegExp("^("+c+")(?!px)[a-z%]+$","i"),f.test(b)?(i=a.style,d=i.left,g=a.runtimeStyle,h=g&&g.left,g&&(g.left=i.left),i.left=b,e=i.pixelLeft,i.left=d,h&&(g.left=h),e):parseFloat(b)}),e=function(a,b){var d,e,g,i,j,k,l,m,n,o,p,q,r;return h(a)?(d=document.documentElement[{height:"clientHeight",width:"clientWidth"}[b]],{base:d,padding:0,border:0,margin:0}):(r={width:[a.offsetWidth,"Left","Right"],height:[a.offsetHeight,"Top","Bottom"]}[b],d=r[0],l=r[1],m=r[2],k=f(a),p=c(a,k["padding"+l])||0,q=c(a,k["padding"+m])||0,e=c(a,k["border"+l+"Width"])||0,g=c(a,k["border"+m+"Width"])||0,i=k["margin"+l],j=k["margin"+m],n=c(a,i)||0,o=c(a,j)||0,{base:d,padding:p+q,border:e+g,margin:n+o})},g=function(a,b,c){var d,g,h;return g=e(a,b),g.base>0?{base:g.base-g.padding-g.border,outer:g.base,outerfull:g.base+g.margin}[c]:(d=f(a),h=d[b],(0>h||null===h)&&(h=a.style[b]||0),h=parseFloat(h)||0,{base:h-g.padding-g.border,outer:h,outerfull:h+g.padding+g.border+g.margin}[c])},angular.forEach({before:function(a){var b,c,d,e,f,g,h;if(f=this,c=f[0],e=f.parent(),b=e.contents(),b[0]===c)return e.prepend(a);for(d=g=1,h=b.length-1;h>=1?h>=g:g>=h;d=h>=1?++g:--g)if(b[d]===c)return void angular.element(b[d-1]).after(a);throw new Error("invalid DOM structure "+c.outerHTML)},height:function(a){var b;return b=this,angular.isDefined(a)?(angular.isNumber(a)&&(a+="px"),d.call(b,"height",a)):g(this[0],"height","base")},outerHeight:function(a){return g(this[0],"height",a?"outerfull":"outer")},offset:function(a){var b,c,d,e,f,g;return f=this,arguments.length?void 0===a?f:a:(b={top:0,left:0},e=f[0],(c=e&&e.ownerDocument)?(d=c.documentElement,e.getBoundingClientRect&&(b=e.getBoundingClientRect()),g=c.defaultView||c.parentWindow,{top:b.top+(g.pageYOffset||d.scrollTop)-(d.clientTop||0),left:b.left+(g.pageXOffset||d.scrollLeft)-(d.clientLeft||0)}):void 0)},scrollTop:function(a){return i(this,"top",a)},scrollLeft:function(a){return i(this,"left",a)}},function(b,c){return a.prototype[c]?void 0:a.prototype[c]=b})}}}]).run(["$log","$window","jqLiteExtras",function(a,b,c){return b.jQuery?void 0:c.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("ngScrollViewport",["$log",function(){return{controller:["$scope","$element",function(a,b){return b}]}}]).directive("ngScroll",["$log","$injector","$rootScope","$timeout",function(a,b,c,d){return{require:["?^ngScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(e,f,g){return function(f,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;if(H=i.ngScroll.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/),!H)throw new Error('Expected ngScroll in form of "item_ in _datasource_" but got "'+i.ngScroll+'"');if(F=H[1],v=H[2],D=function(a){return angular.isObject(a)&&a.get&&angular.isFunction(a.get)},u=f[v],!D(u)&&(u=b.get(v),!D(u)))throw new Error(v+" is not a valid datasource");return r=Math.max(3,+i.bufferSize||10),q=function(){return T.height()*Math.max(.1,+i.padding||.1)},O=function(a){return a[0].scrollHeight||a[0].document.documentElement.scrollHeight},k=null,g(R=f.$new(),function(a){var b,c,d,f,g,h;if(f=a[0].localName,"dl"===f)throw new Error("ng-scroll directive does not support <"+a[0].localName+"> as a repeating tag: "+a[0].outerHTML);return"li"!==f&&"tr"!==f&&(f="div"),h=j[0]||angular.element(window),h.css({"overflow-y":"auto",display:"block"}),d=function(a){var b,c,d;switch(a){case"tr":return d=angular.element("<table><tr><td><div></div></td></tr></table>"),b=d.find("div"),c=d.find("tr"),c.paddingHeight=function(){return b.height.apply(b,arguments)},c;default:return c=angular.element("<"+a+"></"+a+">"),c.paddingHeight=c.height,c}},c=function(a,b,c){return b[{top:"before",bottom:"after"}[c]](a),{paddingHeight:function(){return a.paddingHeight.apply(a,arguments)},insert:function(b){return a[{top:"after",bottom:"before"}[c]](b)}}},g=c(d(f),e,"top"),b=c(d(f),e,"bottom"),R.$destroy(),k={viewport:h,topPadding:g.paddingHeight,bottomPadding:b.paddingHeight,append:b.insert,prepend:g.insert,bottomDataPos:function(){return O(h)-b.paddingHeight()},topDataPos:function(){return g.paddingHeight()}}}),T=k.viewport,B=1,I=1,p=[],J=[],x=!1,n=!1,G=u.loading||function(){},E=!1,L=function(a,b){var c,d;for(c=d=a;b>=a?b>d:d>b;c=b>=a?++d:--d)p[c].scope.$destroy(),p[c].element.remove();return p.splice(a,b-a)},K=function(){return B=1,I=1,L(0,p.length),k.topPadding(0),k.bottomPadding(0),J=[],x=!1,n=!1,l(!1)},o=function(){return T.scrollTop()+T.height()},S=function(){return T.scrollTop()},P=function(){return!x&&k.bottomDataPos()<o()+q()},s=function(){var b,c,d,e,f,g;for(b=0,e=0,c=f=g=p.length-1;(0>=g?0>=f:f>=0)&&(d=p[c].element.outerHeight(!0),k.bottomDataPos()-b-d>o()+q());c=0>=g?++f:--f)b+=d,e++,x=!1;return e>0?(k.bottomPadding(k.bottomPadding()+b),L(p.length-e,p.length),I-=e,a.log("clipped off bottom "+e+" bottom padding "+k.bottomPadding())):void 0},Q=function(){return!n&&k.topDataPos()>S()-q()},t=function(){var b,c,d,e,f,g;for(e=0,d=0,f=0,g=p.length;g>f&&(b=p[f],c=b.element.outerHeight(!0),k.topDataPos()+e+c<S()-q());f++)e+=c,d++,n=!1;return d>0?(k.topPadding(k.topPadding()+e),L(0,d),B+=d,a.log("clipped off top "+d+" top padding "+k.topPadding())):void 0},w=function(a,b){return E||(E=!0,G(!0)),1===J.push(a)?z(b):void 0},C=function(a,b){var c,d,e;return c=f.$new(),c[F]=b,d=a>B,c.$index=a,d&&c.$index--,e={scope:c},g(c,function(b){return e.element=b,d?a===I?(k.append(b),p.push(e)):(p[a-B].element.after(b),p.splice(a-B+1,0,e)):(k.prepend(b),p.unshift(e))}),{appended:d,wrapper:e}},m=function(a,b){var c;return a?k.bottomPadding(Math.max(0,k.bottomPadding()-b.element.outerHeight(!0))):(c=k.topPadding()-b.element.outerHeight(!0),c>=0?k.topPadding(c):T.scrollTop(T.scrollTop()+b.element.outerHeight(!0)))},l=function(b,c,e){var f;return f=function(){return a.log("top {actual="+k.topDataPos()+" visible from="+S()+" bottom {visible through="+o()+" actual="+k.bottomDataPos()+"}"),P()?w(!0,b):Q()&&w(!1,b),e?e():void 0},c?d(function(){var a,b,d;for(b=0,d=c.length;d>b;b++)a=c[b],m(a.appended,a.wrapper);return f()}):f()},A=function(a,b){return l(a,b,function(){return J.shift(),0===J.length?(E=!1,G(!1)):z(a)})},z=function(b){var c;return c=J[0],c?p.length&&!P()?A(b):u.get(I,r,function(c){var d,e,f,g;if(e=[],0===c.length)x=!0,k.bottomPadding(0),a.log("appended: requested "+r+" records starting from "+I+" recieved: eof");else{for(t(),f=0,g=c.length;g>f;f++)d=c[f],e.push(C(++I,d));a.log("appended: requested "+r+" received "+c.length+" buffer size "+p.length+" first "+B+" next "+I)}return A(b,e)}):p.length&&!Q()?A(b):u.get(B-r,r,function(c){var d,e,f,g;if(e=[],0===c.length)n=!0,k.topPadding(0),a.log("prepended: requested "+r+" records starting from "+(B-r)+" recieved: bof");else{for(s(),d=f=g=c.length-1;0>=g?0>=f:f>=0;d=0>=g?++f:--f)e.unshift(C(--B,c[d]));a.log("prepended: requested "+r+" received "+c.length+" buffer size "+p.length+" first "+B+" next "+I)}return A(b,e)})},M=function(){return c.$$phase||E?void 0:(l(!1),f.$apply())},T.bind("resize",M),N=function(){return c.$$phase||E?void 0:(l(!0),f.$apply())},T.bind("scroll",N),f.$watch(u.revision,function(){return K()}),y=u.scope?u.scope.$new():f.$new(),f.$on("$destroy",function(){return y.$destroy(),T.unbind("resize",M),T.unbind("scroll",N)}),y.$on("update.items",function(a,b,c){var d,e,f,g,h;if(angular.isFunction(b))for(e=function(a){return b(a.scope)},f=0,g=p.length;g>f;f++)d=p[f],e(d);else 0<=(h=b-B-1)&&h<p.length&&(p[b-B-1].scope[F]=c);return null}),y.$on("delete.items",function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o;if(angular.isFunction(b)){for(e=[],h=0,k=p.length;k>h;h++)d=p[h],e.unshift(d);for(g=function(a){return b(a.scope)?(L(e.length-1-c,e.length-c),I--):void 0},c=i=0,m=e.length;m>i;c=++i)f=e[c],g(f)}else 0<=(o=b-B-1)&&o<p.length&&(L(b-B-1,b-B),I--);for(c=j=0,n=p.length;n>j;c=++j)d=p[c],d.scope.$index=B+c;return l(!1)}),y.$on("insert.item",function(a,b,c){var d,e,f,g,h,i,j,k,m,n,o,q;if(e=[],angular.isFunction(b)){for(f=[],i=0,m=p.length;m>i;i++)c=p[i],f.unshift(c);for(h=function(a){var f,g,h,i,j;if(g=b(a.scope)){if(C=function(a,b){return C(a,b),I++},angular.isArray(g)){for(j=[],f=h=0,i=g.length;i>h;f=++h)c=g[f],j.push(e.push(C(d+f,c)));return j}return e.push(C(d,g))}},d=j=0,n=f.length;n>j;d=++j)g=f[d],h(g)}else 0<=(q=b-B-1)&&q<p.length&&(e.push(C(b,c)),I++);for(d=k=0,o=p.length;o>k;d=++k)c=p[d],c.scope.$index=B+d;return l(!1,e)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(a){return{require:"^?uiScrollfixTarget",link:function(b,c,d,e){function f(){var b;if(angular.isDefined(a.pageYOffset))b=a.pageYOffset;else{var e=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;b=e.scrollTop}!c.hasClass("ui-scrollfix")&&b>d.uiScrollfix?c.addClass("ui-scrollfix"):c.hasClass("ui-scrollfix")&&b<d.uiScrollfix&&c.removeClass("ui-scrollfix")}var g=c[0].offsetTop,h=e&&e.$element||angular.element(a);d.uiScrollfix?"string"==typeof d.uiScrollfix&&("-"===d.uiScrollfix.charAt(0)?d.uiScrollfix=g-parseFloat(d.uiScrollfix.substr(1)):"+"===d.uiScrollfix.charAt(0)&&(d.uiScrollfix=g+parseFloat(d.uiScrollfix.substr(1)))):d.uiScrollfix=g,h.on("scroll",f),b.$on("$destroy",function(){h.off("scroll",f)})}}}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function(a){this.$element=a}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(a,b,c){a.$watch(c.uiShow,function(a){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(a,b,c){a.$watch(c.uiHide,function(a){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(a,b,c){a.$watch(c.uiToggle,function(a){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(a){return function(b,c){if(c===!1)return b;if((c||angular.isUndefined(c))&&angular.isArray(b)){var d=[],e=angular.isString(c)?a(c):function(a){return a},f=function(a){return angular.isObject(a)?e(a):a};angular.forEach(b,function(a){for(var b=!1,c=0;c<d.length;c++)if(angular.equals(f(d[c]),f(a))){b=!0;break}b||d.push(a)}),b=d}return b}}]),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return angular.isString(b)?void a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})}):angular.isArray(b)?void angular.forEach(b,function(b){a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})})}):void(angular.isObject(b)&&angular.forEach(b,function(b,c){angular.isString(b)&&a.$watch(b,function(){g[c](d.$modelValue)}),angular.isArray(b)&&angular.forEach(b,function(b){a.$watch(b,function(){g[c](d.$modelValue)})})}))}var f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){f=function(e){var f=a.$eval(b,{$value:e});return angular.isObject(f)&&angular.isFunction(f.then)?(f.then(function(){d.$setValidity(c,!0)},function(){d.$setValidity(c,!1)}),e):f?(d.$setValidity(c,!0),e):(d.$setValidity(c,!1),e)},g[c]=f,d.$formatters.push(f),d.$parsers.push(f)}),c.uiValidateWatch&&e(a.$eval(c.uiValidateWatch)))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]),angular.module("ivh.treeview",[]),angular.module("ivh.treeview").directive("ivhTreeviewCheckbox",[function(){"use strict";return{restrict:"A",scope:{node:"=ivhTreeviewCheckbox"},require:"^ivhTreeview",link:function(a,b,c,d){var e=a.node,f=d.opts(),g=f.indeterminateAttribute,h=f.selectedAttribute;a.isSelected=e[h],a.ctrl=d,a.$watch(function(){return e[h]},function(b,c){a.isSelected=b}),a.$watch(function(){return e[g]},function(a,c){b.find("input").prop("indeterminate",a)})},template:['<input type="checkbox"','ng-model="isSelected"','ng-change="ctrl.select(node, isSelected)" />'].join("\n")}}]),angular.module("ivh.treeview").directive("ivhTreeviewNode",["ivhTreeviewCompiler","ivhTreeviewOptions",function(a,b){"use strict";return{restrict:"A",scope:{node:"=ivhTreeviewNode",depth:"=ivhTreeviewDepth"},require:"^ivhTreeview",compile:function(b){return a.compile(b,function(a,b,c,d){var e=a.node,f=a.getChildren=function(){return d.children(e)};a.ctrl=d,a.childDepth=a.depth+1,d.expand(e,d.isInitiallyExpanded(a.depth)),b.attr("title",d.label(e));a.$watch(function(){return f().length>0},function(a){a?b.removeClass("ivh-treeview-node-leaf"):b.addClass("ivh-treeview-node-leaf")})})},template:["<div>","<div>",'<span ivh-treeview-toggle="node">','<span class="ivh-treeview-twistie">','<span class="ivh-treeview-twistie-expanded">',b().twistieExpandedTpl,"</span>",'<span class="ivh-treeview-twistie-collapsed">',b().twistieCollapsedTpl,"</span>",'<span class="ivh-treeview-twistie-leaf">',b().twistieLeafTpl,"</span>","</span>","</span>",'<span ng-if="ctrl.useCheckboxes()"','ivh-treeview-checkbox="node">',"</span>",'<span class="ivh-treeview-node-label" ivh-treeview-toggle>',"{{ctrl.label(node)}}","</span>","</div>",'<ul ng-if="getChildren().length" class="ivh-treeview">','<li ng-repeat="child in getChildren()"','ng-hide="ctrl.hasFilter() && !ctrl.isVisible(child)"',"ng-class=\"{'ivh-treeview-node-collapsed': !ctrl.isExpanded(child) && !ctrl.isLeaf(child)}\"",'ivh-treeview-node="child"','ivh-treeview-depth="childDepth">',"</li>","</ul>","</div>"].join("\n")}}]),angular.module("ivh.treeview").directive("ivhTreeviewToggle",[function(){"use strict";return{restrict:"A",require:"^ivhTreeview",link:function(a,b,c,d){var e=a.node;d.children(e);b.addClass("ivh-treeview-toggle"),b.bind("click",function(){a.$apply(function(){d.onNodeClick(e),d.toggleExpanded(e)})})}}}]),angular.module("ivh.treeview").directive("ivhTreeview",["ivhTreeviewMgr",function(a){"use strict";return{restrict:"A",scope:{root:"=ivhTreeview",childrenAttribute:"=ivhTreeviewChildrenAttribute",clickHandler:"=ivhTreeviewClickHandler",changeHandler:"=ivhTreeviewChangeHandler",defaultSelectedState:"=ivhTreeviewDefaultSelectedState",expandToDepth:"=ivhTreeviewExpandToDepth",idAttribute:"=ivhTreeviewIdAttribute",indeterminateAttribute:"=ivhTreeviewIndeterminateAttribute",expandedAttribute:"=ivhTreeviewExpandedAttribute",labelAttribute:"=ivhTreeviewLabelAttribute",selectedAttribute:"=ivhTreeviewSelectedAttribute",useCheckboxes:"=ivhTreeviewUseCheckboxes",validate:"=ivhTreeviewValidate",visibleAttribute:"=ivhTreeviewVisibleAttribute",filter:"=ivhTreeviewFilter"},controllerAs:"ctrl",controller:["$scope","$element","$attrs","$transclude","ivhTreeviewOptions","filterFilter",function(b,c,d,e,f,g){var h=angular,i=this,j=h.extend({},f());h.forEach(["childrenAttribute","defaultSelectedState","expandToDepth","idAttribute","indeterminateAttribute","expandedAttribute","labelAttribute","selectedAttribute","useCheckboxes","validate","visibleAttribute"],function(a){h.isDefined(b[a])&&(j[a]=b[a])}),i.opts=function(){return j},i.children=function(a){var b=a[j.childrenAttribute];return h.isArray(b)?b:[]},i.label=function(a){return a[j.labelAttribute]},i.hasFilter=function(){return h.isDefined(b.filter)},i.getFilter=function(){return b.filter||""},i.isVisible=function(a){var b=i.getFilter();return b?!!g([a],b).length:!0},i.useCheckboxes=function(){return j.useCheckboxes},i.select=function(c,d){a.select(b.root,c,j,d),i.onNodeChange(c,d)},i.expand=function(c,d){a.expand(b.root,c,j,d)},i.isExpanded=function(a){return a[j.expandedAttribute]},i.toggleExpanded=function(a){i.expand(a,!i.isExpanded(a))},i.isInitiallyExpanded=function(a){var b=-1===j.expandToDepth?1/0:j.expandToDepth;return b>a},i.isLeaf=function(a){return 0===i.children(a).length},i.onNodeClick=function(a){(b.clickHandler||angular.noop)(a,b.root)},i.onNodeChange=function(a,c){(b.changeHandler||angular.noop)(a,c,b.root)}}],link:function(b,c,d){var e=b.ctrl.opts();e.validate&&a.validate(b.root,e)},template:['<ul class="ivh-treeview">','<li ng-repeat="child in root | ivhTreeviewAsArray"','ng-hide="ctrl.hasFilter() && !ctrl.isVisible(child)"',"ng-class=\"{'ivh-treeview-node-collapsed': !ctrl.isExpanded(child) && !ctrl.isLeaf(child)}\"",'ivh-treeview-node="child"','ivh-treeview-depth="0">',"</li>","</ul>"].join("\n")}}]),angular.module("ivh.treeview").filter("ivhTreeviewAsArray",function(){"use strict";return function(a){return!angular.isArray(a)&&angular.isObject(a)?[a]:a}}),angular.module("ivh.treeview").factory("ivhTreeviewBfs",["ivhTreeviewOptions",function(a){"use strict";var b=angular;return function(c,d,e){2===arguments.length&&b.isFunction(d)&&(e=d,d={}),d=angular.extend({},a(),d),e=e||b.noop;var f,g,h,i,j,k=[],l=d.childrenAttribute;for(b.isArray(c)?(b.forEach(c,function(a){k.push([a,[]])}),f=k.shift()):f=[c,[]];f;){if(g=f[0],h=f[1],e(g,h)!==!1&&g[l]&&b.isArray(g[l]))for(j=g[l].length,i=0;j>i;i++)k.push([g[l][i],[g].concat(h)]);f=k.shift()}}}]),angular.module("ivh.treeview").factory("ivhTreeviewCompiler",["$compile",function(a){"use strict";return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]),angular.module("ivh.treeview").factory("ivhTreeviewMgr",["ivhTreeviewOptions","ivhTreeviewBfs",function(a,b){"use strict";var c=angular,d=a(),e={},f=function(a){a[this.selectedAttribute]=!1,a[this.indeterminateAttribute]=!1},g=function(a){a[this.selectedAttribute]=!0,a[this.indeterminateAttribute]=!1},h=function(a){var b=a[this.childrenAttribute],d=this.selectedAttribute,e=this.indeterminateAttribute,f=0,g=0;c.forEach(b,function(a,b){a[d]?f++:a[e]&&g++}),0===f&&0===g?(a[d]=!1,a[e]=!1):f===b.length?(a[d]=!0,a[e]=!1):(a[d]=!1,a[e]=!0)},i=function(a,d,e,f){var g=c.isString(d),h=!0,i=e.idAttribute,j=null,k=[];return b(a,e,function(a,b){var c=h&&(g?d===a[i]:d===a);return c&&(h=!1,j=a,k=b),h}),f(j,k)};return e.select=function(a,i,j,k){arguments.length>2&&"boolean"==typeof j&&(k=j,j={}),j=c.extend({},d,j),k=c.isDefined(k)?k:!0;var l=c.isString(i),m=!0,n=j.idAttribute;return b(a,j,function(a,d){var e=m&&(l?i===a[n]:i===a);if(e){m=!1;var o=k?g.bind(j):f.bind(j);b(a,j,o),c.forEach(d,h.bind(j))}return m}),e},e.selectAll=function(a,f,g){arguments.length>1&&"boolean"==typeof f&&(g=f,f={}),f=c.extend({},d,f),g=c.isDefined(g)?g:!0;var h=f.selectedAttribute,i=f.indeterminateAttribute;return b(a,f,function(a){a[h]=g,a[i]=!1}),e},e.selectEach=function(a,b,d,f){return c.forEach(b,function(b){e.select(a,b,d,f)}),e},e.deselect=function(a,b,c){return e.select(a,b,c,!1)},e.deselectAll=function(a,b){return e.selectAll(a,b,!1)},e.deselectEach=function(a,b,c){return e.selectEach(a,b,c,!1)},e.validate=function(a,f,g){arguments.length>1&&"boolean"==typeof f&&(g=f,f={}),f=c.extend({},d,f),g=c.isDefined(g)?g:f.defaultSelectedState;var h=f.selectedAttribute,i=f.indeterminateAttribute;return b(a,f,function(b,d){return c.isDefined(b[h])&&b[h]!==g?(e.select(a,b,f,!g),!1):(b[h]=g,void(b[i]=!1))}),e},e.expand=function(a,b,f,g){arguments.length>2&&"boolean"==typeof f&&(g=f,f={}),f=c.extend({},d,f),g=c.isDefined(g)?g:!0;var h=c.isString(b),j=f.expandedAttribute;return h?i(a,b,f,function(a,b){return a[j]=g,e}):(b[j]=g,e)},e.expandRecursive=function(a,f,g,h){arguments.length>2&&"boolean"==typeof g&&(h=g,g={}),f=c.isDefined(f)?f:a,g=c.extend({},d,g),h=c.isDefined(h)?h:!0;var j,k=c.isString(f),l=g.expandedAttribute;return k?i(a,f,g,function(a,b){j=a}):j=f,j&&b(j,g,function(a,b){a[l]=h}),e},e.collapse=function(a,b,c){return e.expand(a,b,c,!1)},e.collapseRecursive=function(a,b,c,d){return e.expandRecursive(a,b,c,!1)},e.expandTo=function(a,b,f,g){arguments.length>2&&"boolean"==typeof f&&(g=f,f={}),f=c.extend({},d,f),g=c.isDefined(g)?g:!0;var h=f.expandedAttribute,j=function(a){a[h]=g};return i(a,b,f,function(a,b){return c.forEach(b,j),e})},e.collapseParents=function(a,b,c){return e.expandTo(a,b,c,!1)},e}]),angular.module("ivh.treeview").provider("ivhTreeviewOptions",function(){"use strict";var a={idAttribute:"id",labelAttribute:"label",childrenAttribute:"children",selectedAttribute:"selected",expandToDepth:0,useCheckboxes:!0,validate:!1,indeterminateAttribute:"__ivhTreeviewIndeterminate",expandedAttribute:"__ivhTreeviewExpanded",defaultSelectedState:!0,twistieExpandedTpl:"(-)",twistieCollapsedTpl:"(+)",twistieLeafTpl:"o"};this.set=function(b){angular.extend(a,b)},this.$get=function(){return function(){return angular.copy(a)}}}),!function(a,b,c){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"]),angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var a=this.defaults={offsetTop:"auto",inlineStyles:!0};this.$get=["$window","debounce","dimensions",function(b,c,d){function e(e,h){function i(a,b,c){var d=j(),e=k();return s>=d?"top":null!==a&&d+a<=b.top?"middle":null!==t&&b.top+c+q>=e-t?"bottom":"middle"}function j(){return n[0]===b?b.pageYOffset:n[0].scrollTop}function k(){return n[0]===b?b.document.body.scrollHeight:n[0].scrollHeight}var l={},m=angular.extend({},a,h),n=m.target,o="affix affix-top affix-bottom",p=!1,q=0,r=0,s=0,t=0,u=null,v=null,w=e.parent();if(m.offsetParent)if(m.offsetParent.match(/^\d+$/))for(var x=0;x<1*m.offsetParent-1;x++)w=w.parent();else w=angular.element(m.offsetParent);return l.init=function(){this.$parseOffsets(),r=d.offset(e[0]).top+q,p=!e[0].style.width,n.on("scroll",this.checkPosition),n.on("click",this.checkPositionWithEventLoop),g.on("resize",this.$debouncedOnResize),this.checkPosition(),this.checkPositionWithEventLoop()},l.destroy=function(){n.off("scroll",this.checkPosition),n.off("click",this.checkPositionWithEventLoop),g.off("resize",this.$debouncedOnResize)},l.checkPositionWithEventLoop=function(){setTimeout(l.checkPosition,1)},l.checkPosition=function(){var a=j(),b=d.offset(e[0]),c=d.height(e[0]),g=i(v,b,c);u!==g&&(u=g,e.removeClass(o).addClass("affix"+("middle"!==g?"-"+g:"")),"top"===g?(v=null,p&&e.css("width",""),m.inlineStyles&&(e.css("position",m.offsetParent?"":"relative"),e.css("top",""))):"bottom"===g?(v=m.offsetUnpin?-(1*m.offsetUnpin):b.top-a,p&&e.css("width",""),m.inlineStyles&&(e.css("position",m.offsetParent?"":"relative"),e.css("top",m.offsetParent?"":f[0].offsetHeight-t-c-r+"px"))):(v=null,p&&e.css("width",e[0].offsetWidth+"px"),m.inlineStyles&&(e.css("position","fixed"),e.css("top",q+"px"))))},l.$onResize=function(){l.$parseOffsets(),l.checkPosition()},l.$debouncedOnResize=c(l.$onResize,50),l.$parseOffsets=function(){var a=e.css("position");m.inlineStyles&&e.css("position",m.offsetParent?"":"relative"),m.offsetTop&&("auto"===m.offsetTop&&(m.offsetTop="+0"),m.offsetTop.match(/^[-+]\d+$/)?(q=1*-m.offsetTop,s=m.offsetParent?d.offset(w[0]).top+1*m.offsetTop:d.offset(e[0]).top-d.css(e[0],"marginTop",!0)+1*m.offsetTop):s=1*m.offsetTop),m.offsetBottom&&(t=m.offsetParent&&m.offsetBottom.match(/^[-+]\d+$/)?k()-(d.offset(w[0]).top+d.height(w[0]))+1*m.offsetBottom+1:1*m.offsetBottom),m.inlineStyles&&e.css("position",a)},l.init(),l}var f=angular.element(b.document.body),g=angular.element(b);return e}]}).directive("bsAffix",["$affix","$window",function(a,b){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(c,d,e,f){var g={scope:c,target:f?f.$element:angular.element(b)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin","inlineStyles"],function(a){if(angular.isDefined(e[a])){var b=e[a];/true/i.test(b)&&(b=!0),/false/i.test(b)&&(b=!1),g[a]=b}});var h=a(d,g);c.$on("$destroy",function(){h&&h.destroy(),g=null,h=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(a){this.$element=a}]}}),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var a=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,template:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(b,c){function d(d){var e={},f=angular.extend({},a,d);e=b(f),e.$scope.dismissable=!!f.dismissable,f.type&&(e.$scope.type=f.type);var g=e.show;return f.duration&&(e.show=function(){g(),c(function(){e.hide()},1e3*f.duration)}),e}return d}]}).directive("bsAlert",["$window","$sce","$alert",function(a,b,c){return a.requestAnimationFrame||a.setTimeout,{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration","dismissable"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])});var h=/^(false|0|)$/i;angular.forEach(["keyboard","html","container","dismissable"],function(a){angular.isDefined(e[a])&&h.test(e[a])&&(g[a]=!1)}),a.hasOwnProperty("title")||(a.title=""),angular.forEach(["title","content","type"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsAlert&&a.$watch(e.bsAlert,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var i=c(g);d.on(e.trigger||"click",i.toggle),a.$on("$destroy",function(){i&&i.destroy(),g=null,i=null})}}}]),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var a=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",prefixEvent:"aside",placement:"right",template:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(b){function c(c){var d={},e=angular.extend({},a,c);return d=b(e)}return c}]}).directive("bsAside",["$window","$sce","$aside",function(a,b,c){return a.requestAnimationFrame||a.setTimeout,{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])});var h=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(a){angular.isDefined(e[a])&&h.test(e[a])&&(g[a]=!1)}),angular.forEach(["title","content"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsAside&&a.$watch(e.bsAside,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var i=c(g);d.on(e.trigger||"click",i.toggle),a.$on("$destroy",function(){i&&i.destroy(),g=null,i=null})}}}]),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var a=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},b=this.controller=function(b,c,d){function e(a){for(var b=i.$targets.$active,c=0;c<b.length;c++)a<b[c]&&(b[c]=b[c]-1),b[c]===i.$targets.length&&(b[c]=i.$targets.length-1)}function f(a){var b=i.$targets.$active;return-1===b.indexOf(a)?!1:!0}function g(a){var b=i.$targets.$active.indexOf(a);-1!==b&&i.$targets.$active.splice(b,1)}function h(a){i.$options.allowMultiple||i.$targets.$active.splice(0,1),-1===i.$targets.$active.indexOf(a)&&i.$targets.$active.push(a)}var i=this;i.$options=angular.copy(a),angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(a){angular.isDefined(d[a])&&(i.$options[a]=d[a])});var j=/^(false|0|)$/i;angular.forEach(["disallowToggle","startCollapsed","allowMultiple"],function(a){angular.isDefined(d[a])&&j.test(d[a])&&(i.$options[a]=!1)}),i.$toggles=[],i.$targets=[],i.$viewChangeListeners=[],i.$registerToggle=function(a){i.$toggles.push(a)},i.$registerTarget=function(a){i.$targets.push(a)},i.$unregisterToggle=function(a){var b=i.$toggles.indexOf(a);i.$toggles.splice(b,1)},i.$unregisterTarget=function(a){var b=i.$targets.indexOf(a);i.$targets.splice(b,1),i.$options.allowMultiple&&g(a),e(b),i.$viewChangeListeners.forEach(function(a){a()})},i.$targets.$active=i.$options.startCollapsed?[]:[0],i.$setActive=b.$setActive=function(a){angular.isArray(a)?i.$targets.$active=a:i.$options.disallowToggle?h(a):f(a)?g(a):h(a),i.$viewChangeListeners.forEach(function(a){a()})},i.$activeIndexes=function(){return i.$options.allowMultiple?i.$targets.$active:1===i.$targets.$active.length?i.$targets.$active[0]:-1}};this.$get=function(){var c={};return c.defaults=a,c.controller=b,c}}).directive("bsCollapse",["$window","$animate","$collapse",function(a,b,c){return c.defaults,{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",c.controller],link:function(a,b,c,d){var e=d[0],f=d[1];e&&(f.$viewChangeListeners.push(function(){e.$setViewValue(f.$activeIndexes())}),e.$formatters.push(function(a){if(angular.isArray(a))f.$setActive(a);else{var b=f.$activeIndexes();angular.isArray(b)?-1===b.indexOf(1*a)&&f.$setActive(1*a):b!==1*a&&f.$setActive(1*a)}return a}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(a,b,c,d){var e=(d[0],d[1]);b.attr("data-toggle","collapse"),e.$registerToggle(b),a.$on("$destroy",function(){e.$unregisterToggle(b)}),b.on("click",function(){var d=c.bsCollapseToggle||e.$toggles.indexOf(b);e.$setActive(1*d),a.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(a){return{require:["^?ngModel","^bsCollapse"],link:function(b,c,d,e){function f(){var b=g.$targets.indexOf(c),d=g.$activeIndexes(),e="removeClass";angular.isArray(d)?-1!==d.indexOf(b)&&(e="addClass"):b===d&&(e="addClass"),a[e](c,g.$options.activeClass)}var g=(e[0],e[1]);c.addClass("collapse"),g.$options.animation&&c.addClass(g.$options.animation),g.$registerTarget(c),b.$on("$destroy",function(){g.$unregisterTarget(c);
}),g.$viewChangeListeners.push(function(){f()}),f()}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var a=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function(b,c,d,e,f,g,h,i){function j(b,c,d){function e(a){a.selected=j.$isSelected(a.date)}function f(){b[0].focus()}var j=h(b,angular.extend({},a,d)),m=d.scope,n=j.$options,o=j.$scope;n.startView&&(n.startView-=n.minView);var p=g(j);j.$views=p.views;var q=p.viewDate;o.$mode=n.startView,o.$iconLeft=n.iconLeft,o.$iconRight=n.iconRight;var r=j.$views[o.$mode];o.$select=function(a){j.select(a)},o.$selectPane=function(a){j.$selectPane(a)},o.$toggleMode=function(){j.setMode((o.$mode+1)%j.$views.length)},j.update=function(a){angular.isDate(a)&&!isNaN(a.getTime())&&(j.$date=a,r.update.call(r,a)),j.$build(!0)},j.updateDisabledDates=function(a){n.disabledDateRanges=a;for(var b=0,c=o.rows.length;c>b;b++)angular.forEach(o.rows[b],j.$setDisabledEl)},j.select=function(a,b){angular.isDate(c.$dateValue)||(c.$dateValue=new Date(a)),!o.$mode||b?(c.$setViewValue(angular.copy(a)),c.$render(),n.autoclose&&!b&&i(function(){j.hide(!0)})):(angular.extend(q,{year:a.getFullYear(),month:a.getMonth(),date:a.getDate()}),j.setMode(o.$mode-1),j.$build())},j.setMode=function(a){o.$mode=a,r=j.$views[o.$mode],j.$build()},j.$build=function(a){a===!0&&r.built||(a!==!1||r.built)&&r.build.call(r)},j.$updateSelected=function(){for(var a=0,b=o.rows.length;b>a;a++)angular.forEach(o.rows[a],e)},j.$isSelected=function(a){return r.isSelected(a)},j.$setDisabledEl=function(a){a.disabled=r.isDisabled(a.date)},j.$selectPane=function(a){var b=r.steps,c=new Date(Date.UTC(q.year+(b.year||0)*a,q.month+(b.month||0)*a,1));angular.extend(q,{year:c.getUTCFullYear(),month:c.getUTCMonth(),date:c.getUTCDate()}),j.$build()},j.$onMouseDown=function(a){if(a.preventDefault(),a.stopPropagation(),l){var b=angular.element(a.target);"button"!==b[0].nodeName.toLowerCase()&&(b=b.parent()),b.triggerHandler("click")}},j.$onKeyDown=function(a){if(/(38|37|39|40|13)/.test(a.keyCode)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return o.$mode?o.$apply(function(){j.setMode(o.$mode-1)}):j.hide(!0);r.onKeyDown(a),m.$digest()}};var s=j.init;j.init=function(){return k&&n.useNative?(b.prop("type","date"),void b.css("-webkit-appearance","textfield")):(l&&(b.prop("type","text"),b.attr("readonly","true"),b.on("click",f)),void s())};var t=j.destroy;j.destroy=function(){k&&n.useNative&&b.off("click",f),t()};var u=j.show;j.show=function(){u(),i(function(){j.$isShown&&(j.$element.on(l?"touchstart":"mousedown",j.$onMouseDown),n.keyboard&&b.on("keydown",j.$onKeyDown))},0,!1)};var v=j.hide;return j.hide=function(a){j.$isShown&&(j.$element.off(l?"touchstart":"mousedown",j.$onMouseDown),n.keyboard&&b.off("keydown",j.$onKeyDown),v(a))},j}var k=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),l="createTouch"in b.document&&k;return a.lang||(a.lang=f.getDefaultLocale()),j.defaults=a,j}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function(a,b,c,d,e,f){var g=(f.defaults,/(ip(a|o)d|iphone|android)/gi.test(a.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(a,b,c,h){function i(a){return a&&a.length?a:null}function j(a){if(angular.isDate(a)){var b=isNaN(n.$options.minDate)||a.getTime()>=n.$options.minDate,c=isNaN(n.$options.maxDate)||a.getTime()<=n.$options.maxDate,d=b&&c;h.$setValidity("date",d),h.$setValidity("min",b),h.$setValidity("max",c),d&&(h.$dateValue=a)}}function k(){return!h.$dateValue||isNaN(h.$dateValue.getTime())?"":p(h.$dateValue,l.dateFormat)}var l={scope:a,controller:h};angular.forEach(["placement","container","delay","trigger","html","animation","template","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id","prefixClass","prefixEvent"],function(a){angular.isDefined(c[a])&&(l[a]=c[a])});var m=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative"],function(a){angular.isDefined(c[a])&&m.test(c[a])&&(l[a]=!1)}),c.bsShow&&a.$watch(c.bsShow,function(a,b){n&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(datepicker),?/i)),a===!0?n.show():n.hide())});var n=f(b,h,l);l=n.$options,g&&l.useNative&&(l.dateFormat="yyyy-MM-dd");var o=l.lang,p=function(a,b){return d.formatDate(a,b,o)},q=e({format:l.dateFormat,lang:o,strict:l.strictFormat});angular.forEach(["minDate","maxDate"],function(a){angular.isDefined(c[a])&&c.$observe(a,function(b){n.$options[a]=q.getDateForAttribute(a,b),!isNaN(n.$options[a])&&n.$build(!1),j(h.$dateValue)})}),a.$watch(c.ngModel,function(a,b){n.update(h.$dateValue)},!0),angular.isDefined(c.disabledDates)&&a.$watch(c.disabledDates,function(a,b){a=i(a),b=i(b),a&&n.updateDisabledDates(a)}),h.$parsers.unshift(function(a){var b;if(!a)return h.$setValidity("date",!0),null;var c=q.parse(a,h.$dateValue);return!c||isNaN(c.getTime())?void h.$setValidity("date",!1):(j(c),"string"===l.dateType?(b=q.timezoneOffsetAdjust(c,l.timezone,!0),p(b,l.modelDateFormat||l.dateFormat)):(b=q.timezoneOffsetAdjust(h.$dateValue,l.timezone,!0),"number"===l.dateType?b.getTime():"unix"===l.dateType?b.getTime()/1e3:"iso"===l.dateType?b.toISOString():new Date(b)))}),h.$formatters.push(function(a){var b;return b=angular.isUndefined(a)||null===a?NaN:angular.isDate(a)?a:"string"===l.dateType?q.parse(a,null,l.modelDateFormat):new Date("unix"===l.dateType?1e3*a:a),h.$dateValue=q.timezoneOffsetAdjust(b,l.timezone),k()}),h.$render=function(){b.val(k())},a.$on("$destroy",function(){n&&n.destroy(),l=null,n=null})}}}]).provider("datepickerViews",function(){function a(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function b(a,b){return(a%b+b)%b}this.defaults={dayFormat:"dd",daySplit:7},this.$get=["$dateFormatter","$dateParser","$sce",function(c,d,e){return function(f){var g=f.$scope,h=f.$options,i=h.lang,j=function(a,b){return c.formatDate(a,b,i)},k=d({format:h.dateFormat,lang:i,strict:h.strictFormat}),l=c.weekdaysShort(i),m=l.slice(h.startWeek).concat(l.slice(0,h.startWeek)),n=e.trustAsHtml('<th class="dow text-center">'+m.join('</th><th class="dow text-center">')+"</th>"),o=f.$date||(h.startDate?k.getDateForAttribute("startDate",h.startDate):new Date),p={year:o.getFullYear(),month:o.getMonth(),date:o.getDate()},q=[{format:h.dayFormat,split:7,steps:{month:1},update:function(a,b){!this.built||b||a.getFullYear()!==p.year||a.getMonth()!==p.month?(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):(a.getDate()!==p.date||1===a.getDate())&&(p.date=f.$date.getDate(),f.$updateSelected())},build:function(){var c=new Date(p.year,p.month,1),d=c.getTimezoneOffset(),e=new Date(+c-864e5*b(c.getDay()-h.startWeek,7)),i=e.getTimezoneOffset(),l=k.timezoneOffsetAdjust(new Date,h.timezone).toDateString();i!==d&&(e=new Date(+e+6e4*(i-d)));for(var m,o=[],q=0;42>q;q++)m=k.daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()+q)),o.push({date:m,isToday:m.toDateString()===l,label:j(m,this.format),selected:f.$date&&this.isSelected(m),muted:m.getMonth()!==p.month,disabled:this.isDisabled(m)});g.title=j(c,h.monthTitleFormat),g.showLabels=!0,g.labels=n,g.rows=a(o,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()&&a.getMonth()===f.$date.getMonth()&&a.getDate()===f.$date.getDate()},isDisabled:function(a){var b=a.getTime();if(b<h.minDate||b>h.maxDate)return!0;if(-1!==h.daysOfWeekDisabled.indexOf(a.getDay()))return!0;if(h.disabledDateRanges)for(var c=0;c<h.disabledDateRanges.length;c++)if(b>=h.disabledDateRanges[c].start&&b<=h.disabledDateRanges[c].end)return!0;return!1},onKeyDown:function(a){if(f.$date){var b,c=f.$date.getTime();37===a.keyCode?b=new Date(c-864e5):38===a.keyCode?b=new Date(c-6048e5):39===a.keyCode?b=new Date(c+864e5):40===a.keyCode&&(b=new Date(c+6048e5)),this.isDisabled(b)||f.select(b,!0)}}},{name:"month",format:h.monthFormat,split:4,steps:{year:1},update:function(a,b){this.built&&a.getFullYear()===p.year?a.getMonth()!==p.month&&(angular.extend(p,{month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected()):(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build())},build:function(){for(var b,c=(new Date(p.year,0,1),[]),d=0;12>d;d++)b=new Date(p.year,d,1),c.push({date:b,label:j(b,this.format),selected:f.$isSelected(b),disabled:this.isDisabled(b)});g.title=j(b,h.yearTitleFormat),g.showLabels=!1,g.rows=a(c,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()&&a.getMonth()===f.$date.getMonth()},isDisabled:function(a){var b=+new Date(a.getFullYear(),a.getMonth()+1,0);return b<h.minDate||a.getTime()>h.maxDate},onKeyDown:function(a){if(f.$date){var b=f.$date.getMonth(),c=new Date(f.$date);37===a.keyCode?c.setMonth(b-1):38===a.keyCode?c.setMonth(b-4):39===a.keyCode?c.setMonth(b+1):40===a.keyCode&&c.setMonth(b+4),this.isDisabled(c)||f.select(c,!0)}}},{name:"year",format:h.yearFormat,split:4,steps:{year:12},update:function(a,b){!this.built||b||parseInt(a.getFullYear()/20,10)!==parseInt(p.year/20,10)?(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):a.getFullYear()!==p.year&&(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected())},build:function(){for(var b,c=p.year-p.year%(3*this.split),d=[],e=0;12>e;e++)b=new Date(c+e,0,1),d.push({date:b,label:j(b,this.format),selected:f.$isSelected(b),disabled:this.isDisabled(b)});g.title=d[0].label+"-"+d[d.length-1].label,g.showLabels=!1,g.rows=a(d,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()},isDisabled:function(a){var b=+new Date(a.getFullYear()+1,0,0);return b<h.minDate||a.getTime()>h.maxDate},onKeyDown:function(a){if(f.$date){var b=f.$date.getFullYear(),c=new Date(f.$date);37===a.keyCode?c.setYear(b-1):38===a.keyCode?c.setYear(b-4):39===a.keyCode?c.setYear(b+1):40===a.keyCode&&c.setYear(b+4),this.isDisabled(c)||f.select(c,!0)}}}];return{views:h.minView?Array.prototype.slice.call(q,h.minView):q,viewDate:p}}}]}),angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var a=this.defaults={animation:"am-fade",prefixClass:"dropdown",prefixEvent:"dropdown",placement:"bottom-left",template:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(b,c,d,e){function f(b,f){function i(a){return a.target!==b[0]?a.target!==b[0]&&j.hide():void 0}var j={},k=angular.extend({},a,f);j.$scope=k.scope&&k.scope.$new()||c.$new(),j=d(b,k);var l=b.parent();j.$onKeyDown=function(a){if(/(38|40)/.test(a.keyCode)){a.preventDefault(),a.stopPropagation();var b=angular.element(j.$element[0].querySelectorAll("li:not(.divider) a"));if(b.length){var c;angular.forEach(b,function(a,b){h&&h.call(a,":focus")&&(c=b)}),38===a.keyCode&&c>0?c--:40===a.keyCode&&c<b.length-1?c++:angular.isUndefined(c)&&(c=0),b.eq(c)[0].focus()}}};var m=j.show;j.show=function(){m(),e(function(){k.keyboard&&j.$element&&j.$element.on("keydown",j.$onKeyDown),g.on("click",i)},0,!1),l.hasClass("dropdown")&&l.addClass("open")};var n=j.hide;j.hide=function(){j.$isShown&&(k.keyboard&&j.$element&&j.$element.off("keydown",j.$onKeyDown),g.off("click",i),l.hasClass("dropdown")&&l.removeClass("open"),n())};var o=j.destroy;return j.destroy=function(){g.off("click",i),o()},j}var g=angular.element(b.document.body),h=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return f}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(a,b,c){return{restrict:"EAC",scope:!0,link:function(a,b,d,e){var f={scope:a};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","id"],function(a){angular.isDefined(d[a])&&(f[a]=d[a])});var g=/^(false|0|)$/i;angular.forEach(["html","container"],function(a){angular.isDefined(d[a])&&g.test(d[a])&&(f[a]=!1)}),d.bsDropdown&&a.$watch(d.bsDropdown,function(b,c){a.content=b},!0),d.bsShow&&a.$watch(d.bsShow,function(a,b){h&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(dropdown),?/i)),a===!0?h.show():h.hide())});var h=c(b,f);a.$on("$destroy",function(){h&&h.destroy(),f=null,h=null})}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var a=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:a}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(a,b){a.attr("data-toggle","buttons"),a.removeAttr("ng-model");var c=a[0].querySelectorAll('input[type="checkbox"]');angular.forEach(c,function(a){var c=angular.element(a);c.attr("bs-checkbox",""),c.attr("ng-model",b.ngModel+"."+c.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(a,b){var c=a.defaults,d=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,e,f,g){var h=c,i="INPUT"===e[0].nodeName,j=i?e.parent():e,k=angular.isDefined(f.trueValue)?f.trueValue:!0;d.test(f.trueValue)&&(k=a.$eval(f.trueValue));var l=angular.isDefined(f.falseValue)?f.falseValue:!1;d.test(f.falseValue)&&(l=a.$eval(f.falseValue));var m="boolean"!=typeof k||"boolean"!=typeof l;m&&(g.$parsers.push(function(a){return a?k:l}),g.$formatters.push(function(a){return angular.equals(a,k)}),a.$watch(f.ngModel,function(a,b){g.$render()})),g.$render=function(){var a=angular.equals(g.$modelValue,k);b(function(){i&&(e[0].checked=a),j.toggleClass(h.activeClass,a)})},e.bind(h.toggleEvent,function(){a.$apply(function(){i||g.$setViewValue(!j.hasClass("active")),m||g.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(a,b){a.attr("data-toggle","buttons"),a.removeAttr("ng-model");var c=a[0].querySelectorAll('input[type="radio"]');angular.forEach(c,function(a){angular.element(a).attr("bs-radio",""),angular.element(a).attr("ng-model",b.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(a,b){var c=a.defaults,d=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,e,f,g){var h,i=c,j="INPUT"===e[0].nodeName,k=j?e.parent():e;f.$observe("value",function(b){h=d.test(b)?a.$eval(b):b,g.$render()}),g.$render=function(){var a=angular.equals(g.$modelValue,h);b(function(){j&&(e[0].checked=a),k.toggleClass(i.activeClass,a)})},e.bind(i.toggleEvent,function(){a.$apply(function(){g.$setViewValue(h),g.$render()})})}}}]),angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function(a,b){function c(a){return/(h+)([:\.])?(m+)([:\.])?(s*)[ ]?(a?)/i.exec(a).slice(1)}this.getDefaultLocale=function(){return a.id},this.getDatetimeFormat=function(b,c){return a.DATETIME_FORMATS[b]||b},this.weekdaysShort=function(b){return a.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(a){return c(a)[0]},this.minutesFormat=function(a){return c(a)[2]},this.secondsFormat=function(a){return c(a)[4]},this.timeSeparator=function(a){return c(a)[1]},this.showSeconds=function(a){return!!c(a)[4]},this.showAM=function(a){return!!c(a)[5]},this.formatDate=function(a,c,d,e){return b(a,c,e)}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(a){function b(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function c(){}function d(a){return!isNaN(parseFloat(a))&&isFinite(a)}function e(a,b){for(var c=a.length,d=b.toString().toLowerCase(),e=0;c>e;e++)if(a[e].toLowerCase()===d)return e;return-1}b.prototype.setMilliseconds=function(a){this.milliseconds=a},b.prototype.setSeconds=function(a){this.seconds=a},b.prototype.setMinutes=function(a){this.minutes=a},b.prototype.setHours=function(a){this.hours=a},b.prototype.getHours=function(){return this.hours},b.prototype.setDate=function(a){this.day=a},b.prototype.setMonth=function(a){this.month=a},b.prototype.setFullYear=function(a){this.year=a},b.prototype.fromDate=function(a){return this.year=a.getFullYear(),this.month=a.getMonth(),this.day=a.getDate(),this.hours=a.getHours(),this.minutes=a.getMinutes(),this.seconds=a.getSeconds(),this.milliseconds=a.getMilliseconds(),this},b.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var f=b.prototype,g=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(a,h){var i=function(i){function j(a){var b,c=Object.keys(r),d=[],e=[],f=a;for(b=0;b<c.length;b++)if(a.split(c[b]).length>1){var g=f.search(c[b]);a=a.split(c[b]).join(""),r[c[b]]&&(d[g]=r[c[b]])}return angular.forEach(d,function(a){a&&e.push(a)}),e}function k(a){return a.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function l(a){var b,c=Object.keys(q),d=a;for(b=0;b<c.length;b++)d=d.split(c[b]).join("${"+b+"}");for(b=0;b<c.length;b++)d=d.split("${"+b+"}").join("("+q[c[b]]+")");return a=k(a),new RegExp("^"+d+"$",["i"])}var m,n,o=angular.extend({},g,i),p={},q={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:o.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:o.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:o.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:o.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:a.DATETIME_FORMATS.DAY.join("|"),EEE:a.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:o.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:a.DATETIME_FORMATS.MONTH.join("|"),MMM:a.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:o.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:o.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},r={sss:f.setMilliseconds,ss:f.setSeconds,s:f.setSeconds,mm:f.setMinutes,m:f.setMinutes,HH:f.setHours,H:f.setHours,hh:f.setHours,h:f.setHours,EEEE:c,EEE:c,dd:f.setDate,d:f.setDate,a:function(a){var b=this.getHours()%12;return this.setHours(a.match(/pm/i)?b+12:b)},MMMM:function(b){return this.setMonth(e(a.DATETIME_FORMATS.MONTH,b))},MMM:function(b){return this.setMonth(e(a.DATETIME_FORMATS.SHORTMONTH,b))},MM:function(a){return this.setMonth(1*a-1)},M:function(a){return this.setMonth(1*a-1)},yyyy:f.setFullYear,yy:function(a){return this.setFullYear(2e3+1*a)},y:f.setFullYear};return p.init=function(){p.$format=a.DATETIME_FORMATS[o.format]||o.format,m=l(p.$format),n=j(p.$format)},p.isValid=function(a){return angular.isDate(a)?!isNaN(a.getTime()):m.test(a)},p.parse=function(c,d,e,f){e&&(e=a.DATETIME_FORMATS[e]||e),angular.isDate(c)&&(c=h(c,e||p.$format,f));var g=e?l(e):m,i=e?j(e):n,k=g.exec(c);if(!k)return!1;for(var o=(new b).fromDate(d&&!isNaN(d.getTime())?d:new Date(1970,0,1,0)),q=0;q<k.length-1;q++)i[q]&&i[q].call(o,k[q+1]);var r=o.toDate();return parseInt(o.day,10)!==r.getDate()?!1:r},p.getDateForAttribute=function(a,b){var c;if("today"===b){var e=new Date;c=new Date(e.getFullYear(),e.getMonth(),e.getDate()+("maxDate"===a?1:0),0,0,0,"minDate"===a?0:-1)}else c=angular.isString(b)&&b.match(/^".+"$/)?new Date(b.substr(1,b.length-2)):d(b)?new Date(parseInt(b,10)):angular.isString(b)&&0===b.length?"minDate"===a?-(1/0):+(1/0):new Date(b);return c},p.getTimeForAttribute=function(a,b){var c;return c="now"===b?(new Date).setFullYear(1970,0,1):angular.isString(b)&&b.match(/^".+"$/)?new Date(b.substr(1,b.length-2)).setFullYear(1970,0,1):d(b)?new Date(parseInt(b,10)).setFullYear(1970,0,1):angular.isString(b)&&0===b.length?"minTime"===a?-(1/0):+(1/0):p.parse(b,new Date(1970,0,1,0))},p.daylightSavingAdjust=function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},p.timezoneOffsetAdjust=function(a,b,c){return a?(b&&"UTC"===b&&(a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+(c?-1:1)*a.getTimezoneOffset())),a):null},p.init(),p};return i}]}]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(a){return function(b,c,d){var e=null;return function(){var f=this,g=arguments,h=d&&!e;return e&&a.cancel(e),e=a(function(){e=null,d||b.apply(f,g)},c,!1),h&&b.apply(f,g),e}}}]).factory("throttle",["$timeout",function(a){return function(b,c,d){var e=null;return d||(d={}),function(){var f=this,g=arguments;e||(d.leading!==!1&&b.apply(f,g),e=a(function(){e=null,d.trailing!==!1&&b.apply(f,g)},c,!1))}}}]),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(b,c){var d=(angular.element,{}),e=d.nodeName=function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()};d.css=function(b,c,d){var e;return e=b.currentStyle?b.currentStyle[c]:a.getComputedStyle?a.getComputedStyle(b)[c]:b.style[c],d===!0?parseFloat(e)||0:e},d.offset=function(b){var c=b.getBoundingClientRect(),d=b.ownerDocument;return{width:c.width||b.offsetWidth,height:c.height||b.offsetHeight,top:c.top+(a.pageYOffset||d.documentElement.scrollTop)-(d.documentElement.clientTop||0),left:c.left+(a.pageXOffset||d.documentElement.scrollLeft)-(d.documentElement.clientLeft||0)}},d.setOffset=function(a,b,c){var e,f,g,h,i,j,k,l=d.css(a,"position"),m=angular.element(a),n={};"static"===l&&(a.style.position="relative"),i=d.offset(a),g=d.css(a,"top"),j=d.css(a,"left"),k=("absolute"===l||"fixed"===l)&&(g+j).indexOf("auto")>-1,k?(e=d.position(a),h=e.top,f=e.left):(h=parseFloat(g)||0,f=parseFloat(j)||0),angular.isFunction(b)&&(b=b.call(a,c,i)),null!==b.top&&(n.top=b.top-i.top+h),null!==b.left&&(n.left=b.left-i.left+f),"using"in b?b.using.call(m,n):m.css({top:n.top+"px",left:n.left+"px"})},d.position=function(a){var b,c,g={top:0,left:0};return"fixed"===d.css(a,"position")?c=a.getBoundingClientRect():(b=f(a),c=d.offset(a),e(b,"html")||(g=d.offset(b)),g.top+=d.css(b,"borderTopWidth",!0),g.left+=d.css(b,"borderLeftWidth",!0)),{width:a.offsetWidth,height:a.offsetHeight,top:c.top-g.top-d.css(a,"marginTop",!0),left:c.left-g.left-d.css(a,"marginLeft",!0)}};var f=function(a){var b=a.ownerDocument,c=a.offsetParent||b;if(e(c,"#document"))return b.documentElement;for(;c&&!e(c,"html")&&"static"===d.css(c,"position");)c=c.offsetParent;return c||b.documentElement};return d.height=function(a,b){var c=a.offsetHeight;return b?c+=d.css(a,"marginTop",!0)+d.css(a,"marginBottom",!0):c-=d.css(a,"paddingTop",!0)+d.css(a,"paddingBottom",!0)+d.css(a,"borderTopWidth",!0)+d.css(a,"borderBottomWidth",!0),c},d.width=function(a,b){var c=a.offsetWidth;return b?c+=d.css(a,"marginLeft",!0)+d.css(a,"marginRight",!0):c-=d.css(a,"paddingLeft",!0)+d.css(a,"paddingRight",!0)+d.css(a,"borderLeftWidth",!0)+d.css(a,"borderRightWidth",!0),c},d}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var a=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(b,c){function d(d,e){function f(a,b){return a.map(function(a,c){var d,e,f={};return f[k]=a,d=j(b,f),e=n(b,f),{label:d,value:e,index:c}})}var g={},h=angular.extend({},a,e);g.$values=[];var i,j,k,l,m,n,o;return g.init=function(){g.$match=i=d.match(h.regexp),j=b(i[2]||i[1]),k=i[4]||i[6],l=i[5],m=b(i[3]||""),n=b(i[2]?i[1]:k),o=b(i[7])},g.valuesFn=function(a,b){return c.when(o(a,b)).then(function(b){return g.$values=b?f(b,a):{},g.$values})},g.displayValue=function(a){var b={};return b[k]=a,j(b)},g.init(),g}return d}]}),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function(c,d,e,f,g,h,i,j,k,l){function m(b){function c(){m.$emit(l.prefixEvent+".show",j)}function f(){m.$emit(l.prefixEvent+".hide",j),t.removeClass(l.prefixClass+"-open"),l.animation&&t.removeClass(l.prefixClass+"-with-"+l.animation)}function g(a){a.target===a.currentTarget&&("static"===l.backdrop?j.focus():j.hide())}function h(a){a.preventDefault()}var j={},l=j.$options=angular.extend({},a,b);j.$promise=p(l.template);var m=j.$scope=l.scope&&l.scope.$new()||d.$new();l.element||l.container||(l.container="body"),j.$id=l.id||l.element&&l.element.attr("id")||"",q(["title","content"],function(a){l[a]&&(m[a]=k.trustAsHtml(l[a]))}),m.$hide=function(){m.$$postDigest(function(){j.hide()})},m.$show=function(){m.$$postDigest(function(){j.show()})},m.$toggle=function(){m.$$postDigest(function(){j.toggle()})},j.$isShown=m.$isShown=!1,l.contentTemplate&&(j.$promise=j.$promise.then(function(a){var c=angular.element(a);return p(l.contentTemplate).then(function(a){var d=o('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var v,w,x=angular.element('<div class="'+l.prefixClass+'-backdrop"/>');return x.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":1038}),j.$promise.then(function(a){angular.isObject(a)&&(a=a.data),l.html&&(a=a.replace(u,'ng-bind-html="')),a=r.apply(a),v=e(a),j.init()}),j.init=function(){l.show&&m.$$postDigest(function(){j.show()})},j.destroy=function(){w&&(w.remove(),w=null),x&&(x.remove(),x=null),m.$destroy()},j.show=function(){if(!j.$isShown){var a,b;if(angular.isElement(l.container)?(a=l.container,b=l.container[0].lastChild?angular.element(l.container[0].lastChild):null):l.container?(a=o(l.container),b=a[0]&&a[0].lastChild?angular.element(a[0].lastChild):null):(a=null,b=l.element),w=j.$element=v(m,function(a,b){}),!m.$emit(l.prefixEvent+".show.before",j).defaultPrevented){w.css({display:"block"}).addClass(l.placement),l.animation&&(l.backdrop&&x.addClass(l.backdropAnimation),w.addClass(l.animation)),l.backdrop&&i.enter(x,t,null),angular.version.minor<=2?i.enter(w,a,b,c):i.enter(w,a,b).then(c),j.$isShown=m.$isShown=!0,n(m);var d=w[0];s(function(){d.focus()}),t.addClass(l.prefixClass+"-open"),l.animation&&t.addClass(l.prefixClass+"-with-"+l.animation),l.backdrop&&(w.on("click",g),x.on("click",g),x.on("wheel",h)),l.keyboard&&w.on("keyup",j.$onKeyUp)}}},j.hide=function(){j.$isShown&&(m.$emit(l.prefixEvent+".hide.before",j).defaultPrevented||(angular.version.minor<=2?i.leave(w,f):i.leave(w).then(f),l.backdrop&&i.leave(x),j.$isShown=m.$isShown=!1,n(m),l.backdrop&&(w.off("click",g),x.off("click",g),x.off("wheel",h)),l.keyboard&&w.off("keyup",j.$onKeyUp)))},j.toggle=function(){j.$isShown?j.hide():j.show()},j.focus=function(){w[0].focus()},j.$onKeyUp=function(a){27===a.which&&j.$isShown&&(j.hide(),a.stopPropagation())},j}function n(a){a.$$phase||a.$root&&a.$root.$$phase||a.$digest()}function o(a,c){return angular.element((c||b).querySelectorAll(a))}function p(a){return v[a]?v[a]:v[a]=h.get(a,{cache:g}).then(function(a){return a.data})}var q=angular.forEach,r=String.prototype.trim,s=c.requestAnimationFrame||c.setTimeout,t=angular.element(c.document.body),u=/ng-bind="/gi,v={};return m}]}).directive("bsModal",["$window","$sce","$modal",function(a,b,c){return{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation","id","prefixEvent","prefixClass"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])});var h=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(a){angular.isDefined(e[a])&&h.test(e[a])&&(g[a]=!1)}),angular.forEach(["title","content"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var i=c(g);d.on(e.trigger||"click",i.toggle),a.$on("$destroy",function(){i&&i.destroy(),g=null,i=null})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var a=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:a}}}).directive("bsNavbar",["$window","$location","$navbar",function(a,b,c){var d=c.defaults;return{restrict:"A",link:function(a,c,e,f){var g=angular.copy(d);angular.forEach(Object.keys(d),function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),a.$watch(function(){return b.path()},function(a,b){var d=c[0].querySelectorAll("li["+g.routeAttr+"]");angular.forEach(d,function(b){var c=angular.element(b),d=c.attr(g.routeAttr).replace("/","\\/");g.strict&&(d="^"+d+"$");var e=new RegExp(d,"i");e.test(a)?c.addClass(g.activeClass):c.removeClass(g.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var a=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$tooltip",function(b){function c(c,d){var e=angular.extend({},a,d),f=b(c,e);return e.content&&(f.$scope.content=e.content),f}return c}]}).directive("bsPopover",["$window","$sce","$popover",function(a,b,c){var d=a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,e,f){var g={scope:a};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","html","animation","customClass","autoClose","id","prefixClass","prefixEvent"],function(a){angular.isDefined(f[a])&&(g[a]=f[a])});var h=/^(false|0|)$/i;angular.forEach(["html","container","autoClose"],function(a){angular.isDefined(f[a])&&h.test(f[a])&&(g[a]=!1)});var i=e.attr("data-target");angular.isDefined(i)&&(g.target=h.test(i)?!1:i),angular.forEach(["title","content"],function(c){f[c]&&f.$observe(c,function(e,f){a[c]=b.trustAsHtml(e),angular.isDefined(f)&&d(function(){j&&j.$applyPlacement()})})}),f.bsPopover&&a.$watch(f.bsPopover,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b,angular.isDefined(c)&&d(function(){j&&j.$applyPlacement()})},!0),f.bsShow&&a.$watch(f.bsShow,function(a,b){j&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(popover),?/i)),a===!0?j.show():j.hide())}),f.viewport&&a.$watch(f.viewport,function(a){j&&angular.isDefined(a)&&j.setViewport(a)});var j=c(e,g);
a.$on("$destroy",function(){j&&j.destroy(),g=null,j=null})}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var a=this.$$spies={},c=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(d,e,f,g,h,i){function j(a,b){return a[0].nodeName&&a[0].nodeName.toLowerCase()===b.toLowerCase()}function k(e){var k=angular.extend({},c,e);k.element||(k.element=n);var o=j(k.element,"body"),p=o?l:k.element,q=o?"window":k.id;if(a[q])return a[q].$$count++,a[q];var r,s,t,u,v,w,x,y,z={},A=z.$trackedElements=[],B=[];return z.init=function(){this.$$count=1,u=h(this.checkPosition,k.debounce),v=i(this.checkPosition,k.throttle),p.on("click",this.checkPositionWithEventLoop),l.on("resize",u),p.on("scroll",v),w=h(this.checkOffsets,k.debounce),r=f.$on("$viewContentLoaded",w),s=f.$on("$includeContentLoaded",w),w(),q&&(a[q]=z)},z.destroy=function(){this.$$count--,this.$$count>0||(p.off("click",this.checkPositionWithEventLoop),l.off("resize",u),p.off("scroll",v),r(),s(),q&&delete a[q])},z.checkPosition=function(){if(B.length){if(y=(o?d.pageYOffset:p.prop("scrollTop"))||0,x=Math.max(d.innerHeight,m.prop("clientHeight")),y<B[0].offsetTop&&t!==B[0].target)return z.$activateElement(B[0]);for(var a=B.length;a--;)if(!angular.isUndefined(B[a].offsetTop)&&null!==B[a].offsetTop&&t!==B[a].target&&!(y<B[a].offsetTop||B[a+1]&&y>B[a+1].offsetTop))return z.$activateElement(B[a])}},z.checkPositionWithEventLoop=function(){setTimeout(z.checkPosition,1)},z.$activateElement=function(a){if(t){var b=z.$getTrackedElement(t);b&&(b.source.removeClass("active"),j(b.source,"li")&&j(b.source.parent().parent(),"li")&&b.source.parent().parent().removeClass("active"))}t=a.target,a.source.addClass("active"),j(a.source,"li")&&j(a.source.parent().parent(),"li")&&a.source.parent().parent().addClass("active")},z.$getTrackedElement=function(a){return A.filter(function(b){return b.target===a})[0]},z.checkOffsets=function(){angular.forEach(A,function(a){var c=b.querySelector(a.target);a.offsetTop=c?g.offset(c).top:null,k.offset&&null!==a.offsetTop&&(a.offsetTop-=1*k.offset)}),B=A.filter(function(a){return null!==a.offsetTop}).sort(function(a,b){return a.offsetTop-b.offsetTop}),u()},z.trackElement=function(a,b){A.push({target:a,source:b})},z.untrackElement=function(a,b){for(var c,d=A.length;d--;)if(A[d].target===a&&A[d].source===b){c=d;break}A=A.splice(c,1)},z.activate=function(a){A[a].addClass("active")},z.init(),z}var l=angular.element(d),m=angular.element(e.prop("documentElement")),n=angular.element(d.document.body);return k}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(a,b,c,d){return{restrict:"EAC",link:function(a,b,c){var e={scope:a};angular.forEach(["offset","target"],function(a){angular.isDefined(c[a])&&(e[a]=c[a])});var f=d(e);f.trackElement(e.target,b),a.$on("$destroy",function(){f&&(f.untrackElement(e.target,b),f.destroy()),e=null,f=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(a,b,c,d){return{restrict:"A",compile:function(a,b){var c=a[0].querySelectorAll("li > a[href]");angular.forEach(c,function(a){var b=angular.element(a);b.parent().attr("bs-scrollspy","").attr("data-target",b.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var a=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",template:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip","$timeout",function(b,c,d,e,f){function g(b,c,d){var g={},h=angular.extend({},a,d);g=e(b,h);var j=g.$scope;j.$matches=[],j.$activeIndex=h.multiple?[]:-1,j.$isMultiple=h.multiple,j.$showAllNoneButtons=h.allNoneButtons&&h.multiple,j.$iconCheckmark=h.iconCheckmark,j.$allText=h.allText,j.$noneText=h.noneText,j.$activate=function(a){j.$$postDigest(function(){g.activate(a)})},j.$select=function(a,b){j.$$postDigest(function(){g.select(a)})},j.$isVisible=function(){return g.$isVisible()},j.$isActive=function(a){return g.$isActive(a)},j.$selectAll=function(){for(var a=0;a<j.$matches.length;a++)j.$isActive(a)||j.$select(a)},j.$selectNone=function(){for(var a=0;a<j.$matches.length;a++)j.$isActive(a)&&j.$select(a)},g.update=function(a){j.$matches=a,g.$updateActiveIndex()},g.activate=function(a){return h.multiple?(g.$isActive(a)?j.$activeIndex.splice(j.$activeIndex.indexOf(a),1):j.$activeIndex.push(a),h.sort&&j.$activeIndex.sort(function(a,b){return a-b})):j.$activeIndex=a,j.$activeIndex},g.select=function(a){var b=j.$matches[a].value;j.$apply(function(){g.activate(a),h.multiple?c.$setViewValue(j.$activeIndex.map(function(a){return j.$matches[a].value})):(c.$setViewValue(b),g.hide())}),j.$emit(h.prefixEvent+".select",b,a,g)},g.$updateActiveIndex=function(){c.$modelValue&&j.$matches.length?j.$activeIndex=h.multiple&&angular.isArray(c.$modelValue)?c.$modelValue.map(function(a){return g.$getIndex(a)}):g.$getIndex(c.$modelValue):j.$activeIndex>=j.$matches.length&&(j.$activeIndex=h.multiple?[]:0)},g.$isVisible=function(){return h.minLength&&c?j.$matches.length&&c.$viewValue.length>=h.minLength:j.$matches.length},g.$isActive=function(a){return h.multiple?-1!==j.$activeIndex.indexOf(a):j.$activeIndex===a},g.$getIndex=function(a){var b=j.$matches.length,c=b;if(b){for(c=b;c--&&j.$matches[c].value!==a;);if(!(0>c))return c}},g.$onMouseDown=function(a){if(a.preventDefault(),a.stopPropagation(),i){var b=angular.element(a.target);b.triggerHandler("click")}},g.$onKeyDown=function(a){return/(9|13|38|40)/.test(a.keyCode)?(a.preventDefault(),a.stopPropagation(),h.multiple&&9===a.keyCode?g.hide():h.multiple||13!==a.keyCode&&9!==a.keyCode?void(h.multiple||(38===a.keyCode&&j.$activeIndex>0?j.$activeIndex--:38===a.keyCode&&j.$activeIndex<0?j.$activeIndex=j.$matches.length-1:40===a.keyCode&&j.$activeIndex<j.$matches.length-1?j.$activeIndex++:angular.isUndefined(j.$activeIndex)&&(j.$activeIndex=0),j.$digest())):g.select(j.$activeIndex)):void 0};var k=g.show;g.show=function(){k(),h.multiple&&g.$element.addClass("select-multiple"),f(function(){g.$element.on(i?"touchstart":"mousedown",g.$onMouseDown),h.keyboard&&b.on("keydown",g.$onKeyDown)},0,!1)};var l=g.hide;return g.hide=function(){h.multiple||c.$modelValue||(j.$activeIndex=-1),g.$element.off(i?"touchstart":"mousedown",g.$onMouseDown),h.keyboard&&b.off("keydown",g.$onKeyDown),l(!0)},g}var h=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),i="createTouch"in b.document&&h;return g.defaults=a,g}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(a,b,c,d,e){var f=d.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,b,c,g){var h={scope:a,placeholder:f.placeholder};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","placeholder","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml","prefixClass","prefixEvent"],function(a){angular.isDefined(c[a])&&(h[a]=c[a])});var i=/^(false|0|)$/i;angular.forEach(["html","container","allNoneButtons","sort"],function(a){angular.isDefined(c[a])&&i.test(c[a])&&(h[a]=!1)});var j=b.attr("data-multiple");if(angular.isDefined(j)&&(h.multiple=i.test(j)?!1:j),"select"===b[0].nodeName.toLowerCase()){var k=b;k.css("display","none"),b=angular.element('<button type="button" class="btn btn-default"></button>'),k.after(b)}var l=e(c.bsOptions),m=d(b,g,h),n=l.$match[7].replace(/\|.+/,"").trim();a.$watchCollection(n,function(b,c){l.valuesFn(a,g).then(function(a){m.update(a),g.$render()})}),a.$watch(c.ngModel,function(a,b){m.$updateActiveIndex(),g.$render()},!0),g.$render=function(){var a,c;h.multiple&&angular.isArray(g.$modelValue)?(a=g.$modelValue.map(function(a){return c=m.$getIndex(a),angular.isDefined(c)?m.$scope.$matches[c].label:!1}).filter(angular.isDefined),a=a.length>(h.maxLength||f.maxLength)?a.length+" "+(h.maxLengthHtml||f.maxLengthHtml):a.join(", ")):(c=m.$getIndex(g.$modelValue),a=angular.isDefined(c)?m.$scope.$matches[c].label:!1),b.html((a?a:h.placeholder)+(h.caretHtml?h.caretHtml:f.caretHtml))},h.multiple&&(g.$isEmpty=function(a){return!a||0===a.length}),a.$on("$destroy",function(){m&&m.destroy(),h=null,m=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var a=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},b=this.controller=function(b,c,d){var e=this;e.$options=angular.copy(a),angular.forEach(["animation","navClass","activeClass"],function(a){angular.isDefined(d[a])&&(e.$options[a]=d[a])}),b.$navClass=e.$options.navClass,b.$activeClass=e.$options.activeClass,e.$panes=b.$panes=[],e.$activePaneChangeListeners=e.$viewChangeListeners=[],e.$push=function(a){angular.isUndefined(e.$panes.$active)&&b.$setActive(a.name||0),e.$panes.push(a)},e.$remove=function(a){var b,c=e.$panes.indexOf(a),d=e.$panes.$active;b=angular.isString(d)?e.$panes.map(function(a){return a.name}).indexOf(d):e.$panes.$active,e.$panes.splice(c,1),b>c?b--:c===b&&b===e.$panes.length&&b--,b>=0&&b<e.$panes.length?e.$setActive(e.$panes[b].name||b):e.$setActive()},e.$setActive=b.$setActive=function(a){e.$panes.$active=a,e.$activePaneChangeListeners.forEach(function(a){a()})},e.$isActive=b.$isActive=function(a,b){return e.$panes.$active===a.name||e.$panes.$active===b}};this.$get=function(){var c={};return c.defaults=a,c.controller=b,c}}).directive("bsTabs",["$window","$animate","$tab","$parse",function(a,b,c,d){var e=c.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",c.controller],templateUrl:function(a,b){return b.template||e.template},link:function(a,b,c,e){var f=e[0],g=e[1];if(f&&(g.$activePaneChangeListeners.push(function(){f.$setViewValue(g.$panes.$active)}),f.$formatters.push(function(a){return g.$setActive(a),a})),c.bsActivePane){var h=d(c.bsActivePane);g.$activePaneChangeListeners.push(function(){h.assign(a,g.$panes.$active)}),a.$watch(c.bsActivePane,function(a,b){g.$setActive(a)},!0)}}}}]).directive("bsPane",["$window","$animate","$sce",function(a,b,c){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(a,d,e,f){function g(){var c=h.$panes.indexOf(a);b[h.$isActive(a,c)?"addClass":"removeClass"](d,h.$options.activeClass)}var h=(f[0],f[1]);d.addClass("tab-pane"),e.$observe("title",function(b,d){a.title=c.trustAsHtml(b)}),a.name=e.name,h.$options.animation&&d.addClass(h.$options.animation),e.$observe("disabled",function(b,c){a.disabled=a.$eval(b)}),h.$push(a),a.$on("$destroy",function(){h.$remove(a)}),h.$activePaneChangeListeners.push(function(){g()}),g()}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var a=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function(b,c,d,e,f,g,h){function i(b,c,d){function e(a){var b=6e4*o.minuteStep;return new Date(Math.floor(a.getTime()/b)*b)}function i(a,c){var d=a+c;if(b[0].createTextRange){var e=b[0].createTextRange();e.collapse(!0),e.moveStart("character",a),e.moveEnd("character",d),e.select()}else b[0].setSelectionRange?b[0].setSelectionRange(a,d):angular.isUndefined(b[0].selectionStart)&&(b[0].selectionStart=a,b[0].selectionEnd=d)}function l(){b[0].focus()}var m=g(b,angular.extend({},a,d)),n=d.scope,o=m.$options,p=m.$scope,q=o.lang,r=function(a,b,c){return f.formatDate(a,b,q,c)},s=0,t=o.roundDisplay?e(new Date):new Date,u=c.$dateValue||t,v={hour:u.getHours(),meridian:u.getHours()<12,minute:u.getMinutes(),second:u.getSeconds(),millisecond:u.getMilliseconds()},w=f.getDatetimeFormat(o.timeFormat,q),x=f.hoursFormat(w),y=f.timeSeparator(w),z=f.minutesFormat(w),A=f.secondsFormat(w),B=f.showSeconds(w),C=f.showAM(w);p.$iconUp=o.iconUp,p.$iconDown=o.iconDown,p.$select=function(a,b){m.select(a,b)},p.$moveIndex=function(a,b){m.$moveIndex(a,b)},p.$switchMeridian=function(a){m.switchMeridian(a)},m.update=function(a){angular.isDate(a)&&!isNaN(a.getTime())?(m.$date=a,angular.extend(v,{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()}),m.$build()):m.$isBuilt||m.$build()},m.select=function(a,b,d){(!c.$dateValue||isNaN(c.$dateValue.getTime()))&&(c.$dateValue=new Date(1970,0,1)),angular.isDate(a)||(a=new Date(a)),0===b?c.$dateValue.setHours(a.getHours()):1===b?c.$dateValue.setMinutes(a.getMinutes()):2===b&&c.$dateValue.setSeconds(a.getSeconds()),c.$setViewValue(angular.copy(c.$dateValue)),c.$render(),o.autoclose&&!d&&h(function(){m.hide(!0)})},m.switchMeridian=function(a){if(c.$dateValue&&!isNaN(c.$dateValue.getTime())){var b=(a||c.$dateValue).getHours();c.$dateValue.setHours(12>b?b+12:b-12),c.$setViewValue(angular.copy(c.$dateValue)),c.$render()}},m.$build=function(){var a,b,c=p.midIndex=parseInt(o.length/2,10),d=[];for(a=0;a<o.length;a++)b=new Date(1970,0,1,v.hour-(c-a)*o.hourStep),d.push({date:b,label:r(b,x),selected:m.$date&&m.$isSelected(b,0),disabled:m.$isDisabled(b,0)});var e,f=[];for(a=0;a<o.length;a++)e=new Date(1970,0,1,0,v.minute-(c-a)*o.minuteStep),f.push({date:e,label:r(e,z),selected:m.$date&&m.$isSelected(e,1),disabled:m.$isDisabled(e,1)});var g,h=[];for(a=0;a<o.length;a++)g=new Date(1970,0,1,0,0,v.second-(c-a)*o.secondStep),h.push({date:g,label:r(g,A),selected:m.$date&&m.$isSelected(g,2),disabled:m.$isDisabled(g,2)});var i=[];for(a=0;a<o.length;a++)i.push(B?[d[a],f[a],h[a]]:[d[a],f[a]]);p.rows=i,p.showSeconds=B,p.showAM=C,p.isAM=(m.$date||d[c].date).getHours()<12,p.timeSeparator=y,m.$isBuilt=!0},m.$isSelected=function(a,b){return m.$date?0===b?a.getHours()===m.$date.getHours():1===b?a.getMinutes()===m.$date.getMinutes():2===b?a.getSeconds()===m.$date.getSeconds():void 0:!1},m.$isDisabled=function(a,b){var c;return 0===b?c=a.getTime()+6e4*v.minute+1e3*v.second:1===b?c=a.getTime()+36e5*v.hour+1e3*v.second:2===b&&(c=a.getTime()+36e5*v.hour+6e4*v.minute),c<1*o.minTime||c>1*o.maxTime},p.$arrowAction=function(a,b){"picker"===o.arrowBehavior?m.$setTimeByStep(a,b):m.$moveIndex(a,b)},m.$setTimeByStep=function(a,b){var c=new Date(m.$date),d=c.getHours(),e=(r(c,x).length,c.getMinutes()),f=(r(c,z).length,c.getSeconds());r(c,A).length,0===b?c.setHours(d-parseInt(o.hourStep,10)*a):1===b?c.setMinutes(e-parseInt(o.minuteStep,10)*a):2===b&&c.setSeconds(f-parseInt(o.secondStep,10)*a),m.select(c,b,!0)},m.$moveIndex=function(a,b){var c;0===b?(c=new Date(1970,0,1,v.hour+a*o.length,v.minute,v.second),angular.extend(v,{hour:c.getHours()})):1===b?(c=new Date(1970,0,1,v.hour,v.minute+a*o.length*o.minuteStep,v.second),angular.extend(v,{minute:c.getMinutes()})):2===b&&(c=new Date(1970,0,1,v.hour,v.minute,v.second+a*o.length*o.secondStep),angular.extend(v,{second:c.getSeconds()})),m.$build()},m.$onMouseDown=function(a){if("input"!==a.target.nodeName.toLowerCase()&&a.preventDefault(),a.stopPropagation(),k){var b=angular.element(a.target);"button"!==b[0].nodeName.toLowerCase()&&(b=b.parent()),b.triggerHandler("click")}},m.$onKeyDown=function(a){if(/(38|37|39|40|13)/.test(a.keyCode)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return m.hide(!0);var b=new Date(m.$date),c=b.getHours(),d=r(b,x).length,e=b.getMinutes(),f=r(b,z).length,g=b.getSeconds(),h=r(b,A).length,j=1,k=/(37|39)/.test(a.keyCode),l=2+1*B+1*C;k&&(37===a.keyCode?s=1>s?l-1:s-1:39===a.keyCode&&(s=l-1>s?s+1:0));var p=[0,d],q=0;38===a.keyCode&&(q=-1),40===a.keyCode&&(q=1);var t=2===s&&B,u=2===s&&!B||3===s&&B;0===s?(b.setHours(c+q*parseInt(o.hourStep,10)),d=r(b,x).length,p=[0,d]):1===s?(b.setMinutes(e+q*parseInt(o.minuteStep,10)),f=r(b,z).length,p=[d+j,f]):t?(b.setSeconds(g+q*parseInt(o.secondStep,10)),h=r(b,A).length,p=[d+j+f+j,h]):u&&(k||m.switchMeridian(),p=[d+j+f+j+(h+j)*B,2]),m.select(b,s,!0),i(p[0],p[1]),n.$digest()}};var D=m.init;m.init=function(){return j&&o.useNative?(b.prop("type","time"),void b.css("-webkit-appearance","textfield")):(k&&(b.prop("type","text"),b.attr("readonly","true"),b.on("click",l)),void D())};var E=m.destroy;m.destroy=function(){j&&o.useNative&&b.off("click",l),E()};var F=m.show;m.show=function(){F(),h(function(){m.$element&&m.$element.on(k?"touchstart":"mousedown",m.$onMouseDown),o.keyboard&&b&&b.on("keydown",m.$onKeyDown)},0,!1)};var G=m.hide;return m.hide=function(a){m.$isShown&&(m.$element&&m.$element.off(k?"touchstart":"mousedown",m.$onMouseDown),o.keyboard&&b&&b.off("keydown",m.$onKeyDown),G(a))},m}var j=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),k="createTouch"in b.document&&j;return a.lang||(a.lang=f.getDefaultLocale()),i.defaults=a,i}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function(a,b,c,d,e,f){var g=f.defaults,h=/(ip(a|o)d|iphone|android)/gi.test(a.navigator.userAgent);return a.requestAnimationFrame||a.setTimeout,{restrict:"EAC",require:"ngModel",link:function(a,b,c,i){function j(a){if(angular.isDate(a)){var b=isNaN(l.minTime)||new Date(a.getTime()).setFullYear(1970,0,1)>=l.minTime,c=isNaN(l.maxTime)||new Date(a.getTime()).setFullYear(1970,0,1)<=l.maxTime,d=b&&c;i.$setValidity("date",d),i.$setValidity("min",b),i.$setValidity("max",c),d&&(i.$dateValue=a)}}function k(){return!i.$dateValue||isNaN(i.$dateValue.getTime())?"":p(i.$dateValue,l.timeFormat)}var l={scope:a,controller:i};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","secondStep","length","arrowBehavior","iconUp","iconDown","roundDisplay","id","prefixClass","prefixEvent"],function(a){angular.isDefined(c[a])&&(l[a]=c[a])});var m=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative","roundDisplay"],function(a){angular.isDefined(c[a])&&m.test(c[a])&&(l[a]=!1)}),c.bsShow&&a.$watch(c.bsShow,function(a,b){n&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(timepicker),?/i)),a===!0?n.show():n.hide())}),h&&(l.useNative||g.useNative)&&(l.timeFormat="HH:mm");var n=f(b,i,l);l=n.$options;var o=l.lang,p=function(a,b,c){return d.formatDate(a,b,o,c)},q=e({format:l.timeFormat,lang:o});angular.forEach(["minTime","maxTime"],function(a){angular.isDefined(c[a])&&c.$observe(a,function(b){n.$options[a]=q.getTimeForAttribute(a,b),!isNaN(n.$options[a])&&n.$build(),j(i.$dateValue)})}),a.$watch(c.ngModel,function(a,b){n.update(i.$dateValue)},!0),i.$parsers.unshift(function(a){var b;if(!a)return i.$setValidity("date",!0),null;var c=angular.isDate(a)?a:q.parse(a,i.$dateValue);return!c||isNaN(c.getTime())?void i.$setValidity("date",!1):(j(c),"string"===l.timeType?(b=q.timezoneOffsetAdjust(c,l.timezone,!0),p(b,l.modelTimeFormat||l.timeFormat)):(b=q.timezoneOffsetAdjust(i.$dateValue,l.timezone,!0),"number"===l.timeType?b.getTime():"unix"===l.timeType?b.getTime()/1e3:"iso"===l.timeType?b.toISOString():new Date(b)))}),i.$formatters.push(function(a){var b;return b=angular.isUndefined(a)||null===a?NaN:angular.isDate(a)?a:"string"===l.timeType?q.parse(a,null,l.modelTimeFormat):new Date("unix"===l.timeType?1e3*a:a),i.$dateValue=q.timezoneOffsetAdjust(b,l.timezone),k()}),i.$render=function(){b.val(k())},a.$on("$destroy",function(){n&&n.destroy(),l=null,n=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var a=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(c,d,e,f,g,h,i,j,k,l,m){function n(f,g){function h(){L.$emit(K.prefixEvent+".show",I)}function n(){if(L.$emit(K.prefixEvent+".hide",I),Q===V){if(U&&"focus"===K.trigger)return f[0].blur();H()}}function v(){var a=K.trigger.split(" ");angular.forEach(a,function(a){"click"===a?f.on("click",I.toggle):"manual"!==a&&(f.on("hover"===a?"mouseenter":"focus",I.enter),f.on("hover"===a?"mouseleave":"blur",I.leave),"button"===J&&"hover"!==a&&f.on(s?"touchstart":"mousedown",I.$onFocusElementMouseDown))})}function w(){for(var a=K.trigger.split(" "),b=a.length;b--;){var c=a[b];"click"===c?f.off("click",I.toggle):"manual"!==c&&(f.off("hover"===c?"mouseenter":"focus",I.enter),f.off("hover"===c?"mouseleave":"blur",I.leave),"button"===J&&"hover"!==c&&f.off(s?"touchstart":"mousedown",I.$onFocusElementMouseDown))}}function x(){"focus"!==K.trigger?Q.on("keyup",I.$onKeyUp):f.on("keyup",I.$onFocusKeyUp)}function y(){"focus"!==K.trigger?Q.off("keyup",I.$onKeyUp):f.off("keyup",I.$onFocusKeyUp)}function z(){m(function(){Q.on("click",B),u.on("click",I.hide),W=!0},0,!1)}function A(){W&&(Q.off("click",B),u.off("click",I.hide),W=!1)}function B(a){a.stopPropagation()}function C(a){a=a||K.target||f;var d=a[0],e="BODY"===d.tagName,g=d.getBoundingClientRect(),h={};for(var i in g)h[i]=g[i];null===h.width&&(h=angular.extend({},h,{width:g.right-g.left,height:g.bottom-g.top}));var j=e?{top:0,left:0}:k.offset(d),l={scroll:e?b.documentElement.scrollTop||b.body.scrollTop:a.prop("scrollTop")||0},m=e?{width:b.documentElement.clientWidth,height:c.innerHeight}:null;return angular.extend({},h,l,m,j)}function D(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}function E(a,b){var c=Q[0],d=c.offsetWidth,e=c.offsetHeight,f=parseInt(k.css(c,"margin-top"),10),g=parseInt(k.css(c,"margin-left"),10);isNaN(f)&&(f=0),isNaN(g)&&(g=0),a.top=a.top+f,a.left=a.left+g,k.setOffset(c,angular.extend({using:function(a){Q.css({top:Math.round(a.top)+"px",left:Math.round(a.left)+"px",right:""})}},a),0);var h=c.offsetWidth,i=c.offsetHeight;if("top"===b&&i!==e&&(a.top=a.top+e-i),!/top-left|top-right|bottom-left|bottom-right/.test(b)){var j=F(b,a,h,i);if(j.left?a.left+=j.left:a.top+=j.top,k.setOffset(c,a),/top|right|bottom|left/.test(b)){var l=/top|bottom/.test(b),m=l?2*j.left-d+h:2*j.top-e+i,n=l?"offsetWidth":"offsetHeight";G(m,c[n],l)}}}function F(a,b,c,d){var e={top:0,left:0},f=K.viewport&&p(K.viewport.selector||K.viewport);if(!f)return e;var g=K.viewport&&K.viewport.padding||0,h=C(f);if(/right|left/.test(a)){var i=b.top-g-h.scroll,j=b.top+g-h.scroll+d;i<h.top?e.top=h.top-i:j>h.top+h.height&&(e.top=h.top+h.height-j)}else{var k=b.left-g,l=b.left+g+c;k<h.left?e.left=h.left-k:l>h.width&&(e.left=h.left+h.width-l)}return e}function G(a,b,c){var d=p(".tooltip-arrow, .arrow",Q[0]);d.css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")}function H(){clearTimeout(N),I.$isShown&&null!==Q&&(K.autoClose&&A(),K.keyboard&&y()),T&&(T.$destroy(),T=null),Q&&(Q.remove(),Q=I.$element=null)}var I={},J=f[0].nodeName.toLowerCase(),K=I.$options=angular.extend({},a,g);I.$promise=q(K.template);var L=I.$scope=K.scope&&K.scope.$new()||d.$new();if(K.delay&&angular.isString(K.delay)){var M=K.delay.split(",").map(parseFloat);K.delay=M.length>1?{show:M[0],hide:M[1]}:M[0]}I.$id=K.id||f.attr("id")||"",K.title&&(L.title=j.trustAsHtml(K.title)),L.$setEnabled=function(a){L.$$postDigest(function(){I.setEnabled(a)})},L.$hide=function(){L.$$postDigest(function(){I.hide()})},L.$show=function(){L.$$postDigest(function(){I.show()})},L.$toggle=function(){L.$$postDigest(function(){I.toggle()})},I.$isShown=L.$isShown=!1;var N,O;K.contentTemplate&&(I.$promise=I.$promise.then(function(a){var b=angular.element(a);return q(K.contentTemplate).then(function(a){var c=p('[ng-bind="content"]',b[0]);return c.length||(c=p('[ng-bind="title"]',b[0])),c.removeAttr("ng-bind").html(a),b[0].outerHTML})}));var P,Q,R,S,T;I.$promise.then(function(a){angular.isObject(a)&&(a=a.data),K.html&&(a=a.replace(t,'ng-bind-html="')),a=r.apply(a),R=a,P=e(a),I.init()}),I.init=function(){K.delay&&angular.isNumber(K.delay)&&(K.delay={show:K.delay,hide:K.delay}),"self"===K.container?S=f:angular.isElement(K.container)?S=K.container:K.container&&(S=p(K.container)),v(),K.target&&(K.target=angular.isElement(K.target)?K.target:p(K.target)),K.show&&L.$$postDigest(function(){"focus"===K.trigger?f[0].focus():I.show()})},I.destroy=function(){w(),H(),L.$destroy()},I.enter=function(){return clearTimeout(N),O="in",K.delay&&K.delay.show?void(N=setTimeout(function(){"in"===O&&I.show()},K.delay.show)):I.show()},I.show=function(){if(K.bsEnabled&&!I.$isShown){L.$emit(K.prefixEvent+".show.before",I);var a,b;K.container?(a=S,b=S[0].lastChild?angular.element(S[0].lastChild):null):(a=null,b=f),Q&&H(),T=I.$scope.$new(),Q=I.$element=P(T,function(a,b){}),Q.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"}),K.animation&&Q.addClass(K.animation),K.type&&Q.addClass(K.prefixClass+"-"+K.type),K.customClass&&Q.addClass(K.customClass),b?b.after(Q):a.prepend(Q),I.$isShown=L.$isShown=!0,o(L),I.$applyPlacement(),angular.version.minor<=2?i.enter(Q,a,b,h):i.enter(Q,a,b).then(h),o(L),l(function(){Q&&Q.css({visibility:"visible"})}),K.keyboard&&("focus"!==K.trigger&&I.focus(),x()),K.autoClose&&z()}},I.leave=function(){return clearTimeout(N),O="out",K.delay&&K.delay.hide?void(N=setTimeout(function(){"out"===O&&I.hide()},K.delay.hide)):I.hide()};var U,V;I.hide=function(a){I.$isShown&&(L.$emit(K.prefixEvent+".hide.before",I),U=a,V=Q,angular.version.minor<=2?i.leave(Q,n):i.leave(Q).then(n),I.$isShown=L.$isShown=!1,o(L),K.keyboard&&null!==Q&&y(),K.autoClose&&null!==Q&&A())},I.toggle=function(){I.$isShown?I.leave():I.enter()},I.focus=function(){Q[0].focus()},I.setEnabled=function(a){K.bsEnabled=a},I.setViewport=function(a){K.viewport=a},I.$applyPlacement=function(){if(Q){var b=K.placement,c=/\s?auto?\s?/i,d=c.test(b);d&&(b=b.replace(c,"")||a.placement),Q.addClass(K.placement);var e=C(),g=Q.prop("offsetWidth"),h=Q.prop("offsetHeight");if(d){var i=b,j=K.container?p(K.container):f.parent(),k=C(j);i.indexOf("bottom")>=0&&e.bottom+h>k.bottom?b=i.replace("bottom","top"):i.indexOf("top")>=0&&e.top-h<k.top&&(b=i.replace("top","bottom")),("right"===i||"bottom-left"===i||"top-left"===i)&&e.right+g>k.width?b="right"===i?"left":b.replace("left","right"):("left"===i||"bottom-right"===i||"top-right"===i)&&e.left-g<k.left&&(b="left"===i?"right":b.replace("right","left")),Q.removeClass(i).addClass(b)}var l=D(b,e,g,h);E(l,b)}},I.$onKeyUp=function(a){27===a.which&&I.$isShown&&(I.hide(),a.stopPropagation())},I.$onFocusKeyUp=function(a){27===a.which&&(f[0].blur(),a.stopPropagation())},I.$onFocusElementMouseDown=function(a){a.preventDefault(),a.stopPropagation(),I.$isShown?f[0].blur():f[0].focus()};var W=!1;return I}function o(a){a.$$phase||a.$root&&a.$root.$$phase||a.$digest()}function p(a,c){return angular.element((c||b).querySelectorAll(a))}function q(a){return v[a]?v[a]:v[a]=h.get(a,{cache:g}).then(function(a){return a.data})}var r=String.prototype.trim,s="createTouch"in c.document,t=/ng-bind="/gi,u=angular.element(c.document),v={};return n}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(a,b,c,d,e){return{restrict:"EAC",scope:!0,link:function(a,b,f,g){var h={scope:a};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(a){angular.isDefined(f[a])&&(h[a]=f[a])});var i=/^(false|0|)$/i;angular.forEach(["html","container"],function(a){angular.isDefined(f[a])&&i.test(f[a])&&(h[a]=!1)});var j=b.attr("data-target");angular.isDefined(j)&&(h.target=i.test(j)?!1:j),a.hasOwnProperty("title")||(a.title=""),f.$observe("title",function(b){if(angular.isDefined(b)||!a.hasOwnProperty("title")){var d=a.title;a.title=c.trustAsHtml(b),angular.isDefined(d)&&e(function(){k&&k.$applyPlacement()})}}),f.bsTooltip&&a.$watch(f.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.title=b,angular.isDefined(c)&&e(function(){k&&k.$applyPlacement()})},!0),f.bsShow&&a.$watch(f.bsShow,function(a,b){k&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(tooltip),?/i)),a===!0?k.show():k.hide())}),f.bsEnabled&&a.$watch(f.bsEnabled,function(a,b){k&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|1|,?(tooltip),?/i)),k.setEnabled(a===!1?!1:!0))}),f.viewport&&a.$watch(f.viewport,function(a){k&&angular.isDefined(a)&&k.setViewport(a)});var k=d(b,h);a.$on("$destroy",function(){k&&k.destroy(),h=null,k=null})}}}]),angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var a=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",template:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"filter",limit:6,autoSelect:!1,comparator:"",trimValue:!0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(b,c,d,e){function f(b,c,f){var g={},h=angular.extend({},a,f);g=d(b,h);var i=f.scope,j=g.$scope;j.$resetMatches=function(){j.$matches=[],j.$activeIndex=h.autoSelect?0:-1},j.$resetMatches(),j.$activate=function(a){j.$$postDigest(function(){g.activate(a)})},j.$select=function(a,b){j.$$postDigest(function(){g.select(a)})},j.$isVisible=function(){return g.$isVisible()},g.update=function(a){j.$matches=a,j.$activeIndex>=a.length&&(j.$activeIndex=h.autoSelect?0:-1),/^(bottom|bottom-left|bottom-right)$/.test(h.placement)||e(g.$applyPlacement)},g.activate=function(a){j.$activeIndex=a},g.select=function(a){if(-1!==a){var b=j.$matches[a].value;c.$setViewValue(b),c.$render(),j.$resetMatches(),i&&i.$digest(),j.$emit(h.prefixEvent+".select",b,a,g)}},g.$isVisible=function(){return h.minLength&&c?j.$matches.length&&angular.isString(c.$viewValue)&&c.$viewValue.length>=h.minLength:!!j.$matches.length},g.$getIndex=function(a){var b=j.$matches.length,c=b;if(b){for(c=b;c--&&j.$matches[c].value!==a;);if(!(0>c))return c}},g.$onMouseDown=function(a){a.preventDefault(),a.stopPropagation()},g.$onKeyDown=function(a){/(38|40|13)/.test(a.keyCode)&&(!g.$isVisible()||13===a.keyCode&&-1===j.$activeIndex||(a.preventDefault(),a.stopPropagation()),13===a.keyCode&&j.$matches.length?g.select(j.$activeIndex):38===a.keyCode&&j.$activeIndex>0?j.$activeIndex--:40===a.keyCode&&j.$activeIndex<j.$matches.length-1?j.$activeIndex++:angular.isUndefined(j.$activeIndex)&&(j.$activeIndex=0),j.$digest())};var k=g.show;g.show=function(){k(),e(function(){g.$element&&g.$element.on("mousedown",g.$onMouseDown),h.keyboard&&b&&b.on("keydown",g.$onKeyDown);
},0,!1)};var l=g.hide;return g.hide=function(){g.$element&&g.$element.off("mousedown",g.$onMouseDown),h.keyboard&&b&&b.off("keydown",g.$onKeyDown),h.autoSelect||g.activate(-1),l()},g}return angular.element(b.document.body),f.defaults=a,f}]}).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(a,b,c,d,e){var f=d.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,b,c,g){var h={scope:a};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","minLength","watchOptions","selectMode","autoSelect","comparator","id","prefixEvent","prefixClass"],function(a){angular.isDefined(c[a])&&(h[a]=c[a])});var i=/^(false|0|)$/i;angular.forEach(["html","container","trimValue"],function(a){angular.isDefined(c[a])&&i.test(c[a])&&(h[a]=!1)}),b.attr("autocomplete","off");var j=h.filter||f.filter,k=h.limit||f.limit,l=h.comparator||f.comparator,m=c.bsOptions;j&&(m+=" | "+j+":$viewValue"),l&&(m+=":"+l),k&&(m+=" | limitTo:"+k);var n=e(m),o=d(b,g,h);if(h.watchOptions){var p=n.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();a.$watchCollection(p,function(b,c){n.valuesFn(a,g).then(function(a){o.update(a),g.$render()})})}a.$watch(c.ngModel,function(b,c){a.$modelValue=b,n.valuesFn(a,g).then(function(a){if(h.selectMode&&!a.length&&b.length>0)return void g.$setViewValue(g.$viewValue.substring(0,g.$viewValue.length-1));a.length>k&&(a=a.slice(0,k));var c=o.$isVisible();c&&o.update(a),(1!==a.length||a[0].value!==b)&&(!c&&o.update(a),g.$render())})}),g.$formatters.push(function(a){var b=n.displayValue(a);return b?b:a&&"object"!=typeof a?a:""}),g.$render=function(){if(g.$isEmpty(g.$viewValue))return b.val("");var a=o.$getIndex(g.$modelValue),c=angular.isDefined(a)?o.$scope.$matches[a].label:g.$viewValue;c=angular.isObject(c)?n.displayValue(c):c;var d=c?c.toString().replace(/<(?:.|\n)*?>/gm,""):"";b.val(h.trimValue===!1?d:d.trim())},a.$on("$destroy",function(){o&&o.destroy(),h=null,o=null})}}}])}(window,document),!function(a,b,c){"use strict";angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function(a){a.put("alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}]),angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function(a){a.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(a){a.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(a){a.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function(a){a.put("popover/popover.tpl.html",'<div class="popover"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}]),angular.module("mgcrea.ngStrap.select").run(["$templateCache",function(a){a.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button type="button" class="btn btn-default btn-xs" ng-click="$selectAll()">{{$allText}}</button> <button type="button" class="btn btn-default btn-xs" ng-click="$selectNone()">{{$noneText}}</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind="match.label"></span></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function(a){a.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li role="presentation" ng-repeat="$pane in $panes track by $index" ng-class="[ $isActive($pane, $index) ? $activeClass : \'\', $pane.disabled ? \'disabled\' : \'\' ]"><a role="tab" data-toggle="tab" ng-click="!$pane.disabled && $setActive($pane.name || $index)" data-index="{{ $index }}" ng-bind-html="$pane.title" aria-controls="$pane.title"></a></li></ul><div ng-transclude class="tab-content"></div>')}]),angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function(a){a.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 2)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="showSeconds && row[2].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[2].selected}" ng-click="$select(row[2].date, 2)" ng-disabled="row[2].disabled"><span ng-class="{\'text-muted\': row[2].muted}" ng-bind="row[2].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 2)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(a){a.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(a){a.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}])}(window,document),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){function a(a){var b=+a;return b!==b?b=0:0!==b&&b!==1/0&&b!==-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b))),b}function b(a){var b=typeof a;return null===a||"undefined"===b||"boolean"===b||"number"===b||"string"===b}function c(a){var c,d,e;if(b(a))return a;if(d=a.valueOf,o(d)&&(c=d.call(a),b(c)))return c;if(e=a.toString,o(e)&&(c=e.call(a),b(c)))return c;throw new TypeError}var d=Array.prototype,e=Object.prototype,f=Function.prototype,g=String.prototype,h=Number.prototype,i=d.slice,j=d.splice,k=d.push,l=d.unshift,m=f.call,n=e.toString,o=function(a){return"[object Function]"===n.call(a)},p=function(a){return"[object RegExp]"===n.call(a)},q=function(a){return"[object Array]"===n.call(a)},r=function(a){return"[object String]"===n.call(a)},s=function(a){var b=n.call(a),c="[object Arguments]"===b;return c||(c=!q(a)&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&o(a.callee)),c},t=function(a){var b,c=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}();return b=c?function(a,b,c,d){!d&&b in a||Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c})}:function(a,b,c,d){!d&&b in a||(a[b]=c)},function(c,d,e){for(var f in d)a.call(d,f)&&b(c,f,d[f],e)}}(e.hasOwnProperty),u={ToObject:function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)},ToUint32:function(a){return a>>>0}},v=function(){};t(f,{bind:function(a){var b=this;if(!o(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c,d=i.call(arguments,1),e=function(){if(this instanceof c){var e=b.apply(this,d.concat(i.call(arguments)));return Object(e)===e?e:this}return b.apply(a,d.concat(i.call(arguments)))},f=Math.max(0,b.length-d.length),g=[],h=0;f>h;h++)g.push("$"+h);return c=Function("binder","return function ("+g.join(",")+"){ return binder.apply(this, arguments); }")(e),b.prototype&&(v.prototype=b.prototype,c.prototype=new v,v.prototype=null),c}});var w=m.bind(e.hasOwnProperty),x=function(){var a=[1,2],b=a.splice();return 2===a.length&&q(b)&&0===b.length}();t(d,{splice:function(a,b){return 0===arguments.length?[]:j.apply(this,arguments)}},!x);var y=function(){var a={};return d.splice.call(a,0,0,1),1===a.length}();t(d,{splice:function(b,c){if(0===arguments.length)return[];var d=arguments;return this.length=Math.max(a(this.length),0),arguments.length>0&&"number"!=typeof c&&(d=i.call(arguments),d.length<2?d.push(this.length-b):d[1]=a(c)),j.apply(this,d)}},!y);var z=1!==[].unshift(0);t(d,{unshift:function(){return l.apply(this,arguments),this.length}},z),t(Array,{isArray:q});var A=Object("a"),B="a"!==A[0]||!(0 in A),C=function(a){var b=!0,c=!0;return a&&(a.call("foo",function(a,c,d){"object"!=typeof d&&(b=!1)}),a.call([1],function(){"use strict";c="string"==typeof this},"x")),!!a&&b&&c};t(d,{forEach:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if(!o(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}},!C(d.forEach)),t(d,{map:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if(!o(a))throw new TypeError(a+" is not a function");for(var g=0;d>g;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}},!C(d.map)),t(d,{filter:function(a){var b,c=u.ToObject(this),d=B&&r(this)?this.split(""):c,e=d.length>>>0,f=[],g=arguments[1];if(!o(a))throw new TypeError(a+" is not a function");for(var h=0;e>h;h++)h in d&&(b=d[h],a.call(g,b,h,c)&&f.push(b));return f}},!C(d.filter)),t(d,{every:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if(!o(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}},!C(d.every)),t(d,{some:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if(!o(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}},!C(d.some));var D=!1;d.reduce&&(D="object"==typeof d.reduce.call("es5",function(a,b,c,d){return d})),t(d,{reduce:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=c.length>>>0;if(!o(a))throw new TypeError(a+" is not a function");if(!d&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;d>f;f++)f in c&&(e=a.call(void 0,e,c[f],f,b));return e}},!D);var E=!1;d.reduceRight&&(E="object"==typeof d.reduceRight.call("es5",function(a,b,c,d){return d})),t(d,{reduceRight:function(a){var b=u.ToObject(this),c=B&&r(this)?this.split(""):b,d=c.length>>>0;if(!o(a))throw new TypeError(a+" is not a function");if(!d&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>f)return e;do f in c&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}},!E);var F=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);t(d,{indexOf:function(b){var c=B&&r(this)?this.split(""):u.ToObject(this),d=c.length>>>0;if(!d)return-1;var e=0;for(arguments.length>1&&(e=a(arguments[1])),e=e>=0?e:Math.max(0,d+e);d>e;e++)if(e in c&&c[e]===b)return e;return-1}},F);var G=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);t(d,{lastIndexOf:function(b){var c=B&&r(this)?this.split(""):u.ToObject(this),d=c.length>>>0;if(!d)return-1;var e=d-1;for(arguments.length>1&&(e=Math.min(e,a(arguments[1]))),e=e>=0?e:d-Math.abs(e);e>=0;e--)if(e in c&&b===c[e])return e;return-1}},G);var H=!{toString:null}.propertyIsEnumerable("toString"),I=function(){}.propertyIsEnumerable("prototype"),J=!w("x","0"),K=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L=K.length;t(Object,{keys:function(a){var b=o(a),c=s(a),d=null!==a&&"object"==typeof a,e=d&&r(a);if(!d&&!b&&!c)throw new TypeError("Object.keys called on a non-object");var f=[],g=I&&b;if(e&&J||c)for(var h=0;h<a.length;++h)f.push(String(h));if(!c)for(var i in a)g&&"prototype"===i||!w(a,i)||f.push(String(i));if(H)for(var j=a.constructor,k=j&&j.prototype===a,l=0;L>l;l++){var m=K[l];k&&"constructor"===m||!w(a,m)||f.push(m)}return f}});var M=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),N=Object.keys;t(Object,{keys:function(a){return N(s(a)?d.slice.call(a):a)}},!M);var O=-621987552e5,P="-000001",Q=Date.prototype.toISOString&&-1===new Date(O).toISOString().indexOf(P);t(Date.prototype,{toISOString:function(){var a,b,c,d,e;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(d=this.getUTCFullYear(),e=this.getUTCMonth(),d+=Math.floor(e/12),e=(e%12+12)%12,a=[e+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],d=(0>d?"-":d>9999?"+":"")+("00000"+Math.abs(d)).slice(d>=0&&9999>=d?-4:-6),b=a.length;b--;)c=a[b],10>c&&(a[b]="0"+c);return d+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},Q);var R=!1;try{R=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(O).toJSON().indexOf(P)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(S){}R||(Date.prototype.toJSON=function(a){var b,d=Object(this),e=c(d);if("number"==typeof e&&!isFinite(e))return null;if(b=d.toISOString,"function"!=typeof b)throw new TypeError("toISOString property is not callable");return b.call(d)});var T=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),U=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),V=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(!Date.parse||V||U||!T)&&(Date=function(a){function b(c,d,e,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=1===j&&String(c)===c?new a(b.parse(c)):j>=7?new a(c,d,e,f,g,h,i):j>=6?new a(c,d,e,f,g,h):j>=5?new a(c,d,e,f,g):j>=4?new a(c,d,e,f):j>=3?new a(c,d,e):j>=2?new a(c,d):j>=1?new a(c):new a;return k.constructor=b,k}return a.apply(this,arguments)}function c(a,b){var c=b>1?1:0;return f[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)}function d(b){return Number(new a(1970,0,1,0,0,0,b))}var e=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),f=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var g in a)b[g]=a[g];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function h(b){var f=e.exec(b);if(f){var g,i=Number(f[1]),h=Number(f[2]||1)-1,j=Number(f[3]||1)-1,k=Number(f[4]||0),l=Number(f[5]||0),m=Number(f[6]||0),n=Math.floor(1e3*Number(f[7]||0)),o=Boolean(f[4]&&!f[8]),p="-"===f[9]?1:-1,q=Number(f[10]||0),r=Number(f[11]||0);return(l>0||m>0||n>0?24:25)>k&&60>l&&60>m&&1e3>n&&h>-1&&12>h&&24>q&&60>r&&j>-1&&j<c(i,h+1)-c(i,h)&&(g=60*(24*(c(i,h)+j)+k+q*p),g=1e3*(60*(g+l+r*p)+m)+n,o&&(g=d(g)),g>=-864e13&&864e13>=g)?g:NaN}return a.parse.apply(this,arguments)},b}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var W=h.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),X={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(a,b){for(var c=-1;++c<X.size;)b+=a*X.data[c],X.data[c]=b%X.base,b=Math.floor(b/X.base)},divide:function(a){for(var b=X.size,c=0;--b>=0;)c+=X.data[b],X.data[b]=Math.floor(c/a),c=c%a*X.base},numToString:function(){for(var a=X.size,b="";--a>=0;)if(""!==b||0===a||0!==X.data[a]){var c=String(X.data[a]);""===b?b=c:b+="0000000".slice(0,7-c.length)+c}return b},pow:function ha(a,b,c){return 0===b?c:b%2===1?ha(a,b-1,c*a):ha(a*a,b/2,c)},log:function(a){for(var b=0;a>=4096;)b+=12,a/=4096;for(;a>=2;)b+=1,a/=2;return b}};t(h,{toFixed:function(a){var b,c,d,e,f,g,h,i;if(b=Number(a),b=b!==b?0:Math.floor(b),0>b||b>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(c=Number(this),c!==c)return"NaN";if(-1e21>=c||c>=1e21)return String(c);if(d="",0>c&&(d="-",c=-c),e="0",c>1e-21)if(f=X.log(c*X.pow(2,69,1))-69,g=0>f?c*X.pow(2,-f,1):c/X.pow(2,f,1),g*=4503599627370496,f=52-f,f>0){for(X.multiply(0,g),h=b;h>=7;)X.multiply(1e7,0),h-=7;for(X.multiply(X.pow(10,h,1),0),h=f-1;h>=23;)X.divide(1<<23),h-=23;X.divide(1<<h),X.multiply(1,1),X.divide(2),e=X.numToString()}else X.multiply(0,g),X.multiply(1<<-f,0),e=X.numToString()+"0.00000000000000000000".slice(2,2+b);return b>0?(i=e.length,e=b>=i?d+"0.0000000000000000000".slice(0,b-i+2)+e:d+e.slice(0,i-b)+"."+e.slice(i-b)):e=d+e,e}},W);var Y=g.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var a="undefined"==typeof/()??/.exec("")[1];g.split=function(b,c){var d=this;if("undefined"==typeof b&&0===c)return[];if("[object RegExp]"!==n.call(b))return Y.call(this,b,c);var e,f,g,h,i=[],j=(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.extended?"x":"")+(b.sticky?"y":""),l=0;for(b=new RegExp(b.source,j+"g"),d+="",a||(e=new RegExp("^"+b.source+"$(?!\\s)",j)),c="undefined"==typeof c?-1>>>0:u.ToUint32(c),f=b.exec(d);f&&(g=f.index+f[0].length,!(g>l&&(i.push(d.slice(l,f.index)),!a&&f.length>1&&f[0].replace(e,function(){for(var a=1;a<arguments.length-2;a++)"undefined"==typeof arguments[a]&&(f[a]=void 0)}),f.length>1&&f.index<d.length&&k.apply(i,f.slice(1)),h=f[0].length,l=g,i.length>=c)));)b.lastIndex===f.index&&b.lastIndex++,f=b.exec(d);return l===d.length?(h||!b.test(""))&&i.push(""):i.push(d.slice(l)),i.length>c?i.slice(0,c):i}}():"0".split(void 0,0).length&&(g.split=function(a,b){return"undefined"==typeof a&&0===b?[]:Y.call(this,a,b)});var Z=g.replace,$=function(){var a=[];return"x".replace(/x(.)?/g,function(b,c){a.push(c)}),1===a.length&&"undefined"==typeof a[0]}();$||(g.replace=function(a,b){var c=o(b),d=p(a)&&/\)[*?]/.test(a.source);if(c&&d){var e=function(c){var d=arguments.length,e=a.lastIndex;a.lastIndex=0;var f=a.exec(c)||[];return a.lastIndex=e,f.push(arguments[d-2],arguments[d-1]),b.apply(this,f)};return Z.call(this,a,e)}return Z.call(this,a,b)});var _=g.substr,aa="".substr&&"b"!=="0b".substr(-1);t(g,{substr:function(a,b){return _.call(this,0>a&&(a=this.length+a)<0?0:a,b)}},aa);var ba="	\n\f\r   ᠎             　\u2028\u2029\ufeff",ca="​",da="["+ba+"]",ea=new RegExp("^"+da+da+"*"),fa=new RegExp(da+da+"*$"),ga=g.trim&&(ba.trim()||!ca.trim());t(g,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(ea,"").replace(fa,"")}},ga),(8!==parseInt(ba+"08")||22!==parseInt(ba+"0x16"))&&(parseInt=function(a){var b=/^0[xX]/;return function(c,d){return c=String(c).trim(),Number(d)||(d=b.test(c)?16:10),a(c,d)}}(parseInt))}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){function a(a){try{return a.sentinel=0,0===Object.getOwnPropertyDescriptor(a,"sentinel").value}catch(b){}}function b(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}var c,d,e,f,g=Function.prototype.call,h=Object.prototype,i=g.bind(h.hasOwnProperty),j=i(h,"__defineGetter__");if(j&&(c=g.bind(h.__defineGetter__),d=g.bind(h.__defineSetter__),e=g.bind(h.__lookupGetter__),f=g.bind(h.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){var b=a.__proto__;return b||null===b?b:a.constructor?a.constructor.prototype:h}),Object.defineProperty){var k=a({}),l="undefined"==typeof document||a(document.createElement("div"));if(!l||!k)var m=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||m){var n="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(n+a);if(m)try{return m.call(Object,a,b)}catch(c){}var d;if(!i(a,b))return d;if(d={enumerable:!0,configurable:!0},j){var g=a.__proto__,k=a!==h;k&&(a.__proto__=h);var l=e(a,b),o=f(a,b);if(k&&(a.__proto__=g),l||o)return l&&(d.get=l),o&&(d.set=o),d}return d.value=a[b],d.writable=!0,d}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var o,p=!({__proto__:null}instanceof Object);o=p||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function a(){}var b=document.createElement("iframe"),c=document.body||document.documentElement;b.style.display="none",c.appendChild(b),b.src="javascript:";var d=b.contentWindow.Object.prototype;return c.removeChild(b),b=null,delete d.constructor,delete d.hasOwnProperty,delete d.propertyIsEnumerable,delete d.isPrototypeOf,delete d.toLocaleString,delete d.toString,delete d.valueOf,d.__proto__=null,a.prototype=d,o=function(){return new a},new a},Object.create=function(a,b){function c(){}var d;if(null===a)d=o();else{if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object prototype may only be an Object or null");c.prototype=a,d=new c,d.__proto__=a}return void 0!==b&&Object.defineProperties(d,b),d}}if(Object.defineProperty){var q=b({}),r="undefined"==typeof document||b(document.createElement("div"));if(!q||!r)var s=Object.defineProperty,t=Object.defineProperties}if(!Object.defineProperty||s){var u="Property description must be an object: ",v="Object.defineProperty called on non-object: ",w="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,g){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(v+a);if("object"!=typeof g&&"function"!=typeof g||null===g)throw new TypeError(u+g);if(s)try{return s.call(Object,a,b,g)}catch(i){}if("value"in g)if(j&&(e(a,b)||f(a,b))){var k=a.__proto__;a.__proto__=h,delete a[b],a[b]=g.value,a.__proto__=k}else a[b]=g.value;else{if(!j)throw new TypeError(w);"get"in g&&c(a,b,g.get),"set"in g&&d(a,b,g.set)}return a}}(!Object.defineProperties||t)&&(Object.defineProperties=function(a,b){if(t)try{return t.call(Object,a,b)}catch(c){}for(var d in b)i(b,d)&&"__proto__"!==d&&Object.defineProperty(a,d,b[d]);return a}),Object.seal||(Object.seal=function(a){if(Object(a)!==a)throw new TypeError("Object.seal can only be called on Objects.");return a}),Object.freeze||(Object.freeze=function(a){if(Object(a)!==a)throw new TypeError("Object.freeze can only be called on Objects.");return a});try{Object.freeze(function(){})}catch(x){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){if(Object(a)!==a)throw new TypeError("Object.preventExtensions can only be called on Objects.");return a}),Object.isSealed||(Object.isSealed=function(a){if(Object(a)!==a)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(a){if(Object(a)!==a)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)!==a)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var b="";i(a,b);)b+="?";a[b]=!0;var c=i(a,b);return delete a[b],c})}),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;return b.bind(a)("I")?a.parentNode:a},getOffset:function(a,b){for(var c=0,d=0,e=a.getBoundingClientRect();a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b||"BODY"!==a.tagName?(c+=a.scrollLeft,d+=a.scrollTop):(c+=document.documentElement.scrollLeft||a.scrollLeft,d+=document.documentElement.scrollTop||a.scrollTop),a=a.offsetParent;return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset,scrollX:c,scrollY:d}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}]}}).factory("Color",["Helper",function(a){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var a=this.toRGB();return"rgb("+a.r+","+a.g+","+a.b+")"},rgba:function(){var a=this.toRGB();return"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:e||1,s:f,b:g,a:d||1}},setColor:function(b){b=b?b.toLowerCase():b;for(var c in a.stringParsers)if(a.stringParsers.hasOwnProperty(c)){var d=a.stringParsers[c],e=d.re.exec(b),f=e&&d.parse(e);if(f)return this.value=this.RGBtoHSB.apply(null,f),!1}},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setLightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d||this.value.a}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return"#"+(1<<24|parseInt(e.r,10)<<16|parseInt(e.g,10)<<8|parseInt(e.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(a){"use strict";var b={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},c={};return{getSlider:function(){return b},getLeftPosition:function(a){return Math.max(0,Math.min(b.maxLeft,b.left+((a.pageX||c.left)-c.left)))},getTopPosition:function(a){return Math.max(0,Math.min(b.maxTop,b.top+((a.pageY||c.top)-c.top)))},setSlider:function(d,e){var f=a.closestSlider(d.target),g=a.getOffset(f,e),h=f.getBoundingClientRect(),i=d.clientX-h.left,j=d.clientY-h.top;b.knob=f.children[0].style,b.left=d.pageX-g.left-window.pageXOffset+g.scrollX,b.top=d.pageY-g.top-window.pageYOffset+g.scrollY,c={left:d.pageX-(i-b.left),top:d.pageY-(j-b.top)}},setSaturation:function(a,c,d){b={maxLeft:d,maxTop:d,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(a,c)},setHue:function(a,c,d){b={maxLeft:0,maxTop:d,callLeft:!1,callTop:"setHue"},this.setSlider(a,c)},setAlpha:function(a,c,d){b={maxLeft:0,
maxTop:d,callLeft:!1,callTop:"setAlpha"},this.setSlider(a,c)},setKnob:function(a,c){b.knob.top=a+"px",b.knob.left=c+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(a,b,c,d,e){"use strict";return{require:"?ngModel",restrict:"A",link:function(f,g,h,i){function j(){a.on("mousemove",l),a.on("mouseup",m)}function k(){try{J.css("backgroundColor",G[v]())}catch(a){J.css("backgroundColor",G.toHex())}I.css("backgroundColor",G.toHex(G.value.h,1,1,1)),"rgba"===v&&(u.css.backgroundColor=G.toHex())}function l(a){var b=d.getLeftPosition(a),c=d.getTopPosition(a),e=d.getSlider();d.setKnob(c,b),e.callLeft&&G[e.callLeft].call(G,b/B),e.callTop&&G[e.callTop].call(G,c/B),k();var h=G[v]();return g.val(h),i&&f.$apply(i.$setViewValue(h)),A&&L.val(h),!1}function m(){r("colorpicker-selected"),a.off("mousemove",l),a.off("mouseup",m)}function n(a){G.setColor(g.val()),A&&!a&&L.val(g.val()),K.eq(0).css({left:G.value.s*B+"px",top:B-G.value.b*B+"px"}),K.eq(1).css("top",B*(1-G.value.h)+"px"),K.eq(2).css("top",B*(1-G.value.a)+"px"),k()}function o(){var a,b=e.getOffset(g[0]);return angular.isDefined(h.colorpickerParent)&&(b.left=0,b.top=0),"top"===w?a={top:b.top-147,left:b.left}:"right"===w?a={top:b.top,left:b.left+126}:"bottom"===w?a={top:b.top+g[0].offsetHeight+2,left:b.left}:"left"===w&&(a={top:b.top,left:b.left-150}),{top:a.top+"px",left:a.left+"px"}}function p(){s()}function q(){F.hasClass("colorpicker-visible")||(n(),F.addClass("colorpicker-visible").css(o()),r("colorpicker-shown"),x===!1&&a.on("mousedown",p),h.colorpickerIsOpen&&(f[h.colorpickerIsOpen]=!0,f.$$phase||f.$digest()))}function r(a){i&&f.$emit(a,{name:h.ngModel,value:i.$modelValue})}function s(){F.hasClass("colorpicker-visible")&&(F.removeClass("colorpicker-visible"),r("colorpicker-closed"),a.off("mousedown",p),h.colorpickerIsOpen&&(f[h.colorpickerIsOpen]=!1,f.$$phase||f.$digest()))}var t,u,v=h.colorpicker?h.colorpicker:"hex",w=angular.isDefined(h.colorpickerPosition)?h.colorpickerPosition:"bottom",x=angular.isDefined(h.colorpickerInline)?h.colorpickerInline:!1,y=angular.isDefined(h.colorpickerFixedPosition)?h.colorpickerFixedPosition:!1,z=angular.isDefined(h.colorpickerParent)?g.parent():angular.element(document.body),A=angular.isDefined(h.colorpickerWithInput)?h.colorpickerWithInput:!1,B=angular.isDefined(h.colorpickerSize)?h.colorpickerSize:100,t=B+"px",C=A?'<input type="text" name="colorpicker-input" spellcheck="false">':"",D=x?"":'<button type="button" class="close close-colorpicker">&times;</button>',E='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+C+D+"</div></div>",F=angular.element(E),G=c,H=F.find("colorpicker-hue"),I=F.find("colorpicker-saturation"),J=F.find("colorpicker-preview"),K=F.find("i");if(b(F)(f),F.css("min-width",parseInt(B)+29+"px"),I.css({width:t,height:t}),H.css("height",t),A){var L=F.find("input");L.css("width",t),L.on("mousedown",function(a){a.stopPropagation()}).on("keyup",function(){var a=this.value;g.val(a),i&&i.$modelValue!==a&&(f.$apply(i.$setViewValue(a)),n(!0))})}"rgba"===v&&(F.addClass("alpha"),u=F.find("colorpicker-alpha"),u.css("height",t),u.on("click",function(a){d.setAlpha(a,y,B),l(a)}).on("mousedown",function(a){d.setAlpha(a,y,B),j()}).on("mouseup",function(a){r("colorpicker-selected-alpha")})),H.on("click",function(a){d.setHue(a,y,B),l(a)}).on("mousedown",function(a){d.setHue(a,y,B),j()}).on("mouseup",function(a){r("colorpicker-selected-hue")}),I.on("click",function(a){d.setSaturation(a,y,B),l(a),angular.isDefined(h.colorpickerCloseOnSelect)&&s()}).on("mousedown",function(a){d.setSaturation(a,y,B),j()}).on("mouseup",function(a){r("colorpicker-selected-saturation")}),y&&F.addClass("colorpicker-fixed-position"),F.addClass("colorpicker-position-"+w),"true"===x&&F.addClass("colorpicker-inline"),z.append(F),i&&(i.$render=function(){g.val(i.$viewValue),n()}),g.on("blur keyup change",function(){n()}),g.on("$destroy",function(){F.remove()}),x===!1?g.on("click",q):q(),F.on("mousedown",function(a){a.stopPropagation(),a.preventDefault()}),F.find("button").on("click",function(){s()}),h.colorpickerIsOpen&&f.$watch(h.colorpickerIsOpen,function(a){a===!0?q():a===!1&&s()})}}}]),angular.module("wysiwyg.module",["colorpicker.module"]).directive("wysiwyg",["$timeout","wysiwgGui","$compile",function(a,b,c){return{template:"<div></div>",restrict:"E",scope:{value:"=ngModel",textareaHeight:"@textareaHeight",textareaName:"@textareaName",textareaPlaceholder:"@textareaPlaceholder",textareaClass:"@textareaClass",textareaRequired:"@textareaRequired",textareaId:"@textareaId",textareaMenu:"@textareaMenu"},replace:!0,require:"ngModel",link:function(d,e,f,g){function h(a){var b=window.getSelection().getRangeAt(0);return b&&(b.startContainer.parentNode.tagName===a.toUpperCase()||b.endContainer.parentNode.tagName===a.toUpperCase())?!0:!1}function i(){var a=window.getSelection().getRangeAt(0);if(a){var b=$(a.startContainer.parentNode).attr("style");if(!angular.isDefined(b))return!1;for(var c=b.split(";"),d=0;d<c.length;d++){var e=c[d].split(":");if("background-color"===e[0])return e[1]}return"#fff"}return"#fff"}e.html(b.createMenu(f.textareaMenu)),c(e.contents())(d);var j=e.find("div.wysiwyg-textarea");d.fonts=["Georgia","Palatino Linotype","Times New Roman","Arial","Helvetica","Arial Black","Comic Sans MS","Impact","Lucida Sans Unicode","Tahoma","Trebuchet MS","Verdana","Courier New","Lucida Console","Helvetica Neue"].sort(),d.font=d.fonts[6],d.fontSizes=[{value:"1",size:"10px"},{value:"2",size:"13px"},{value:"3",size:"16px"},{value:"4",size:"18px"},{value:"5",size:"24px"},{value:"6",size:"32px"},{value:"7",size:"48px"}],d.fontSize=d.fontSizes[1],"true"===f.enableBootstrapTitle&&void 0!==f.enableBootstrapTitle&&e.find("button[title]").tooltip({container:"body"}),j.on("input keyup paste mouseup",function(a){var b=j.html();"<br>"==b&&(b=""),g.$setViewValue(b)}),d.isLink=!1,j.on("click keyup focus mouseup",function(){a(function(){d.isBold=d.cmdState("bold"),d.isUnderlined=d.cmdState("underline"),d.isStrikethrough=d.cmdState("strikethrough"),d.isItalic=d.cmdState("italic"),d.isSuperscript=h("SUP"),d.isSubscript=h("SUB"),d.isRightJustified=d.cmdState("justifyright"),d.isLeftJustified=d.cmdState("justifyleft"),d.isCenterJustified=d.cmdState("justifycenter"),d.isPre="pre"==d.cmdValue("formatblock"),d.isBlockquote="blockquote"==d.cmdValue("formatblock"),d.isOrderedList=d.cmdState("insertorderedlist"),d.isUnorderedList=d.cmdState("insertunorderedlist"),d.fonts.forEach(function(a,b){return d.cmdValue("fontname").indexOf(a)>-1?(d.font=a,!1):void 0}),d.fontSizes.forEach(function(a,b){return d.cmdValue("fontsize")===a.value?(d.fontSize=a,!1):void 0}),d.hiliteColor=i(),e.find("button.wysiwyg-hiliteColor").css("background-color",d.hiliteColor),d.fontColor=d.cmdValue("forecolor"),e.find("button.wysiwyg-fontcolor").css("color",d.fontColor),d.isLink=h("A")},10)}),g.$render=function(){j.html(g.$viewValue)},d.format=function(a,b){document.execCommand(a,!1,b)},d.cmdState=function(a,b){return document.queryCommandState(a)},d.cmdValue=function(a){return document.queryCommandValue(a)},d.createLink=function(){var a=prompt("Enter the link URL");a&&void 0!==a&&d.format("createlink",a)},d.insertImage=function(){var a=prompt("Enter the image URL");a&&void 0!==a&&d.format("insertimage",a)},d.setFont=function(){d.format("fontname",d.font)},d.setFontSize=function(){d.format("fontsize",d.fontSize.value)},d.setFontColor=function(){d.format("forecolor",d.fontColor)},d.setHiliteColor=function(){d.format("hiliteColor",d.hiliteColor)},d.format("enableobjectresizing",!0),d.format("styleWithCSS",!0)}}}]).factory("wysiwgGui",function(){var a=[["bold","italic","underline","strikethrough","subscript","superscript"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragragh"],["link","image"]],b=function(){return"<style>   .wysiwyg-btn-group-margin{  margin-right:5px; }   .wysiwyg-select{ height:30px;margin-bottom:1px;}   .wysiwyg-colorpicker{ font-family: arial, sans-serif !important;font-size:16px !important; padding:2px 10px !important;}</style>"},c=function(){return'<div id="{{textareaId}}" ng-attr-style="resize:vertical;height:{{textareaHeight || \'80px\'}}; overflow:auto" contentEditable="true" class="{{textareaClass}} wysiwyg-textarea" rows="{{textareaRows}}" name="{{textareaName}}" required="{{textareaRequired}}" placeholder="{{textareaPlaceholder}}" ng-model="value"></div>'},d=function(){return'<div class="btn-group btn-group-sm wysiwyg-btn-group-margin">'},e=function(a){switch(a=a.toLowerCase().replace(" ","-")){case"bold":return'<button title="Bold" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'bold\')" ng-class="{ active: isBold}"><i class="fa fa-bold"></i></button>';case"italic":return'<button title="Italic" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'italic\')" ng-class="{ active: isItalic}"><i class="fa fa-italic"></i></button>';case"underline":return'<button title="Underline" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'underline\')" ng-class="{ active: isUnderlined}"><i class="fa fa-underline"></i></button>';case"strikethrough":return'<button title="Strikethrough" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'strikethrough\')" ng-class="{ active: isStrikethrough}"><i class="fa fa-strikethrough"></i></button>';case"subscript":return'<button title="Subscript" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'subscript\')" ng-class="{ active: isSubscript}"><i class="fa fa-subscript"></i></button>';case"superscript":return'<button title="Superscript" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'superscript\')" ng-class="{ active: isSuperscript}"><i class="fa fa-superscript"></i></button>';case"font":return'<select tabindex="-1"  unselectable="on" class="form-control wysiwyg-select" ng-model="font" ng-options="f for f in fonts" ng-change="setFont()"></select>';case"font-size":return'<select unselectable="on" tabindex="-1" class="form-control wysiwyg-select" ng-model="fontSize" ng-options="f.size for f in fontSizes" ng-change="setFontSize()"></select>';case"font-color":return'<button title="Font Color" tabindex="-1" colorpicker="rgba" type="button" colorpicker-position="top" class="btn btn-default ng-valid ng-dirty wysiwyg-colorpicker wysiwyg-fontcolor" ng-model="fontColor" ng-change="setFontColor()">A</button>';case"hilite-color":return'<button title="Hilite Color" tabindex="-1" colorpicker="rgba" type="button" colorpicker-position="top" class="btn btn-default ng-valid ng-dirty wysiwyg-colorpicker wysiwyg-hiliteColor" ng-model="hiliteColor" ng-change="setHiliteColor()">H</button>';case"remove-format":return'<button title="Remove Formatting" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'removeFormat\')" ><i class="fa fa-eraser"></i></button>';case"ordered-list":return'<button title="Ordered List" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'insertorderedlist\')" ng-class="{ active: isOrderedList}"><i class="fa fa-list-ol"></i></button>';case"unordered-list":return'<button title="Unordered List" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'insertunorderedlist\')" ng-class="{ active: isUnorderedList}"><i class="fa fa-list-ul"></i></button>';case"outdent":return'<button title="Outdent" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'outdent\')"><i class="fa fa-outdent"></i></button>';case"indent":return'<button title="Indent" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'indent\')"><i class="fa fa-indent"></i></button>';case"left-justify":return'<button title="Left Justify" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'justifyleft\')" ng-class="{ active: isLeftJustified}"><i class="fa fa-align-left"></i></button>';case"center-justify":return'<button title="Center Justify" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'justifycenter\')" ng-class="{ active: isCenterJustified}"><i class="fa fa-align-center"></i></button>';case"right-justify":return'<button title="Right Justify" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'justifyright\')" ng-class="{ active: isRightJustified}"><i class="fa fa-align-right"></i></button>';case"code":return'<button title="Code" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'formatblock\', \'pre\')"  ng-class="{ active: isPre}"><i class="fa fa-code"></i></button>';case"quote":return'<button title="Quote" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'formatblock\', \'blockquote\')"  ng-class="{ active: isBlockquote}"><i class="fa fa-quote-right"></i></button>';case"paragragh":return'<button title="Paragragh" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'insertParagraph\')"  ng-class="{ active: isParagraph}">P</button>';case"link":return'<button ng-show="!isLink" tabindex="-1" title="Link" type="button" unselectable="on" class="btn btn-default" ng-click="createLink()"><i class="fa fa-link" ></i> </button><button ng-show="isLink" tabindex="-1" title="Unlink" type="button" unselectable="on" class="btn btn-default" ng-click="format(\'unlink\')"><i class="fa fa-unlink"></i> </button>';case"image":return'<button title="Image" tabindex="-1" type="button" unselectable="on" class="btn btn-default" ng-click="insertImage()"><i class="fa fa-picture-o"></i> </button>';default:return console.log("Angular.wysiwyg: Unknown menu item."),""}},f=function(f){f=angular.isDefined(f)&&""!==f?g(f):a;var h='<div class="wysiwyg-menu">';h+=b();for(var i=0;i<f.length;i++){h+=d();for(var j=0;j<f[i].length;j++)h+=e(f[i][j]);h+="</div>"}return h+=c(),h+="</div>"},g=function(a){var b;try{b=JSON.parse(a.replace(/'/g,'"'))}catch(c){}return b};return{createMenu:f}}),!function(){"use strict";var a=angular.module("sticky",[]);a.directive("sticky",["$window",function(a){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;b.initSticky=function(){switch(n=!1,u=a.matchMedia,j=angular.element(document.body),i=c[0],k=document.documentElement,e=d.mediaQuery||!1,f=d.stickyClass||"",g=d.unstickyClass||"",h=d.bodyClass||"",v=void 0!==d.useplaceholder,m=c.attr("style")||"",q="string"==typeof d.offset?parseInt(d.offset.replace(/px;?/,"")):0,r="string"==typeof d.anchor?d.anchor.toLowerCase().trim():"top",s="string"==typeof d.confine?d.confine.toLowerCase().trim():"false",s="true"===s,l={zIndex:c.css("z-index"),top:c.css("top"),width:c.css("width"),position:c.css("position"),marginTop:c.css("margin-top"),cssLeft:c.css("left")},r){case"top":case"bottom":break;default:r="top"}t=b.getTopOffset(i),angular.element(a).on("scroll",b.checkIfShouldStick),angular.element(a).on("resize",b.$apply.bind(b,b.onResize)),b.$on("$destroy",b.onDestroy)},b.getScrollTop=function(){if("undefined"!=typeof a.pageYOffset)return a.pageYOffset;var b=document.body,c=document.documentElement;return c=c.clientHeight?c:b,c.scrollTop},b.getTopOffset=function(a){if(a.getBoundingClientRect)return a.getBoundingClientRect().top+document.documentElement.scrollTop;var b=0;if(a.offsetParent)do b+=a.offsetTop,a=a.offsetParent;while(a);return b},b.getBottomOffset=function(a){return a.offsetTop+a.clientHeight},b.shouldStickWithLimit=function(b){if("true"===b){var c=i.offsetHeight,d=a.innerHeight;return d-(c+parseInt(q))<0}return!1},b.onResize=function(){if(l.offsetWidth=i.offsetWidth,b.unStickElement(),b.checkIfShouldStick(),n){var d=a.getComputedStyle(i.parentElement,null),e=i.parentElement.offsetWidth-d.getPropertyValue("padding-right").replace("px","")-d.getPropertyValue("padding-left").replace("px","");c.css("width",e+"px")}},b.onDestroy=function(){angular.element(a).off("scroll",b.checkIfShouldStick),angular.element(a).off("resize",b.onResize),h&&j.removeClass(h),w&&w.remove()},b.getClosest=function(a,b){var c,d=1e3;for(var e in a){var f=Math.abs(b-a[e]);d>f&&(d=f,c=a[e])}return c},b.stickElement=function(){if(l.offsetWidth=i.offsetWidth,n=!0,h&&j.addClass(h),g&&c.hasClass(g)&&c.removeClass(g),f&&c.addClass(f),v){w=angular.element("<div>");var a=c[0].offsetHeight;w.css("height",a+"px"),c.after(w)}c.css("z-index","10").css("width",i.offsetWidth+"px").css("position","fixed").css(r,q+"px").css("left",c.css("left").replace("px","")+"px").css("margin-top",0),"bottom"===r&&c.css("margin-bottom",0)},b.checkIfShouldStick=function(){if(b.disabled===!0)return b.unStickElement(),!1;var c,f,g,h;if(e&&!u("("+e+")").matches&&!u(e).matches)return void(n&&b.unStickElement());if("top"===r?(h=a.pageYOffset||k.scrollTop,c=h-(k.clientTop||0),f=s===!0?c>=o&&p>=c:c>=o):(g=a.pageYOffset+a.innerHeight,f=o>=g),!f||b.shouldStickWithLimit(d.stickLimit)||n){if(!f&&n){var i,j,l;j=[o,p],l=b.getClosest(j,c),l===o?i="top":l===p&&(i="bottom"),b.unStickElement(i,c)}}else b.stickElement()},b.unStickElement=function(a){c.attr("style",m),n=!1,h&&j.removeClass(h),f&&c.removeClass(f),g&&c.addClass(g),"top"===a?c.css("z-index",l.zIndex).css("width","").css("top",l.top).css("position",l.position).css("left",l.cssLeft).css("margin-top",l.marginTop):"bottom"===a&&s===!0&&c.css("z-index",l.zIndex).css("width","").css("top","").css("bottom",0).css("position","absolute").css("left",l.cssLeft).css("margin-top",l.marginTop).css("margin-bottom",l.marginBottom),w&&w.remove()},b.$watch(function(){return b.disabled===!0?void b.unStickElement():n?t+b.getScrollTop():(t="top"===r?b.getTopOffset(i):b.getBottomOffset(i),t+b.getScrollTop())},function(a,d){if((a!==d||"undefined"==typeof o)&&0!==a&&!n){o=a-q,s&&c.parent().css({position:"relative"});var e=c.parent()[0],f=parseInt(e.offsetHeight),g=parseInt(c.css("margin-bottom").replace(/px;?/,""))||0;p=e.offsetTop+f-(i.offsetTop+i.offsetHeight)+q+g,b.checkIfShouldStick()}}),b.initSticky()}}}]),window.matchMedia=window.matchMedia||function(){var a="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(a),function(){return{matches:!0}}}()}(),function(a,b){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularFileUpload",[]);return b.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(b,c,d,e,f){function g(c){var d=a.copy(b);a.extend(this,d,c,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function h(b){var c=a.isElement(b),d=c?b.value:b,e=a.isString(d)?"FakePath":"Object",f="_createFrom"+e;this[f](d)}function i(b,c,d){var e=a.isElement(c),f=e?a.element(c):null,h=e?null:c;a.extend(this,{url:b.url,alias:b.alias,headers:a.copy(b.headers),formData:a.copy(b.formData),removeAfterUpload:b.removeAfterUpload,withCredentials:b.withCredentials,method:b.method},d,{uploader:b,file:new g.FileLikeObject(c),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:h,_input:f}),f&&this._replaceNode(f)}function j(b){a.extend(this,b),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function k(a){k.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function l(a){l.super_.apply(this,arguments)}function m(a){m.super_.apply(this,arguments)}return g.prototype.isHTML5=!(!e.File||!e.FormData),g.prototype.addToQueue=function(b,c,d){var e=this.isArrayLikeObject(b)?b:[b],f=this._getFilters(d),h=this.queue.length,i=[];a.forEach(e,function(a){var b=new g.FileLikeObject(a);if(this._isValidFile(b,f,c)){var d=new g.FileItem(this,a,c);i.push(d),this.queue.push(d),this._onAfterAddingFile(d)}else{var e=f[this._failFilterIndex];this._onWhenAddingFileFailed(b,e,c)}},this),this.queue.length!==h&&(this._onAfterAddingAll(i),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},g.prototype.removeFromQueue=function(a){var b=this.getIndexOfItem(a),c=this.queue[b];c.isUploading&&c.cancel(),this.queue.splice(b,1),c._destroy(),this.progress=this._getTotalProgress()},g.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},g.prototype.uploadItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhrTransport":"_iframeTransport";c._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[d](c))},g.prototype.cancelItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhr":"_form";c&&c.isUploading&&c[d].abort()},g.prototype.uploadAll=function(){var b=this.getNotUploadedItems().filter(function(a){return!a.isUploading});b.length&&(a.forEach(b,function(a){a._prepareToUploading()}),b[0].upload())},g.prototype.cancelAll=function(){var b=this.getNotUploadedItems();a.forEach(b,function(a){a.cancel()})},g.prototype.isFile=function(a){var b=e.File;return b&&a instanceof b},g.prototype.isFileLikeObject=function(a){return a instanceof g.FileLikeObject},g.prototype.isArrayLikeObject=function(b){return a.isObject(b)&&"length"in b},g.prototype.getIndexOfItem=function(b){return a.isNumber(b)?b:this.queue.indexOf(b)},g.prototype.getNotUploadedItems=function(){return this.queue.filter(function(a){return!a.isUploaded})},g.prototype.getReadyItems=function(){return this.queue.filter(function(a){return a.isReady&&!a.isUploading}).sort(function(a,b){return a.index-b.index})},g.prototype.destroy=function(){a.forEach(this._directives,function(b){a.forEach(this._directives[b],function(a){a.destroy()},this)},this)},g.prototype.onAfterAddingAll=function(a){},g.prototype.onAfterAddingFile=function(a){},g.prototype.onWhenAddingFileFailed=function(a,b,c){},g.prototype.onBeforeUploadItem=function(a){},g.prototype.onProgressItem=function(a,b){},g.prototype.onProgressAll=function(a){},g.prototype.onSuccessItem=function(a,b,c,d){},g.prototype.onErrorItem=function(a,b,c,d){},g.prototype.onCancelItem=function(a,b,c,d){},g.prototype.onCompleteItem=function(a,b,c,d){},g.prototype.onCompleteAll=function(){},g.prototype._getTotalProgress=function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},g.prototype._getFilters=function(b){if(a.isUndefined(b))return this.filters;if(a.isArray(b))return b;var c=b.match(/[^\s,]+/g);return this.filters.filter(function(a){return-1!==c.indexOf(a.name)},this)},g.prototype._render=function(){c.$$phase||c.$apply()},g.prototype._folderFilter=function(a){return!(!a.size&&!a.type)},g.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},g.prototype._isValidFile=function(a,b,c){return this._failFilterIndex=-1,b.length?b.every(function(b){return this._failFilterIndex++,b.fn.call(this,a,c)},this):!0},g.prototype._isSuccessCode=function(a){return a>=200&&300>a||304===a},g.prototype._transformResponse=function(b,c){var e=this._headersGetter(c);return a.forEach(d.defaults.transformResponse,function(a){b=a(b,e)}),b},g.prototype._parseHeaders=function(b){var c,d,e,f={};return b?(a.forEach(b.split("\n"),function(a){e=a.indexOf(":"),c=a.slice(0,e).trim().toLowerCase(),d=a.slice(e+1).trim(),c&&(f[c]=f[c]?f[c]+", "+d:d)}),f):f},g.prototype._headersGetter=function(a){return function(b){return b?a[b.toLowerCase()]||null:a}},g.prototype._xhrTransport=function(b){var c=b._xhr=new XMLHttpRequest,d=new FormData,e=this;if(e._onBeforeUploadItem(b),a.forEach(b.formData,function(b){a.forEach(b,function(a,b){d.append(b,a)})}),"number"!=typeof b._file.size)throw new TypeError("The file specified is no longer valid");d.append(b.alias,b._file,b.file.name),c.upload.onprogress=function(a){var c=Math.round(a.lengthComputable?100*a.loaded/a.total:0);e._onProgressItem(b,c)},c.onload=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a),f=e._isSuccessCode(c.status)?"Success":"Error",g="_on"+f+"Item";e[g](b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onerror=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onErrorItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onabort=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onCancelItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.open(b.method,b.url,!0),c.withCredentials=b.withCredentials,a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d),this._render()},g.prototype._iframeTransport=function(b){var c=a.element('<form style="display: none;" />'),d=a.element('<iframe name="iframeTransport'+Date.now()+'">'),e=b._input,f=this;b._form&&b._form.replaceWith(e),b._form=c,f._onBeforeUploadItem(b),e.prop("name",b.alias),a.forEach(b.formData,function(b){a.forEach(b,function(b,d){var e=a.element('<input type="hidden" name="'+d+'" />');e.val(b),c.append(e)})}),c.prop({action:b.url,method:"POST",target:d.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),d.bind("load",function(){try{var a=d[0].contentDocument.body.innerHTML}catch(c){}var e={response:a,status:200,dummy:!0},g={},h=f._transformResponse(e.response,g);f._onSuccessItem(b,h,e.status,g),f._onCompleteItem(b,h,e.status,g)}),c.abort=function(){var a,g={status:0,dummy:!0},h={};d.unbind("load").prop("src","javascript:false;"),c.replaceWith(e),f._onCancelItem(b,a,g.status,h),f._onCompleteItem(b,a,g.status,h)},e.after(c),c.append(e).append(d),c[0].submit(),this._render()},g.prototype._onWhenAddingFileFailed=function(a,b,c){this.onWhenAddingFileFailed(a,b,c)},g.prototype._onAfterAddingFile=function(a){this.onAfterAddingFile(a)},g.prototype._onAfterAddingAll=function(a){this.onAfterAddingAll(a)},g.prototype._onBeforeUploadItem=function(a){a._onBeforeUpload(),this.onBeforeUploadItem(a)},g.prototype._onProgressItem=function(a,b){var c=this._getTotalProgress(b);this.progress=c,a._onProgress(b),this.onProgressItem(a,b),this.onProgressAll(c),this._render()},g.prototype._onSuccessItem=function(a,b,c,d){a._onSuccess(b,c,d),this.onSuccessItem(a,b,c,d)},g.prototype._onErrorItem=function(a,b,c,d){a._onError(b,c,d),this.onErrorItem(a,b,c,d)},g.prototype._onCancelItem=function(a,b,c,d){a._onCancel(b,c,d),this.onCancelItem(a,b,c,d)},g.prototype._onCompleteItem=function(b,c,d,e){b._onComplete(c,d,e),this.onCompleteItem(b,c,d,e);var f=this.getReadyItems()[0];return this.isUploading=!1,a.isDefined(f)?void f.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},g.isFile=g.prototype.isFile,g.isFileLikeObject=g.prototype.isFileLikeObject,g.isArrayLikeObject=g.prototype.isArrayLikeObject,g.isHTML5=g.prototype.isHTML5,g.inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.super_=b},g.FileLikeObject=h,g.FileItem=i,g.FileDirective=j,g.FileSelect=k,g.FileDrop=l,g.FileOver=m,h.prototype._createFromFakePath=function(a){this.lastModifiedDate=null,this.size=null,this.type="like/"+a.slice(a.lastIndexOf(".")+1).toLowerCase(),this.name=a.slice(a.lastIndexOf("/")+a.lastIndexOf("\\")+2)},h.prototype._createFromObject=function(b){this.lastModifiedDate=a.copy(b.lastModifiedDate),this.size=b.size,this.type=b.type,this.name=b.name},i.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(a){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(a){},i.prototype.onSuccess=function(a,b,c){},i.prototype.onError=function(a,b,c){},i.prototype.onCancel=function(a,b,c){},i.prototype.onComplete=function(a,b,c){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(a){this.progress=a,this.onProgress(a)},i.prototype._onSuccess=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(a,b,c)},i.prototype._onError=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(a,b,c)},i.prototype._onCancel=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(a,b,c)},i.prototype._onComplete=function(a,b,c){this.onComplete(a,b,c),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(a){var b=f(a.clone())(a.scope());b.prop("value",null),a.css("display","none"),a.after(b)},j.prototype.events={},j.prototype.bind=function(){for(var a in this.events){var b=this.events[a];this.element.bind(a,this[b])}},j.prototype.unbind=function(){for(var a in this.events)this.element.unbind(a,this.events[a])},j.prototype.destroy=function(){var a=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(a,1),this.unbind()},j.prototype._saveLinks=function(){for(var a in this.events){var b=this.events[a];this[b]=this[b].bind(this)}},g.inherit(k,j),k.prototype.events={$destroy:"destroy",change:"onChange"},k.prototype.prop="select",k.prototype.getOptions=function(){},k.prototype.getFilters=function(){},k.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},k.prototype.onChange=function(){var a=this.uploader.isHTML5?this.element[0].files:this.element[0],b=this.getOptions(),c=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(a,b,c),this.isEmptyAfterSelection()&&this.element.prop("value",null)},g.inherit(l,j),l.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},l.prototype.prop="drop",l.prototype.getOptions=function(){},l.prototype.getFilters=function(){},l.prototype.onDrop=function(b){var c=this._getTransfer(b);if(c){var d=this.getOptions(),e=this.getFilters();this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(c.files,d,e)}},l.prototype.onDragOver=function(b){var c=this._getTransfer(b);this._haveFiles(c.types)&&(c.dropEffect="copy",this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._addOverClass,this))},l.prototype.onDragLeave=function(b){b.currentTarget===this.element[0]&&(this._preventAndStop(b),
a.forEach(this.uploader._directives.over,this._removeOverClass,this))},l.prototype._getTransfer=function(a){return a.dataTransfer?a.dataTransfer:a.originalEvent.dataTransfer},l.prototype._preventAndStop=function(a){a.preventDefault(),a.stopPropagation()},l.prototype._haveFiles=function(a){return a?a.indexOf?-1!==a.indexOf("Files"):a.contains?a.contains("Files"):!1:!1},l.prototype._addOverClass=function(a){a.addOverClass()},l.prototype._removeOverClass=function(a){a.removeOverClass()},g.inherit(m,j),m.prototype.events={$destroy:"destroy"},m.prototype.prop="over",m.prototype.overClass="nv-file-over",m.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},m.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},m.prototype.getOverClass=function(){return this.overClass},g}]).directive("nvFileSelect",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');var g=new b.FileSelect({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');if(f.isHTML5){var g=new b.FileDrop({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}}]).directive("nvFileOver",["FileUploader",function(a){return{link:function(b,c,d){var e=b.$eval(d.uploader);if(!(e instanceof a))throw new TypeError('"Uploader" must be an instance of FileUploader');var f=new a.FileOver({uploader:e,element:c});f.getOverClass=function(){return d.overClass||this.overClass}}}}]),b});var duScrollDefaultEasing=function(a){"use strict";return.5>a?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active"),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(a,b,c,d,e,f,g,h){"use strict";var i={},j=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},k=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},l=function(a){return k(a)||j(a)?a:a[0]};i.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=l(this);return j(g)?a.scrollTo(b,c):(g.scrollLeft=b,void(g.scrollTop=c))};var m,n;i.duScrollToAnimated=function(a,f,g,i){g&&!i&&(i=e);var j=this.duScrollLeft(),k=this.duScrollTop(),l=Math.round(a-j),o=Math.round(f-k),p=null,q=0,r=this,s=function(a){(!a||q&&a.which>0)&&(h&&r.unbind(h,s),c(m),n.reject(),m=null)};if(m&&s(),n=b.defer(),0===g||!l&&!o)return 0===g&&r.duScrollTo(a,f),n.resolve(),n.promise;var t=function(a){null===p&&(p=a),q=a-p;var b=q>=g?1:i(q/g);r.scrollTo(j+Math.ceil(l*b),k+Math.ceil(o*b)),1>b?m=d(t):(h&&r.unbind(h,s),m=null,n.resolve())};return r.duScrollTo(j,k),h&&r.bind(h,s),m=d(t),n.promise},i.duScrollToElement=function(a,b,c,d){var e=l(this);(!angular.isNumber(b)||isNaN(b))&&(b=g);var f=this.duScrollTop()+l(a).getBoundingClientRect().top-b;return k(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},i.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=l(this);return j(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},i.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=l(this);return j(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},i.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},i.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},i.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(i,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){"use strict";var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=0,d=function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g};return a("requestAnimationFrame",d)}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=function(a){b.cancel(a)};return a("cancelAnimationFrame",c)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(e){var j=!1,k=!1,l=function(){k=!1;var b,g=e.container,j=g[0],l=0;"undefined"!=typeof HTMLElement&&j instanceof HTMLElement||j.nodeType&&j.nodeType===j.ELEMENT_NODE?(l=j.getBoundingClientRect().top,b=Math.round(j.scrollTop+j.clientHeight)>=j.scrollHeight):b=Math.round(c.pageYOffset+c.innerHeight)>=d[0].body.scrollHeight;var m,n,o,p,q,r,s=h&&b?"bottom":"top";for(p=e.spies,n=e.currentlyActive,o=void 0,m=0;m<p.length;m++)q=p[m],r=q.getTargetPosition(),r&&(h&&b||r.top+q.offset-l<20&&(f||-1*r.top+l)<r.height)&&(!o||o[s]<r[s])&&(o={spy:q},o[s]=r[s]);o&&(o=o.spy),n===o||f&&!o||(n&&(n.$element.removeClass(i),a.$broadcast("duScrollspy:becameInactive",n.$element,angular.element(n.getTargetElement()))),o&&(o.$element.addClass(i),a.$broadcast("duScrollspy:becameActive",o.$element,angular.element(o.getTargetElement()))),e.currentlyActive=o)};return g?function(){j?k=!0:(l(),j=b(function(){j=!1,k&&l()},g,!1))}:l},k={},l=function(a){var b=a.$id,c={spies:[]};return c.handler=j(c),k[b]=c,a.$on("$destroy",function(){m(a)}),b},m=function(a){var b=a.$id,c=k[b],d=c.container;d&&d.off("scroll",c.handler),delete k[b]},n=l(a),o=function(a){return k[a.$id]?k[a.$id]:a.$parent?o(a.$parent):k[n]},p=function(a){var b,c,d=a.$scope;if(d)return o(d);for(c in k)if(b=k[c],-1!==b.spies.indexOf(a))return b},q=function(a){for(;a.parentNode;)if(a=a.parentNode,a===document)return!0;return!1},r=function(a){var b=p(a);b&&(b.spies.push(a),b.container&&q(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=e.getContainer(a.$scope),b.container.on("scroll",b.handler).triggerHandler("scroll")))},s=function(a){var b=p(a);a===b.currentlyActive&&(b.currentlyActive=null);var c=b.spies.indexOf(a);-1!==c&&b.spies.splice(c,1),a.$element=null};return{addSpy:r,removeSpy:s,createContext:l,destroyContext:m,getContextForScope:o}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){"use strict";var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0},e=function(c){var e=d(c);return e?b[e]:a},f=function(a){var c=d(a);c&&delete b[c]};return{getContainerId:d,getContainer:e,setContainer:c,removeContainer:f}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){"use strict";return{link:function(d,e,f){e.on("click",function(e){if(f.href&&-1!==f.href.indexOf("#")||""!==f.duSmoothScroll){var g=f.href?f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):f.duSmoothScroll,h=document.getElementById(g)||document.getElementsByName(g)[0];if(h&&h.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var i=f.offset?parseInt(f.offset,10):b,j=f.duration?parseInt(f.duration,10):a,k=c.getContainer(d);k.duScrollToElement(angular.element(h),isNaN(i)?0:i,isNaN(j)?0:j)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){"use strict";var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();return a?a.getBoundingClientRect():void 0},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;if(j&&-1!==j.indexOf("#")?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy?i=h.duScrollspy:h.duSmoothScroll&&(i=h.duSmoothScroll),i){var k=c(function(){var c=new e(i,f,g,-(h.offset?parseInt(h.offset,10):b));a.addSpy(c),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c));var j=d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c));f.$on("$destroy",function(){a.removeSpy(c),j()})},0,!1);f.$on("$destroy",function(){c.cancel(k)})}}}}]),angular.module("timepickerPop",["ui.bootstrap"]).directive("timeFormat",["$filter",function(a){return{restrict:"A",require:"ngModel",scope:{showMeridian:"="},link:function(b,c,d,e){var f=function(a){if(a){if(angular.isDate(a)&&!isNaN(a))return e.$setValidity("time",!0),a;if(angular.isString(a)){var c=/^(0?[0-9]|1[0-2]):[0-5][0-9] ?[a|p]m$/i;if(b.showMeridian||(c=/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/),c.test(a)){e.$setValidity("time",!0);var d=new Date,f=a.split(":"),g=f[1].match(/[a|p]m/i);return g&&(f[1]=f[1].replace(/[a|p]m/i,""),"pm"==g[0].toLowerCase()&&(f[0]=f[0]+12)),d.setHours(f[0],f[1]),d}return void e.$setValidity("time",!0)}return void e.$setValidity("time",!0)}return e.$setValidity("time",!0),null};e.$parsers.push(f);var g=function(c){f(c);var d=b.showMeridian?"hh:mm a":"HH:mm";return a("date")(c,d)};e.$formatters.push(g)}}}]).directive("timepickerPop",["$document",function(a){return{restrict:"EA",transclude:!1,scope:{inputTime:"=",showMeridian:"=",ngRequired:"=",fb:"=",ngDisabled:"=",ngDate:"="},controller:["$scope","$element",function(a,b){a.isOpen=!1,a.toggle=function(){a.isOpen=!a.isOpen},a.open=function(){a.isOpen=!0},a.setTime=function(){a.inputTime||(a.inputTime=new Date)},a.validateTime=function(){if(a.ngDate&&a.inputTime){var b=new Date,c=angular.copy(a.ngDate);if("string"==typeof a.ngDate)if(10==c.length){var d=c.substr(0,2),e=c.substr(3,2)-1,f=c.substr(6,4);c=new Date(f,e,d)}else c=new Date(c);"string"==typeof a.inputTime&&(a.inputTime=new Date(a.inputTime));var g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),a.inputTime.getHours(),a.inputTime.getMinutes());g>b&&(a.inputTime=null)}};var c=a.$watch("inputTime",function(b,c){b&&b!==c&&a.validateTime()}),d=a.$watch("ngDate",function(b,c){b&&b!==c&&a.validateTime()});a.$on("$destroy",function(){c(),d()})}],link:function(b,c,d){c.bind("click",function(a){a.preventDefault(),a.stopPropagation()}),a.bind("click",function(a){b.$apply(function(){b.isOpen=!1})}),b.$on("$destroy",function(){a.unbind("click")})},template:"<input ng-required='ngRequired' ng-disabled='ngDisabled' type='text' ng-model='inputTime' time-format-input  time-format show-meridian='showMeridian' ng-focus='setTime(); open()' ng-class='{ fb: fb, \"fb-time\": fb, \"form-control\": !fb }' maxlength='5' />  <div class='input-group-btn' ng-class='{open:isOpen, \"fb-group-btn\":fb}'>           <div class='dropdown-menu pull-right'>             <div timepicker ng-model='inputTime' show-meridian='showMeridian' mousewheel='false'></div>            </div>     <button ng-disabled='ngDisabled' ng-if='true' style='width:100%' type='button' class='btn btn-default' data-toggle='dropdown' ng-click='toggle()'>         <i class='fa fa-clock-o'></i></button>     <button ng-disabled='ngDisabled' ng-if='false' style='width:100%' type='button' class='btn btn-default' data-toggle='dropdown' ng-click='inputTime=null'>         <img src='/Web/img/fa-times.png' /></button>   </div>"}}]).directive("fbTimePicker",["$document",function(a){return{restrict:"EA",transclude:!1,scope:{inputTime:"=",ngRequired:"=",ngDisabled:"=",ngDate:"="},controller:["$scope","$element",function(a,b){a.isOpen=!1,a.toggle=function(){a.isOpen=!a.isOpen},a.open=function(){a.isOpen=!0},a.setTime=function(){a.inputTime||(a.inputTime=new Date)},a.validateTime=function(){if(a.ngDate&&a.inputTime){var b=new Date,c=angular.copy(a.ngDate);if("string"==typeof a.ngDate)if(10==c.length){var d=c.substr(0,2),e=c.substr(3,2)-1,f=c.substr(6,4);c=new Date(f,e,d)}else c=new Date(c);"string"==typeof a.inputTime&&(a.inputTime=new Date(a.inputTime));var g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),a.inputTime.getHours(),a.inputTime.getMinutes());g>b&&(a.inputTime=null)}},a.$watch("inputTime",function(b,c){b&&b!==c&&a.validateTime()}),a.$watch("ngDate",function(b,c){b&&b!==c&&a.validateTime()})}],link:function(b,c,d){c.bind("click",function(a){a.preventDefault(),a.stopPropagation()}),a.bind("click",function(a){b.$apply(function(){b.isOpen=!1})})},template:"<input ng-required='ngRequired' ng-disabled='ngDisabled' type='text' ng-model='inputTime' time-format show-meridian='false' ng-focus='setTime(); open();' class='fb fb-time' />  <div class='input-group-btn' ng-class='{open:isOpen}'>           <div class='dropdown-menu pull-right'>             <div timepicker ng-model='inputTime' show-meridian='false' mousewheel='false'></div>            </div>   </div>"}}]),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){for(var b=a.css("visibility");"inherit"===b;)a=a.parent(),b=a.css("visibility");return"hidden"!==b}function c(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function d(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=e(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function e(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.on("mouseout",c,function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",c,f)}function f(){a.datepicker._isDisabledDatepicker(q.inline?q.dpDiv.parent()[0]:q.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function g(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function h(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{},a.ui.version="1.12.1";var i=0,j=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h={},i=b.split(".")[0];b=b.split(".")[1];var j=i+"-"+b;return d||(d=c,c=a.Widget),a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d))),a.expr[":"][j.toLowerCase()]=function(b){return!!a.data(b,j)},a[i]=a[i]||{},e=a[i][b],f=a[i][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new f(a,b)},a.extend(f,e,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),g=new c,g.options=a.widget.extend({},g.options),a.each(d,function(b,d){return a.isFunction(d)?void(h[b]=function(){function a(){return c.prototype[b].apply(this,arguments)}function e(a){return c.prototype[b].apply(this,a)}return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(h[b]=d)}),f.prototype=a.widget.extend(g,{widgetEventPrefix:e?g.widgetEventPrefix||b:b},h,{constructor:f,namespace:i,widgetName:b,widgetFullName:j}),e?(a.each(e._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,f,c._proto)}),delete e._childConstructors):c._childConstructors.push(f),a.widget.bridge(b,f),f},a.widget.extend=function(b){for(var c,d,e=j.call(arguments,1),f=0,g=e.length;g>f;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=j.call(arguments,1),h=this;return f?this.length||"instance"!==e?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):h=void 0:(g.length&&(e=a.widget.extend.apply(null,[e].concat(g))),this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))})),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),this.classesElementLookup={},c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy(),a.each(this.classesElementLookup,function(a,c){b._removeClass(c,a)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return"classes"===a&&this._setOptionClasses(b),this.options[a]=b,"disabled"===a&&this._setOptionDisabled(b),this},_setOptionClasses:function(b){var c,d,e;for(c in b)e=this.classesElementLookup[c],b[c]!==this.options.classes[c]&&e&&e.length&&(d=a(e.get()),this._removeClass(e,c),d.addClass(this._classes({element:d,keys:c,classes:b,add:!0})))},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a),a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function c(c,f){var g,h;for(h=0;c.length>h;h++)g=e.classesElementLookup[c[h]]||a(),g=a(b.add?a.unique(g.get().concat(b.element.get())):g.not(b.element).get()),e.classesElementLookup[c[h]]=g,d.push(c[h]),f&&b.classes[c[h]]&&d.push(b.classes[c[h]])}var d=[],e=this;return b=a.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&c(b.keys.match(/\S+/g)||[],!0),b.extra&&c(b.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(b){var c=this;a.each(c.classesElementLookup,function(d,e){-1!==a.inArray(b.target,e)&&(c.classesElementLookup[d]=a(e.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,d){d="boolean"==typeof d?d:c;var e="string"==typeof a||null===a,f={extra:e?b:c,keys:e?a:b,element:e?this.element:a,add:d};return f.element.toggleClass(this._classes(f),d),this},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.on(j,k,h):c.on(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(c).off(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget,function(){function b(a,b,c){return[parseFloat(a[0])*(l.test(a[0])?b/100:1),parseFloat(a[1])*(l.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var e,f=Math.max,g=Math.abs,h=/left|center|right/,i=/top|center|bottom/,j=/[\+\-]\d+(\.[\d]+)?%?/,k=/^\w+/,l=/%$/,m=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType,f=!d&&!e;return{element:c,isWindow:d,isDocument:e,offset:f?a(b).offset():{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:c.outerWidth(),height:c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return m.apply(this,arguments);e=a.extend({},e);var l,n,o,p,q,r,s=a(e.of),t=a.position.getWithinInfo(e.within),u=a.position.getScrollInfo(t),v=(e.collision||"flip").split(" "),w={};return r=d(s),s[0].preventDefault&&(e.at="left top"),n=r.width,o=r.height,p=r.offset,q=a.extend({},p),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=h.test(c[0])?c.concat(["center"]):i.test(c[0])?["center"].concat(c):["center","center"]),c[0]=h.test(c[0])?c[0]:"center",c[1]=i.test(c[1])?c[1]:"center",a=j.exec(c[0]),b=j.exec(c[1]),w[this]=[a?a[0]:0,b?b[0]:0],e[this]=[k.exec(c[0])[0],k.exec(c[1])[0]]}),1===v.length&&(v[1]=v[0]),"right"===e.at[0]?q.left+=n:"center"===e.at[0]&&(q.left+=n/2),"bottom"===e.at[1]?q.top+=o:"center"===e.at[1]&&(q.top+=o/2),l=b(w.at,n,o),q.left+=l[0],q.top+=l[1],this.each(function(){var d,h,i=a(this),j=i.outerWidth(),k=i.outerHeight(),m=c(this,"marginLeft"),r=c(this,"marginTop"),x=j+m+c(this,"marginRight")+u.width,y=k+r+c(this,"marginBottom")+u.height,z=a.extend({},q),A=b(w.my,i.outerWidth(),i.outerHeight());"right"===e.my[0]?z.left-=j:"center"===e.my[0]&&(z.left-=j/2),"bottom"===e.my[1]?z.top-=k:"center"===e.my[1]&&(z.top-=k/2),z.left+=A[0],z.top+=A[1],d={marginLeft:m,marginTop:r},a.each(["left","top"],function(b,c){a.ui.position[v[b]]&&a.ui.position[v[b]][c](z,{targetWidth:n,targetHeight:o,elemWidth:j,elemHeight:k,collisionPosition:d,collisionWidth:x,collisionHeight:y,offset:[l[0]+A[0],l[1]+A[1]],my:e.my,at:e.at,within:t,elem:i})}),e.using&&(h=function(a){var b=p.left-z.left,c=b+n-j,d=p.top-z.top,h=d+o-k,l={target:{element:s,left:p.left,top:p.top,width:n,height:o},element:{element:i,left:z.left,top:z.top,width:j,height:k},horizontal:0>c?"left":b>0?"right":"center",vertical:0>h?"top":d>0?"bottom":"middle"};j>n&&n>g(b+c)&&(l.horizontal="center"),k>o&&o>g(d+h)&&(l.vertical="middle"),l.important=f(g(b),g(c))>f(g(d),g(h))?"horizontal":"vertical",e.using.call(this,a,l)}),i.offset(a.extend(z,{using:h}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,g=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-g-e;b.collisionWidth>g?i>0&&0>=j?(c=a.left+i+b.collisionWidth-g-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+g-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=f(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,g=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-g-e;b.collisionHeight>g?i>0&&0>=j?(c=a.top+i+b.collisionHeight-g-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+g-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=f(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,h=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-h-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-h-f,(0>c||g(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>g(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,h=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-h-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-h-f,(0>d||g(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,(c>0||l>g(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),
a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}}}(),a.ui.position,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])}}),a.fn.extend({disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var k="ui-effects-",l="ui-effects-style",m="ui-effects-animated",n=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||(a.fx.step[d]||!isNaN(parseFloat(f)))&&(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(n.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var c=a(this);return{el:c,start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}function d(a,b){var c=b.outerWidth(),d=b.outerHeight(),e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,f=e.exec(a)||["",0,c,d,0];return{top:parseFloat(f[1])||0,right:"auto"===f[2]?c:parseFloat(f[2]),bottom:"auto"===f[3]?d:parseFloat(f[3]),left:parseFloat(f[4])||0}}a.expr&&a.expr.filters&&a.expr.filters.animated&&(a.expr.filters.animated=function(b){return function(c){return!!a(c).data(m)||b(c)}}(a.expr.filters.animated)),a.uiBackCompat!==!1&&a.extend(a.effects,{save:function(a,b){for(var c=0,d=b.length;d>c;c++)null!==b[c]&&a.data(k+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c,d=0,e=b.length;e>d;d++)null!==b[d]&&(c=a.data(k+b[d]),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).trigger("focus"),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).trigger("focus")),b}}),a.extend(a.effects,{version:"1.12.1",define:function(b,c,d){return d||(d=c,c="effect"),a.effects.effect[b]=d,a.effects.effect[b].mode=c,d},scaledDimensions:function(a,b,c){if(0===b)return{height:0,width:0,outerHeight:0,outerWidth:0};var d="horizontal"!==c?(b||100)/100:1,e="vertical"!==c?(b||100)/100:1;return{height:a.height()*e,width:a.width()*d,outerHeight:a.outerHeight()*e,outerWidth:a.outerWidth()*d}},clipToBox:function(a){return{width:a.clip.right-a.clip.left,height:a.clip.bottom-a.clip.top,left:a.clip.left,top:a.clip.top}},unshift:function(a,b,c){var d=a.queue();b>1&&d.splice.apply(d,[1,0].concat(d.splice(b,c))),a.dequeue()},saveStyle:function(a){a.data(l,a[0].style.cssText)},restoreStyle:function(a){a[0].style.cssText=a.data(l)||"",a.removeData(l)},mode:function(a,b){var c=a.is(":hidden");return"toggle"===b&&(b=c?"show":"hide"),(c?"hide"===b:"show"===b)&&(b="none"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createPlaceholder:function(b){var c,d=b.css("position"),e=b.position();return b.css({marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()),/^(static|relative)/.test(d)&&(d="absolute",c=a("<"+b[0].nodeName+">").insertAfter(b).css({display:/^(inline|ruby)/.test(b.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight"),"float":b.css("float")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).addClass("ui-effects-placeholder"),b.data(k+"placeholder",c)),b.css({position:d,left:e.left,top:e.top}),c},removePlaceholder:function(a){var b=k+"placeholder",c=a.data(b);c&&(c.remove(),a.removeData(b))},cleanUp:function(b){a.effects.restoreStyle(b),a.effects.removePlaceholder(b)},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){h.removeData(m),a.effects.cleanUp(h),"hide"===d.mode&&h.hide(),g()}function g(){a.isFunction(i)&&i.call(h[0]),a.isFunction(b)&&b()}var h=a(this);d.mode=k.shift(),a.uiBackCompat===!1||f?"none"===d.mode?(h[j](),g()):e.call(h[0],d,c):(h.is(":hidden")?"hide"===j:"show"===j)?(h[j](),g()):e.call(h[0],d,g)}var d=b.apply(this,arguments),e=a.effects.effect[d.effect],f=e.mode,g=d.queue,h=g||"fx",i=d.complete,j=d.mode,k=[],l=function(b){var c=a(this),d=a.effects.mode(c,j)||f;c.data(m,!0),k.push(d),f&&("show"===d||d===f&&"hide"===d)&&c.show(),f&&"none"===d||a.effects.saveStyle(c),a.isFunction(b)&&b()};return a.fx.off||!e?j?this[j](d.duration,i):this.each(function(){i&&i.call(this)}):g===!1?this.each(l).each(c):this.queue(h,l).queue(h,c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d},cssClip:function(a){return a?this.css("clip","rect("+a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px)"):d(this.css("clip"),this)},transfer:function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),a.isFunction(c)&&c()})}}),a.fx.step.clip=function(b){b.clipInit||(b.start=a(b.elem).cssClip(),"string"==typeof b.end&&(b.end=d(b.end,b.elem)),b.clipInit=!0),a(b.elem).cssClip({top:b.pos*(b.end.top-b.start.top)+b.start.top,right:b.pos*(b.end.right-b.start.right)+b.start.right,bottom:b.pos*(b.end.bottom-b.start.bottom)+b.start.bottom,left:b.pos*(b.end.left-b.start.left)+b.start.left})}}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}();var o=a.effects;a.effects.define("blind","hide",function(b,c){var d={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},e=a(this),f=b.direction||"up",g=e.cssClip(),h={clip:a.extend({},g)},i=a.effects.createPlaceholder(e);h.clip[d[f][0]]=h.clip[d[f][1]],"show"===b.mode&&(e.cssClip(h.clip),i&&i.css(a.effects.clipToBox(h)),h.clip=g),i&&i.animate(a.effects.clipToBox(h),b.duration,b.easing),e.animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("bounce",function(b,c){var d,e,f,g=a(this),h=b.mode,i="hide"===h,j="show"===h,k=b.direction||"up",l=b.distance,m=b.times||5,n=2*m+(j||i?1:0),o=b.duration/n,p=b.easing,q="up"===k||"down"===k?"top":"left",r="up"===k||"left"===k,s=0,t=g.queue().length;for(a.effects.createPlaceholder(g),f=g.css(q),l||(l=g["top"===q?"outerHeight":"outerWidth"]()/3),j&&(e={opacity:1},e[q]=f,g.css("opacity",0).css(q,r?2*-l:2*l).animate(e,o,p)),i&&(l/=Math.pow(2,m-1)),e={},e[q]=f;m>s;s++)d={},d[q]=(r?"-=":"+=")+l,g.animate(d,o,p).animate(e,o,p),l=i?2*l:l/2;i&&(d={opacity:0},d[q]=(r?"-=":"+=")+l,g.animate(d,o,p)),g.queue(c),a.effects.unshift(g,t,n+1)}),a.effects.define("clip","hide",function(b,c){var d,e={},f=a(this),g=b.direction||"vertical",h="both"===g,i=h||"horizontal"===g,j=h||"vertical"===g;d=f.cssClip(),e.clip={top:j?(d.bottom-d.top)/2:d.top,right:i?(d.right-d.left)/2:d.right,bottom:j?(d.bottom-d.top)/2:d.bottom,left:i?(d.right-d.left)/2:d.left},a.effects.createPlaceholder(f),"show"===b.mode&&(f.cssClip(e.clip),e.clip=d),f.animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("drop","hide",function(b,c){var d,e=a(this),f=b.mode,g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h?"-=":"+=",k="+="===j?"-=":"+=",l={opacity:0};a.effects.createPlaceholder(e),d=b.distance||e["top"===i?"outerHeight":"outerWidth"](!0)/2,l[i]=j+d,g&&(e.css(l),l[i]=k+d,l.opacity=1),e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("explode","hide",function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=b.mode,p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}),a.effects.define("fade","toggle",function(b,c){var d="show"===b.mode;a(this).css("opacity",d?0:1).animate({opacity:d?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("fold","hide",function(b,c){var d=a(this),e=b.mode,f="show"===e,g="hide"===e,h=b.size||15,i=/([0-9]+)%/.exec(h),j=!!b.horizFirst,k=j?["right","bottom"]:["bottom","right"],l=b.duration/2,m=a.effects.createPlaceholder(d),n=d.cssClip(),o={clip:a.extend({},n)},p={clip:a.extend({},n)},q=[n[k[0]],n[k[1]]],r=d.queue().length;i&&(h=parseInt(i[1],10)/100*q[g?0:1]),o.clip[k[0]]=h,p.clip[k[0]]=h,p.clip[k[1]]=0,f&&(d.cssClip(p.clip),m&&m.css(a.effects.clipToBox(p)),p.clip=n),d.queue(function(c){m&&m.animate(a.effects.clipToBox(o),l,b.easing).animate(a.effects.clipToBox(p),l,b.easing),c()}).animate(o,l,b.easing).animate(p,l,b.easing).queue(c),a.effects.unshift(d,r,4)}),a.effects.define("highlight","show",function(b,c){var d=a(this),e={backgroundColor:d.css("backgroundColor")};"hide"===b.mode&&(e.opacity=0),a.effects.saveStyle(d),d.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("size",function(b,c){var d,e,f,g=a(this),h=["fontSize"],i=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],k=b.mode,l="effect"!==k,m=b.scale||"both",n=b.origin||["middle","center"],o=g.css("position"),p=g.position(),q=a.effects.scaledDimensions(g),r=b.from||q,s=b.to||a.effects.scaledDimensions(g,0);a.effects.createPlaceholder(g),"show"===k&&(f=r,r=s,s=f),e={from:{y:r.height/q.height,x:r.width/q.width},to:{y:s.height/q.height,x:s.width/q.width}},("box"===m||"both"===m)&&(e.from.y!==e.to.y&&(r=a.effects.setTransition(g,i,e.from.y,r),s=a.effects.setTransition(g,i,e.to.y,s)),e.from.x!==e.to.x&&(r=a.effects.setTransition(g,j,e.from.x,r),s=a.effects.setTransition(g,j,e.to.x,s))),("content"===m||"both"===m)&&e.from.y!==e.to.y&&(r=a.effects.setTransition(g,h,e.from.y,r),s=a.effects.setTransition(g,h,e.to.y,s)),n&&(d=a.effects.getBaseline(n,q),r.top=(q.outerHeight-r.outerHeight)*d.y+p.top,r.left=(q.outerWidth-r.outerWidth)*d.x+p.left,s.top=(q.outerHeight-s.outerHeight)*d.y+p.top,s.left=(q.outerWidth-s.outerWidth)*d.x+p.left),g.css(r),("content"===m||"both"===m)&&(i=i.concat(["marginTop","marginBottom"]).concat(h),j=j.concat(["marginLeft","marginRight"]),g.find("*[width]").each(function(){var c=a(this),d=a.effects.scaledDimensions(c),f={height:d.height*e.from.y,width:d.width*e.from.x,outerHeight:d.outerHeight*e.from.y,outerWidth:d.outerWidth*e.from.x},g={height:d.height*e.to.y,width:d.width*e.to.x,outerHeight:d.height*e.to.y,outerWidth:d.width*e.to.x};e.from.y!==e.to.y&&(f=a.effects.setTransition(c,i,e.from.y,f),g=a.effects.setTransition(c,i,e.to.y,g)),e.from.x!==e.to.x&&(f=a.effects.setTransition(c,j,e.from.x,f),g=a.effects.setTransition(c,j,e.to.x,g)),l&&a.effects.saveStyle(c),c.css(f),c.animate(g,b.duration,b.easing,function(){l&&a.effects.restoreStyle(c)})})),g.animate(s,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var b=g.offset();0===s.opacity&&g.css("opacity",r.opacity),l||(g.css("position","static"===o?"relative":o).offset(b),a.effects.saveStyle(g)),c()}})}),a.effects.define("scale",function(b,c){var d=a(this),e=b.mode,f=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"effect"!==e?0:100),g=a.extend(!0,{from:a.effects.scaledDimensions(d),to:a.effects.scaledDimensions(d,f,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(g.from.opacity=1,g.to.opacity=0),a.effects.effect.size.call(this,g,c)}),a.effects.define("puff","hide",function(b,c){var d=a.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,10)||150});a.effects.effect.scale.call(this,d,c)}),a.effects.define("pulsate","show",function(b,c){var d=a(this),e=b.mode,f="show"===e,g="hide"===e,h=f||g,i=2*(b.times||5)+(h?1:0),j=b.duration/i,k=0,l=1,m=d.queue().length;for((f||!d.is(":visible"))&&(d.css("opacity",0).show(),k=1);i>l;l++)d.animate({opacity:k},j,b.easing),k=1-k;d.animate({opacity:k},j,b.easing),d.queue(c),a.effects.unshift(d,m,i+1)}),a.effects.define("shake",function(b,c){var d=1,e=a(this),f=b.direction||"left",g=b.distance||20,h=b.times||3,i=2*h+1,j=Math.round(b.duration/i),k="up"===f||"down"===f?"top":"left",l="up"===f||"left"===f,m={},n={},o={},p=e.queue().length;for(a.effects.createPlaceholder(e),m[k]=(l?"-=":"+=")+g,n[k]=(l?"+=":"-=")+2*g,o[k]=(l?"-=":"+=")+2*g,e.animate(m,j,b.easing);h>d;d++)e.animate(n,j,b.easing).animate(o,j,b.easing);e.animate(n,j,b.easing).animate(m,j/2,b.easing).queue(c),a.effects.unshift(e,p,i+1)}),a.effects.define("slide","show",function(b,c){var d,e,f=a(this),g={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},h=b.mode,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l=b.distance||f["top"===j?"outerHeight":"outerWidth"](!0),m={};a.effects.createPlaceholder(f),d=f.cssClip(),e=f.position()[j],m[j]=(k?-1:1)*l+e,m.clip=f.cssClip(),m.clip[g[i][1]]=m.clip[g[i][0]],"show"===h&&(f.cssClip(m.clip),f.css(j,m[j]),m.clip=d,m[j]=e),f.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});var o;a.uiBackCompat!==!1&&(o=a.effects.define("transfer",function(b,c){a(this).transfer(b,c)})),a.ui.focusable=function(c,d){var e,f,g,h,i,j=c.nodeName.toLowerCase();return"area"===j?(e=c.parentNode,f=e.name,c.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']"),g.length>0&&g.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(j)?(h=!c.disabled,h&&(i=a(c).closest("fieldset")[0],i&&(h=!i.disabled))):h="a"===j?c.href||d:d,h&&a(c).is(":visible")&&b(a(c)))},a.extend(a.expr[":"],{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}}),a.ui.focusable,a.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):a(this[0].form)},a.ui.formResetMixin={_formResetHandler:function(){var b=a(this);setTimeout(function(){var c=b.data("ui-form-reset-instances");a.each(c,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var a=this.form.data("ui-form-reset-instances")||[];a.length||this.form.on("reset.ui-form-reset",this._formResetHandler),a.push(this),this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(a.inArray(this,b),1),b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===a.fn.jquery.substring(0,3)&&(a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},a.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}(),a.fn.labels=function(){var b,c,d,e,f;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),d=this.attr("id"),d&&(b=this.eq(0).parents().last(),f=b.add(b.length?b.siblings():this.siblings()),c="label[for='"+a.ui.escapeSelector(d)+"']",e=e.add(f.find(c).addBack(c))),this.pushStack(e))},a.fn.scrollParent=function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},a.extend(a.expr[":"],{tabbable:function(b){var c=a.attr(b,"tabindex"),d=null!=c;return(!d||c>=0)&&a.ui.focusable(b,d)}}),a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),0>b.active&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b,c,d=this.options.icons;d&&(b=a("<span>"),this._addClass(b,"ui-accordion-header-icon","ui-icon "+d.header),b.prependTo(this.headers),c=this.active.children(".ui-accordion-header-icon"),this._removeClass(c,d.header)._addClass(c,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),void("icons"===a&&(this._destroyIcons(),b&&this._createIcons())))},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!a)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),a(f).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,
this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e),d.attr("aria-labelledby",c)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(c.event),"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){var c=a(this).is(":visible");c||a(this).show(),b=Math.max(b,a(this).css("height","").height()),c||a(this).hide()}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c,d,e=this.options,f=this.active,g=a(b.currentTarget),h=g[0]===f[0],i=h&&e.collapsible,j=i?a():g.next(),k=f.next(),l={oldHeader:f,oldPanel:k,newHeader:i?a():g,newPanel:j};b.preventDefault(),h&&!e.collapsible||this._trigger("beforeActivate",b,l)===!1||(e.active=i?!1:this.headers.index(g),this.active=h?a():g,this._toggle(l),this._removeClass(f,"ui-accordion-header-active","ui-state-active"),e.icons&&(c=f.children(".ui-accordion-header-icon"),this._removeClass(c,null,e.icons.activeHeader)._addClass(c,null,e.icons.header)),h||(this._removeClass(g,"ui-accordion-header-collapsed")._addClass(g,"ui-accordion-header-active","ui-state-active"),e.icons&&(d=g.children(".ui-accordion-header-icon"),this._removeClass(d,null,e.icons.header)._addClass(d,null,e.icons.activeHeader)),this._addClass(g.next(),"ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr({"aria-selected":"false","aria-expanded":"false"}),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.css("box-sizing"),j=a.length&&(!b.length||a.index()<b.index()),k=this.options.animate||{},l=j&&k.down||k,m=function(){g._toggleComplete(c)};return"number"==typeof l&&(f=l),"string"==typeof l&&(e=l),e=e||l.easing||k.easing,f=f||l.duration||k.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(this.showProps,{duration:f,easing:e,complete:m,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?"content-box"===i&&(h+=c.now):"content"!==g.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-h),h=0)}})):b.animate(this.hideProps,f,e,m):a.animate(this.showProps,f,e,m)},_toggleComplete:function(a){var b=a.oldPanel,c=b.prev();this._removeClass(b,"ui-accordion-content-active"),this._removeClass(c,"ui-accordion-header-active")._addClass(c,"ui-accordion-header-collapsed"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),a.ui.safeActiveElement=function(a){var b;try{b=a.activeElement}catch(c){b=a.body}return b||(b=a.body),b.nodeName||(b=a.body),b},a.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target),d=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&d.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.target).closest(".ui-menu-item"),d=a(b.currentTarget);c[0]===d[0]&&(this._removeClass(d.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,d))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){var c=!a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]));c&&this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),c=b.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),c.children().each(function(){var b=a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},_keydown:function(b){var c,d,e,f,g=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:g=!1,d=this.previousFilter||"",f=!1,e=b.keyCode>=96&&105>=b.keyCode?""+(b.keyCode-96):String.fromCharCode(b.keyCode),clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,c=this._filterMenuItems(e),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),c=this._filterMenuItems(e)),c.length?(this.focus(b,c),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}g&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c,d,e,f,g=this,h=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),d=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.prev(),d=a("<span>").data("ui-menu-submenu-caret",!0);g._addClass(d,"ui-menu-icon","ui-icon "+h),c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),this._addClass(d,"ui-menu","ui-widget ui-widget-content ui-front"),b=i.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);g._isDivider(b)&&g._addClass(b,"ui-menu-divider","ui-widget-content")}),e=c.not(".ui-menu-item, .ui-menu-divider"),f=e.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(e,"ui-menu-item")._addClass(f,"ui-menu-item-wrapper"),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a+""),this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){var c,d,e;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children(".ui-menu-item-wrapper"),this._addClass(d,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),e=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(e,null,"ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this._removeClass(d.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)},_filterMenuItems:function(b){var c=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}}),a.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f||!g&&this._isContentEditable(this.element),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==a.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)})):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,void(d&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))))},menuselect:function(b,c){var d=c.item.data("ui-autocomplete-item"),e=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e,this.selectedItem=d})),!1!==this._trigger("select",b,{item:d})&&this._value(d.value),this.term=this._value(),this.close(b),this.selectedItem=d}}),this.liveRegion=a("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var c=this.menu.element[0];return b.target===this.element[0]||b.target===c||a.contains(c,b.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!b||b&&!c&&!d)&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<div>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}}),a.ui.autocomplete;var p=/ui-corner-([a-z]){2,6}/g;a.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,c=[];a.each(this.options.items,function(d,e){var f,g={};return e?"controlgroupLabel"===d?(f=b.element.find(e),f.each(function(){var b=a(this);b.children(".ui-controlgroup-label-contents").length||b.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),void(c=c.concat(f.get()))):void(a.fn[d]&&(g=b["_"+d+"Options"]?b["_"+d+"Options"]("middle"):{classes:{}},b.element.find(e).each(function(){var e=a(this),f=e[d]("instance"),h=a.widget.extend({},g);if("button"!==d||!e.parent(".ui-spinner").length){f||(f=e[d]()[d]("instance")),f&&(h.classes=b._resolveClassesValues(h.classes,f)),e[d](h);var i=e[d]("widget");a.data(i[0],"ui-controlgroup-data",f?f:e[d]("instance")),c.push(i[0])}}))):void 0}),this.childWidgets=a(a.unique(c)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var c=a(this),d=c.data("ui-controlgroup-data");d&&d[b]&&d[b]()})},_updateCornerClass:function(a,b){var c="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",d=this._buildSimpleOptions(b,"label").classes.label;this._removeClass(a,null,c),this._addClass(a,null,d)},_buildSimpleOptions:function(a,b){var c="vertical"===this.options.direction,d={classes:{}};return d.classes[b]={middle:"",first:"ui-corner-"+(c?"top":"left"),last:"ui-corner-"+(c?"bottom":"right"),only:"ui-corner-all"}[a],d},_spinnerOptions:function(a){var b=this._buildSimpleOptions(a,"ui-spinner");return b.classes["ui-spinner-up"]="",b.classes["ui-spinner-down"]="",b},_buttonOptions:function(a){return this._buildSimpleOptions(a,"ui-button")},_checkboxradioOptions:function(a){return this._buildSimpleOptions(a,"ui-checkboxradio-label")},_selectmenuOptions:function(a){var b="vertical"===this.options.direction;return{width:b?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(b?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(b?"top":"left")},last:{"ui-selectmenu-button-open":b?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(b?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[a]}},_resolveClassesValues:function(b,c){var d={};return a.each(b,function(e){var f=c.options.classes[e]||"";f=a.trim(f.replace(p,"")),d[e]=(f+" "+b[e]).replace(/\s+/g," ")}),d},_setOption:function(a,b){return"direction"===a&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(a,b),"disabled"===a?void this._callChildMethod(b?"disable":"enable"):void this.refresh()},refresh:function(){var b,c=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),b=this.childWidgets,this.options.onlyVisible&&(b=b.filter(":visible")),b.length&&(a.each(["first","last"],function(a,d){var e=b[d]().data("ui-controlgroup-data");if(e&&c["_"+e.widgetName+"Options"]){var f=c["_"+e.widgetName+"Options"](1===b.length?"only":d);f.classes=c._resolveClassesValues(f.classes,e),e.element[e.widgetName](f)}else c._updateCornerClass(b[d](),d)}),this._callChildMethod("refresh"))}}),a.widget("ui.checkboxradio",[a.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b,c,d=this,e=this._super()||{};return this._readType(),c=this.element.labels(),this.label=a(c[c.length-1]),this.label.length||a.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=3===this.nodeType?a(this).text():this.outerHTML}),this.originalLabel&&(e.label=this.originalLabel),b=this.element[0].disabled,null!=b&&(e.disabled=b),e},_create:function(){var a=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),a&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===b&&/radio|checkbox/.test(this.type)||a.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var b,c=this.element[0].name,d="input[name='"+a.ui.escapeSelector(c)+"']";return c?(b=this.form.length?a(this.form[0].elements).filter(d):a(d).filter(function(){return 0===a(this).form().length}),b.not(this.element)):a([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b),"radio"===this.type&&this._getRadioGroup().each(function(){var b=a(this).checkboxradio("instance");b&&b._removeClass(b.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(a,b){return"label"!==a||b?(this._super(a,b),"disabled"===a?(this._toggleClass(this.label,null,"ui-state-disabled",b),void(this.element[0].disabled=b)):void this.refresh()):void 0},_updateIcon:function(b){var c="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=a("<span>"),this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(c+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):c+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",c),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var a=this.label.contents().not(this.element[0]);this.icon&&(a=a.not(this.icon[0])),this.iconSpace&&(a=a.not(this.iconSpace[0])),a.remove(),this.label.append(this.options.label)},refresh:function(){var a=this.element[0].checked,b=this.element[0].disabled;this._updateIcon(a),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a),null!==this.options.label&&this._updateLabel(),b!==this.options.disabled&&this._setOptions({disabled:b})}}]),a.ui.checkboxradio,a.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a,b=this._super()||{};return this.isInput=this.element.is("input"),a=this.element[0].disabled,null!=a&&(b.disabled=a),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(b.label=this.originalLabel),b},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(b){
b.keyCode===a.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(b,c){var d="iconPosition"!==b,e=d?this.options.iconPosition:c,f="top"===e||"bottom"===e;this.icon?d&&this._removeClass(this.icon,null,this.options.icon):(this.icon=a("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),d&&this._addClass(this.icon,null,c),this._attachIcon(e),f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(e))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?"append":"prepend"](this.icon)},_setOptions:function(a){var b=void 0===a.showLabel?this.options.showLabel:a.showLabel,c=void 0===a.icon?this.options.icon:a.icon;b||c||(a.showLabel=!0),this._super(a)},_setOption:function(a,b){"icon"===a&&(b?this._updateIcon(a,b):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===a&&this._updateIcon(a,b),"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!b),this._updateTooltip()),"label"===a&&(this.isInput?this.element.val(b):(this.element.html(b),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(a,b),"disabled"===a&&(this._toggleClass(null,"ui-state-disabled",b),this.element[0].disabled=b,b&&this.element.blur())},refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a}),this._updateTooltip()}}),a.uiBackCompat!==!1&&(a.widget("ui.button",a.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(a,b){return"text"===a?void this._super("showLabel",b):("showLabel"===a&&(this.options.text=b),"icon"===a&&(this.options.icons.primary=b),"icons"===a&&(b.primary?(this._super("icon",b.primary),this._super("iconPosition","beginning")):b.secondary&&(this._super("icon",b.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),a.fn.button=function(b){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(a.ui.checkboxradio||a.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(a.fn.button),a.fn.buttonset=function(){return a.ui.controlgroup||a.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),a.ui.button,a.extend(a.ui,{datepicker:{version:"1.12.1"}});var q;a.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return g(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?e(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.off("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.on("focus",this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.on("click",function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var h,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),g(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty(),q===e&&(q=null))},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,h,i,j=this._getInst(b);return 2===arguments.length&&"string"==typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),void(j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),h=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),g(j.settings,e),null!==h&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,h)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var d,e,f,h,i,j,k;d=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(d,"beforeShow"),f=e?e.apply(b,[b,d]):{},f!==!1&&(g(d.settings,f),d.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(d),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),h=!1,a(b).parents().each(function(){return h|="fixed"===a(this).css("position"),!h}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,d.dpDiv.empty(),d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(d),i=a.datepicker._checkOffset(d,i,h),d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),d.inline||(j=a.datepicker._get(d,"showAnim"),k=a.datepicker._get(d,"duration"),d.dpDiv.css("z-index",c(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?d.dpDiv.show(j,a.datepicker._get(d,"showOptions"),k):d.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),a.datepicker._curInst=d))}},_updateDatepicker:function(b){this.maxRows=4,q=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],g=17,h=b.dpDiv.find("."+this._dayOverClass+" a");h.length>0&&f.apply(h.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.trigger("focus"),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).val(e))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?""+c:c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=b.length>e+1&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;b.length>e;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(c.length>i&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;f=this._getDaysInMonth(p,q-1),!(f>=r);)q++,r-=f;if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getFullYear()%100?"0":"")+b.getFullYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).on(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",
I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.selectedYear+("Y"===c?b:0),e=a.selectedMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).on("mousedown",a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new d,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.12.1",a.datepicker,a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var r=!1;a(document).on("mouseup",function(){r=!1}),a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),r=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")},a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blurActiveElement(b),this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=a.ui.safeActiveElement(this.document[0]),d=a(b.target);d.closest(c).length||a.ui.safeBlur(c)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=p>=Math.abs(k-t),f=p>=Math.abs(l-s),g=p>=Math.abs(i-r),h=p>=Math.abs(j-q),e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=p>=Math.abs(k-s),f=p>=Math.abs(l-t),g=p>=Math.abs(i-q),h=p>=Math.abs(j-r),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable,a.widget("ui.resizable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c=this.options,d=this;this._addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize()),this._setupHandles(),c.autoHide&&a(this.element).on("mouseenter",function(){c.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){c.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_setOption:function(a,b){switch(this._super(a,b),a){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var b,c,d,e,f,g=this.options,h=this;if(this.handles=g.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),d=this.handles.split(","),this.handles={},c=0;d.length>c;c++)b=a.trim(d[c]),e="ui-resizable-"+b,f=a("<div>"),this._addClass(f,"ui-resizable-handle "+e),f.css({zIndex:g.zIndex}),this.handles[b]=".ui-resizable-"+b,this.element.append(f);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:h._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){h.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=f&&f[1]?f[1]:"se")}),g.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,
e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),this._addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),i?(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseFloat(k.element.css("left"))+(k.position.left-k.originalPosition.left)||null,i=parseFloat(k.element.css("top"))+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),f.maxWidth>c&&(f.maxWidth=c),f.maxHeight>e&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.originalPosition.top+this.originalSize.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseFloat(d[b])||0,c[b]+=parseFloat(e[b])||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,k=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseFloat(c.element.css("width")),height:parseFloat(c.element.css("height")),top:parseFloat(c.element.css("top")),left:parseFloat(c.element.css("left"))};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseFloat(b.width()),height:parseFloat(b.height()),left:parseFloat(b.css("left")),top:parseFloat(b.css("top"))})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0};a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(e[b]=c||null)}),b.css(e)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}),b._addClass(b.ghost,"ui-resizable-ghost"),a.uiBackCompat!==!1&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&n>d.maxWidth,q=d.maxHeight&&o>d.maxHeight,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((0>=o-k||0>=n-j)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=j-b.width,c.size.width=n,c.position.left=g.left+f.width-n))}}),a.ui.resizable,a.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||a.ui.safeBlur(a.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(a.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).trigger("focus")},_keepFocus:function(b){function c(){var b=a.ui.safeActiveElement(this.document[0]),c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.trigger("focus")}),b.preventDefault()):(this._delay(function(){d.trigger("focus")}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:a("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(b,"ui-dialog-title"),this._title(b),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,f={icon:d.icon,iconPosition:d.iconPosition,showLabel:d.showLabel,icons:d.icons,text:d.text},delete d.click,delete d.icon,delete d.iconPosition,delete d.showLabel,delete d.icons,"boolean"==typeof d.text&&delete d.text,a("<button></button>",d).button(f).appendTo(b.uiButtonSet).on("click",function(){e.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){c._addClass(a(this),"ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},c._removeClass(a(this),"ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){c._addClass(a(this),"ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},c._removeClass(a(this),"ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(b,c){var d,e,f=this.uiDialog;"disabled"!==b&&(this._super(b,c),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:a("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&(d=f.is(":data(ui-draggable)"),d&&!c&&f.draggable("destroy"),!d&&c&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&(e=f.is(":data(ui-resizable)"),e&&!c&&f.resizable("destroy"),e&&"string"==typeof c&&f.resizable("option","handles",c),e||c===!1||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,b){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(b),this._superApply(arguments)}}),a.ui.dialog,a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b)},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this._addActiveClass(),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this._removeActiveClass(),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&s(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var s=a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return f+b.helperProportions.width/2>j&&l>h-b.helperProportions.width/2&&g+b.helperProportions.height/2>k&&m>i-b.helperProportions.height/2;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&s(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=s(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},a.uiBackCompat!==!1&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),a.ui.droppable,a.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=a("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),
this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),void this._refreshValue())},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(c.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),a.widget("ui.selectable",a.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b.elementPos=a(b.element[0]).offset(),b.selectees=a(b.options.filter,b.element[0]),b._addClass(b.selectees,"ui-selectee"),b.selectees.each(function(){var c=a(this),d=c.offset(),e={left:d.left-b.elementPos.left,top:d.top-b.elementPos.top};a.data(this,"selectable-item",{element:this,$element:c,left:e.left,top:e.top,right:e.left+c.outerWidth(),bottom:e.top+c.outerHeight(),startselected:!1,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=a("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.elementPos=a(this.element[0]).offset(),this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(c._removeClass(d.$element,"ui-selected"),d.selected=!1,c._addClass(d.$element,"ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),c._removeClass(e.$element,d?"ui-unselecting":"ui-selected")._addClass(e.$element,d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1,k={};c&&c.element!==d.element[0]&&(k.left=c.left+d.elementPos.left,k.right=c.right+d.elementPos.left,k.top=c.top+d.elementPos.top,k.bottom=c.bottom+d.elementPos.top,"touch"===e.tolerance?j=!(k.left>h||f>k.right||k.top>i||g>k.bottom):"fit"===e.tolerance&&(j=k.left>f&&h>k.right&&k.top>g&&i>k.bottom),j?(c.selected&&(d._removeClass(c.$element,"ui-selected"),c.selected=!1),c.unselecting&&(d._removeClass(c.$element,"ui-unselecting"),c.unselecting=!1),c.selecting||(d._addClass(c.$element,"ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(d._removeClass(c.$element,"ui-selecting"),c.selecting=!1,d._addClass(c.$element,"ui-selected"),c.selected=!0):(d._removeClass(c.$element,"ui-selecting"),c.selecting=!1,c.startselected&&(d._addClass(c.$element,"ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(d._removeClass(c.$element,"ui-selected"),c.selected=!1,d._addClass(c.$element,"ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");c._removeClass(d.$element,"ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");c._removeClass(d.$element,"ui-selecting")._addClass(d.$element,"ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.widget("ui.selectmenu",[a.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=a()},_drawButton:function(){var b,c=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),b=a("<span>").appendTo(this.button),this._addClass(b,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(d).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){c._rendered||c._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(a,c){a.preventDefault(),b._setSelection(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a,b=this.element.find("option");this.menu.empty(),this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,b.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var c=a("<span>");return this._setText(c,b.label),this._addClass(c,"ui-selectmenu-text"),c},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){var g;f.optgroup!==e&&(g=a("<li>",{text:f.optgroup}),d._addClass(g,"ui-selectmenu-optgroup","ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),g.appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>"),e=a("<div>",{title:c.element.attr("title")});return c.disabled&&this._addClass(d,null,"ui-state-disabled"),this._setText(e,c.label),d.append(e).appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex).parent("li"):(c=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+a.ui.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection(),this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a)),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){if("icons"===a){var c=this.button.find("span.ui-icon");this._removeClass(c,null,this.options.icons.button)._addClass(c,null,b.button)}this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a),this.menuInstance.option("disabled",a),this.button.attr("aria-disabled",a),this._toggleClass(this.button,null,"ui-state-disabled",a),this.element.prop("disabled",a),a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;return a===!1?void this.button.css("width",""):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(a))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();return a.disabled=this.element.prop("disabled"),a},_parseOptions:function(b){var c=this,d=[];b.each(function(b,e){d.push(c._parseOption(a(e),b))}),this.items=d},_parseOption:function(a,b){var c=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:c.attr("label")||"",disabled:c.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),a.widget("ui.slider",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle"),f="<span tabindex='0'></span>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=a("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===b.range||"max"===b.range)&&this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,this._addClass(f,null,"ui-state-active"),f.trigger("focus"),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_uiHash:function(a,b,c){var d={handle:this.handles[a],handleIndex:a,value:void 0!==b?b:this.value()};return this._hasMultipleValues()&&(d.value=void 0!==b?b:this.values(a),d.values=c||this.values()),d},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(a,b){return this._trigger("start",a,this._uiHash(b))},_slide:function(a,b,c){var d,e,f=this.value(),g=this.values();this._hasMultipleValues()&&(e=this.values(b?0:1),f=this.values(b),2===this.options.values.length&&this.options.range===!0&&(c=0===b?Math.min(e,c):Math.max(e,c)),g[b]=c),c!==f&&(d=this._trigger("slide",a,this._uiHash(b,c,g)),d!==!1&&(this._hasMultipleValues()?this.values(b,c):this.value(c)))},_stop:function(a,b){this._trigger("stop",a,this._uiHash(b))},_change:function(a,b){this._keySliding||this._mouseSliding||(this._lastChangedValue=b,this._trigger("change",a,this._uiHash(b)))},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this._hasMultipleValues()?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),this._super(b,c),b){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(c),this.handles.css("horizontal"===c?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=e-1;d>=0;d--)this._change(null,d);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(a){this._super(a),this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this._hasMultipleValues()){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step,d=Math.round((a-b)/c)*c;a=d+b,a>this.options.max&&(a-=c),this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""}),"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this._hasMultipleValues()?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:100-c+"%"},h.animate),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:100-c+"%"},h.animate))},_handleEvents:{keydown:function(b){var c,d,e,f,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(a(b.target),null,"ui-state-active"),c=this._start(b,g),c===!1))return}switch(f=this.options.step,d=e=this._hasMultipleValues()?this.values(g):this.value(),b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;e=this._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;e=this._trimAlignValue(d-f)}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),this._removeClass(a(b.target),null,"ui-state-active"))}}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),a.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),
this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b,c,d="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),f=d&&e;return f?(b=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection(),this.floating?"right"===c||"down"===b?2:1:b&&("down"===b?2:1)):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]);return b._addClass(e,"ui-sortable-placeholder",c||b.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"pageX":"pageY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),e>Math.abs(b[l]-i)&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);null!=e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var b=this.element[0]===a.ui.safeActiveElement(this.document[0]);b||(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===a.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){var c,d,e;return"culture"===a||"numberFormat"===a?(c=this._parse(this.element.val()),this.options[a]=b,void this.element.val(this._format(c))):(("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(d=this.buttons.first().find(".ui-icon"),this._removeClass(d,null,this.options.icons.up),this._addClass(d,null,b.up),e=this.buttons.last().find(".ui-icon"),this._removeClass(e,null,this.options.icons.down),this._addClass(e,null,b.down)),void this._super(a,b))},_setOptionDisabled:function(a){this._super(a),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!a),this.element.prop("disabled",!!a),this.buttons.button(a?"disable":"enable")},_setOptions:h(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:h(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:h(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:h(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void h(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),a.uiBackCompat!==!1&&a.widget("ui.spinner",a.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),a.ui.spinner,a.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(e){}try{d=decodeURIComponent(d)}catch(e){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(a.ui.safeActiveElement(this.document[0])).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).trigger("focus"),a},_setOption:function(a,b){return"active"===a?void this._activate(b):(this._super(a,b),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",null,b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var c,d,e;for(a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1),e=0;d=this.tabs[e];e++)c=a(d),b===!0||-1!==a.inArray(e,b)?(c.attr("aria-disabled","true"),this._addClass(c,null,"ui-state-disabled")):(c.removeAttr("aria-disabled"),this._removeClass(c,null,"ui-state-disabled"));this.options.disabled=b,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,b===!0)},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs);
},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){f._addClass(c.newTab.closest("li"),"ui-tabs-active","ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){f._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),e()}):(this._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(b){return"string"==typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+a.ui.escapeSelector(b)+"']"))),b},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;c!==!1&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setOptionDisabled(c))},disable:function(b){var c=this.options.disabled;if(c!==!0){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setOptionDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g},i=function(a,b){"abort"===b&&d.panels.stop(!1,!0),d._removeClass(e,"ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(e,"ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.done(function(a,b,e){setTimeout(function(){g.html(a),d._trigger("load",c,h),i(e,b)},1)}).fail(function(a,b){setTimeout(function(){i(a,b)},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.uiBackCompat!==!1&&a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),a.ui.tabs,a.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=a([])},_setOption:function(b,c){var d=this;this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)})},_setOptionDisabled:function(a){this[a?"_disable":"_enable"]()},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0],b.close(e,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var b=a(this);return b.is("[title]")?b.data("ui-tooltip-title",b.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))}),this.disabledTitles=a([])},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._registerCloseHandlers(b,d),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d||d.nodeType||d.jquery?this._open(b,a,d):(c=d.call(a[0],function(c){e._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=f),this._open(b,a,c))})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a){j.of=a,g.is(":hidden")||g.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c))return void f.tooltip.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),g=f.tooltip,this._addDescribedBy(c,g.attr("id")),g.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),i=a("<div>").html(g.find(".ui-tooltip-content").html()),i.removeAttr("name").find("[name]").removeAttr("name"),i.removeAttr("id").find("[id]").removeAttr("id"),i.appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):g.position(a.extend({of:c},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){g.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:g})}},_registerCloseHandlers:function(b,c){var d={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(c).tooltip)}),b&&"mouseover"!==b.type||(d.mouseleave="close"),b&&"focusin"!==b.type||(d.focusout="close"),this._on(!0,c,d)},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);return f?(c=f.tooltip,void(f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,c.stop(!0),this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:c}),f.hiding||(f.closing=!1)))):void e.removeData("ui-tooltip-open")},_tooltip:function(b){var c=a("<div>").attr("role","tooltip"),d=a("<div>").appendTo(c),e=c.uniqueId().attr("id");return this._addClass(d,"ui-tooltip-content"),this._addClass(c,"ui-tooltip","ui-widget ui-widget-content"),c.appendTo(this._appendTo(b)),this.tooltips[e]={element:b,tooltip:c}},_find:function(a){var b=a.data("ui-tooltip-id");return b?this.tooltips[b]:null},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_appendTo:function(a){var b=a.closest(".ui-front, dialog");return b.length||(b=this.document[0].body),b},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),f=d.element;e.target=e.currentTarget=f[0],b.close(e,!0),a("#"+c).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),a.uiBackCompat!==!1&&a.widget("ui.tooltip",a.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var a=this._superApply(arguments);return this.options.tooltipClass&&a.tooltip.addClass(this.options.tooltipClass),a}}),a.ui.tooltip}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.date"),function(a){"use strict";a.module("ui.date",[]).constant("uiDateConfig",{}).constant("uiDateFormatConfig","").factory("uiDateConverter",["uiDateFormatConfig",function(b){function c(a,c){if(a=a||b,c){if(a)try{return jQuery.datepicker.formatDate(a,c)}catch(d){return void 0}if(c.toISOString)return c.toISOString()}return null}function d(c,d){if(c=c||b,a.isDate(d)&&!isNaN(d))return d;if(a.isString(d)){if(c)return jQuery.datepicker.parseDate(c,d);var e=new Date(d);return isNaN(e.getTime())?null:e}return a.isNumber(d)?new Date(d):null}return{stringToDate:d,dateToString:c}}]).directive("uiDate",["uiDateConfig","uiDateConverter",function(b,c){return{require:"?ngModel",link:function(d,e,f,g){var h=function(){return a.extend({},b,d.$eval(f.uiDate))},i=function(){function b(){var b=["Hours","Minutes","Seconds","Milliseconds"],c=a.isDate(g.$modelValue),d={};c&&g.$modelValue.toDateString()===e.datepicker("getDate").toDateString()||(c&&a.forEach(b,function(a){d[a]=g.$modelValue["get"+a]()}),g.$setViewValue(e.datepicker("getDate")),c&&a.forEach(b,function(a){g.$viewValue["set"+a](d[a])}))}var i=!1,j=h();if(g){var k=j.onSelect||a.noop;j.onSelect=function(a,c){d.$apply(function(){i=!0,b(),k(a,c),e.blur()})};var l=j.beforeShow||a.noop;j.beforeShow=function(a,b){i=!0,l(a,b)};var m=j.onClose||a.noop;j.onClose=function(a,b){i=!1,m(a,b)},e.off("blur.datepicker").on("blur.datepicker",function(){i||d.$apply(function(){e.datepicker("setDate",e.datepicker("getDate")),b()})}),g.$validators.uiDateValidator=function(b,d){return a.isDate(c.stringToDate(f.uiDateFormat,d))},g.$parsers.push(function(a){return c.stringToDate(f.uiDateFormat,a)}),g.$render=function(){e.datepicker("setDate",g.$modelValue)}}e.data("datepicker")?(e.datepicker("option",j),e.datepicker("refresh")):(e.datepicker(j),e.on("$destroy",function(){e.datepicker("hide"),e.datepicker("destroy")})),g&&g.$render()};d.$watch(h,i,!0)}}}]).directive("uiDateFormat",["uiDateConverter",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat;e.$formatters.unshift(function(b){return a.stringToDate(f,b)}),e.$parsers.push(function(b){return a.dateToString(f,b)})}}}])}(angular),function(a,b,c,d){var e=function(d,e){this.elem=d,this.$elem=a(d),this.options=e,this.metadata=this.$elem.data("plugin-options"),this.$win=a(b),this.sections={},this.didScroll=!1,this.$doc=a(c),this.docHeight=this.$doc.height()};e.prototype={defaults:{navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){return this.config=a.extend({},this.defaults,this.options,this.metadata),this.$nav=this.$elem.find(this.config.navItems),""!==this.config.filter&&(this.$nav=this.$nav.filter(this.config.filter)),this.$nav.on("click.onePageNav",a.proxy(this.handleClick,this)),this.getPositions(),this.bindInterval(),this.$win.on("resize.onePageNav",a.proxy(this.getPositions,this)),this},adjustNav:function(a,b){a.$elem.find("."+a.config.currentClass).removeClass(a.config.currentClass),b.addClass(a.config.currentClass)},bindInterval:function(){var a,b=this;b.$win.on("scroll.onePageNav",function(){b.didScroll=!0}),b.t=setInterval(function(){a=b.$doc.height(),b.didScroll&&(b.didScroll=!1,b.scrollChange()),a!==b.docHeight&&(b.docHeight=a,b.getPositions())},250)},getHash:function(a){return a.attr("href").split("#")[1]},getPositions:function(){var b,c,d,e=this;e.$nav.each(function(){b=e.getHash(a(this)),d=a("#"+b),d.length&&(c=d.offset().top,e.sections[b]=Math.round(c))})},getSection:function(a){var b=null,c=Math.round(this.$win.height()*this.config.scrollThreshold);for(var d in this.sections)this.sections[d]-c<a&&(b=d);return b},handleClick:function(c){var d=this,e=a(c.currentTarget),f=e.parent(),g="#"+d.getHash(e);f.hasClass(d.config.currentClass)||(d.config.begin&&d.config.begin(),d.adjustNav(d,f),d.unbindInterval(),d.scrollTo(g,function(){d.config.changeHash&&(b.location.hash=g),d.bindInterval(),d.config.end&&d.config.end()})),c.preventDefault()},scrollChange:function(){var a,b=this.$win.scrollTop(),c=this.getSection(b);null!==c&&(a=this.$elem.find('a[href$="#'+c+'"]').parent(),a.hasClass(this.config.currentClass)||(this.adjustNav(this,a),this.config.scrollChange&&this.config.scrollChange(a)))},scrollTo:function(b,c){var d=a(b).offset().top;a("html, body").animate({scrollTop:d},this.config.scrollSpeed,this.config.easing,c)},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}},e.defaults=e.prototype.defaults,a.fn.onePageNav=function(a){return this.each(function(){new e(this,a).init()})}}(jQuery,window,document),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=Array.prototype.slice,c=Array.prototype.splice,d={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1},e=a(window),f=a(document),g=[],h=e.height(),i=function(){for(var b=e.scrollTop(),c=f.height(),d=c-h,i=b>d?d-b:0,j=0,k=g.length;k>j;j++){var l=g[j],m=l.stickyWrapper.offset().top,n=m-l.topSpacing-i;if(l.stickyWrapper.css("height",l.stickyElement.outerHeight()),n>=b)null!==l.currentTop&&(l.stickyElement.css({width:"",position:"",top:""}),l.stickyElement.parent().removeClass(l.className),l.stickyElement.trigger("sticky-end",[l]),l.currentTop=null);else{var o=c-l.stickyElement.outerHeight()-l.topSpacing-l.bottomSpacing-b-i;if(0>o?o+=l.topSpacing:o=l.topSpacing,l.currentTop!==o){var p;l.getWidthFrom?p=a(l.getWidthFrom).width()||null:l.widthFromWrapper&&(p=l.stickyWrapper.width()),null==p&&(p=l.stickyElement.width()),l.stickyElement.css("width",p).css("position","fixed").css("top",o),l.stickyElement.parent().addClass(l.className),null===l.currentTop?l.stickyElement.trigger("sticky-start",[l]):l.stickyElement.trigger("sticky-update",[l]),l.currentTop===l.topSpacing&&l.currentTop>o||null===l.currentTop&&o<l.topSpacing?l.stickyElement.trigger("sticky-bottom-reached",[l]):null!==l.currentTop&&o===l.topSpacing&&l.currentTop<o&&l.stickyElement.trigger("sticky-bottom-unreached",[l]),l.currentTop=o}}}},j=function(){h=e.height();for(var b=0,c=g.length;c>b;b++){var d=g[b],f=null;d.getWidthFrom?d.responsiveWidth&&(f=a(d.getWidthFrom).width()):d.widthFromWrapper&&(f=d.stickyWrapper.width()),null!=f&&d.stickyElement.css("width",f)}},k={init:function(b){var c=a.extend({},d,b);return this.each(function(){var b=a(this),e=b.attr("id"),f=b.outerHeight(),h=e?e+"-"+d.wrapperClassName:d.wrapperClassName,i=a("<div></div>").attr("id",h).addClass(c.wrapperClassName);b.wrapAll(i);var j=b.parent();c.center&&j.css({width:b.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===b.css("float")&&b.css({"float":"none"}).parent().css({"float":"right"}),j.css("height",f),c.stickyElement=b,c.stickyWrapper=j,c.currentTop=null,g.push(c)})},update:i,unstick:function(b){return this.each(function(){for(var b=this,d=a(b),e=-1,f=g.length;f-->0;)g[f].stickyElement.get(0)===b&&(c.call(g,f,1),e=f);-1!==e&&(d.unwrap(),d.css({width:"",position:"",top:"","float":""}))})}};window.addEventListener?(window.addEventListener("scroll",i,!1),window.addEventListener("resize",j,!1)):window.attachEvent&&(window.attachEvent("onscroll",i),window.attachEvent("onresize",j)),a.fn.sticky=function(c){return k[c]?k[c].apply(this,b.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sticky"):k.init.apply(this,arguments)},a.fn.unstick=function(c){return k[c]?k[c].apply(this,b.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sticky"):k.unstick.apply(this,arguments)},a(function(){setTimeout(i,0)})});var JSEncryptExports={};!function(a){function b(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function c(){return new b(null)}function d(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function e(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function f(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function g(a){return Bb.charAt(a)}function h(a,b){var c=Cb[a.charCodeAt(b)];return null==c?-1:c}function i(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function j(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function k(a){var b=c();return b.fromInt(a),b}function l(a,c){var d;if(16==c)d=4;else if(8==c)d=3;else if(256==c)d=8;else if(2==c)d=1;else if(32==c)d=5;else{if(4!=c)return void this.fromRadix(a,c);d=2}this.t=0,this.s=0;for(var e=a.length,f=!1,g=0;--e>=0;){var i=8==d?255&a[e]:h(a,e);0>i?"-"==a.charAt(e)&&(f=!0):(f=!1,0==g?this[this.t++]=i:g+d>this.DB?(this[this.t-1]|=(i&(1<<this.DB-g)-1)<<g,this[this.t++]=i>>this.DB-g):this[this.t-1]|=i<<g,g+=d,g>=this.DB&&(g-=this.DB))}8==d&&0!=(128&a[0])&&(this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),f&&b.ZERO.subTo(this,this)}function m(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function n(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",h=this.t,i=this.DB-h*this.DB%b;if(h-->0)for(i<this.DB&&(c=this[h]>>i)>0&&(e=!0,f=g(c));h>=0;)b>i?(c=(this[h]&(1<<i)-1)<<b-i,c|=this[--h]>>(i+=this.DB-b)):(c=this[h]>>(i-=b)&d,0>=i&&(i+=this.DB,--h)),c>0&&(e=!0),e&&(f+=g(c));return e?f:"0"}function o(){var a=c();return b.ZERO.subTo(this,a),a}function p(){return this.s<0?this.negate():this}function q(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=c-a.t,0!=b)return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function r(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function s(){return this.t<=0?0:this.DB*(this.t-1)+r(this[this.t-1]^this.s&this.DM)}function t(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function u(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function w(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function x(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function y(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function z(a,c){var d=this.abs(),e=a.abs(),f=d.t;for(c.t=f+e.t;--f>=0;)c[f]=0;for(f=0;f<e.t;++f)c[f+d.t]=d.am(0,e[f],c,f,0,d.t);c.s=0,c.clamp(),this.s!=a.s&&b.ZERO.subTo(c,c)}function A(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function B(a,d,e){var f=a.abs();if(!(f.t<=0)){var g=this.abs();if(g.t<f.t)return null!=d&&d.fromInt(0),void(null!=e&&this.copyTo(e));null==e&&(e=c());var h=c(),i=this.s,j=a.s,k=this.DB-r(f[f.t-1]);k>0?(f.lShiftTo(k,h),g.lShiftTo(k,e)):(f.copyTo(h),g.copyTo(e));var l=h.t,m=h[l-1];if(0!=m){var n=m*(1<<this.F1)+(l>1?h[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,s=e.t,t=s-l,u=null==d?c():d;for(h.dlShiftTo(t,u),e.compareTo(u)>=0&&(e[e.t++]=1,e.subTo(u,e)),b.ONE.dlShiftTo(l,u),u.subTo(h,h);h.t<l;)h[h.t++]=0;for(;--t>=0;){var v=e[--s]==m?this.DM:Math.floor(e[s]*o+(e[s-1]+q)*p);if((e[s]+=h.am(0,v,e,t,0,l))<v)for(h.dlShiftTo(t,u),e.subTo(u,e);e[s]<--v;)e.subTo(u,e)}null!=d&&(e.drShiftTo(l,d),i!=j&&b.ZERO.subTo(d,d)),e.t=l,e.clamp(),k>0&&e.rShiftTo(k,e),0>i&&b.ZERO.subTo(e,e)}}}function C(a){var d=c();return this.abs().divRemTo(a,null,d),this.s<0&&d.compareTo(b.ZERO)>0&&a.subTo(d,d),d}function D(a){this.m=a}function E(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function F(a){return a}function G(a){a.divRemTo(this.m,null,a)}function H(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function I(a,b){a.squareTo(b),this.reduce(b)}function J(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function K(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function L(a){var d=c();return a.abs().dlShiftTo(this.m.t,d),d.divRemTo(this.m,null,d),a.s<0&&d.compareTo(b.ZERO)>0&&this.m.subTo(d,d),d}function M(a){var b=c();return a.copyTo(b),this.reduce(b),b}function N(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function O(a,b){a.squareTo(b),this.reduce(b)}function P(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function Q(){return 0==(this.t>0?1&this[0]:this.s)}function R(a,d){if(a>4294967295||1>a)return b.ONE;var e=c(),f=c(),g=d.convert(this),h=r(a)-1;for(g.copyTo(e);--h>=0;)if(d.sqrTo(e,f),(a&1<<h)>0)d.mulTo(f,g,e);else{var i=e;e=f,f=i}return d.revert(e)}function S(a,b){var c;return c=256>a||b.isEven()?new D(b):new K(b),this.exp(a,c)}function T(){var a=c();return this.copyTo(a),a}function U(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function V(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function X(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(a){if(null==a&&(a=10),0==this.signum()||2>a||a>36)return"0";var b=this.chunkSize(a),d=Math.pow(a,b),e=k(d),f=c(),g=c(),h="";for(this.divRemTo(e,f,g);f.signum()>0;)h=(d+g.intValue()).toString(a).substr(1)+h,f.divRemTo(e,f,g);return g.intValue().toString(a)+h}function $(a,c){this.fromInt(0),null==c&&(c=10);for(var d=this.chunkSize(c),e=Math.pow(c,d),f=!1,g=0,i=0,j=0;j<a.length;++j){var k=h(a,j);0>k?"-"==a.charAt(j)&&0==this.signum()&&(f=!0):(i=c*i+k,++g>=d&&(this.dMultiply(e),this.dAddOffset(i,0),g=0,i=0))}g>0&&(this.dMultiply(Math.pow(c,g)),this.dAddOffset(i,0)),f&&b.ZERO.subTo(this,this)}function _(a,c,d){if("number"==typeof c)if(2>a)this.fromInt(1);else for(this.fromNumber(a,d),this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),ha,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(b.ONE.shiftLeft(a-1),this);else{var e=new Array,f=7&a;e.length=(a>>3)+1,c.nextBytes(e),f>0?e[0]&=(1<<f)-1:e[0]=0,this.fromString(e,256)}}function aa(){var a=this.t,b=new Array;b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-->0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)8>d?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b}function ba(a){return 0==this.compareTo(a)}function ca(a){return this.compareTo(a)<0?this:a}function da(a){return this.compareTo(a)>0?this:a}function ea(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;f>d;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function fa(a,b){return a&b}function ga(a){var b=c();return this.bitwiseTo(a,fa,b),b}function ha(a,b){return a|b}function ia(a){var b=c();return this.bitwiseTo(a,ha,b),b}function ja(a,b){return a^b}function ka(a){var b=c();return this.bitwiseTo(a,ja,b),b}function la(a,b){return a&~b}function ma(a){var b=c();return this.bitwiseTo(a,la,b),b}function na(){for(var a=c(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a}function oa(a){var b=c();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function pa(a){var b=c();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function qa(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function ra(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+qa(this[a]);return this.s<0?this.t*this.DB:-1}function sa(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function ta(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=sa(this[c]^b);return a}function ua(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)}function va(a,c){var d=b.ONE.shiftLeft(a);return this.bitwiseTo(d,c,d),d}function wa(a){return this.changeBit(a,ha)}function xa(a){return this.changeBit(a,la)}function ya(a){return this.changeBit(a,ja)}function za(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0,d>0?b[c++]=d:-1>d&&(b[c++]=this.DV+d),b.t=c,b.clamp()}function Aa(a){var b=c();return this.addTo(a,b),b}function Ba(a){var b=c();return this.subTo(a,b),b}function Ca(a){var b=c();return this.multiplyTo(a,b),b}function Da(){var a=c();return this.squareTo(a),a}function Ea(a){var b=c();return this.divRemTo(a,b,null),b}function Fa(a){var b=c();return this.divRemTo(a,null,b),b}function Ga(a){var b=c(),d=c();return this.divRemTo(a,b,d),new Array(b,d)}function Ha(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Ia(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}}function Ja(){}function Ka(a){return a}function La(a,b,c){a.multiplyTo(b,c)}function Ma(a,b){a.squareTo(b)}function Na(a){return this.exp(a,new Ja)}function Oa(a,b,c){var d=Math.min(this.t+a.t,b);for(c.s=0,c.t=d;d>0;)c[--d]=0;var e;for(e=c.t-this.t;e>d;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);e>d;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function Pa(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function Qa(a){this.r2=c(),this.q3=c(),b.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function Ra(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=c();return a.copyTo(b),this.reduce(b),b}function Sa(a){return a}function Ta(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function Ua(a,b){a.squareTo(b),this.reduce(b)}function Va(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function Wa(a,b){var d,e,f=a.bitLength(),g=k(1);if(0>=f)return g;d=18>f?1:48>f?3:144>f?4:768>f?5:6,e=8>f?new D(b):b.isEven()?new Qa(b):new K(b);var h=new Array,i=3,j=d-1,l=(1<<d)-1;if(h[1]=e.convert(this),d>1){var m=c();for(e.sqrTo(h[1],m);l>=i;)h[i]=c(),e.mulTo(m,h[i-2],h[i]),i+=2}var n,o,p=a.t-1,q=!0,s=c();for(f=r(a[p])-1;p>=0;){for(f>=j?n=a[p]>>f-j&l:(n=(a[p]&(1<<f+1)-1)<<j-f,p>0&&(n|=a[p-1]>>this.DB+f-j)),i=d;0==(1&n);)n>>=1,--i;if((f-=i)<0&&(f+=this.DB,--p),q)h[n].copyTo(g),q=!1;else{for(;i>1;)e.sqrTo(g,s),e.sqrTo(s,g),i-=2;i>0?e.sqrTo(g,s):(o=g,g=s,s=o),e.mulTo(s,h[n],g)}for(;p>=0&&0==(a[p]&1<<f);)e.sqrTo(g,s),o=g,g=s,s=o,--f<0&&(f=this.DB-1,--p)}return e.revert(g)}function Xa(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(0>f)return b;for(f>e&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function Ya(a){if(0>=a)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function Za(a){var c=a.isEven();if(this.isEven()&&c||0==a.signum())return b.ZERO;for(var d=a.clone(),e=this.clone(),f=k(1),g=k(0),h=k(0),i=k(1);0!=d.signum();){
for(;d.isEven();)d.rShiftTo(1,d),c?(f.isEven()&&g.isEven()||(f.addTo(this,f),g.subTo(a,g)),f.rShiftTo(1,f)):g.isEven()||g.subTo(a,g),g.rShiftTo(1,g);for(;e.isEven();)e.rShiftTo(1,e),c?(h.isEven()&&i.isEven()||(h.addTo(this,h),i.subTo(a,i)),h.rShiftTo(1,h)):i.isEven()||i.subTo(a,i),i.rShiftTo(1,i);d.compareTo(e)>=0?(d.subTo(e,d),c&&f.subTo(h,f),g.subTo(i,g)):(e.subTo(d,e),c&&h.subTo(f,h),i.subTo(g,i))}return 0!=e.compareTo(b.ONE)?b.ZERO:i.compareTo(a)>=0?i.subtract(a):i.signum()<0?(i.addTo(a,i),i.signum()<0?i.add(a):i):i}function $a(a){var b,c=this.abs();if(1==c.t&&c[0]<=Db[Db.length-1]){for(b=0;b<Db.length;++b)if(c[0]==Db[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<Db.length;){for(var d=Db[b],e=b+1;e<Db.length&&Eb>d;)d*=Db[e++];for(d=c.modInt(d);e>b;)if(d%Db[b++]==0)return!1}return c.millerRabin(a)}function _a(a){var d=this.subtract(b.ONE),e=d.getLowestSetBit();if(0>=e)return!1;var f=d.shiftRight(e);a=a+1>>1,a>Db.length&&(a=Db.length);for(var g=c(),h=0;a>h;++h){g.fromInt(Db[Math.floor(Math.random()*Db.length)]);var i=g.modPow(f,this);if(0!=i.compareTo(b.ONE)&&0!=i.compareTo(d)){for(var j=1;j++<e&&0!=i.compareTo(d);)if(i=i.modPowInt(2,this),0==i.compareTo(b.ONE))return!1;if(0!=i.compareTo(d))return!1}}return!0}function ab(){this.i=0,this.j=0,this.S=new Array}function bb(a){var b,c,d;for(b=0;256>b;++b)this.S[b]=b;for(c=0,b=0;256>b;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.i=0,this.j=0}function cb(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]}function db(){return new ab}function eb(){if(null==Fb){for(Fb=db();Ib>Hb;){var a=Math.floor(65536*Math.random());Gb[Hb++]=255&a}for(Fb.init(Gb),Hb=0;Hb<Gb.length;++Hb)Gb[Hb]=0;Hb=0}return Fb.next()}function fb(a){var b;for(b=0;b<a.length;++b)a[b]=eb()}function gb(){}function hb(a,c){return new b(a,c)}function ib(a,c){if(c<a.length+11)return console.error("Message too long for RSA"),null;for(var d=new Array,e=a.length-1;e>=0&&c>0;){var f=a.charCodeAt(e--);128>f?d[--c]=f:f>127&&2048>f?(d[--c]=63&f|128,d[--c]=f>>6|192):(d[--c]=63&f|128,d[--c]=f>>6&63|128,d[--c]=f>>12|224)}d[--c]=0;for(var g=new gb,h=new Array;c>2;){for(h[0]=0;0==h[0];)g.nextBytes(h);d[--c]=h[0]}return d[--c]=2,d[--c]=0,new b(d)}function jb(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function kb(a,b){null!=a&&null!=b&&a.length>0&&b.length>0?(this.n=hb(a,16),this.e=parseInt(b,16)):console.error("Invalid RSA public key")}function lb(a){return a.modPowInt(this.e,this.n)}function mb(a){var b=ib(a,this.n.bitLength()+7>>3);if(null==b)return null;var c=this.doPublic(b);if(null==c)return null;var d=c.toString(16);return 0==(1&d.length)?d:"0"+d}function nb(a,b){for(var c=a.toByteArray(),d=0;d<c.length&&0==c[d];)++d;if(c.length-d!=b-1||2!=c[d])return null;for(++d;0!=c[d];)if(++d>=c.length)return null;for(var e="";++d<c.length;){var f=255&c[d];128>f?e+=String.fromCharCode(f):f>191&&224>f?(e+=String.fromCharCode((31&f)<<6|63&c[d+1]),++d):(e+=String.fromCharCode((15&f)<<12|(63&c[d+1])<<6|63&c[d+2]),d+=2)}return e}function ob(a,b,c){null!=a&&null!=b&&a.length>0&&b.length>0?(this.n=hb(a,16),this.e=parseInt(b,16),this.d=hb(c,16)):console.error("Invalid RSA private key")}function pb(a,b,c,d,e,f,g,h){null!=a&&null!=b&&a.length>0&&b.length>0?(this.n=hb(a,16),this.e=parseInt(b,16),this.d=hb(c,16),this.p=hb(d,16),this.q=hb(e,16),this.dmp1=hb(f,16),this.dmq1=hb(g,16),this.coeff=hb(h,16)):console.error("Invalid RSA private key")}function qb(a,c){var d=new gb,e=a>>1;this.e=parseInt(c,16);for(var f=new b(c,16);;){for(;this.p=new b(a-e,1,d),0!=this.p.subtract(b.ONE).gcd(f).compareTo(b.ONE)||!this.p.isProbablePrime(10););for(;this.q=new b(e,1,d),0!=this.q.subtract(b.ONE).gcd(f).compareTo(b.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var g=this.p;this.p=this.q,this.q=g}var h=this.p.subtract(b.ONE),i=this.q.subtract(b.ONE),j=h.multiply(i);if(0==j.gcd(f).compareTo(b.ONE)){this.n=this.p.multiply(this.q),this.d=f.modInverse(j),this.dmp1=this.d.mod(h),this.dmq1=this.d.mod(i),this.coeff=this.q.modInverse(this.p);break}}}function rb(a){if(null==this.p||null==this.q)return a.modPow(this.d,this.n);for(var b=a.mod(this.p).modPow(this.dmp1,this.p),c=a.mod(this.q).modPow(this.dmq1,this.q);b.compareTo(c)<0;)b=b.add(this.p);return b.subtract(c).multiply(this.coeff).mod(this.p).multiply(this.q).add(c)}function sb(a){var b=hb(a,16),c=this.doPrivate(b);return null==c?null:nb(c,this.n.bitLength()+7>>3)}function tb(a){var b,c,d="";for(b=0;b+3<=a.length;b+=3)c=parseInt(a.substring(b,b+3),16),d+=Mb.charAt(c>>6)+Mb.charAt(63&c);for(b+1==a.length?(c=parseInt(a.substring(b,b+1),16),d+=Mb.charAt(c<<2)):b+2==a.length&&(c=parseInt(a.substring(b,b+2),16),d+=Mb.charAt(c>>2)+Mb.charAt((3&c)<<4));(3&d.length)>0;)d+=Nb;return d}function ub(a){var b,c,d="",e=0;for(b=0;b<a.length&&a.charAt(b)!=Nb;++b)v=Mb.indexOf(a.charAt(b)),v<0||(0==e?(d+=g(v>>2),c=3&v,e=1):1==e?(d+=g(c<<2|v>>4),c=15&v,e=2):2==e?(d+=g(c),d+=g(v>>2),c=3&v,e=3):(d+=g(c<<2|v>>4),d+=g(15&v),e=0));return 1==e&&(d+=g(c<<2)),d}var vb,wb=0xdeadbeefcafe,xb=15715070==(16777215&wb);xb&&"Microsoft Internet Explorer"==navigator.appName?(b.prototype.am=e,vb=30):xb&&"Netscape"!=navigator.appName?(b.prototype.am=d,vb=26):(b.prototype.am=f,vb=28),b.prototype.DB=vb,b.prototype.DM=(1<<vb)-1,b.prototype.DV=1<<vb;var yb=52;b.prototype.FV=Math.pow(2,yb),b.prototype.F1=yb-vb,b.prototype.F2=2*vb-yb;var zb,Ab,Bb="0123456789abcdefghijklmnopqrstuvwxyz",Cb=new Array;for(zb="0".charCodeAt(0),Ab=0;9>=Ab;++Ab)Cb[zb++]=Ab;for(zb="a".charCodeAt(0),Ab=10;36>Ab;++Ab)Cb[zb++]=Ab;for(zb="A".charCodeAt(0),Ab=10;36>Ab;++Ab)Cb[zb++]=Ab;D.prototype.convert=E,D.prototype.revert=F,D.prototype.reduce=G,D.prototype.mulTo=H,D.prototype.sqrTo=I,K.prototype.convert=L,K.prototype.revert=M,K.prototype.reduce=N,K.prototype.mulTo=P,K.prototype.sqrTo=O,b.prototype.copyTo=i,b.prototype.fromInt=j,b.prototype.fromString=l,b.prototype.clamp=m,b.prototype.dlShiftTo=t,b.prototype.drShiftTo=u,b.prototype.lShiftTo=w,b.prototype.rShiftTo=x,b.prototype.subTo=y,b.prototype.multiplyTo=z,b.prototype.squareTo=A,b.prototype.divRemTo=B,b.prototype.invDigit=J,b.prototype.isEven=Q,b.prototype.exp=R,b.prototype.toString=n,b.prototype.negate=o,b.prototype.abs=p,b.prototype.compareTo=q,b.prototype.bitLength=s,b.prototype.mod=C,b.prototype.modPowInt=S,b.ZERO=k(0),b.ONE=k(1),Ja.prototype.convert=Ka,Ja.prototype.revert=Ka,Ja.prototype.mulTo=La,Ja.prototype.sqrTo=Ma,Qa.prototype.convert=Ra,Qa.prototype.revert=Sa,Qa.prototype.reduce=Ta,Qa.prototype.mulTo=Va,Qa.prototype.sqrTo=Ua;var Db=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Eb=(1<<26)/Db[Db.length-1];b.prototype.chunkSize=X,b.prototype.toRadix=Z,b.prototype.fromRadix=$,b.prototype.fromNumber=_,b.prototype.bitwiseTo=ea,b.prototype.changeBit=va,b.prototype.addTo=za,b.prototype.dMultiply=Ha,b.prototype.dAddOffset=Ia,b.prototype.multiplyLowerTo=Oa,b.prototype.multiplyUpperTo=Pa,b.prototype.modInt=Ya,b.prototype.millerRabin=_a,b.prototype.clone=T,b.prototype.intValue=U,b.prototype.byteValue=V,b.prototype.shortValue=W,b.prototype.signum=Y,b.prototype.toByteArray=aa,b.prototype.equals=ba,b.prototype.min=ca,b.prototype.max=da,b.prototype.and=ga,b.prototype.or=ia,b.prototype.xor=ka,b.prototype.andNot=ma,b.prototype.not=na,b.prototype.shiftLeft=oa,b.prototype.shiftRight=pa,b.prototype.getLowestSetBit=ra,b.prototype.bitCount=ta,b.prototype.testBit=ua,b.prototype.setBit=wa,b.prototype.clearBit=xa,b.prototype.flipBit=ya,b.prototype.add=Aa,b.prototype.subtract=Ba,b.prototype.multiply=Ca,b.prototype.divide=Ea,b.prototype.remainder=Fa,b.prototype.divideAndRemainder=Ga,b.prototype.modPow=Wa,b.prototype.modInverse=Za,b.prototype.pow=Na,b.prototype.gcd=Xa,b.prototype.isProbablePrime=$a,b.prototype.square=Da,ab.prototype.init=bb,ab.prototype.next=cb;var Fb,Gb,Hb,Ib=256;if(null==Gb){Gb=new Array,Hb=0;var Jb;if(window.crypto&&window.crypto.getRandomValues){var Kb=new Uint32Array(256);for(window.crypto.getRandomValues(Kb),Jb=0;Jb<Kb.length;++Jb)Gb[Hb++]=255&Kb[Jb]}var Lb=function(a){if(this.count=this.count||0,this.count>=256||Hb>=Ib)return void(window.removeEventListener?window.removeEventListener("mousemove",Lb):window.detachEvent&&window.detachEvent("onmousemove",Lb));this.count+=1;var b=a.x+a.y;Gb[Hb++]=255&b};window.addEventListener?window.addEventListener("mousemove",Lb):window.attachEvent&&window.attachEvent("onmousemove",Lb)}gb.prototype.nextBytes=fb,jb.prototype.doPublic=lb,jb.prototype.setPublic=kb,jb.prototype.encrypt=mb,jb.prototype.doPrivate=rb,jb.prototype.setPrivate=ob,jb.prototype.setPrivateEx=pb,jb.prototype.generate=qb,jb.prototype.decrypt=sb,function(){var a=function(a,d,e){var f=new gb,g=a>>1;this.e=parseInt(d,16);var h=new b(d,16),i=this,j=function(){var d=function(){if(i.p.compareTo(i.q)<=0){var a=i.p;i.p=i.q,i.q=a}var c=i.p.subtract(b.ONE),d=i.q.subtract(b.ONE),f=c.multiply(d);0==f.gcd(h).compareTo(b.ONE)?(i.n=i.p.multiply(i.q),i.d=h.modInverse(f),i.dmp1=i.d.mod(c),i.dmq1=i.d.mod(d),i.coeff=i.q.modInverse(i.p),setTimeout(function(){e()},0)):setTimeout(j,0)},k=function(){i.q=c(),i.q.fromNumberAsync(g,1,f,function(){i.q.subtract(b.ONE).gcda(h,function(a){0==a.compareTo(b.ONE)&&i.q.isProbablePrime(10)?setTimeout(d,0):setTimeout(k,0)})})},l=function(){i.p=c(),i.p.fromNumberAsync(a-g,1,f,function(){i.p.subtract(b.ONE).gcda(h,function(a){0==a.compareTo(b.ONE)&&i.p.isProbablePrime(10)?setTimeout(k,0):setTimeout(l,0)})})};setTimeout(l,0)};setTimeout(j,0)};jb.prototype.generateAsync=a;var d=function(a,b){var c=this.s<0?this.negate():this.clone(),d=a.s<0?a.negate():a.clone();if(c.compareTo(d)<0){var e=c;c=d,d=e}var f=c.getLowestSetBit(),g=d.getLowestSetBit();if(0>g)return void b(c);g>f&&(g=f),g>0&&(c.rShiftTo(g,c),d.rShiftTo(g,d));var h=function(){(f=c.getLowestSetBit())>0&&c.rShiftTo(f,c),(f=d.getLowestSetBit())>0&&d.rShiftTo(f,d),c.compareTo(d)>=0?(c.subTo(d,c),c.rShiftTo(1,c)):(d.subTo(c,d),d.rShiftTo(1,d)),c.signum()>0?setTimeout(h,0):(g>0&&d.lShiftTo(g,d),setTimeout(function(){b(d)},0))};setTimeout(h,10)};b.prototype.gcda=d;var e=function(a,c,d,e){if("number"==typeof c)if(2>a)this.fromInt(1);else{this.fromNumber(a,d),this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),ha,this),this.isEven()&&this.dAddOffset(1,0);var f=this,g=function(){f.dAddOffset(2,0),f.bitLength()>a&&f.subTo(b.ONE.shiftLeft(a-1),f),f.isProbablePrime(c)?setTimeout(function(){e()},0):setTimeout(g,0)};setTimeout(g,0)}else{var h=new Array,i=7&a;h.length=(a>>3)+1,c.nextBytes(h),i>0?h[0]&=(1<<i)-1:h[0]=0,this.fromString(h,256)}};b.prototype.fromNumberAsync=e}();var Mb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nb="=",Ob=Ob||{};Ob.env=Ob.env||{};var Pb=Ob,Qb=Object.prototype,Rb="[object Function]",Sb=["toString","valueOf"];Ob.env.parseUA=function(a){var b,c=function(a){var b=0;return parseFloat(a.replace(/\./g,function(){return 1==b++?"":"."}))},d=navigator,e={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:d&&d.cajaVersion,secure:!1,os:null},f=a||navigator&&navigator.userAgent,g=window&&window.location,h=g&&g.href;return e.secure=h&&0===h.toLowerCase().indexOf("https"),f&&(/windows|win32/i.test(f)?e.os="windows":/macintosh/i.test(f)?e.os="macintosh":/rhino/i.test(f)&&(e.os="rhino"),/KHTML/.test(f)&&(e.webkit=1),b=f.match(/AppleWebKit\/([^\s]*)/),b&&b[1]&&(e.webkit=c(b[1]),/ Mobile\//.test(f)?(e.mobile="Apple",b=f.match(/OS ([^\s]*)/),b&&b[1]&&(b=c(b[1].replace("_","."))),e.ios=b,e.ipad=e.ipod=e.iphone=0,b=f.match(/iPad|iPod|iPhone/),b&&b[0]&&(e[b[0].toLowerCase()]=e.ios)):(b=f.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),b&&(e.mobile=b[0]),/webOS/.test(f)&&(e.mobile="WebOS",b=f.match(/webOS\/([^\s]*);/),b&&b[1]&&(e.webos=c(b[1]))),/ Android/.test(f)&&(e.mobile="Android",b=f.match(/Android ([^\s]*);/),b&&b[1]&&(e.android=c(b[1])))),b=f.match(/Chrome\/([^\s]*)/),b&&b[1]?e.chrome=c(b[1]):(b=f.match(/AdobeAIR\/([^\s]*)/),b&&(e.air=b[0]))),e.webkit||(b=f.match(/Opera[\s\/]([^\s]*)/),b&&b[1]?(e.opera=c(b[1]),b=f.match(/Version\/([^\s]*)/),b&&b[1]&&(e.opera=c(b[1])),b=f.match(/Opera Mini[^;]*/),b&&(e.mobile=b[0])):(b=f.match(/MSIE\s([^;]*)/),b&&b[1]?e.ie=c(b[1]):(b=f.match(/Gecko\/([^\s]*)/),b&&(e.gecko=1,b=f.match(/rv:([^\s\)]*)/),b&&b[1]&&(e.gecko=c(b[1]))))))),e},Ob.env.ua=Ob.env.parseUA(),Ob.isFunction=function(a){return"function"==typeof a||Qb.toString.apply(a)===Rb},Ob._IEEnumFix=Ob.env.ua.ie?function(a,b){var c,d,e;for(c=0;c<Sb.length;c+=1)d=Sb[c],e=b[d],Pb.isFunction(e)&&e!=Qb[d]&&(a[d]=e)}:function(){},Ob.extend=function(a,b,c){if(!b||!a)throw new Error("extend failed, please check that all dependencies are included.");var d,e=function(){};if(e.prototype=b.prototype,a.prototype=new e,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Qb.constructor&&(b.prototype.constructor=b),c){for(d in c)Pb.hasOwnProperty(c,d)&&(a.prototype[d]=c[d]);Pb._IEEnumFix(a.prototype,c)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var b=a.toString(16);return b.length%2==1&&(b="0"+b),b},this.bigIntToMinTwosComplementsHex=function(a){var c=a.toString(16);if("-"!=c.substr(0,1))c.length%2==1?c="0"+c:c.match(/^[0-7]/)||(c="00"+c);else{var d=c.substr(1),e=d.length;e%2==1?e+=1:c.match(/^[0-7]/)||(e+=2);for(var f="",g=0;e>g;g++)f+="f";var h=new b(f,16),i=h.xor(a).add(b.ONE);c=i.toString(16).replace(/^-/,"")}return c},this.getPEMStringFromHex=function(a,b){var c=CryptoJS.enc.Hex.parse(a),d=CryptoJS.enc.Base64.stringify(c),e=d.replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,""),"-----BEGIN "+b+"-----\r\n"+e+"\r\n-----END "+b+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){var a="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+a.length+",v="+this.hV;var b=this.hV.length/2,c=b.toString(16);if(c.length%2==1&&(c="0"+c),128>b)return c;var d=c.length/2;if(d>15)throw"ASN.1 length too long to represent by 8x: n = "+b.toString(16);var e=128+d;return e.toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(a){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.s=a,this.hV=stohex(this.s)},this.setStringHex=function(a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof a&&("undefined"!=typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex&&this.setStringHex(a.hex))},Ob.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(a){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(a){utc=a.getTime()+6e4*a.getTimezoneOffset();var b=new Date(utc);return b},this.formatDate=function(a,b){var c=this.zeroPadding,d=this.localDateToUTC(a),e=String(d.getFullYear());"utc"==b&&(e=e.substr(2,2));var f=c(String(d.getMonth()+1),2),g=c(String(d.getDate()),2),h=c(String(d.getHours()),2),i=c(String(d.getMinutes()),2),j=c(String(d.getSeconds()),2);return e+f+g+h+i+j+"Z"},this.zeroPadding=function(a,b){return a.length>=b?a:new Array(b-a.length+1).join("0")+a},this.getString=function(){return this.s},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.s=a,this.hV=stohex(this.s)},this.setByDateValue=function(a,b,c,d,e,f){var g=new Date(Date.UTC(a,b-1,c,d,e,f,0));this.setByDate(g)},this.getFreshValueHex=function(){return this.hV}},Ob.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(a){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array=a},this.appendASN1Object=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array.push(a)},this.asn1Array=new Array,"undefined"!=typeof a&&"undefined"!=typeof a.array&&(this.asn1Array=a.array)},Ob.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},Ob.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(a){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(a){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(a)},this.setByInteger=function(a){var c=new b(String(a),10);this.setByBigInteger(c)},this.setValueHex=function(a){this.hV=a},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof a&&("undefined"!=typeof a.bigint?this.setByBigInteger(a.bigint):"undefined"!=typeof a["int"]?this.setByInteger(a["int"]):"undefined"!=typeof a.hex&&this.setValueHex(a.hex))},Ob.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(a){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(a){this.hTLV=null,this.isModified=!0,this.hV=a},this.setUnusedBitsAndHexValue=function(a,b){if(0>a||a>7)throw"unused bits shall be from 0 to 7: u = "+a;var c="0"+a;this.hTLV=null,this.isModified=!0,this.hV=c+b},this.setByBinaryString=function(a){a=a.replace(/0+$/,"");var b=8-a.length%8;8==b&&(b=0);for(var c=0;b>=c;c++)a+="0";for(var d="",c=0;c<a.length-1;c+=8){var e=a.substr(c,8),f=parseInt(e,2).toString(16);1==f.length&&(f="0"+f),d+=f}this.hTLV=null,this.isModified=!0,this.hV="0"+b+d},this.setByBooleanArray=function(a){for(var b="",c=0;c<a.length;c++)b+=1==a[c]?"1":"0";this.setByBinaryString(b)},this.newFalseArray=function(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=!1;return b},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof a&&("undefined"!=typeof a.hex?this.setHexValueIncludingUnusedBits(a.hex):"undefined"!=typeof a.bin?this.setByBinaryString(a.bin):"undefined"!=typeof a.array&&this.setByBooleanArray(a.array))},Ob.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(a){KJUR.asn1.DEROctetString.superclass.constructor.call(this,a),this.hT="04"},Ob.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Ob.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(a){var c=function(a){var b=a.toString(16);return 1==b.length&&(b="0"+b),b},d=function(a){var d="",e=new b(a,10),f=e.toString(2),g=7-f.length%7;7==g&&(g=0);for(var h="",i=0;g>i;i++)h+="0";f=h+f;for(var i=0;i<f.length-1;i+=7){var j=f.substr(i,7);i!=f.length-7&&(j="1"+j),d+=c(parseInt(j,2))}return d};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.setValueOidString=function(a){if(!a.match(/^[0-9.]+$/))throw"malformed oid string: "+a;var b="",e=a.split("."),f=40*parseInt(e[0])+parseInt(e[1]);b+=c(f),e.splice(0,2);for(var g=0;g<e.length;g++)b+=d(e[g]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.setValueName=function(a){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[a])throw"DERObjectIdentifier oidName undefined: "+a;var b=KJUR.asn1.x509.OID.name2oidList[a];this.setValueOidString(b)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof a&&("undefined"!=typeof a.oid?this.setValueOidString(a.oid):"undefined"!=typeof a.hex?this.setValueHex(a.hex):"undefined"!=typeof a.name&&this.setValueName(a.name))},Ob.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(a){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,a),this.hT="0c"},Ob.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(a){KJUR.asn1.DERNumericString.superclass.constructor.call(this,a),this.hT="12"},Ob.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(a){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,a),this.hT="13"},Ob.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(a){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,a),this.hT="14"},Ob.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(a){KJUR.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="16"},Ob.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(a){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,a),this.hT="17",this.setByDate=function(a){this.hTLV=null,this.isModified=!0,this.date=a,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof a&&("undefined"!=typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex?this.setStringHex(a.hex):"undefined"!=typeof a.date&&this.setByDate(a.date))},Ob.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(a){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,a),this.hT="18",this.setByDate=function(a){this.hTLV=null,this.isModified=!0,this.date=a,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof a&&("undefined"!=typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex?this.setStringHex(a.hex):"undefined"!=typeof a.date&&this.setByDate(a.date))},Ob.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(a){KJUR.asn1.DERSequence.superclass.constructor.call(this,a),this.hT="30",this.getFreshValueHex=function(){for(var a="",b=0;b<this.asn1Array.length;b++){var c=this.asn1Array[b];a+=c.getEncodedHex()}return this.hV=a,this.hV}},Ob.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(a){KJUR.asn1.DERSet.superclass.constructor.call(this,a),this.hT="31",this.getFreshValueHex=function(){for(var a=new Array,b=0;b<this.asn1Array.length;b++){var c=this.asn1Array[b];a.push(c.getEncodedHex())}return a.sort(),this.hV=a.join(""),this.hV}},Ob.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(a){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(a,b,c){this.hT=b,this.isExplicit=a,this.asn1Object=c,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=c.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,b),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof a&&("undefined"!=typeof a.tag&&(this.hT=a.tag),"undefined"!=typeof a.explicit&&(this.isExplicit=a.explicit),"undefined"!=typeof a.obj&&(this.asn1Object=a.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Ob.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(a){"use strict";var b,c={};c.decode=function(c){var d;if(b===a){var e="0123456789ABCDEF",f=" \f\n\r	 \u2028\u2029";for(b=[],d=0;16>d;++d)b[e.charAt(d)]=d;for(e=e.toLowerCase(),d=10;16>d;++d)b[e.charAt(d)]=d;for(d=0;d<f.length;++d)b[f.charAt(d)]=-1}var g=[],h=0,i=0;for(d=0;d<c.length;++d){var j=c.charAt(d);if("="==j)break;if(j=b[j],-1!=j){if(j===a)throw"Illegal character at offset "+d;h|=j,++i>=2?(g[g.length]=h,h=0,i=0):h<<=4}}if(i)throw"Hex encoding incomplete: 4 bits missing";return g},window.Hex=c}(),function(a){"use strict";var b,c={};c.decode=function(c){var d;if(b===a){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="= \f\n\r	 \u2028\u2029";for(b=[],d=0;64>d;++d)b[e.charAt(d)]=d;for(d=0;d<f.length;++d)b[f.charAt(d)]=-1}var g=[],h=0,i=0;for(d=0;d<c.length;++d){var j=c.charAt(d);if("="==j)break;if(j=b[j],-1!=j){if(j===a)throw"Illegal character at offset "+d;h|=j,++i>=4?(g[g.length]=h>>16,g[g.length]=h>>8&255,g[g.length]=255&h,h=0,i=0):h<<=6}}switch(i){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:g[g.length]=h>>10;break;case 3:g[g.length]=h>>16,g[g.length]=h>>8&255}return g},c.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,c.unarmor=function(a){var b=c.re.exec(a);if(b)if(b[1])a=b[1];else{if(!b[2])throw"RegExp out of sync";a=b[2]}return c.decode(a)},window.Base64=c}(),function(a){"use strict";function b(a,c){a instanceof b?(this.enc=a.enc,this.pos=a.pos):(this.enc=a,this.pos=c)}function c(a,b,c,d,e){this.stream=a,this.header=b,this.length=c,this.tag=d,this.sub=e}var d=100,e="…",f={tag:function(a,b){var c=document.createElement(a);return c.className=b,c},text:function(a){return document.createTextNode(a)}};b.prototype.get=function(b){if(b===a&&(b=this.pos++),b>=this.enc.length)throw"Requesting byte offset "+b+" on a stream of length "+this.enc.length;return this.enc[b]},b.prototype.hexDigits="0123456789ABCDEF",b.prototype.hexByte=function(a){return this.hexDigits.charAt(a>>4&15)+this.hexDigits.charAt(15&a)},b.prototype.hexDump=function(a,b,c){for(var d="",e=a;b>e;++e)if(d+=this.hexByte(this.get(e)),c!==!0)switch(15&e){case 7:d+="  ";break;case 15:d+="\n";break;default:d+=" "}return d},b.prototype.parseStringISO=function(a,b){for(var c="",d=a;b>d;++d)c+=String.fromCharCode(this.get(d));return c},b.prototype.parseStringUTF=function(a,b){for(var c="",d=a;b>d;){var e=this.get(d++);c+=128>e?String.fromCharCode(e):e>191&&224>e?String.fromCharCode((31&e)<<6|63&this.get(d++)):String.fromCharCode((15&e)<<12|(63&this.get(d++))<<6|63&this.get(d++))}return c},b.prototype.parseStringBMP=function(a,b){for(var c="",d=a;b>d;d+=2){var e=this.get(d),f=this.get(d+1);c+=String.fromCharCode((e<<8)+f)}return c},b.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,b.prototype.parseTime=function(a,b){var c=this.parseStringISO(a,b),d=this.reTime.exec(c);return d?(c=d[1]+"-"+d[2]+"-"+d[3]+" "+d[4],d[5]&&(c+=":"+d[5],d[6]&&(c+=":"+d[6],d[7]&&(c+="."+d[7]))),d[8]&&(c+=" UTC","Z"!=d[8]&&(c+=d[8],d[9]&&(c+=":"+d[9]))),c):"Unrecognized time: "+c},b.prototype.parseInteger=function(a,b){var c=b-a;if(c>4){c<<=3;var d=this.get(a);if(0===d)c-=8;else for(;128>d;)d<<=1,--c;return"("+c+" bit)"}for(var e=0,f=a;b>f;++f)e=e<<8|this.get(f);return e},b.prototype.parseBitString=function(a,b){var c=this.get(a),d=(b-a-1<<3)-c,e="("+d+" bit)";if(20>=d){var f=c;e+=" ";for(var g=b-1;g>a;--g){for(var h=this.get(g),i=f;8>i;++i)e+=h>>i&1?"1":"0";f=0}}return e},b.prototype.parseOctetString=function(a,b){var c=b-a,f="("+c+" byte) ";c>d&&(b=a+d);for(var g=a;b>g;++g)f+=this.hexByte(this.get(g));return c>d&&(f+=e),f},b.prototype.parseOID=function(a,b){for(var c="",d=0,e=0,f=a;b>f;++f){var g=this.get(f);if(d=d<<7|127&g,e+=7,!(128&g)){if(""===c){var h=80>d?40>d?0:1:2;c=h+"."+(d-40*h)}else c+="."+(e>=31?"bigint":d);d=e=0}}return c},c.prototype.typeName=function(){if(this.tag===a)return"unknown";var b=this.tag>>6,c=(this.tag>>5&1,31&this.tag);switch(b){case 0:switch(c){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+c.toString(16)}case 1:return"Application_"+c.toString(16);case 2:return"["+c+"]";case 3:return"Private_"+c.toString(16)}},c.prototype.reSeemsASCII=/^[ -~]+$/,c.prototype.content=function(){if(this.tag===a)return null;var b=this.tag>>6,c=31&this.tag,f=this.posContent(),g=Math.abs(this.length);if(0!==b){if(null!==this.sub)return"("+this.sub.length+" elem)";var h=this.stream.parseStringISO(f,f+Math.min(g,d));return this.reSeemsASCII.test(h)?h.substring(0,2*d)+(h.length>2*d?e:""):this.stream.parseOctetString(f,f+g)}switch(c){case 1:return 0===this.stream.get(f)?"false":"true";case 2:return this.stream.parseInteger(f,f+g);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(f,f+g);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(f,f+g);case 6:return this.stream.parseOID(f,f+g);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(f,f+g);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(f,f+g);case 30:return this.stream.parseStringBMP(f,f+g);case 23:case 24:return this.stream.parseTime(f,f+g)}return null},c.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},c.prototype.print=function(b){if(b===a&&(b=""),document.writeln(b+this),null!==this.sub){b+="  ";for(var c=0,d=this.sub.length;d>c;++c)this.sub[c].print(b)}},c.prototype.toPrettyString=function(b){b===a&&(b="");var c=b+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(c+="+"),c+=this.length,32&this.tag?c+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(c+=" (encapsulates)"),c+="\n",null!==this.sub){b+="  ";for(var d=0,e=this.sub.length;e>d;++d)c+=this.sub[d].toPrettyString(b)}return c},c.prototype.toDOM=function(){var a=f.tag("div","node");a.asn1=this;var b=f.tag("div","head"),c=this.typeName().replace(/_/g," ");b.innerHTML=c;var d=this.content();if(null!==d){d=String(d).replace(/</g,"&lt;");var e=f.tag("span","preview");e.appendChild(f.text(d)),b.appendChild(e)}a.appendChild(b),this.node=a,this.head=b;var g=f.tag("div","value");if(c="Offset: "+this.stream.pos+"<br/>",c+="Length: "+this.header+"+",c+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?c+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(c+="<br/>(encapsulates)"),null!==d&&(c+="<br/>Value:<br/><b>"+d+"</b>","object"==typeof oids&&6==this.tag)){var h=oids[d];h&&(h.d&&(c+="<br/>"+h.d),h.c&&(c+="<br/>"+h.c),h.w&&(c+="<br/>(warning!)"))}g.innerHTML=c,a.appendChild(g);var i=f.tag("div","sub");if(null!==this.sub)for(var j=0,k=this.sub.length;k>j;++j)i.appendChild(this.sub[j].toDOM());return a.appendChild(i),b.onclick=function(){a.className="node collapsed"==a.className?"node":"node collapsed"},a},c.prototype.posStart=function(){return this.stream.pos},c.prototype.posContent=function(){return this.stream.pos+this.header},c.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},c.prototype.fakeHover=function(a){
this.node.className+=" hover",a&&(this.head.className+=" hover")},c.prototype.fakeOut=function(a){var b=/ ?hover/;this.node.className=this.node.className.replace(b,""),a&&(this.head.className=this.head.className.replace(b,""))},c.prototype.toHexDOM_sub=function(a,b,c,d,e){if(!(d>=e)){var g=f.tag("span",b);g.appendChild(f.text(c.hexDump(d,e))),a.appendChild(g)}},c.prototype.toHexDOM=function(b){var c=f.tag("span","hex");if(b===a&&(b=c),this.head.hexNode=c,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},c.asn1=this,c.onmouseover=function(){var a=!b.selected;a&&(b.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(a)},c.onmouseout=function(){var a=b.selected==this.asn1;this.asn1.fakeOut(a),a&&(b.selected=null,this.className="hex")},this.toHexDOM_sub(c,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(c,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)c.appendChild(f.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var d=this.sub[0],e=this.sub[this.sub.length-1];this.toHexDOM_sub(c,"intro",this.stream,this.posContent(),d.posStart());for(var g=0,h=this.sub.length;h>g;++g)c.appendChild(this.sub[g].toHexDOM(b));this.toHexDOM_sub(c,"outro",this.stream,e.posEnd(),this.posEnd())}return c},c.prototype.toHexString=function(a){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},c.decodeLength=function(a){var b=a.get(),c=127&b;if(c==b)return c;if(c>3)throw"Length over 24 bits not supported at position "+(a.pos-1);if(0===c)return-1;b=0;for(var d=0;c>d;++d)b=b<<8|a.get();return b},c.hasContent=function(a,d,e){if(32&a)return!0;if(3>a||a>4)return!1;var f=new b(e);3==a&&f.get();var g=f.get();if(g>>6&1)return!1;try{var h=c.decodeLength(f);return f.pos-e.pos+h==d}catch(i){return!1}},c.decode=function(a){a instanceof b||(a=new b(a,0));var d=new b(a),e=a.get(),f=c.decodeLength(a),g=a.pos-d.pos,h=null;if(c.hasContent(e,f,a)){var i=a.pos;if(3==e&&a.get(),h=[],f>=0){for(var j=i+f;a.pos<j;)h[h.length]=c.decode(a);if(a.pos!=j)throw"Content size is not correct for container starting at offset "+i}else try{for(;;){var k=c.decode(a);if(0===k.tag)break;h[h.length]=k}f=i-a.pos}catch(l){throw"Exception while decoding undefined length content: "+l}}else a.pos+=f;return new c(d,g,f,e,h)},c.test=function(){for(var a=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],d=0,e=a.length;e>d;++d){var f=new b(a[d].value,0),g=c.decodeLength(f);g!=a[d].expected&&document.write("In test["+d+"] expected "+a[d].expected+" got "+g+"\n")}},window.ASN1=c}(),ASN1.prototype.getHexStringValue=function(){var a=this.toHexString(),b=2*this.header,c=2*this.length;return a.substr(b,c)},jb.prototype.parseKey=function(a){try{var b=0,c=0,d=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,e=d.test(a)?Hex.decode(a):Base64.unarmor(a),f=ASN1.decode(e);if(3===f.sub.length&&(f=f.sub[2].sub[0]),9===f.sub.length){b=f.sub[1].getHexStringValue(),this.n=hb(b,16),c=f.sub[2].getHexStringValue(),this.e=parseInt(c,16);var g=f.sub[3].getHexStringValue();this.d=hb(g,16);var h=f.sub[4].getHexStringValue();this.p=hb(h,16);var i=f.sub[5].getHexStringValue();this.q=hb(i,16);var j=f.sub[6].getHexStringValue();this.dmp1=hb(j,16);var k=f.sub[7].getHexStringValue();this.dmq1=hb(k,16);var l=f.sub[8].getHexStringValue();this.coeff=hb(l,16)}else{if(2!==f.sub.length)return!1;var m=f.sub[1],n=m.sub[0];b=n.sub[0].getHexStringValue(),this.n=hb(b,16),c=n.sub[1].getHexStringValue(),this.e=parseInt(c,16)}return!0}catch(o){return!1}},jb.prototype.getPrivateBaseKey=function(){var a={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},b=new KJUR.asn1.DERSequence(a);return b.getEncodedHex()},jb.prototype.getPrivateBaseKeyB64=function(){return tb(this.getPrivateBaseKey())},jb.prototype.getPublicBaseKey=function(){var a={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},b=new KJUR.asn1.DERSequence(a);a={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var c=new KJUR.asn1.DERSequence(a);a={hex:"00"+c.getEncodedHex()};var d=new KJUR.asn1.DERBitString(a);a={array:[b,d]};var e=new KJUR.asn1.DERSequence(a);return e.getEncodedHex()},jb.prototype.getPublicBaseKeyB64=function(){return tb(this.getPublicBaseKey())},jb.prototype.wordwrap=function(a,b){if(b=b||64,!a)return a;var c="(.{1,"+b+"})( +|$\n?)|(.{1,"+b+"})";return a.match(RegExp(c,"g")).join("\n")},jb.prototype.getPrivateKey=function(){var a="-----BEGIN RSA PRIVATE KEY-----\n";return a+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",a+="-----END RSA PRIVATE KEY-----"},jb.prototype.getPublicKey=function(){var a="-----BEGIN PUBLIC KEY-----\n";return a+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",a+="-----END PUBLIC KEY-----"},jb.prototype.hasPublicKeyProperty=function(a){return a=a||{},a.hasOwnProperty("n")&&a.hasOwnProperty("e")},jb.prototype.hasPrivateKeyProperty=function(a){return a=a||{},a.hasOwnProperty("n")&&a.hasOwnProperty("e")&&a.hasOwnProperty("d")&&a.hasOwnProperty("p")&&a.hasOwnProperty("q")&&a.hasOwnProperty("dmp1")&&a.hasOwnProperty("dmq1")&&a.hasOwnProperty("coeff")},jb.prototype.parsePropertiesFrom=function(a){this.n=a.n,this.e=a.e,a.hasOwnProperty("d")&&(this.d=a.d,this.p=a.p,this.q=a.q,this.dmp1=a.dmp1,this.dmq1=a.dmq1,this.coeff=a.coeff)};var Tb=function(a){jb.call(this),a&&("string"==typeof a?this.parseKey(a):(this.hasPrivateKeyProperty(a)||this.hasPublicKeyProperty(a))&&this.parsePropertiesFrom(a))};Tb.prototype=new jb,Tb.prototype.constructor=Tb;var Ub=function(a){a=a||{},this.default_key_size=parseInt(a.default_key_size)||1024,this.default_public_exponent=a.default_public_exponent||"010001",this.log=a.log||!1,this.key=null};Ub.prototype.setKey=function(a){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new Tb(a)},Ub.prototype.setPrivateKey=function(a){this.setKey(a)},Ub.prototype.setPublicKey=function(a){this.setKey(a)},Ub.prototype.decrypt=function(a){try{return this.getKey().decrypt(ub(a))}catch(b){return!1}},Ub.prototype.encrypt=function(a){try{return tb(this.getKey().encrypt(a))}catch(b){return!1}},Ub.prototype.getKey=function(a){if(!this.key){if(this.key=new Tb,a&&"[object Function]"==={}.toString.call(a))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,a);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},Ub.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},Ub.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},Ub.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},Ub.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},a.JSEncrypt=Ub}(JSEncryptExports);var JSEncrypt=JSEncryptExports.JSEncrypt;!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Chart=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){function d(a){if(a){var b=/^#([a-fA-F0-9]{3})$/,c=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/(\w+)/,g=[0,0,0],h=1,i=a.match(b);if(i){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i[j]+i[j],16)}else if(i=a.match(c)){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i.slice(2*j,2*j+2),16)}else if(i=a.match(d)){for(var j=0;j<g.length;j++)g[j]=parseInt(i[j+1]);h=parseFloat(i[4])}else if(i=a.match(e)){for(var j=0;j<g.length;j++)g[j]=Math.round(2.55*parseFloat(i[j+1]));h=parseFloat(i[4])}else if(i=a.match(f)){if("transparent"==i[1])return[0,0,0,0];if(g=u[i[1]],!g)return}for(var j=0;j<g.length;j++)g[j]=s(g[j],0,255);return h=h||0==h?s(h,0,1):1,g[3]=h,g}}function e(a){if(a){var b=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function f(a){if(a){var b=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function g(a){var b=d(a);return b&&b.slice(0,3)}function h(a){var b=e(a);return b&&b.slice(0,3)}function i(a){var b=d(a);return b?b[3]:(b=e(a))?b[3]:(b=f(a))?b[3]:void 0}function j(a){return"#"+t(a[0])+t(a[1])+t(a[2])}function k(a,b){return 1>b||a[3]&&a[3]<1?l(a,b):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function l(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"}function m(a,b){if(1>b||a[3]&&a[3]<1)return n(a,b);var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgb("+c+"%, "+d+"%, "+e+"%)"}function n(a,b){var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgba("+c+"%, "+d+"%, "+e+"%, "+(b||a[3]||1)+")"}function o(a,b){return 1>b||a[3]&&a[3]<1?p(a,b):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function p(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+b+")"}function q(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(void 0!==b&&1!==b?", "+b:"")+")"}function r(a){return v[a.slice(0,3)]}function s(a,b,c){return Math.min(Math.max(b,a),c)}function t(a){var b=a.toString(16).toUpperCase();return b.length<2?"0"+b:b}var u=a(6);b.exports={getRgba:d,getHsla:e,getRgb:g,getHsl:h,getHwb:f,getAlpha:i,hexString:j,rgbString:k,rgbaString:l,percentString:m,percentaString:n,hslString:o,hslaString:p,hwbString:q,keyword:r};var v={};for(var w in u)v[u[w]]=w},{6:6}],3:[function(a,b,c){var d=a(5),e=a(2),f=function(a){if(a instanceof f)return a;if(!(this instanceof f))return new f(a);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var b;if("string"==typeof a)if(b=e.getRgba(a))this.setValues("rgb",b);else if(b=e.getHsla(a))this.setValues("hsl",b);else{if(!(b=e.getHwb(a)))throw new Error('Unable to parse color from string "'+a+'"');this.setValues("hwb",b)}else if("object"==typeof a)if(b=a,void 0!==b.r||void 0!==b.red)this.setValues("rgb",b);else if(void 0!==b.l||void 0!==b.lightness)this.setValues("hsl",b);else if(void 0!==b.v||void 0!==b.value)this.setValues("hsv",b);else if(void 0!==b.w||void 0!==b.whiteness)this.setValues("hwb",b);else{if(void 0===b.c&&void 0===b.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(a));this.setValues("cmyk",b)}};f.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var a=this.values;return 1!==a.alpha?a.hwb.concat([a.alpha]):a.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values;return a.rgb.concat([a.alpha])},hslaArray:function(){var a=this.values;return a.hsl.concat([a.alpha])},alpha:function(a){return void 0===a?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return a&&(a%=360,a=0>a?360+a:a),this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return e.hexString(this.values.rgb)},rgbString:function(){return e.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return e.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return e.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return e.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return e.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return e.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return e.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var a=this.values.rgb;return a[0]<<16|a[1]<<8|a[2]},luminosity:function(){for(var a=this.values.rgb,b=[],c=0;c<a.length;c++){var d=a[c]/255;b[c]=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4)}return.2126*b[0]+.7152*b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)},level:function(a){var b=this.contrast(a);return b>=7.1?"AAA":b>=4.5?"AA":""},dark:function(){var a=this.values.rgb,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b},light:function(){return!this.dark()},negate:function(){for(var a=[],b=0;3>b;b++)a[b]=255-this.values.rgb[b];return this.setValues("rgb",a),this},lighten:function(a){var b=this.values.hsl;return b[2]+=b[2]*a,this.setValues("hsl",b),this},darken:function(a){var b=this.values.hsl;return b[2]-=b[2]*a,this.setValues("hsl",b),this},saturate:function(a){var b=this.values.hsl;return b[1]+=b[1]*a,this.setValues("hsl",b),this},desaturate:function(a){var b=this.values.hsl;return b[1]-=b[1]*a,this.setValues("hsl",b),this},whiten:function(a){var b=this.values.hwb;return b[1]+=b[1]*a,this.setValues("hwb",b),this},blacken:function(a){var b=this.values.hwb;return b[2]+=b[2]*a,this.setValues("hwb",b),this},greyscale:function(){var a=this.values.rgb,b=.3*a[0]+.59*a[1]+.11*a[2];return this.setValues("rgb",[b,b,b]),this},clearer:function(a){var b=this.values.alpha;return this.setValues("alpha",b-b*a),this},opaquer:function(a){var b=this.values.alpha;return this.setValues("alpha",b+b*a),this},rotate:function(a){var b=this.values.hsl,c=(b[0]+a)%360;return b[0]=0>c?360+c:c,this.setValues("hsl",b),this},mix:function(a,b){var c=this,d=a,e=void 0===b?.5:b,f=2*e-1,g=c.alpha()-d.alpha(),h=((f*g===-1?f:(f+g)/(1+f*g))+1)/2,i=1-h;return this.rgb(h*c.red()+i*d.red(),h*c.green()+i*d.green(),h*c.blue()+i*d.blue()).alpha(c.alpha()*e+d.alpha()*(1-e))},toJSON:function(){return this.rgb()},clone:function(){var a,b,c=new f,d=this.values,e=c.values;for(var g in d)d.hasOwnProperty(g)&&(a=d[g],b={}.toString.call(a),"[object Array]"===b?e[g]=a.slice(0):"[object Number]"===b?e[g]=a:console.error("unexpected color value:",a));return c}},f.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},f.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},f.prototype.getValues=function(a){for(var b=this.values,c={},d=0;d<a.length;d++)c[a.charAt(d)]=b[a][d];return 1!==b.alpha&&(c.a=b.alpha),c},f.prototype.setValues=function(a,b){var c,e=this.values,f=this.spaces,g=this.maxes,h=1;if("alpha"===a)h=b;else if(b.length)e[a]=b.slice(0,a.length),h=b[a.length];else if(void 0!==b[a.charAt(0)]){for(c=0;c<a.length;c++)e[a][c]=b[a.charAt(c)];h=b.a}else if(void 0!==b[f[a][0]]){var i=f[a];for(c=0;c<a.length;c++)e[a][c]=b[i[c]];h=b.alpha}if(e.alpha=Math.max(0,Math.min(1,void 0===h?e.alpha:h)),"alpha"===a)return!1;var j;for(c=0;c<a.length;c++)j=Math.max(0,Math.min(g[a][c],e[a][c])),e[a][c]=Math.round(j);for(var k in f)k!==a&&(e[k]=d[a][k](e[a]));return!0},f.prototype.setSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c),this)},f.prototype.setChannel=function(a,b,c){var d=this.values[a];return void 0===c?d[b]:c===d[b]?this:(d[b]=c,this.setValues(a,d),this)},"undefined"!=typeof window&&(window.Color=f),b.exports=f},{2:2,5:5}],4:[function(a,c,d){function e(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=(h+i)/2,c=i==h?0:.5>=d?j/(i+h):j/(2-i-h),[b,100*c,100*d]}function f(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return c=0==i?0:j/i*1e3/10,i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=i/255*1e3/10,[b,c,d]}function h(a){var b=a[0],c=a[1],d=a[2],f=e(a)[0],g=1/255*Math.min(b,Math.min(c,d)),d=1-1/255*Math.max(b,Math.max(c,d));return[f,100*g,100*d]}function i(a){var b,c,d,e,f=a[0]/255,g=a[1]/255,h=a[2]/255;return e=Math.min(1-f,1-g,1-h),b=(1-f-e)/(1-e)||0,c=(1-g-e)/(1-e)||0,d=(1-h-e)/(1-e)||0,[100*b,100*c,100*d,100*e]}function j(a){return Z[JSON.stringify(a)]}function k(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}function l(a){var b,c,d,e=k(a),f=e[0],g=e[1],h=e[2];return f/=95.047,g/=100,h/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,b=116*g-16,c=500*(f-g),d=200*(g-h),[b,c,d]}function m(a){return M(l(a))}function n(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0==h)return f=255*i,[f,f,f];c=.5>i?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;3>j;j++)d=g+1/3*-(j-1),0>d&&d++,d>1&&d--,f=1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}function o(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return 0===f?[0,0,0]:(f*=2,e*=1>=f?f:2-f,c=(f+e)/2,b=2*e/(f+e),[d,100*b,100*c])}function p(a){return h(n(a))}function q(a){return i(n(a))}function s(a){return j(n(a))}function t(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f)),d=255*d;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}}function u(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return c=(2-e)*f,b=e*f,b/=1>=c?c:2-c,b=b||0,c/=2,[d,100*b,100*c]}function v(a){return h(t(a))}function w(a){return i(t(a))}function x(a){return j(t(a))}function y(a){var c,d,e,f,h=a[0]/360,i=a[1]/100,j=a[2]/100,k=i+j;switch(k>1&&(i/=k,j/=k),c=Math.floor(6*h),d=1-j,e=6*h-c,0!=(1&c)&&(e=1-e),f=i+e*(d-i),c){default:case 6:case 0:r=d,g=f,b=i;break;case 1:r=f,g=d,b=i;break;case 2:r=i,g=d,b=f;break;case 3:r=i,g=f,b=d;break;case 4:r=f,g=i,b=d;break;case 5:r=d,g=i,b=f}return[255*r,255*g,255*b]}function z(a){return e(y(a))}function A(a){return f(y(a))}function B(a){return i(y(a))}function C(a){return j(y(a))}function D(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100,h=a[3]/100;return b=1-Math.min(1,e*(1-h)+h),c=1-Math.min(1,f*(1-h)+h),d=1-Math.min(1,g*(1-h)+h),[255*b,255*c,255*d]}function E(a){return e(D(a))}function F(a){return f(D(a))}function G(a){return h(D(a))}function H(a){return j(D(a))}function I(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d]}function K(a){return M(J(a))}function L(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}function M(a){var b,c,d,e=a[0],f=a[1],g=a[2];return b=Math.atan2(g,f),c=360*b/2/Math.PI,0>c&&(c+=360),d=Math.sqrt(f*f+g*g),[e,d,c]}function N(a){return I(L(a))}function O(a){var b,c,d,e=a[0],f=a[1],g=a[2];return d=g/360*2*Math.PI,b=f*Math.cos(d),c=f*Math.sin(d),[e,b,c]}function P(a){return L(O(a))}function Q(a){return N(O(a))}function R(a){return Y[a]}function S(a){return e(R(a))}function T(a){return f(R(a))}function U(a){return h(R(a))}function V(a){return i(R(a))}function W(a){return l(R(a))}function X(a){return k(R(a))}c.exports={rgb2hsl:e,rgb2hsv:f,rgb2hwb:h,rgb2cmyk:i,rgb2keyword:j,rgb2xyz:k,rgb2lab:l,rgb2lch:m,hsl2rgb:n,hsl2hsv:o,hsl2hwb:p,hsl2cmyk:q,hsl2keyword:s,hsv2rgb:t,hsv2hsl:u,hsv2hwb:v,hsv2cmyk:w,hsv2keyword:x,hwb2rgb:y,hwb2hsl:z,hwb2hsv:A,hwb2cmyk:B,hwb2keyword:C,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:F,cmyk2hwb:G,cmyk2keyword:H,keyword2rgb:R,keyword2hsl:S,keyword2hsv:T,keyword2hwb:U,keyword2cmyk:V,keyword2lab:W,keyword2xyz:X,xyz2rgb:I,xyz2lab:J,xyz2lch:K,lab2xyz:L,lab2rgb:N,lab2lch:M,lch2lab:O,lch2xyz:P,lch2rgb:Q};var Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var $ in Y)Z[JSON.stringify(Y[$])]=$},{}],5:[function(a,b,c){var d=a(4),e=function(){return new j};for(var f in d){e[f+"Raw"]=function(a){return function(b){return"number"==typeof b&&(b=Array.prototype.slice.call(arguments)),d[a](b)}}(f);var g=/(\w+)2(\w+)/.exec(f),h=g[1],i=g[2];e[h]=e[h]||{},e[h][i]=e[f]=function(a){return function(b){"number"==typeof b&&(b=Array.prototype.slice.call(arguments));var c=d[a](b);if("string"==typeof c||void 0===c)return c;for(var e=0;e<c.length;e++)c[e]=Math.round(c[e]);return c}}(f)}var j=function(){this.convs={}};j.prototype.routeSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c))},j.prototype.setValues=function(a,b){return this.space=a,this.convs={},this.convs[a]=b,this},j.prototype.getValues=function(a){var b=this.convs[a];if(!b){var c=this.space,d=this.convs[c];b=e[c][a](d),this.convs[a]=b}return b},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(a){j.prototype[a]=function(b){return this.routeSpace(a,arguments)}}),b.exports=e},{4:4}],6:[function(a,b,c){b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(a,b,c){var d=a(26)();a(25)(d),a(24)(d),a(21)(d),a(22)(d),a(23)(d),a(27)(d),a(31)(d),a(29)(d),a(30)(d),a(32)(d),a(28)(d),a(33)(d),a(34)(d),a(35)(d),a(36)(d),a(37)(d),a(40)(d),a(38)(d),a(39)(d),a(41)(d),a(42)(d),a(43)(d),a(15)(d),a(16)(d),a(17)(d),a(18)(d),a(19)(d),a(20)(d),a(8)(d),a(9)(d),a(10)(d),a(11)(d),a(12)(d),a(13)(d),a(14)(d),window.Chart=b.exports=d},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,8:8,9:9}],8:[function(a,b,c){"use strict";b.exports=function(a){a.Bar=function(b,c){return c.type="bar",new a(b,c)}}},{}],9:[function(a,b,c){"use strict";b.exports=function(a){a.Bubble=function(b,c){return c.type="bubble",new a(b,c)}}},{}],10:[function(a,b,c){"use strict";b.exports=function(a){a.Doughnut=function(b,c){return c.type="doughnut",new a(b,c)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a){a.Line=function(b,c){return c.type="line",new a(b,c)}}},{}],12:[function(a,b,c){"use strict";b.exports=function(a){a.PolarArea=function(b,c){return c.type="polarArea",new a(b,c)}}},{}],13:[function(a,b,c){"use strict";b.exports=function(a){a.Radar=function(b,c){return c.options=a.helpers.configMerge({aspectRatio:1},c.options),c.type="radar",new a(b,c)}}},{}],14:[function(a,b,c){
"use strict";b.exports=function(a){var b={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(a,b){return""},label:function(a,b){return"("+a.xLabel+", "+a.yLabel+")"}}}};a.defaults.scatter=b,a.controllers.scatter=a.controllers.line,a.Scatter=function(b,c){return c.type="scatter",new a(b,c)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},a.controllers.bar=a.DatasetController.extend({dataElementType:a.elements.Rectangle,initialize:function(b,c){a.DatasetController.prototype.initialize.call(this,b,c),this.getMeta().bar=!0},getBarCount:function(){var a=this,c=0;return b.each(a.chart.data.datasets,function(b,d){var e=a.chart.getDatasetMeta(d);e.bar&&a.chart.isDatasetVisible(d)&&++c},a),c},update:function(a){var c=this;b.each(c.getMeta().data,function(b,d){c.updateElement(b,d,a)},c)},updateElement:function(a,c,d){var e=this,f=e.getMeta(),g=e.getScaleForId(f.xAxisID),h=e.getScaleForId(f.yAxisID),i=h.getBasePixel(),j=e.chart.options.elements.rectangle,k=a.custom||{},l=e.getDataset();b.extend(a,{_xScale:g,_yScale:h,_datasetIndex:e.index,_index:c,_model:{x:e.calculateBarX(c,e.index),y:d?i:e.calculateBarY(c,e.index),label:e.chart.data.labels[c],datasetLabel:l.label,base:d?i:e.calculateBarBase(e.index,c),width:e.calculateBarWidth(c),backgroundColor:k.backgroundColor?k.backgroundColor:b.getValueAtIndexOrDefault(l.backgroundColor,c,j.backgroundColor),borderSkipped:k.borderSkipped?k.borderSkipped:j.borderSkipped,borderColor:k.borderColor?k.borderColor:b.getValueAtIndexOrDefault(l.borderColor,c,j.borderColor),borderWidth:k.borderWidth?k.borderWidth:b.getValueAtIndexOrDefault(l.borderWidth,c,j.borderWidth)}}),a.pivot()},calculateBarBase:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=0;if(e.options.stacked){var g=c.chart,h=g.data.datasets,i=h[a].data[b];if(0>i)for(var j=0;a>j;j++){var k=h[j],l=g.getDatasetMeta(j);l.bar&&l.yAxisID===e.id&&g.isDatasetVisible(j)&&(f+=k.data[b]<0?k.data[b]:0)}else for(var m=0;a>m;m++){var n=h[m],o=g.getDatasetMeta(m);o.bar&&o.yAxisID===e.id&&g.isDatasetVisible(m)&&(f+=n.data[b]>0?n.data[b]:0)}return e.getPixelForValue(f)}return e.getBasePixel()},getRuler:function(a){var b,c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getBarCount();b="category"===e.options.type?e.getPixelForTick(a+1)-e.getPixelForTick(a):e.width/e.ticks.length;var g=b*e.options.categoryPercentage,h=(b-b*e.options.categoryPercentage)/2,i=g/f;if(e.ticks.length!==c.chart.data.labels.length){var j=e.ticks.length/c.chart.data.labels.length;i*=j}var k=i*e.options.barPercentage,l=i-i*e.options.barPercentage;return{datasetCount:f,tickWidth:b,categoryWidth:g,categorySpacing:h,fullBarWidth:i,barWidth:k,barSpacing:l}},calculateBarWidth:function(a){var b=this.getScaleForId(this.getMeta().xAxisID),c=this.getRuler(a);return b.options.stacked?c.categoryWidth:c.barWidth},getBarIndex:function(a){var b,c,d=0;for(c=0;a>c;++c)b=this.chart.getDatasetMeta(c),b.bar&&this.chart.isDatasetVisible(c)&&++d;return d},calculateBarX:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getBarIndex(b),g=c.getRuler(a),h=e.getPixelForValue(null,a,b,c.chart.isCombo);return h-=c.chart.isCombo?g.tickWidth/2:0,e.options.stacked?h+g.categoryWidth/2+g.categorySpacing:h+g.barWidth/2+g.categorySpacing+g.barWidth*f+g.barSpacing/2+g.barSpacing*f},calculateBarY:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getDataset().data[a];if(e.options.stacked){for(var g=0,h=0,i=0;b>i;i++){var j=c.chart.data.datasets[i],k=c.chart.getDatasetMeta(i);k.bar&&k.yAxisID===e.id&&c.chart.isDatasetVisible(i)&&(j.data[a]<0?h+=j.data[a]||0:g+=j.data[a]||0)}return 0>f?e.getPixelForValue(h+f):e.getPixelForValue(g+f)}return e.getPixelForValue(f)},draw:function(a){var c=this,d=a||1;b.each(c.getMeta().data,function(a,b){var e=c.getDataset().data[b];null===e||void 0===e||isNaN(e)||a.transition(d).draw()},c)},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model;f.backgroundColor=e.hoverBackgroundColor?e.hoverBackgroundColor:b.getValueAtIndexOrDefault(c.hoverBackgroundColor,d,b.getHoverColor(f.backgroundColor)),f.borderColor=e.hoverBorderColor?e.hoverBorderColor:b.getValueAtIndexOrDefault(c.hoverBorderColor,d,b.getHoverColor(f.borderColor)),f.borderWidth=e.hoverBorderWidth?e.hoverBorderWidth:b.getValueAtIndexOrDefault(c.hoverBorderWidth,d,f.borderWidth)},removeHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model,g=this.chart.options.elements.rectangle;f.backgroundColor=e.backgroundColor?e.backgroundColor:b.getValueAtIndexOrDefault(c.backgroundColor,d,g.backgroundColor),f.borderColor=e.borderColor?e.borderColor:b.getValueAtIndexOrDefault(c.borderColor,d,g.borderColor),f.borderWidth=e.borderWidth?e.borderWidth:b.getValueAtIndexOrDefault(c.borderWidth,d,g.borderWidth)}}),a.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(a,b){var c="";return a.length>0&&(a[0].yLabel?c=a[0].yLabel:b.labels.length>0&&a[0].index<b.labels.length&&(c=b.labels[a[0].index])),c},label:function(a,b){var c=b.datasets[a.datasetIndex].label||"";return c+": "+a.xLabel}}}},a.controllers.horizontalBar=a.controllers.bar.extend({updateElement:function(a,c,d,e){var f=this,g=f.getMeta(),h=f.getScaleForId(g.xAxisID),i=f.getScaleForId(g.yAxisID),j=h.getBasePixel(),k=a.custom||{},l=f.getDataset(),m=f.chart.options.elements.rectangle;b.extend(a,{_xScale:h,_yScale:i,_datasetIndex:f.index,_index:c,_model:{x:d?j:f.calculateBarX(c,f.index),y:f.calculateBarY(c,f.index),label:f.chart.data.labels[c],datasetLabel:l.label,base:d?j:f.calculateBarBase(f.index,c),height:f.calculateBarHeight(c),backgroundColor:k.backgroundColor?k.backgroundColor:b.getValueAtIndexOrDefault(l.backgroundColor,c,m.backgroundColor),borderSkipped:k.borderSkipped?k.borderSkipped:m.borderSkipped,borderColor:k.borderColor?k.borderColor:b.getValueAtIndexOrDefault(l.borderColor,c,m.borderColor),borderWidth:k.borderWidth?k.borderWidth:b.getValueAtIndexOrDefault(l.borderWidth,c,m.borderWidth)},draw:function(){function a(a){return i[(k+a)%4]}var b=this._chart.ctx,c=this._view,d=c.height/2,e=c.y-d,f=c.y+d,g=c.base-(c.base-c.x),h=c.borderWidth/2;c.borderWidth&&(e+=h,f-=h,g+=h),b.beginPath(),b.fillStyle=c.backgroundColor,b.strokeStyle=c.borderColor,b.lineWidth=c.borderWidth;var i=[[c.base,f],[c.base,e],[g,e],[g,f]],j=["bottom","left","top","right"],k=j.indexOf(c.borderSkipped,0);-1===k&&(k=0),b.moveTo.apply(b,a(0));for(var l=1;4>l;l++)b.lineTo.apply(b,a(l));b.fill(),c.borderWidth&&b.stroke()},inRange:function(a,b){var c=this._view,d=!1;return c&&(d=c.x<c.base?b>=c.y-c.height/2&&b<=c.y+c.height/2&&a>=c.x&&a<=c.base:b>=c.y-c.height/2&&b<=c.y+c.height/2&&a>=c.base&&a<=c.x),d}}),a.pivot()},calculateBarBase:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=0;if(e.options.stacked){var g=c.chart.data.datasets[a].data[b];if(0>g)for(var h=0;a>h;h++){var i=c.chart.data.datasets[h],j=c.chart.getDatasetMeta(h);j.bar&&j.xAxisID===e.id&&c.chart.isDatasetVisible(h)&&(f+=i.data[b]<0?i.data[b]:0)}else for(var k=0;a>k;k++){var l=c.chart.data.datasets[k],m=c.chart.getDatasetMeta(k);m.bar&&m.xAxisID===e.id&&c.chart.isDatasetVisible(k)&&(f+=l.data[b]>0?l.data[b]:0)}return e.getPixelForValue(f)}return e.getBasePixel()},getRuler:function(a){var b,c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getBarCount();b="category"===e.options.type?e.getPixelForTick(a+1)-e.getPixelForTick(a):e.width/e.ticks.length;var g=b*e.options.categoryPercentage,h=(b-b*e.options.categoryPercentage)/2,i=g/f;if(e.ticks.length!==c.chart.data.labels.length){var j=e.ticks.length/c.chart.data.labels.length;i*=j}var k=i*e.options.barPercentage,l=i-i*e.options.barPercentage;return{datasetCount:f,tickHeight:b,categoryHeight:g,categorySpacing:h,fullBarHeight:i,barHeight:k,barSpacing:l}},calculateBarHeight:function(a){var b=this,c=b.getScaleForId(b.getMeta().yAxisID),d=b.getRuler(a);return c.options.stacked?d.categoryHeight:d.barHeight},calculateBarX:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getDataset().data[a];if(e.options.stacked){for(var g=0,h=0,i=0;b>i;i++){var j=c.chart.data.datasets[i],k=c.chart.getDatasetMeta(i);k.bar&&k.xAxisID===e.id&&c.chart.isDatasetVisible(i)&&(j.data[a]<0?h+=j.data[a]||0:g+=j.data[a]||0)}return 0>f?e.getPixelForValue(h+f):e.getPixelForValue(g+f)}return e.getPixelForValue(f)},calculateBarY:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getBarIndex(b),g=c.getRuler(a),h=e.getPixelForValue(null,a,b,c.chart.isCombo);return h-=c.chart.isCombo?g.tickHeight/2:0,e.options.stacked?h+g.categoryHeight/2+g.categorySpacing:h+g.barHeight/2+g.categorySpacing+g.barHeight*f+g.barSpacing/2+g.barSpacing*f}})}},{}],16:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(a,b){return""},label:function(a,b){var c=b.datasets[a.datasetIndex].label||"",d=b.datasets[a.datasetIndex].data[a.index];return c+": ("+d.x+", "+d.y+", "+d.r+")"}}}},a.controllers.bubble=a.DatasetController.extend({dataElementType:a.elements.Point,update:function(a){var c=this,d=c.getMeta(),e=d.data;b.each(e,function(b,d){c.updateElement(b,d,a)})},updateElement:function(c,d,e){var f=this,g=f.getMeta(),h=f.getScaleForId(g.xAxisID),i=f.getScaleForId(g.yAxisID),j=c.custom||{},k=f.getDataset(),l=k.data[d],m=f.chart.options.elements.point,n=f.index;b.extend(c,{_xScale:h,_yScale:i,_datasetIndex:n,_index:d,_model:{x:e?h.getPixelForDecimal(.5):h.getPixelForValue(l,d,n,f.chart.isCombo),y:e?i.getBasePixel():i.getPixelForValue(l,d,n),radius:e?0:j.radius?j.radius:f.getRadius(l),hitRadius:j.hitRadius?j.hitRadius:b.getValueAtIndexOrDefault(k.hitRadius,d,m.hitRadius)}}),a.DatasetController.prototype.removeHoverStyle.call(f,c,m);var o=c._model;o.skip=j.skip?j.skip:isNaN(o.x)||isNaN(o.y),c.pivot()},getRadius:function(a){return a.r||this.chart.options.elements.point.radius},setHoverStyle:function(c){var d=this;a.DatasetController.prototype.setHoverStyle.call(d,c);var e=d.chart.data.datasets[c._datasetIndex],f=c._index,g=c.custom||{},h=c._model;h.radius=g.hoverRadius?g.hoverRadius:b.getValueAtIndexOrDefault(e.hoverRadius,f,d.chart.options.elements.point.hoverRadius)+d.getRadius(e.data[f])},removeHoverStyle:function(b){var c=this;a.DatasetController.prototype.removeHoverStyle.call(c,b,c.chart.options.elements.point);var d=c.chart.data.datasets[b._datasetIndex].data[b._index],e=b.custom||{},f=b._model;f.radius=e.radius?e.radius:c.getRadius(d)}})}},{}],17:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults;c.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');var c=a.data,d=c.datasets,e=c.labels;if(d.length)for(var f=0;f<d[0].data.length;++f)b.push('<li><span style="background-color:'+d[0].backgroundColor[f]+'"></span>'),e[f]&&b.push(e[f]),b.push("</li>");return b.push("</ul>"),b.join("")},legend:{labels:{generateLabels:function(a){var c=a.data;return c.labels.length&&c.datasets.length?c.labels.map(function(d,e){var f=a.getDatasetMeta(0),g=c.datasets[0],h=f.data[e],i=h.custom||{},j=b.getValueAtIndexOrDefault,k=a.options.elements.arc,l=i.backgroundColor?i.backgroundColor:j(g.backgroundColor,e,k.backgroundColor),m=i.borderColor?i.borderColor:j(g.borderColor,e,k.borderColor),n=i.borderWidth?i.borderWidth:j(g.borderWidth,e,k.borderWidth);return{text:d,fillStyle:l,strokeStyle:m,lineWidth:n,hidden:isNaN(g.data[e])||f.data[e].hidden,index:e}}):[]}},onClick:function(a,b){var c,d,e,f=b.index,g=this.chart;for(c=0,d=(g.data.datasets||[]).length;d>c;++c)e=g.getDatasetMeta(c),e.data[f].hidden=!e.data[f].hidden;g.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+": "+b.datasets[a.datasetIndex].data[a.index]}}}},c.pie=b.clone(c.doughnut),b.extend(c.pie,{cutoutPercentage:0}),a.controllers.doughnut=a.controllers.pie=a.DatasetController.extend({dataElementType:a.elements.Arc,linkScales:b.noop,getRingIndex:function(a){for(var b=0,c=0;a>c;++c)this.chart.isDatasetVisible(c)&&++b;return b},update:function(a){var c=this,d=c.chart,e=d.chartArea,f=d.options,g=f.elements.arc,h=e.right-e.left-g.borderWidth,i=e.bottom-e.top-g.borderWidth,j=Math.min(h,i),k={x:0,y:0},l=c.getMeta(),m=f.cutoutPercentage,n=f.circumference;if(n<2*Math.PI){var o=f.rotation%(2*Math.PI);o+=2*Math.PI*(o>=Math.PI?-1:o<-Math.PI?1:0);var p=o+n,q={x:Math.cos(o),y:Math.sin(o)},r={x:Math.cos(p),y:Math.sin(p)},s=0>=o&&p>=0||o<=2*Math.PI&&2*Math.PI<=p,t=o<=.5*Math.PI&&.5*Math.PI<=p||o<=2.5*Math.PI&&2.5*Math.PI<=p,u=o<=-Math.PI&&-Math.PI<=p||o<=Math.PI&&Math.PI<=p,v=o<=.5*-Math.PI&&.5*-Math.PI<=p||o<=1.5*Math.PI&&1.5*Math.PI<=p,w=m/100,x={x:u?-1:Math.min(q.x*(q.x<0?1:w),r.x*(r.x<0?1:w)),y:v?-1:Math.min(q.y*(q.y<0?1:w),r.y*(r.y<0?1:w))},y={x:s?1:Math.max(q.x*(q.x>0?1:w),r.x*(r.x>0?1:w)),y:t?1:Math.max(q.y*(q.y>0?1:w),r.y*(r.y>0?1:w))},z={width:.5*(y.x-x.x),height:.5*(y.y-x.y)};j=Math.min(h/z.width,i/z.height),k={x:(y.x+x.x)*-.5,y:(y.y+x.y)*-.5}}d.outerRadius=Math.max(j/2,0),d.innerRadius=Math.max(m?d.outerRadius/100*m:1,0),d.radiusLength=(d.outerRadius-d.innerRadius)/d.getVisibleDatasetCount(),d.offsetX=k.x*d.outerRadius,d.offsetY=k.y*d.outerRadius,l.total=c.calculateTotal(),c.outerRadius=d.outerRadius-d.radiusLength*c.getRingIndex(c.index),c.innerRadius=c.outerRadius-d.radiusLength,b.each(l.data,function(b,d){c.updateElement(b,d,a)})},updateElement:function(a,c,d){var e=this,f=e.chart,g=f.chartArea,h=f.options,i=h.animation,j=(h.elements.arc,(g.left+g.right)/2),k=(g.top+g.bottom)/2,l=h.rotation,m=h.rotation,n=e.getDataset(),o=d&&i.animateRotate?0:a.hidden?0:e.calculateCircumference(n.data[c])*(h.circumference/(2*Math.PI)),p=d&&i.animateScale?0:e.innerRadius,q=d&&i.animateScale?0:e.outerRadius,r=(a.custom||{},b.getValueAtIndexOrDefault);b.extend(a,{_datasetIndex:e.index,_index:c,_model:{x:j+f.offsetX,y:k+f.offsetY,startAngle:l,endAngle:m,circumference:o,outerRadius:q,innerRadius:p,label:r(n.label,c,f.data.labels[c])}});var s=a._model;this.removeHoverStyle(a),d&&i.animateRotate||(0===c?s.startAngle=h.rotation:s.startAngle=e.getMeta().data[c-1]._model.endAngle,s.endAngle=s.startAngle+s.circumference),a.pivot()},removeHoverStyle:function(b){a.DatasetController.prototype.removeHoverStyle.call(this,b,this.chart.options.elements.arc)},calculateTotal:function(){var a,c=this.getDataset(),d=this.getMeta(),e=0;return b.each(d.data,function(b,d){a=c.data[d],isNaN(a)||b.hidden||(e+=Math.abs(a))}),e},calculateCircumference:function(a){var b=this.getMeta().total;return b>0&&!isNaN(a)?2*Math.PI*(a/b):0}})}},{}],18:[function(a,b,c){"use strict";b.exports=function(a){function b(a,b){return c.getValueOrDefault(a.showLine,b.showLines)}var c=a.helpers;a.defaults.line={showLines:!0,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},a.controllers.line=a.DatasetController.extend({datasetElementType:a.elements.Line,dataElementType:a.elements.Point,addElementAndReset:function(c){var d=this,e=d.chart.options,f=d.getMeta();a.DatasetController.prototype.addElementAndReset.call(d,c),b(d.getDataset(),e)&&0!==f.dataset._model.tension&&d.updateBezierControlPoints()},update:function(a){var d,e,f,g=this,h=g.getMeta(),i=h.dataset,j=h.data||[],k=g.chart.options,l=k.elements.line,m=g.getScaleForId(h.yAxisID),n=g.getDataset(),o=b(n,k);for(o&&(f=i.custom||{},void 0!==n.tension&&void 0===n.lineTension&&(n.lineTension=n.tension),i._scale=m,i._datasetIndex=g.index,i._children=j,i._model={spanGaps:n.spanGaps?n.spanGaps:!1,tension:f.tension?f.tension:c.getValueOrDefault(n.lineTension,l.tension),backgroundColor:f.backgroundColor?f.backgroundColor:n.backgroundColor||l.backgroundColor,borderWidth:f.borderWidth?f.borderWidth:n.borderWidth||l.borderWidth,borderColor:f.borderColor?f.borderColor:n.borderColor||l.borderColor,borderCapStyle:f.borderCapStyle?f.borderCapStyle:n.borderCapStyle||l.borderCapStyle,borderDash:f.borderDash?f.borderDash:n.borderDash||l.borderDash,borderDashOffset:f.borderDashOffset?f.borderDashOffset:n.borderDashOffset||l.borderDashOffset,borderJoinStyle:f.borderJoinStyle?f.borderJoinStyle:n.borderJoinStyle||l.borderJoinStyle,fill:f.fill?f.fill:void 0!==n.fill?n.fill:l.fill,scaleTop:m.top,scaleBottom:m.bottom,scaleZero:m.getBasePixel()},i.pivot()),d=0,e=j.length;e>d;++d)g.updateElement(j[d],d,a);for(o&&0!==i._model.tension&&g.updateBezierControlPoints(),d=0,e=j.length;e>d;++d)j[d].pivot()},getPointBackgroundColor:function(a,b){var d=this.chart.options.elements.point.backgroundColor,e=this.getDataset(),f=a.custom||{};return f.backgroundColor?d=f.backgroundColor:e.pointBackgroundColor?d=c.getValueAtIndexOrDefault(e.pointBackgroundColor,b,d):e.backgroundColor&&(d=e.backgroundColor),d},getPointBorderColor:function(a,b){var d=this.chart.options.elements.point.borderColor,e=this.getDataset(),f=a.custom||{};return f.borderColor?d=f.borderColor:e.pointBorderColor?d=c.getValueAtIndexOrDefault(e.pointBorderColor,b,d):e.borderColor&&(d=e.borderColor),d},getPointBorderWidth:function(a,b){var d=this.chart.options.elements.point.borderWidth,e=this.getDataset(),f=a.custom||{};return f.borderWidth?d=f.borderWidth:e.pointBorderWidth?d=c.getValueAtIndexOrDefault(e.pointBorderWidth,b,d):e.borderWidth&&(d=e.borderWidth),d},updateElement:function(a,b,d){var e,f,g=this,h=g.getMeta(),i=a.custom||{},j=g.getDataset(),k=g.index,l=j.data[b],m=g.getScaleForId(h.yAxisID),n=g.getScaleForId(h.xAxisID),o=g.chart.options.elements.point;void 0!==j.radius&&void 0===j.pointRadius&&(j.pointRadius=j.radius),void 0!==j.hitRadius&&void 0===j.pointHitRadius&&(j.pointHitRadius=j.hitRadius),e=n.getPixelForValue(l,b,k,g.chart.isCombo),f=d?m.getBasePixel():g.calculatePointY(l,b,k,g.chart.isCombo),a._xScale=n,a._yScale=m,a._datasetIndex=k,a._index=b,a._model={x:e,y:f,skip:i.skip||isNaN(e)||isNaN(f),radius:i.radius||c.getValueAtIndexOrDefault(j.pointRadius,b,o.radius),pointStyle:i.pointStyle||c.getValueAtIndexOrDefault(j.pointStyle,b,o.pointStyle),backgroundColor:g.getPointBackgroundColor(a,b),borderColor:g.getPointBorderColor(a,b),borderWidth:g.getPointBorderWidth(a,b),tension:h.dataset._model?h.dataset._model.tension:0,hitRadius:i.hitRadius||c.getValueAtIndexOrDefault(j.pointHitRadius,b,o.hitRadius)}},calculatePointY:function(a,b,c,d){var e,f,g,h=this,i=h.chart,j=h.getMeta(),k=h.getScaleForId(j.yAxisID),l=0,m=0;if(k.options.stacked){for(e=0;c>e;e++)f=i.data.datasets[e],g=i.getDatasetMeta(e),"line"===g.type&&i.isDatasetVisible(e)&&(f.data[b]<0?m+=f.data[b]||0:l+=f.data[b]||0);return 0>a?k.getPixelForValue(m+a):k.getPixelForValue(l+a)}return k.getPixelForValue(a)},updateBezierControlPoints:function(){var a,b,d,e,f,g=this.getMeta(),h=(this.chart.chartArea,g.data||[]);for(a=0,b=h.length;b>a;++a)d=h[a],e=d._model,f=c.splineCurve(c.previousItem(h,a)._model,e,c.nextItem(h,a)._model,g.dataset._model.tension),e.controlPointPreviousX=f.previous.x,e.controlPointPreviousY=f.previous.y,e.controlPointNextX=f.next.x,e.controlPointNextY=f.next.y},draw:function(a){var c,d,e=this,f=e.getMeta(),g=f.data||[],h=a||1;for(c=0,d=g.length;d>c;++c)g[c].transition(h);for(b(e.getDataset(),e.chart.options)&&f.dataset.transition(h).draw(),c=0,d=g.length;d>c;++c)g[c].draw()},setHoverStyle:function(a){var b=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model;f.radius=e.hoverRadius||c.getValueAtIndexOrDefault(b.pointHoverRadius,d,this.chart.options.elements.point.hoverRadius),f.backgroundColor=e.hoverBackgroundColor||c.getValueAtIndexOrDefault(b.pointHoverBackgroundColor,d,c.getHoverColor(f.backgroundColor)),f.borderColor=e.hoverBorderColor||c.getValueAtIndexOrDefault(b.pointHoverBorderColor,d,c.getHoverColor(f.borderColor)),f.borderWidth=e.hoverBorderWidth||c.getValueAtIndexOrDefault(b.pointHoverBorderWidth,d,f.borderWidth)},removeHoverStyle:function(a){var b=this,d=b.chart.data.datasets[a._datasetIndex],e=a._index,f=a.custom||{},g=a._model;void 0!==d.radius&&void 0===d.pointRadius&&(d.pointRadius=d.radius),g.radius=f.radius||c.getValueAtIndexOrDefault(d.pointRadius,e,b.chart.options.elements.point.radius),g.backgroundColor=b.getPointBackgroundColor(a,e),g.borderColor=b.getPointBorderColor(a,e),g.borderWidth=b.getPointBorderWidth(a,e)}})}},{}],19:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0},animation:{animateRotate:!0,animateScale:!0},aspectRatio:1,legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');var c=a.data,d=c.datasets,e=c.labels;if(d.length)for(var f=0;f<d[0].data.length;++f)b.push('<li><span style="background-color:'+d[0].backgroundColor[f]+'">'),e[f]&&b.push(e[f]),b.push("</span></li>");return b.push("</ul>"),b.join("")},legend:{labels:{generateLabels:function(a){var c=a.data;return c.labels.length&&c.datasets.length?c.labels.map(function(d,e){var f=a.getDatasetMeta(0),g=c.datasets[0],h=f.data[e],i=h.custom||{},j=b.getValueAtIndexOrDefault,k=a.options.elements.arc,l=i.backgroundColor?i.backgroundColor:j(g.backgroundColor,e,k.backgroundColor),m=i.borderColor?i.borderColor:j(g.borderColor,e,k.borderColor),n=i.borderWidth?i.borderWidth:j(g.borderWidth,e,k.borderWidth);return{text:d,fillStyle:l,strokeStyle:m,lineWidth:n,hidden:isNaN(g.data[e])||f.data[e].hidden,index:e}}):[]}},onClick:function(a,b){var c,d,e,f=b.index,g=this.chart;for(c=0,d=(g.data.datasets||[]).length;d>c;++c)e=g.getDatasetMeta(c),e.data[f].hidden=!e.data[f].hidden;g.update()}},tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+": "+a.yLabel}}}},a.controllers.polarArea=a.DatasetController.extend({dataElementType:a.elements.Arc,linkScales:b.noop,update:function(a){var c=this,d=c.chart,e=d.chartArea,f=c.getMeta(),g=d.options,h=g.elements.arc,i=Math.min(e.right-e.left,e.bottom-e.top);d.outerRadius=Math.max((i-h.borderWidth/2)/2,0),d.innerRadius=Math.max(g.cutoutPercentage?d.outerRadius/100*g.cutoutPercentage:1,0),d.radiusLength=(d.outerRadius-d.innerRadius)/d.getVisibleDatasetCount(),c.outerRadius=d.outerRadius-d.radiusLength*c.index,c.innerRadius=c.outerRadius-d.radiusLength,f.count=c.countVisibleElements(),b.each(f.data,function(b,d){c.updateElement(b,d,a)})},updateElement:function(a,c,d){for(var e=this,f=e.chart,g=f.chartArea,h=e.getDataset(),i=f.options,j=i.animation,k=(i.elements.arc,a.custom||{},f.scale),l=b.getValueAtIndexOrDefault,m=f.data.labels,n=e.calculateCircumference(h.data[c]),o=(g.left+g.right)/2,p=(g.top+g.bottom)/2,q=0,r=e.getMeta(),s=0;c>s;++s)isNaN(h.data[s])||r.data[s].hidden||++q;var t=-.5*Math.PI,u=a.hidden?0:k.getDistanceFromCenterForValue(h.data[c]),v=t+n*q,w=v+(a.hidden?0:n),x=j.animateScale?0:k.getDistanceFromCenterForValue(h.data[c]);b.extend(a,{_datasetIndex:e.index,_index:c,_scale:k,_model:{x:o,y:p,innerRadius:0,outerRadius:d?x:u,startAngle:d&&j.animateRotate?t:v,endAngle:d&&j.animateRotate?t:w,label:l(m,c,m[c])}}),e.removeHoverStyle(a),a.pivot()},removeHoverStyle:function(b){a.DatasetController.prototype.removeHoverStyle.call(this,b,this.chart.options.elements.arc)},countVisibleElements:function(){var a=this.getDataset(),c=this.getMeta(),d=0;return b.each(c.data,function(b,c){isNaN(a.data[c])||b.hidden||d++}),d},calculateCircumference:function(a){var b=this.getMeta().count;return b>0&&!isNaN(a)?2*Math.PI/b:0}})}},{}],20:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},a.controllers.radar=a.DatasetController.extend({datasetElementType:a.elements.Line,dataElementType:a.elements.Point,linkScales:b.noop,addElementAndReset:function(b){a.DatasetController.prototype.addElementAndReset.call(this,b),this.updateBezierControlPoints()},update:function(a){var c=this,d=c.getMeta(),e=d.dataset,f=d.data,g=e.custom||{},h=c.getDataset(),i=c.chart.options.elements.line,j=c.chart.scale;void 0!==h.tension&&void 0===h.lineTension&&(h.lineTension=h.tension),b.extend(d.dataset,{_datasetIndex:c.index,_children:f,_loop:!0,_model:{tension:g.tension?g.tension:b.getValueOrDefault(h.lineTension,i.tension),backgroundColor:g.backgroundColor?g.backgroundColor:h.backgroundColor||i.backgroundColor,borderWidth:g.borderWidth?g.borderWidth:h.borderWidth||i.borderWidth,borderColor:g.borderColor?g.borderColor:h.borderColor||i.borderColor,fill:g.fill?g.fill:void 0!==h.fill?h.fill:i.fill,borderCapStyle:g.borderCapStyle?g.borderCapStyle:h.borderCapStyle||i.borderCapStyle,borderDash:g.borderDash?g.borderDash:h.borderDash||i.borderDash,borderDashOffset:g.borderDashOffset?g.borderDashOffset:h.borderDashOffset||i.borderDashOffset,borderJoinStyle:g.borderJoinStyle?g.borderJoinStyle:h.borderJoinStyle||i.borderJoinStyle,scaleTop:j.top,scaleBottom:j.bottom,scaleZero:j.getBasePosition()}}),d.dataset.pivot(),b.each(f,function(b,d){c.updateElement(b,d,a)},c),c.updateBezierControlPoints()},updateElement:function(a,c,d){var e=this,f=a.custom||{},g=e.getDataset(),h=e.chart.scale,i=e.chart.options.elements.point,j=h.getPointPositionForValue(c,g.data[c]);b.extend(a,{_datasetIndex:e.index,_index:c,_scale:h,_model:{x:d?h.xCenter:j.x,y:d?h.yCenter:j.y,tension:f.tension?f.tension:b.getValueOrDefault(g.tension,e.chart.options.elements.line.tension),radius:f.radius?f.radius:b.getValueAtIndexOrDefault(g.pointRadius,c,i.radius),backgroundColor:f.backgroundColor?f.backgroundColor:b.getValueAtIndexOrDefault(g.pointBackgroundColor,c,i.backgroundColor),borderColor:f.borderColor?f.borderColor:b.getValueAtIndexOrDefault(g.pointBorderColor,c,i.borderColor),borderWidth:f.borderWidth?f.borderWidth:b.getValueAtIndexOrDefault(g.pointBorderWidth,c,i.borderWidth),pointStyle:f.pointStyle?f.pointStyle:b.getValueAtIndexOrDefault(g.pointStyle,c,i.pointStyle),hitRadius:f.hitRadius?f.hitRadius:b.getValueAtIndexOrDefault(g.hitRadius,c,i.hitRadius)}}),a._model.skip=f.skip?f.skip:isNaN(a._model.x)||isNaN(a._model.y)},updateBezierControlPoints:function(){var a=this.chart.chartArea,c=this.getMeta();b.each(c.data,function(d,e){var f=d._model,g=b.splineCurve(b.previousItem(c.data,e,!0)._model,f,b.nextItem(c.data,e,!0)._model,f.tension);f.controlPointPreviousX=Math.max(Math.min(g.previous.x,a.right),a.left),f.controlPointPreviousY=Math.max(Math.min(g.previous.y,a.bottom),a.top),f.controlPointNextX=Math.max(Math.min(g.next.x,a.right),a.left),f.controlPointNextY=Math.max(Math.min(g.next.y,a.bottom),a.top),d.pivot()})},draw:function(a){var c=this.getMeta(),d=a||1;b.each(c.data,function(a,b){a.transition(d)}),c.dataset.transition(d).draw(),b.each(c.data,function(a){a.draw()})},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a.custom||{},e=a._index,f=a._model;f.radius=d.hoverRadius?d.hoverRadius:b.getValueAtIndexOrDefault(c.pointHoverRadius,e,this.chart.options.elements.point.hoverRadius),f.backgroundColor=d.hoverBackgroundColor?d.hoverBackgroundColor:b.getValueAtIndexOrDefault(c.pointHoverBackgroundColor,e,b.getHoverColor(f.backgroundColor)),f.borderColor=d.hoverBorderColor?d.hoverBorderColor:b.getValueAtIndexOrDefault(c.pointHoverBorderColor,e,b.getHoverColor(f.borderColor)),f.borderWidth=d.hoverBorderWidth?d.hoverBorderWidth:b.getValueAtIndexOrDefault(c.pointHoverBorderWidth,e,f.borderWidth)},removeHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a.custom||{},e=a._index,f=a._model,g=this.chart.options.elements.point;f.radius=d.radius?d.radius:b.getValueAtIndexOrDefault(c.radius,e,g.radius),f.backgroundColor=d.backgroundColor?d.backgroundColor:b.getValueAtIndexOrDefault(c.pointBackgroundColor,e,g.backgroundColor),f.borderColor=d.borderColor?d.borderColor:b.getValueAtIndexOrDefault(c.pointBorderColor,e,g.borderColor),f.borderWidth=d.borderWidth?d.borderWidth:b.getValueAtIndexOrDefault(c.pointBorderWidth,e,g.borderWidth)}})}},{}],21:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:b.noop,onComplete:b.noop},a.Animation=a.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),a.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(a,b,c,d){var e=this;d||(a.animating=!0);for(var f=0;f<e.animations.length;++f)if(e.animations[f].chartInstance===a)return void(e.animations[f].animationObject=b);e.animations.push({chartInstance:a,animationObject:b}),1===e.animations.length&&e.requestAnimationFrame()},cancelAnimation:function(a){var c=b.findIndex(this.animations,function(b){return b.chartInstance===a});-1!==c&&(this.animations.splice(c,1),a.animating=!1)},requestAnimationFrame:function(){var a=this;null===a.request&&(a.request=b.requestAnimFrame.call(window,function(){a.request=null,a.startDigest()}))},startDigest:function(){var a=this,b=Date.now(),c=0;a.dropFrames>1&&(c=Math.floor(a.dropFrames),a.dropFrames=a.dropFrames%1);for(var d=0;d<a.animations.length;)null===a.animations[d].animationObject.currentStep&&(a.animations[d].animationObject.currentStep=0),a.animations[d].animationObject.currentStep+=1+c,a.animations[d].animationObject.currentStep>a.animations[d].animationObject.numSteps&&(a.animations[d].animationObject.currentStep=a.animations[d].animationObject.numSteps),a.animations[d].animationObject.render(a.animations[d].chartInstance,a.animations[d].animationObject),a.animations[d].animationObject.onAnimationProgress&&a.animations[d].animationObject.onAnimationProgress.call&&a.animations[d].animationObject.onAnimationProgress.call(a.animations[d].chartInstance,a.animations[d]),a.animations[d].animationObject.currentStep===a.animations[d].animationObject.numSteps?(a.animations[d].animationObject.onAnimationComplete&&a.animations[d].animationObject.onAnimationComplete.call&&a.animations[d].animationObject.onAnimationComplete.call(a.animations[d].chartInstance,a.animations[d]),a.animations[d].chartInstance.animating=!1,a.animations.splice(d,1)):++d;var e=Date.now(),f=(e-b)/a.frameDuration;a.dropFrames+=f,a.animations.length>0&&a.requestAnimationFrame()}}}},{}],22:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.types={},a.instances={},a.controllers={},a.Controller=function(c){return this.chart=c,this.config=c.config,this.options=this.config.options=b.configMerge(a.defaults.global,a.defaults[this.config.type],this.config.options||{}),this.id=b.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),a.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this},b.extend(a.Controller.prototype,{initialize:function(){var b=this;return a.plugins.notify("beforeInit",[b]),b.bindEvents(),b.ensureScalesHaveIDs(),b.buildOrUpdateControllers(),b.buildScales(),b.updateLayout(),b.resetElements(),b.initToolTip(),b.update(),a.plugins.notify("afterInit",[b]),b},clear:function(){return b.clear(this.chart),this},stop:function(){return a.animationService.cancelAnimation(this),this},resize:function(c){var d=this,e=d.chart,f=e.canvas,g=b.getMaximumWidth(f),h=e.aspectRatio,i=d.options.maintainAspectRatio&&isNaN(h)===!1&&isFinite(h)&&0!==h?g/h:b.getMaximumHeight(f),j=e.width!==g||e.height!==i;if(!j)return d;f.width=e.width=g,f.height=e.height=i,
b.retinaScale(e);var k={width:g,height:i};return a.plugins.notify("resize",[d,k]),d.options.onResize&&d.options.onResize(d,k),c||(d.stop(),d.update(d.options.responsiveAnimationDuration)),d},ensureScalesHaveIDs:function(){var a=this.options,c=a.scales||{},d=a.scale;b.each(c.xAxes,function(a,b){a.id=a.id||"x-axis-"+b}),b.each(c.yAxes,function(a,b){a.id=a.id||"y-axis-"+b}),d&&(d.id=d.id||"scale")},buildScales:function(){var c=this,d=c.options,e=c.scales={},f=[];d.scales&&(f=f.concat((d.scales.xAxes||[]).map(function(a){return{options:a,dtype:"category"}}),(d.scales.yAxes||[]).map(function(a){return{options:a,dtype:"linear"}}))),d.scale&&f.push({options:d.scale,dtype:"radialLinear",isDefault:!0}),b.each(f,function(d,f){var g=d.options,h=b.getValueOrDefault(g.type,d.dtype),i=a.scaleService.getScaleConstructor(h);if(i){var j=new i({id:g.id,options:g,ctx:c.chart.ctx,chart:c});e[j.id]=j,d.isDefault&&(c.scale=j)}}),a.scaleService.addScalesToLayout(this)},updateLayout:function(){a.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var c=this,d=[],e=[];if(b.each(c.data.datasets,function(b,f){var g=c.getDatasetMeta(f);g.type||(g.type=b.type||c.config.type),d.push(g.type),g.controller?g.controller.updateIndex(f):(g.controller=new a.controllers[g.type](c,f),e.push(g.controller))},c),d.length>1)for(var f=1;f<d.length;f++)if(d[f]!==d[f-1]){c.isCombo=!0;break}return e},resetElements:function(){var a=this;b.each(a.data.datasets,function(b,c){a.getDatasetMeta(c).controller.reset()},a)},update:function(c,d){var e=this;a.plugins.notify("beforeUpdate",[e]),e.tooltip._data=e.data;var f=e.buildOrUpdateControllers();b.each(e.data.datasets,function(a,b){e.getDatasetMeta(b).controller.buildOrUpdateElements()},e),a.layoutService.update(e,e.chart.width,e.chart.height),a.plugins.notify("afterScaleUpdate",[e]),b.each(f,function(a){a.reset()}),e.updateDatasets(),a.plugins.notify("afterUpdate",[e]),e.render(c,d)},updateDatasets:function(){var b,c,d=this;if(a.plugins.notify("beforeDatasetsUpdate",[d])){for(b=0,c=d.data.datasets.length;c>b;++b)d.getDatasetMeta(b).controller.update();a.plugins.notify("afterDatasetsUpdate",[d])}},render:function(c,d){var e=this;a.plugins.notify("beforeRender",[e]);var f=e.options.animation;if(f&&("undefined"!=typeof c&&0!==c||"undefined"==typeof c&&0!==f.duration)){var g=new a.Animation;g.numSteps=(c||f.duration)/16.66,g.easing=f.easing,g.render=function(a,c){var d=b.easingEffects[c.easing],e=c.currentStep/c.numSteps,f=d(e);a.draw(f,e,c.currentStep)},g.onAnimationProgress=f.onProgress,g.onAnimationComplete=f.onComplete,a.animationService.addAnimation(e,g,c,d)}else e.draw(),f&&f.onComplete&&f.onComplete.call&&f.onComplete.call(e);return e},draw:function(c){var d=this,e=c||1;d.clear(),a.plugins.notify("beforeDraw",[d,e]),b.each(d.boxes,function(a){a.draw(d.chartArea)},d),d.scale&&d.scale.draw(),a.plugins.notify("beforeDatasetsDraw",[d,e]),b.each(d.data.datasets,function(a,b){d.isDatasetVisible(b)&&d.getDatasetMeta(b).controller.draw(c)},d,!0),a.plugins.notify("afterDatasetsDraw",[d,e]),d.tooltip.transition(e).draw(),a.plugins.notify("afterDraw",[d,e])},getElementAtEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart),e=[];return b.each(c.data.datasets,function(a,f){if(c.isDatasetVisible(f)){var g=c.getDatasetMeta(f);b.each(g.data,function(a,b){return a.inRange(d.x,d.y)?(e.push(a),e):void 0})}}),e},getElementsAtEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart),e=[],f=function(){if(c.data.datasets)for(var a=0;a<c.data.datasets.length;a++){var b=c.getDatasetMeta(a);if(c.isDatasetVisible(a))for(var e=0;e<b.data.length;e++)if(b.data[e].inRange(d.x,d.y))return b.data[e]}}.call(c);return f?(b.each(c.data.datasets,function(a,b){if(c.isDatasetVisible(b)){var d=c.getDatasetMeta(b);e.push(d.data[f._index])}},c),e):e},getElementsAtEventForMode:function(a,b){var c=this;switch(b){case"single":return c.getElementAtEvent(a);case"label":return c.getElementsAtEvent(a);case"dataset":return c.getDatasetAtEvent(a);default:return a}},getDatasetAtEvent:function(a){var b=this.getElementAtEvent(a);return b.length>0&&(b=this.getDatasetMeta(b[0]._datasetIndex).data),b},getDatasetMeta:function(a){var b=this,c=b.data.datasets[a];c._meta||(c._meta={});var d=c._meta[b.id];return d||(d=c._meta[b.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),d},getVisibleDatasetCount:function(){for(var a=0,b=0,c=this.data.datasets.length;c>b;++b)this.isDatasetVisible(b)&&a++;return a},isDatasetVisible:function(a){var b=this.getDatasetMeta(a);return"boolean"==typeof b.hidden?!b.hidden:!this.data.datasets[a].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var c=this;c.stop(),c.clear(),b.unbindEvents(c,c.events),b.removeResizeListener(c.chart.canvas.parentNode);var d=c.chart.canvas;d.width=c.chart.width,d.height=c.chart.height,void 0!==c.chart.originalDevicePixelRatio&&c.chart.ctx.scale(1/c.chart.originalDevicePixelRatio,1/c.chart.originalDevicePixelRatio),d.style.width=c.chart.originalCanvasStyleWidth,d.style.height=c.chart.originalCanvasStyleHeight,a.plugins.notify("destroy",[c]),delete a.instances[c.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var b=this;b.tooltip=new a.Tooltip({_chart:b.chart,_chartInstance:b,_data:b.data,_options:b.options.tooltips},b)},bindEvents:function(){var a=this;b.bindEvents(a,a.options.events,function(b){a.eventHandler(b)})},updateHoverStyle:function(a,b,c){var d,e,f,g=c?"setHoverStyle":"removeHoverStyle";switch(b){case"single":a=[a[0]];break;case"label":case"dataset":break;default:return}for(e=0,f=a.length;f>e;++e)d=a[e],d&&this.getDatasetMeta(d._datasetIndex).controller[g](d)},eventHandler:function(a){var c=this,d=c.tooltip,e=c.options||{},f=e.hover,g=e.tooltips;return c.lastActive=c.lastActive||[],c.lastTooltipActive=c.lastTooltipActive||[],"mouseout"===a.type?(c.active=[],c.tooltipActive=[]):(c.active=c.getElementsAtEventForMode(a,f.mode),c.tooltipActive=c.getElementsAtEventForMode(a,g.mode)),f.onHover&&f.onHover.call(c,c.active),("mouseup"===a.type||"click"===a.type)&&(e.onClick&&e.onClick.call(c,a,c.active),c.legend&&c.legend.handleEvent&&c.legend.handleEvent(a)),c.lastActive.length&&c.updateHoverStyle(c.lastActive,f.mode,!1),c.active.length&&f.mode&&c.updateHoverStyle(c.active,f.mode,!0),(g.enabled||g.custom)&&(d.initialize(),d._active=c.tooltipActive,d.update(!0)),d.pivot(),c.animating||b.arrayEquals(c.active,c.lastActive)&&b.arrayEquals(c.tooltipActive,c.lastTooltipActive)||(c.stop(),(g.enabled||g.custom)&&d.update(!0),c.render(f.animationDuration,!0)),c.lastActive=c.active,c.lastTooltipActive=c.tooltipActive,c}})}},{}],23:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.DatasetController=function(a,b){this.initialize.call(this,a,b)},b.extend(a.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(a,b){var c=this;c.chart=a,c.index=b,c.linkScales(),c.addElements()},updateIndex:function(a){this.index=a},linkScales:function(){var a=this,b=a.getMeta(),c=a.getDataset();null===b.xAxisID&&(b.xAxisID=c.xAxisID||a.chart.options.scales.xAxes[0].id),null===b.yAxisID&&(b.yAxisID=c.yAxisID||a.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(a){return this.chart.scales[a]},reset:function(){this.update(!0)},createMetaDataset:function(){var a=this,b=a.datasetElementType;return b&&new b({_chart:a.chart.chart,_datasetIndex:a.index})},createMetaData:function(a){var b=this,c=b.dataElementType;return c&&new c({_chart:b.chart.chart,_datasetIndex:b.index,_index:a})},addElements:function(){var a,b,c=this,d=c.getMeta(),e=c.getDataset().data||[],f=d.data;for(a=0,b=e.length;b>a;++a)f[a]=f[a]||c.createMetaData(d,a);d.dataset=d.dataset||c.createMetaDataset()},addElementAndReset:function(a){var b=this,c=b.createMetaData(a);b.getMeta().data.splice(a,0,c),b.updateElement(c,a,!0)},buildOrUpdateElements:function(){var a=this.getMeta(),b=a.data,c=this.getDataset().data.length,d=b.length;if(d>c)b.splice(c,d-c);else if(c>d)for(var e=d;c>e;++e)this.addElementAndReset(e)},update:c,draw:function(a){var c=a||1;b.each(this.getMeta().data,function(a,b){a.transition(c).draw()})},removeHoverStyle:function(a,c){var d=this.chart.data.datasets[a._datasetIndex],e=a._index,f=a.custom||{},g=b.getValueAtIndexOrDefault,h=(b.color,a._model);h.backgroundColor=f.backgroundColor?f.backgroundColor:g(d.backgroundColor,e,c.backgroundColor),h.borderColor=f.borderColor?f.borderColor:g(d.borderColor,e,c.borderColor),h.borderWidth=f.borderWidth?f.borderWidth:g(d.borderWidth,e,c.borderWidth)},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=b.getValueAtIndexOrDefault,g=(b.color,b.getHoverColor),h=a._model;h.backgroundColor=e.hoverBackgroundColor?e.hoverBackgroundColor:f(c.hoverBackgroundColor,d,g(h.backgroundColor)),h.borderColor=e.hoverBorderColor?e.hoverBorderColor:f(c.hoverBorderColor,d,g(h.borderColor)),h.borderWidth=e.hoverBorderWidth?e.hoverBorderWidth:f(c.hoverBorderWidth,d,h.borderWidth)}}),a.DatasetController.extend=b.inherits}},{}],24:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.elements={},a.Element=function(a){b.extend(this,a),this.initialize.apply(this,arguments)},b.extend(a.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var a=this;return a._view||(a._view=b.clone(a._model)),a._start=b.clone(a._view),a},transition:function(a){var c=this;return c._view||(c._view=b.clone(c._model)),1===a?(c._view=c._model,c._start=null,c):(c._start||c.pivot(),b.each(c._model,function(d,e){if("_"===e[0]);else if(c._view.hasOwnProperty(e))if(d===c._view[e]);else if("string"==typeof d)try{var f=b.color(c._model[e]).mix(b.color(c._start[e]),a);c._view[e]=f.rgbString()}catch(g){c._view[e]=d}else if("number"==typeof d){var h=void 0!==c._start[e]&&isNaN(c._start[e])===!1?c._start[e]:0;c._view[e]=(c._model[e]-h)*a+h}else c._view[e]=d;else"number"!=typeof d||isNaN(c._view[e])?c._view[e]=d:c._view[e]=d*a},c),c)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return b.isNumber(this._model.x)&&b.isNumber(this._model.y)}}),a.Element.extend=b.inherits}},{}],25:[function(a,b,c){"use strict";var d=a(3);b.exports=function(a){function b(a,b,c){var d;return"string"==typeof a?(d=parseInt(a,10),-1!=a.indexOf("%")&&(d=d/100*b.parentNode[c])):d=a,d}function c(a){return void 0!==a&&null!==a&&"none"!==a}function e(a,d,e){var f=document.defaultView,g=a.parentNode,h=f.getComputedStyle(a)[d],i=f.getComputedStyle(g)[d],j=c(h),k=c(i),l=Number.POSITIVE_INFINITY;return j||k?Math.min(j?b(h,a,e):l,k?b(i,g,e):l):"none"}var f=a.helpers={};f.each=function(a,b,c,d){var e,g;if(f.isArray(a))if(g=a.length,d)for(e=g-1;e>=0;e--)b.call(c,a[e],e);else for(e=0;g>e;e++)b.call(c,a[e],e);else if("object"==typeof a){var h=Object.keys(a);for(g=h.length,e=0;g>e;e++)b.call(c,a[h[e]],h[e])}},f.clone=function(a){var b={};return f.each(a,function(a,c){f.isArray(a)?b[c]=a.slice(0):"object"==typeof a&&null!==a?b[c]=f.clone(a):b[c]=a}),b},f.extend=function(a){for(var b=function(b,c){a[c]=b},c=1,d=arguments.length;d>c;c++)f.each(arguments[c],b);return a},f.configMerge=function(b){var c=f.clone(b);return f.each(Array.prototype.slice.call(arguments,1),function(b){f.each(b,function(b,d){if("scales"===d)c[d]=f.scaleMerge(c.hasOwnProperty(d)?c[d]:{},b);else if("scale"===d)c[d]=f.configMerge(c.hasOwnProperty(d)?c[d]:{},a.scaleService.getScaleDefaults(b.type),b);else if(c.hasOwnProperty(d)&&f.isArray(c[d])&&f.isArray(b)){var e=c[d];f.each(b,function(a,b){b<e.length?"object"==typeof e[b]&&null!==e[b]&&"object"==typeof a&&null!==a?e[b]=f.configMerge(e[b],a):e[b]=a:e.push(a)})}else c.hasOwnProperty(d)&&"object"==typeof c[d]&&null!==c[d]&&"object"==typeof b?c[d]=f.configMerge(c[d],b):c[d]=b})}),c},f.scaleMerge=function(b,c){var d=f.clone(b);return f.each(c,function(b,c){"xAxes"===c||"yAxes"===c?d.hasOwnProperty(c)?f.each(b,function(b,e){var g=f.getValueOrDefault(b.type,"xAxes"===c?"category":"linear"),h=a.scaleService.getScaleDefaults(g);e>=d[c].length||!d[c][e].type?d[c].push(f.configMerge(h,b)):b.type&&b.type!==d[c][e].type?d[c][e]=f.configMerge(d[c][e],h,b):d[c][e]=f.configMerge(d[c][e],b)}):(d[c]=[],f.each(b,function(b){var e=f.getValueOrDefault(b.type,"xAxes"===c?"category":"linear");d[c].push(f.configMerge(a.scaleService.getScaleDefaults(e),b))})):d.hasOwnProperty(c)&&"object"==typeof d[c]&&null!==d[c]&&"object"==typeof b?d[c]=f.configMerge(d[c],b):d[c]=b}),d},f.getValueAtIndexOrDefault=function(a,b,c){return void 0===a||null===a?c:f.isArray(a)?b<a.length?a[b]:c:a},f.getValueOrDefault=function(a,b){return void 0===a?b:a},f.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},f.where=function(a,b){if(f.isArray(a)&&Array.prototype.filter)return a.filter(b);var c=[];return f.each(a,function(a){b(a)&&c.push(a)}),c},f.findIndex=Array.prototype.findIndex?function(a,b,c){return a.findIndex(b,c)}:function(a,b,c){c=void 0===c?a:c;for(var d=0,e=a.length;e>d;++d)if(b.call(c,a[d],d,a))return d;return-1},f.findNextWhere=function(a,b,c){(void 0===c||null===c)&&(c=-1);for(var d=c+1;d<a.length;d++){var e=a[d];if(b(e))return e}},f.findPreviousWhere=function(a,b,c){(void 0===c||null===c)&&(c=a.length);for(var d=c-1;d>=0;d--){var e=a[d];if(b(e))return e}},f.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=f.inherits,a&&f.extend(c.prototype,a),c.__super__=b.prototype,c},f.noop=function(){},f.uid=function(){var a=0;return function(){return a++}}(),f.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},f.almostEquals=function(a,b,c){return Math.abs(a-b)<c},f.max=function(a){return a.reduce(function(a,b){return isNaN(b)?a:Math.max(a,b)},Number.NEGATIVE_INFINITY)},f.min=function(a){return a.reduce(function(a,b){return isNaN(b)?a:Math.min(a,b)},Number.POSITIVE_INFINITY)},f.sign=Math.sign?function(a){return Math.sign(a)}:function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1},f.log10=Math.log10?function(a){return Math.log10(a)}:function(a){return Math.log(a)/Math.LN10},f.toRadians=function(a){return a*(Math.PI/180)},f.toDegrees=function(a){return a*(180/Math.PI)},f.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c);return f<-.5*Math.PI&&(f+=2*Math.PI),{angle:f,distance:e}},f.aliasPixel=function(a){return a%2===0?0:.5},f.splineCurve=function(a,b,c,d){var e=a.skip?b:a,f=b,g=c.skip?b:c,h=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),i=Math.sqrt(Math.pow(g.x-f.x,2)+Math.pow(g.y-f.y,2)),j=h/(h+i),k=i/(h+i);j=isNaN(j)?0:j,k=isNaN(k)?0:k;var l=d*j,m=d*k;return{previous:{x:f.x-l*(g.x-e.x),y:f.y-l*(g.y-e.y)},next:{x:f.x+m*(g.x-e.x),y:f.y+m*(g.y-e.y)}}},f.nextItem=function(a,b,c){return c?b>=a.length-1?a[0]:a[b+1]:b>=a.length-1?a[a.length-1]:a[b+1]},f.previousItem=function(a,b,c){return c?0>=b?a[a.length-1]:a[b-1]:0>=b?a[0]:a[b-1]},f.niceNum=function(a,b){var c,d=Math.floor(f.log10(a)),e=a/Math.pow(10,d);return c=b?1.5>e?1:3>e?2:7>e?5:10:1>=e?1:2>=e?2:5>=e?5:10,c*Math.pow(10,d)};var g=f.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin((1*a-b)*(2*Math.PI)/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=1*(.3*1.5)),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)):d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-g.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*(7.5625*a*a):2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*g.easeInBounce(2*a):.5*g.easeOutBounce(2*a-1)+.5}};f.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),f.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),f.getRelativePosition=function(a,b){var c,d,e=a.originalEvent||a,g=a.currentTarget||a.srcElement,h=g.getBoundingClientRect(),i=e.touches;i&&i.length>0?(c=i[0].clientX,d=i[0].clientY):(c=e.clientX,d=e.clientY);var j=parseFloat(f.getStyle(g,"padding-left")),k=parseFloat(f.getStyle(g,"padding-top")),l=parseFloat(f.getStyle(g,"padding-right")),m=parseFloat(f.getStyle(g,"padding-bottom")),n=h.right-h.left-j-l,o=h.bottom-h.top-k-m;return c=Math.round((c-h.left-j)/n*g.width/b.currentDevicePixelRatio),d=Math.round((d-h.top-k)/o*g.height/b.currentDevicePixelRatio),{x:c,y:d}},f.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},f.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=f.noop},f.bindEvents=function(a,b,c){var d=a.events=a.events||{};f.each(b,function(b){d[b]=function(){c.apply(a,arguments)},f.addEvent(a.chart.canvas,b,d[b])})},f.unbindEvents=function(a,b){var c=a.chart.canvas;f.each(b,function(a,b){f.removeEvent(c,b,a)})},f.getConstraintWidth=function(a){return e(a,"max-width","clientWidth")},f.getConstraintHeight=function(a){return e(a,"max-height","clientHeight")},f.getMaximumWidth=function(a){var b=a.parentNode,c=parseInt(f.getStyle(b,"padding-left"))+parseInt(f.getStyle(b,"padding-right")),d=b.clientWidth-c,e=f.getConstraintWidth(a);return isNaN(e)?d:Math.min(d,e)},f.getMaximumHeight=function(a){var b=a.parentNode,c=parseInt(f.getStyle(b,"padding-top"))+parseInt(f.getStyle(b,"padding-bottom")),d=b.clientHeight-c,e=f.getConstraintHeight(a);return isNaN(e)?d:Math.min(d,e)},f.getStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},f.retinaScale=function(a){var b=a.ctx,c=a.canvas,d=c.width,e=c.height,f=a.currentDevicePixelRatio=window.devicePixelRatio||1;1!==f&&(c.height=e*f,c.width=d*f,b.scale(f,f),a.originalDevicePixelRatio=a.originalDevicePixelRatio||f),c.style.width=d+"px",c.style.height=e+"px"},f.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},f.fontString=function(a,b,c){return b+" "+a+"px "+c},f.longestText=function(a,b,c,d){d=d||{};var e=d.data=d.data||{},g=d.garbageCollect=d.garbageCollect||[];d.font!==b&&(e=d.data={},g=d.garbageCollect=[],d.font=b),a.font=b;var h=0;f.each(c,function(b){void 0!==b&&null!==b&&f.isArray(b)!==!0?h=f.measureText(a,e,g,h,b):f.isArray(b)&&f.each(b,function(b){void 0===b||null===b||f.isArray(b)||(h=f.measureText(a,e,g,h,b))})});var i=g.length/2;if(i>c.length){for(var j=0;i>j;j++)delete e[g[j]];g.splice(0,i)}return h},f.measureText=function(a,b,c,d,e){var f=b[e];return f||(f=b[e]=a.measureText(e).width,c.push(e)),f>d&&(d=f),d},f.numberOfLabelLines=function(a){var b=1;return f.each(a,function(a){f.isArray(a)&&a.length>b&&(b=a.length)}),b},f.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},f.color=function(b){return d?d(b instanceof CanvasGradient?a.defaults.global.defaultColor:b):(console.log("Color.js not found!"),b)},f.addResizeListener=function(a,b){var c=document.createElement("iframe"),d="chartjs-hidden-iframe";c.classlist?c.classlist.add(d):c.setAttribute("class",d);var e=c.style;e.width="100%",e.display="block",e.border=0,e.height=0,e.margin=0,e.position="absolute",e.left=0,e.right=0,e.top=0,e.bottom=0,a.insertBefore(c,a.firstChild),(c.contentWindow||c).onresize=function(){b&&b()}},f.removeResizeListener=function(a){var b=a.querySelector(".chartjs-hidden-iframe");b&&b.parentNode.removeChild(b)},f.isArray=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===Object.prototype.toString.call(a)},f.arrayEquals=function(a,b){var c,d,e,g;if(!a||!b||a.length!=b.length)return!1;for(c=0,d=a.length;d>c;++c)if(e=a[c],g=b[c],e instanceof Array&&g instanceof Array){if(!f.arrayEquals(e,g))return!1}else if(e!=g)return!1;return!0},f.callCallback=function(a,b,c){a&&"function"==typeof a.call&&a.apply(c,b)},f.getHoverColor=function(a){return a instanceof CanvasPattern?a:f.color(a).saturate(.5).darken(.1).rgbString()}}},{3:3}],26:[function(a,b,c){"use strict";b.exports=function(){var a=function(b,c){var d=this,e=a.helpers;return d.config=c,b.length&&b[0].getContext&&(b=b[0]),b.getContext&&(b=b.getContext("2d")),d.ctx=b,d.canvas=b.canvas,b.canvas.style.display=b.canvas.style.display||"block",d.width=b.canvas.width||parseInt(e.getStyle(b.canvas,"width"),10)||e.getMaximumWidth(b.canvas),d.height=b.canvas.height||parseInt(e.getStyle(b.canvas,"height"),10)||e.getMaximumHeight(b.canvas),d.aspectRatio=d.width/d.height,(isNaN(d.aspectRatio)||isFinite(d.aspectRatio)===!1)&&(d.aspectRatio=void 0!==c.aspectRatio?c.aspectRatio:2),d.originalCanvasStyleWidth=b.canvas.style.width,d.originalCanvasStyleHeight=b.canvas.style.height,e.retinaScale(d),c&&(d.controller=new a.Controller(d)),e.addResizeListener(b.canvas.parentNode,function(){d.controller&&d.controller.config.options.responsive&&d.controller.resize()}),d.controller?d.controller:d};return a.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');for(var c=0;c<a.data.datasets.length;c++)b.push('<li><span style="background-color:'+a.data.datasets[c].backgroundColor+'"></span>'),a.data.datasets[c].label&&b.push(a.data.datasets[c].label),b.push("</li>");return b.push("</ul>"),b.join("")}}},a.Chart=a,a}},{}],27:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.layoutService={defaults:{},addBox:function(a,b){a.boxes||(a.boxes=[]),a.boxes.push(b)},removeBox:function(a,b){a.boxes&&a.boxes.splice(a.boxes.indexOf(b),1)},update:function(a,c,d){function e(a){var b,c=a.isHorizontal();c?(b=a.update(a.options.fullWidth?p:v,u),w-=b.height):(b=a.update(t,s),v-=b.width),x.push({horizontal:c,minSize:b,box:a})}function f(a){var c=b.findNextWhere(x,function(b){return b.box===a});if(c)if(a.isHorizontal()){var d={left:y,right:z,top:0,bottom:0};a.update(a.options.fullWidth?p:v,q/2,d)}else a.update(c.minSize.width,w)}function g(a){var c=b.findNextWhere(x,function(b){return b.box===a}),d={left:0,right:0,top:A,bottom:B};c&&a.update(c.minSize.width,w,d)}function h(a){a.isHorizontal()?(a.left=a.options.fullWidth?i:y,a.right=a.options.fullWidth?c-i:y+v,a.top=F,a.bottom=F+a.height,F=a.bottom):(a.left=E,a.right=E+a.width,a.top=A,a.bottom=A+w,E=a.right)}if(a){var i=0,j=0,k=b.where(a.boxes,function(a){return"left"===a.options.position}),l=b.where(a.boxes,function(a){return"right"===a.options.position}),m=b.where(a.boxes,function(a){return"top"===a.options.position}),n=b.where(a.boxes,function(a){return"bottom"===a.options.position}),o=b.where(a.boxes,function(a){return"chartArea"===a.options.position});m.sort(function(a,b){return(b.options.fullWidth?1:0)-(a.options.fullWidth?1:0)}),n.sort(function(a,b){return(a.options.fullWidth?1:0)-(b.options.fullWidth?1:0)});var p=c-2*i,q=d-2*j,r=p/2,s=q/2,t=(c-r)/(k.length+l.length),u=(d-s)/(m.length+n.length),v=p,w=q,x=[];b.each(k.concat(l,m,n),e);var y=i,z=i,A=j,B=j;b.each(k.concat(l),f),b.each(k,function(a){y+=a.width}),b.each(l,function(a){z+=a.width}),b.each(m.concat(n),f),b.each(m,function(a){A+=a.height}),b.each(n,function(a){B+=a.height}),b.each(k.concat(l),g),y=i,z=i,A=j,B=j,b.each(k,function(a){y+=a.width}),b.each(l,function(a){z+=a.width}),b.each(m,function(a){A+=a.height}),b.each(n,function(a){B+=a.height});var C=d-A-B,D=c-y-z;(D!==v||C!==w)&&(b.each(k,function(a){a.height=C}),b.each(l,function(a){a.height=C}),b.each(m,function(a){a.options.fullWidth||(a.width=D)}),b.each(n,function(a){a.options.fullWidth||(a.width=D)}),w=C,v=D);var E=i,F=j;b.each(k.concat(m),h),E+=v,F+=w,b.each(l,h),b.each(n,h),a.chartArea={left:y,top:A,right:y+v,bottom:A+w},b.each(o,function(b){b.left=a.chartArea.left,b.top=a.chartArea.top,b.right=a.chartArea.right,b.bottom=a.chartArea.bottom,b.update(v,w)})}}}}},{}],28:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(a,b){var c=b.datasetIndex,d=this.chart,e=d.getDatasetMeta(c);e.hidden=null===e.hidden?!d.data.datasets[c].hidden:null,d.update()},labels:{boxWidth:40,padding:10,generateLabels:function(a){var c=a.data;return b.isArray(c.datasets)?c.datasets.map(function(c,d){return{text:c.label,fillStyle:b.isArray(c.backgroundColor)?c.backgroundColor[0]:c.backgroundColor,hidden:!a.isDatasetVisible(d),lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:c.borderWidth,strokeStyle:c.borderColor,datasetIndex:d}},this):[]}}},a.Legend=a.Element.extend({initialize:function(a){b.extend(this,a),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:c,update:function(a,b,c){var d=this;return d.beforeUpdate(),d.maxWidth=a,d.maxHeight=b,d.margins=c,d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeBuildLabels(),d.buildLabels(),d.afterBuildLabels(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:c,beforeSetDimensions:c,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:c,beforeBuildLabels:c,buildLabels:function(){var a=this;a.legendItems=a.options.labels.generateLabels.call(a,a.chart),a.options.reverse&&a.legendItems.reverse()},afterBuildLabels:c,beforeFit:c,fit:function(){var c=this,d=c.options,e=d.labels,f=d.display,g=c.ctx,h=a.defaults.global,i=b.getValueOrDefault,j=i(e.fontSize,h.defaultFontSize),k=i(e.fontStyle,h.defaultFontStyle),l=i(e.fontFamily,h.defaultFontFamily),m=b.fontString(j,k,l),n=c.legendHitBoxes=[],o=c.minSize,p=c.isHorizontal();if(p?(o.width=c.maxWidth,o.height=f?10:0):(o.width=f?10:0,o.height=c.maxHeight),f)if(g.font=m,p){var q=c.lineWidths=[0],r=c.legendItems.length?j+e.padding:0;g.textAlign="left",g.textBaseline="top",b.each(c.legendItems,function(a,b){var d=e.boxWidth+j/2+g.measureText(a.text).width;q[q.length-1]+d+e.padding>=c.width&&(r+=j+e.padding,q[q.length]=c.left),n[b]={left:0,top:0,width:d,height:j},q[q.length-1]+=d+e.padding}),o.height+=r}else{var s=e.padding,t=c.columnWidths=[],u=e.padding,v=0,w=0,x=j+s;b.each(c.legendItems,function(a,b){var c=e.boxWidth+j/2+g.measureText(a.text).width;w+x>o.height&&(u+=v+e.padding,t.push(v),v=0,w=0),v=Math.max(v,c),w+=x,n[b]={left:0,top:0,width:c,height:j}}),u+=v,t.push(v),o.width+=u}c.width=o.width,c.height=o.height},afterFit:c,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var c=this,d=c.options,e=d.labels,f=a.defaults.global,g=f.elements.line,h=c.width,i=(c.height,c.lineWidths);if(d.display){var j,k=c.ctx,l=b.getValueOrDefault,m=l(e.fontColor,f.defaultFontColor),n=l(e.fontSize,f.defaultFontSize),o=l(e.fontStyle,f.defaultFontStyle),p=l(e.fontFamily,f.defaultFontFamily),q=b.fontString(n,o,p);k.textAlign="left",k.textBaseline="top",k.lineWidth=.5,k.strokeStyle=m,k.fillStyle=m,k.font=q;var r=e.boxWidth,s=c.legendHitBoxes,t=function(a,b,c){k.save(),k.fillStyle=l(c.fillStyle,f.defaultColor),k.lineCap=l(c.lineCap,g.borderCapStyle),k.lineDashOffset=l(c.lineDashOffset,g.borderDashOffset),k.lineJoin=l(c.lineJoin,g.borderJoinStyle),k.lineWidth=l(c.lineWidth,g.borderWidth),k.strokeStyle=l(c.strokeStyle,f.defaultColor),k.setLineDash&&k.setLineDash(l(c.lineDash,g.borderDash)),k.strokeRect(a,b,r,n),k.fillRect(a,b,r,n),k.restore()},u=function(a,b,c,d){k.fillText(c.text,r+n/2+a,b),c.hidden&&(k.beginPath(),k.lineWidth=2,k.moveTo(r+n/2+a,b+n/2),k.lineTo(r+n/2+a+d,b+n/2),k.stroke())},v=c.isHorizontal();j=v?{x:c.left+(h-i[0])/2,y:c.top+e.padding,line:0}:{x:c.left+e.padding,y:c.top,line:0};var w=n+e.padding;b.each(c.legendItems,function(a,b){var d=k.measureText(a.text).width,f=r+n/2+d,g=j.x,l=j.y;v?g+f>=h&&(l=j.y+=n+e.padding,j.line++,g=j.x=c.left+(h-i[j.line])/2):l+w>c.bottom&&(g=j.x=g+c.columnWidths[j.line]+e.padding,l=j.y=c.top,j.line++),t(g,l,a),s[b].left=g,s[b].top=l,u(g,l,a,d),v?j.x+=f+e.padding:j.y+=w})}},handleEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart.chart),e=d.x,f=d.y,g=c.options;if(e>=c.left&&e<=c.right&&f>=c.top&&f<=c.bottom)for(var h=c.legendHitBoxes,i=0;i<h.length;++i){var j=h[i];if(e>=j.left&&e<=j.left+j.width&&f>=j.top&&f<=j.top+j.height){g.onClick&&g.onClick.call(c,a,c.legendItems[i]);break}}}}),a.plugins.register({beforeInit:function(b){var c=b.options,d=c.legend;d&&(b.legend=new a.Legend({ctx:b.chart.ctx,options:d,chart:b}),a.layoutService.addBox(b,b.legend))}})}},{}],29:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers.noop;a.plugins={_plugins:[],register:function(a){
var b=this._plugins;[].concat(a).forEach(function(a){-1===b.indexOf(a)&&b.push(a)})},unregister:function(a){var b=this._plugins;[].concat(a).forEach(function(a){var c=b.indexOf(a);-1!==c&&b.splice(c,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(a,b){var c,d,e=this._plugins,f=e.length;for(c=0;f>c;++c)if(d=e[c],"function"==typeof d[a]&&d[a].apply(d,b||[])===!1)return!1;return!0}},a.PluginBase=a.Element.extend({beforeInit:b,afterInit:b,beforeUpdate:b,afterUpdate:b,beforeDraw:b,afterDraw:b,destroy:b}),a.pluginService=a.plugins}},{}],30:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(a){return b.isArray(a)?a:""+a}}},a.Scale=a.Element.extend({beforeUpdate:function(){b.callCallback(this.options.beforeUpdate,[this])},update:function(a,c,d){var e=this;return e.beforeUpdate(),e.maxWidth=a,e.maxHeight=c,e.margins=b.extend({left:0,right:0,top:0,bottom:0},d),e.beforeSetDimensions(),e.setDimensions(),e.afterSetDimensions(),e.beforeDataLimits(),e.determineDataLimits(),e.afterDataLimits(),e.beforeBuildTicks(),e.buildTicks(),e.afterBuildTicks(),e.beforeTickToLabelConversion(),e.convertTicksToLabels(),e.afterTickToLabelConversion(),e.beforeCalculateTickRotation(),e.calculateTickRotation(),e.afterCalculateTickRotation(),e.beforeFit(),e.fit(),e.afterFit(),e.afterUpdate(),e.minSize},afterUpdate:function(){b.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){b.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0},afterSetDimensions:function(){b.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){b.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:b.noop,afterDataLimits:function(){b.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){b.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:b.noop,afterBuildTicks:function(){b.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){b.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var a=this;a.ticks=a.ticks.map(function(b,c,d){return a.options.ticks.userCallback?a.options.ticks.userCallback(b,c,d):a.options.ticks.callback(b,c,d)},a)},afterTickToLabelConversion:function(){b.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){b.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c=this,d=c.ctx,e=a.defaults.global,f=c.options.ticks,g=b.getValueOrDefault(f.fontSize,e.defaultFontSize),h=b.getValueOrDefault(f.fontStyle,e.defaultFontStyle),i=b.getValueOrDefault(f.fontFamily,e.defaultFontFamily),j=b.fontString(g,h,i);d.font=j;var k,l=d.measureText(c.ticks[0]).width,m=d.measureText(c.ticks[c.ticks.length-1]).width;if(c.labelRotation=f.minRotation||0,c.paddingRight=0,c.paddingLeft=0,c.options.display&&c.isHorizontal()){c.paddingRight=m/2+3,c.paddingLeft=l/2+3,c.longestTextCache||(c.longestTextCache={});for(var n,o,p=b.longestText(d,j,c.ticks,c.longestTextCache),q=p,r=c.getPixelForTick(1)-c.getPixelForTick(0)-6;q>r&&c.labelRotation<f.maxRotation;){if(n=Math.cos(b.toRadians(c.labelRotation)),o=Math.sin(b.toRadians(c.labelRotation)),k=n*l,k+g/2>c.yLabelWidth&&(c.paddingLeft=k+g/2),c.paddingRight=g/2,o*p>c.maxHeight){c.labelRotation--;break}c.labelRotation++,q=n*p}}c.margins&&(c.paddingLeft=Math.max(c.paddingLeft-c.margins.left,0),c.paddingRight=Math.max(c.paddingRight-c.margins.right,0))},afterCalculateTickRotation:function(){b.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){b.callCallback(this.options.beforeFit,[this])},fit:function(){var c=this,d=c.minSize={width:0,height:0},e=c.options,f=a.defaults.global,g=e.ticks,h=e.scaleLabel,i=e.display,j=c.isHorizontal(),k=b.getValueOrDefault(g.fontSize,f.defaultFontSize),l=b.getValueOrDefault(g.fontStyle,f.defaultFontStyle),m=b.getValueOrDefault(g.fontFamily,f.defaultFontFamily),n=b.fontString(k,l,m),o=b.getValueOrDefault(h.fontSize,f.defaultFontSize),p=b.getValueOrDefault(h.fontStyle,f.defaultFontStyle),q=b.getValueOrDefault(h.fontFamily,f.defaultFontFamily),r=(b.fontString(o,p,q),e.gridLines.tickMarkLength);if(j?d.width=c.isFullWidth()?c.maxWidth-c.margins.left-c.margins.right:c.maxWidth:d.width=i?r:0,j?d.height=i?r:0:d.height=c.maxHeight,h.display&&i&&(j?d.height+=1.5*o:d.width+=1.5*o),g.display&&i){c.longestTextCache||(c.longestTextCache={});var s=b.longestText(c.ctx,n,c.ticks,c.longestTextCache),t=b.numberOfLabelLines(c.ticks),u=.5*k;if(j){c.longestLabelWidth=s;var v=Math.sin(b.toRadians(c.labelRotation))*c.longestLabelWidth+k*t+u*t;d.height=Math.min(c.maxHeight,d.height+v),c.ctx.font=n;var w=c.ctx.measureText(c.ticks[0]).width,x=c.ctx.measureText(c.ticks[c.ticks.length-1]).width,y=Math.cos(b.toRadians(c.labelRotation)),z=Math.sin(b.toRadians(c.labelRotation));c.paddingLeft=0!==c.labelRotation?y*w+3:w/2+3,c.paddingRight=0!==c.labelRotation?z*(k/2)+3:x/2+3}else{var A=c.maxWidth-d.width,B=g.mirror;B?s=0:s+=c.options.ticks.padding,A>s?d.width+=s:d.width=c.maxWidth,c.paddingTop=k/2,c.paddingBottom=k/2}}c.margins&&(c.paddingLeft=Math.max(c.paddingLeft-c.margins.left,0),c.paddingTop=Math.max(c.paddingTop-c.margins.top,0),c.paddingRight=Math.max(c.paddingRight-c.margins.right,0),c.paddingBottom=Math.max(c.paddingBottom-c.margins.bottom,0)),c.width=d.width,c.height=d.height},afterFit:function(){b.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function c(a){return null===a||"undefined"==typeof a?NaN:"number"==typeof a&&isNaN(a)?NaN:"object"==typeof a?a instanceof Date||a.isValid?a:c(this.isHorizontal()?a.x:a.y):a},getLabelForIndex:b.noop,getPixelForValue:b.noop,getValueForPixel:b.noop,getPixelForTick:function(a,b){var c=this;if(c.isHorizontal()){var d=c.width-(c.paddingLeft+c.paddingRight),e=d/Math.max(c.ticks.length-(c.options.gridLines.offsetGridLines?0:1),1),f=e*a+c.paddingLeft;b&&(f+=e/2);var g=c.left+Math.round(f);return g+=c.isFullWidth()?c.margins.left:0}var h=c.height-(c.paddingTop+c.paddingBottom);return c.top+a*(h/(c.ticks.length-1))},getPixelForDecimal:function(a){var b=this;if(b.isHorizontal()){var c=b.width-(b.paddingLeft+b.paddingRight),d=c*a+b.paddingLeft,e=b.left+Math.round(d);return e+=b.isFullWidth()?b.margins.left:0}return b.top+a*b.height},getBasePixel:function(){var a=this,b=a.min,c=a.max;return a.getPixelForValue(a.beginAtZero?0:0>b&&0>c?c:b>0&&c>0?b:0)},draw:function(c){var d=this,e=d.options;if(e.display){var f,g,h=d.ctx,i=a.defaults.global,j=e.ticks,k=e.gridLines,l=e.scaleLabel,m=0!==d.labelRotation,n=j.autoSkip,o=d.isHorizontal();j.maxTicksLimit&&(g=j.maxTicksLimit);var p=b.getValueOrDefault(j.fontColor,i.defaultFontColor),q=b.getValueOrDefault(j.fontSize,i.defaultFontSize),r=b.getValueOrDefault(j.fontStyle,i.defaultFontStyle),s=b.getValueOrDefault(j.fontFamily,i.defaultFontFamily),t=b.fontString(q,r,s),u=k.tickMarkLength,v=b.getValueOrDefault(l.fontColor,i.defaultFontColor),w=b.getValueOrDefault(l.fontSize,i.defaultFontSize),x=b.getValueOrDefault(l.fontStyle,i.defaultFontStyle),y=b.getValueOrDefault(l.fontFamily,i.defaultFontFamily),z=b.fontString(w,x,y),A=b.toRadians(d.labelRotation),B=Math.cos(A),C=(Math.sin(A),d.longestLabelWidth*B);h.fillStyle=p;var D=[];if(o){if(f=!1,m&&(C/=2),(C+j.autoSkipPadding)*d.ticks.length>d.width-(d.paddingLeft+d.paddingRight)&&(f=1+Math.floor((C+j.autoSkipPadding)*d.ticks.length/(d.width-(d.paddingLeft+d.paddingRight)))),g&&d.ticks.length>g)for(;!f||d.ticks.length/(f||1)>g;)f||(f=1),f+=1;n||(f=!1)}var E="right"===e.position?d.left:d.right-u,F="right"===e.position?d.left+u:d.right,G="bottom"===e.position?d.top:d.bottom-u,H="bottom"===e.position?d.top+u:d.bottom;if(b.each(d.ticks,function(a,g){if(void 0!==a&&null!==a){var h=d.ticks.length===g+1,i=f>1&&g%f>0||g%f===0&&g+f>=d.ticks.length;if((!i||h)&&void 0!==a&&null!==a){var l,n;g===("undefined"!=typeof d.zeroLineIndex?d.zeroLineIndex:0)?(l=k.zeroLineWidth,n=k.zeroLineColor):(l=b.getValueAtIndexOrDefault(k.lineWidth,g),n=b.getValueAtIndexOrDefault(k.color,g));var p,q,r,s,t,v,w,x,y,z,B,C="middle";if(o){m||(C="top"===e.position?"bottom":"top"),B=m?"right":"center";var I=d.getPixelForTick(g)+b.aliasPixel(l);y=d.getPixelForTick(g,k.offsetGridLines)+j.labelOffset,z=m?d.top+12:"top"===e.position?d.bottom-u:d.top+u,p=r=t=w=I,q=G,s=H,v=c.top,x=c.bottom}else{"left"===e.position?j.mirror?(y=d.right+j.padding,B="left"):(y=d.right-j.padding,B="right"):j.mirror?(y=d.left-j.padding,B="right"):(y=d.left+j.padding,B="left");var J=d.getPixelForTick(g);J+=b.aliasPixel(l),z=d.getPixelForTick(g,k.offsetGridLines),p=E,r=F,t=c.left,w=c.right,q=s=v=x=J}D.push({tx1:p,ty1:q,tx2:r,ty2:s,x1:t,y1:v,x2:w,y2:x,labelX:y,labelY:z,glWidth:l,glColor:n,rotation:-1*A,label:a,textBaseline:C,textAlign:B})}}}),b.each(D,function(a){if(k.display&&(h.lineWidth=a.glWidth,h.strokeStyle=a.glColor,h.beginPath(),k.drawTicks&&(h.moveTo(a.tx1,a.ty1),h.lineTo(a.tx2,a.ty2)),k.drawOnChartArea&&(h.moveTo(a.x1,a.y1),h.lineTo(a.x2,a.y2)),h.stroke()),j.display){h.save(),h.translate(a.labelX,a.labelY),h.rotate(a.rotation),h.font=t,h.textBaseline=a.textBaseline,h.textAlign=a.textAlign;var c=a.label;if(b.isArray(c))for(var d=0,e=0;d<c.length;++d)h.fillText(""+c[d],0,e),e+=1.5*q;else h.fillText(c,0,0);h.restore()}}),l.display){var I,J,K=0;if(o)I=d.left+(d.right-d.left)/2,J="bottom"===e.position?d.bottom-w/2:d.top+w/2;else{var L="left"===e.position;I=L?d.left+w/2:d.right-w/2,J=d.top+(d.bottom-d.top)/2,K=L?-.5*Math.PI:.5*Math.PI}h.save(),h.translate(I,J),h.rotate(K),h.textAlign="center",h.textBaseline="middle",h.fillStyle=v,h.font=z,h.fillText(l.labelString,0,0),h.restore()}if(k.drawBorder){h.lineWidth=b.getValueAtIndexOrDefault(k.lineWidth,0),h.strokeStyle=b.getValueAtIndexOrDefault(k.color,0);var M=d.left,N=d.right,O=d.top,P=d.bottom,Q=b.aliasPixel(h.lineWidth);o?(O=P="top"===e.position?d.bottom:d.top,O+=Q,P+=Q):(M=N="left"===e.position?d.right:d.left,M+=Q,N+=Q),h.beginPath(),h.moveTo(M,O),h.lineTo(N,P),h.stroke()}}}})}},{}],31:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.scaleService={constructors:{},defaults:{},registerScaleType:function(a,c,d){this.constructors[a]=c,this.defaults[a]=b.clone(d)},getScaleConstructor:function(a){return this.constructors.hasOwnProperty(a)?this.constructors[a]:void 0},getScaleDefaults:function(c){return this.defaults.hasOwnProperty(c)?b.scaleMerge(a.defaults.scale,this.defaults[c]):{}},updateScaleDefaults:function(a,c){var d=this.defaults;d.hasOwnProperty(a)&&(d[a]=b.extend(d[a],c))},addScalesToLayout:function(c){b.each(c.scales,function(b){a.layoutService.addBox(c,b)})}}}},{}],32:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var c=b.noop;a.Title=a.Element.extend({initialize:function(c){var d=this;b.extend(d,c),d.options=b.configMerge(a.defaults.global.title,c.options),d.legendHitBoxes=[]},beforeUpdate:function(){var c=this.chart.options;c&&c.title&&(this.options=b.configMerge(a.defaults.global.title,c.title))},update:function(a,b,c){var d=this;return d.beforeUpdate(),d.maxWidth=a,d.maxHeight=b,d.margins=c,d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeBuildLabels(),d.buildLabels(),d.afterBuildLabels(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:c,beforeSetDimensions:c,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:c,beforeBuildLabels:c,buildLabels:c,afterBuildLabels:c,beforeFit:c,fit:function(){var c=this,d=(c.ctx,b.getValueOrDefault),e=c.options,f=a.defaults.global,g=e.display,h=d(e.fontSize,f.defaultFontSize),i=c.minSize;c.isHorizontal()?(i.width=c.maxWidth,i.height=g?h+2*e.padding:0):(i.width=g?h+2*e.padding:0,i.height=c.maxHeight),c.width=i.width,c.height=i.height},afterFit:c,isHorizontal:function(){var a=this.options.position;return"top"===a||"bottom"===a},draw:function(){var c=this,d=c.ctx,e=b.getValueOrDefault,f=c.options,g=a.defaults.global;if(f.display){var h,i,j=e(f.fontSize,g.defaultFontSize),k=e(f.fontStyle,g.defaultFontStyle),l=e(f.fontFamily,g.defaultFontFamily),m=b.fontString(j,k,l),n=0,o=c.top,p=c.left,q=c.bottom,r=c.right;d.fillStyle=e(f.fontColor,g.defaultFontColor),d.font=m,c.isHorizontal()?(h=p+(r-p)/2,i=o+(q-o)/2):(h="left"===f.position?p+j/2:r-j/2,i=o+(q-o)/2,n=Math.PI*("left"===f.position?-.5:.5)),d.save(),d.translate(h,i),d.rotate(n),d.textAlign="center",d.textBaseline="middle",d.fillText(f.text,0,0),d.restore()}}}),a.plugins.register({beforeInit:function(b){var c=b.options,d=c.title;d&&(b.titleBlock=new a.Title({ctx:b.chart.ctx,options:d,chart:b}),a.layoutService.addBox(b,b.titleBlock))}})}},{}],33:[function(a,b,c){"use strict";b.exports=function(a){function b(a,b){return b&&(e.isArray(b)?Array.prototype.push.apply(a,b):a.push(b)),a}function c(a){if(!a.length)return!1;var b,c,d=[],e=[];for(b=0,c=a.length;c>b;++b){var f=a[b];if(f&&f.hasValue()){var g=f.tooltipPosition();d.push(g.x),e.push(g.y)}}var h=0,i=0;for(b=0,c-d.length;c>b;++b)h+=d[b],i+=e[b];return{x:Math.round(h/d.length),y:Math.round(i/d.length)}}function d(a){var b=a._xScale,c=a._yScale||a._scale,d=a._index,e=a._datasetIndex;return{xLabel:b?b.getLabelForIndex(d,e):"",yLabel:c?c.getLabelForIndex(d,e):"",index:d,datasetIndex:e}}var e=a.helpers;a.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:e.noop,title:function(a,b){var c="",d=b.labels,e=d?d.length:0;if(a.length>0){var f=a[0];f.xLabel?c=f.xLabel:e>0&&f.index<e&&(c=d[f.index])}return c},afterTitle:e.noop,beforeBody:e.noop,beforeLabel:e.noop,label:function(a,b){var c=b.datasets[a.datasetIndex].label||"";return c+": "+a.yLabel},labelColor:function(a,b){var c=b.getDatasetMeta(a.datasetIndex),d=c.data[a.index],e=d._view;return{borderColor:e.borderColor,backgroundColor:e.backgroundColor}},afterLabel:e.noop,afterBody:e.noop,beforeFooter:e.noop,footer:e.noop,afterFooter:e.noop}},a.Tooltip=a.Element.extend({initialize:function(){var b=this,c=a.defaults.global,d=b._options,f=e.getValueOrDefault;e.extend(b,{_model:{xPadding:d.xPadding,yPadding:d.yPadding,xAlign:d.yAlign,yAlign:d.xAlign,bodyFontColor:d.bodyFontColor,_bodyFontFamily:f(d.bodyFontFamily,c.defaultFontFamily),_bodyFontStyle:f(d.bodyFontStyle,c.defaultFontStyle),_bodyAlign:d.bodyAlign,bodyFontSize:f(d.bodyFontSize,c.defaultFontSize),bodySpacing:d.bodySpacing,titleFontColor:d.titleFontColor,_titleFontFamily:f(d.titleFontFamily,c.defaultFontFamily),_titleFontStyle:f(d.titleFontStyle,c.defaultFontStyle),titleFontSize:f(d.titleFontSize,c.defaultFontSize),_titleAlign:d.titleAlign,titleSpacing:d.titleSpacing,titleMarginBottom:d.titleMarginBottom,footerFontColor:d.footerFontColor,_footerFontFamily:f(d.footerFontFamily,c.defaultFontFamily),_footerFontStyle:f(d.footerFontStyle,c.defaultFontStyle),footerFontSize:f(d.footerFontSize,c.defaultFontSize),_footerAlign:d.footerAlign,footerSpacing:d.footerSpacing,footerMarginTop:d.footerMarginTop,caretSize:d.caretSize,cornerRadius:d.cornerRadius,backgroundColor:d.backgroundColor,opacity:0,legendColorBackground:d.multiKeyBackground}})},getTitle:function(){var a=this,c=a._options,d=c.callbacks,e=d.beforeTitle.apply(a,arguments),f=d.title.apply(a,arguments),g=d.afterTitle.apply(a,arguments),h=[];return h=b(h,e),h=b(h,f),h=b(h,g)},getBeforeBody:function(){var a=this._options.callbacks.beforeBody.apply(this,arguments);return e.isArray(a)?a:void 0!==a?[a]:[]},getBody:function(a,c){var d=this,f=d._options.callbacks,g=[];return e.each(a,function(a){var e={before:[],lines:[],after:[]};b(e.before,f.beforeLabel.call(d,a,c)),b(e.lines,f.label.call(d,a,c)),b(e.after,f.afterLabel.call(d,a,c)),g.push(e)}),g},getAfterBody:function(){var a=this._options.callbacks.afterBody.apply(this,arguments);return e.isArray(a)?a:void 0!==a?[a]:[]},getFooter:function(){var a=this,c=a._options.callbacks,d=c.beforeFooter.apply(a,arguments),e=c.footer.apply(a,arguments),f=c.afterFooter.apply(a,arguments),g=[];return g=b(g,d),g=b(g,e),g=b(g,f)},update:function(a){var b,f,g=this,h=g._options,i=g._model,j=g._active,k=g._data,l=g._chartInstance;if(j.length){i.opacity=1;var m=[],n=c(j),o=[];for(b=0,f=j.length;f>b;++b)o.push(d(j[b]));h.itemSort&&(o=o.sort(h.itemSort)),j.length>1&&e.each(o,function(a){m.push(h.callbacks.labelColor.call(g,a,l))}),e.extend(i,{title:g.getTitle(o,k),beforeBody:g.getBeforeBody(o,k),body:g.getBody(o,k),afterBody:g.getAfterBody(o,k),footer:g.getFooter(o,k),x:Math.round(n.x),y:Math.round(n.y),caretPadding:e.getValueOrDefault(n.padding,2),labelColors:m});var p=g.getTooltipSize(i);g.determineAlignment(p),e.extend(i,g.getBackgroundPoint(i,p))}else g._model.opacity=0;return a&&h.custom&&h.custom.call(g,i),g},getTooltipSize:function(a){var b=this._chart.ctx,c={height:2*a.yPadding,width:0},d=a.body,f=d.reduce(function(a,b){return a+b.before.length+b.lines.length+b.after.length},0);f+=a.beforeBody.length+a.afterBody.length;var g=a.title.length,h=a.footer.length,i=a.titleFontSize,j=a.bodyFontSize,k=a.footerFontSize;c.height+=g*i,c.height+=(g-1)*a.titleSpacing,c.height+=g?a.titleMarginBottom:0,c.height+=f*j,c.height+=f?(f-1)*a.bodySpacing:0,c.height+=h?a.footerMarginTop:0,c.height+=h*k,c.height+=h?(h-1)*a.footerSpacing:0;var l=0,m=function(a){c.width=Math.max(c.width,b.measureText(a).width+l)};return b.font=e.fontString(i,a._titleFontStyle,a._titleFontFamily),e.each(a.title,m),b.font=e.fontString(j,a._bodyFontStyle,a._bodyFontFamily),e.each(a.beforeBody.concat(a.afterBody),m),l=d.length>1?j+2:0,e.each(d,function(a){e.each(a.before,m),e.each(a.lines,m),e.each(a.after,m)}),l=0,b.font=e.fontString(k,a._footerFontStyle,a._footerFontFamily),e.each(a.footer,m),c.width+=2*a.xPadding,c},determineAlignment:function(a){var b=this,c=b._model,d=b._chart,e=b._chartInstance.chartArea;c.y<a.height?c.yAlign="top":c.y>d.height-a.height&&(c.yAlign="bottom");var f,g,h,i,j,k=(e.left+e.right)/2,l=(e.top+e.bottom)/2;"center"===c.yAlign?(f=function(a){return k>=a},g=function(a){return a>k}):(f=function(b){return b<=a.width/2},g=function(b){return b>=d.width-a.width/2}),h=function(b){return b+a.width>d.width},i=function(b){return b-a.width<0},j=function(a){return l>=a?"top":"bottom"},f(c.x)?(c.xAlign="left",h(c.x)&&(c.xAlign="center",c.yAlign=j(c.y))):g(c.x)&&(c.xAlign="right",i(c.x)&&(c.xAlign="center",c.yAlign=j(c.y)))},getBackgroundPoint:function(a,b){var c={x:a.x,y:a.y},d=a.caretSize,e=a.caretPadding,f=a.cornerRadius,g=a.xAlign,h=a.yAlign,i=d+e,j=f+e;return"right"===g?c.x-=b.width:"center"===g&&(c.x-=b.width/2),"top"===h?c.y+=i:"bottom"===h?c.y-=b.height+i:c.y-=b.height/2,"center"===h?"left"===g?c.x+=i:"right"===g&&(c.x-=i):"left"===g?c.x-=j:"right"===g&&(c.x+=j),c},drawCaret:function(a,b,c,d){var f,g,h,i,j,k,l=this._view,m=this._chart.ctx,n=l.caretSize,o=l.cornerRadius,p=l.xAlign,q=l.yAlign,r=a.x,s=a.y,t=b.width,u=b.height;"center"===q?("left"===p?(f=r,g=f-n,h=f):(f=r+t,g=f+n,h=f),j=s+u/2,i=j-n,k=j+n):("left"===p?(f=r+o,g=f+n,h=g+n):"right"===p?(f=r+t-o,g=f-n,h=g-n):(g=r+t/2,f=g-n,h=g+n),"top"===q?(i=s,j=i-n,k=i):(i=s+u,j=i+n,k=i));var v=e.color(l.backgroundColor);m.fillStyle=v.alpha(c*v.alpha()).rgbString(),m.beginPath(),m.moveTo(f,i),m.lineTo(g,j),m.lineTo(h,k),m.closePath(),m.fill()},drawTitle:function(a,b,c,d){var f=b.title;if(f.length){c.textAlign=b._titleAlign,c.textBaseline="top";var g=b.titleFontSize,h=b.titleSpacing,i=e.color(b.titleFontColor);c.fillStyle=i.alpha(d*i.alpha()).rgbString(),c.font=e.fontString(g,b._titleFontStyle,b._titleFontFamily);var j,k;for(j=0,k=f.length;k>j;++j)c.fillText(f[j],a.x,a.y),a.y+=g+h,j+1===f.length&&(a.y+=b.titleMarginBottom-h)}},drawBody:function(a,b,c,d){var f=b.bodyFontSize,g=b.bodySpacing,h=b.body;c.textAlign=b._bodyAlign,c.textBaseline="top";var i=e.color(b.bodyFontColor),j=i.alpha(d*i.alpha()).rgbString();c.fillStyle=j,c.font=e.fontString(f,b._bodyFontStyle,b._bodyFontFamily);var k=0,l=function(b){c.fillText(b,a.x+k,a.y),a.y+=f+g};e.each(b.beforeBody,l);var m=h.length>1;k=m?f+2:0,e.each(h,function(g,h){e.each(g.before,l),e.each(g.lines,function(g){m&&(c.fillStyle=e.color(b.legendColorBackground).alpha(d).rgbaString(),c.fillRect(a.x,a.y,f,f),c.strokeStyle=e.color(b.labelColors[h].borderColor).alpha(d).rgbaString(),c.strokeRect(a.x,a.y,f,f),c.fillStyle=e.color(b.labelColors[h].backgroundColor).alpha(d).rgbaString(),c.fillRect(a.x+1,a.y+1,f-2,f-2),c.fillStyle=j),l(g)}),e.each(g.after,l)}),k=0,e.each(b.afterBody,l),a.y-=g},drawFooter:function(a,b,c,d){var f=b.footer;if(f.length){a.y+=b.footerMarginTop,c.textAlign=b._footerAlign,c.textBaseline="top";var g=e.color(b.footerFontColor);c.fillStyle=g.alpha(d*g.alpha()).rgbString(),c.font=e.fontString(b.footerFontSize,b._footerFontStyle,b._footerFontFamily),e.each(f,function(d){c.fillText(d,a.x,a.y),a.y+=b.footerFontSize+b.footerSpacing})}},draw:function(){var a=this._chart.ctx,b=this._view;if(0!==b.opacity){var c=this.getTooltipSize(b),d={x:b.x,y:b.y},f=Math.abs(b.opacity<.001)?0:b.opacity;if(this._options.enabled){var g=e.color(b.backgroundColor);a.fillStyle=g.alpha(f*g.alpha()).rgbString(),e.drawRoundedRectangle(a,d.x,d.y,c.width,c.height,b.cornerRadius),a.fill(),this.drawCaret(d,c,f,b.caretPadding),d.x+=b.xPadding,d.y+=b.yPadding,this.drawTitle(d,b,a,f),this.drawBody(d,b,a,f),this.drawFooter(d,b,a,f)}}}})}},{}],34:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.helpers,d=a.defaults.global;d.elements.arc={backgroundColor:d.defaultColor,borderColor:"#fff",borderWidth:2},a.elements.Arc=a.Element.extend({inLabelRange:function(a){var b=this._view;return b?Math.pow(a-b.x,2)<Math.pow(b.radius+b.hoverRadius,2):!1},inRange:function(a,b){var d=this._view;if(d){for(var e=c.getAngleFromPoint(d,{x:a,y:b}),f=e.angle,g=e.distance,h=d.startAngle,i=d.endAngle;h>i;)i+=2*Math.PI;for(;f>i;)f-=2*Math.PI;for(;h>f;)f+=2*Math.PI;var j=f>=h&&i>=f,k=g>=d.innerRadius&&g<=d.outerRadius;return j&&k}return!1},tooltipPosition:function(){var a=this._view,b=a.startAngle+(a.endAngle-a.startAngle)/2,c=(a.outerRadius-a.innerRadius)/2+a.innerRadius;return{x:a.x+Math.cos(b)*c,y:a.y+Math.sin(b)*c}},draw:function(){var a=this._chart.ctx,b=this._view,c=b.startAngle,d=b.endAngle;a.beginPath(),a.arc(b.x,b.y,b.outerRadius,c,d),a.arc(b.x,b.y,b.innerRadius,d,c,!0),a.closePath(),a.strokeStyle=b.borderColor,a.lineWidth=b.borderWidth,a.fillStyle=b.backgroundColor,a.fill(),a.lineJoin="bevel",b.borderWidth&&a.stroke()}})}},{}],35:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global;a.defaults.global.elements.line={tension:.4,backgroundColor:c.defaultColor,borderWidth:3,borderColor:c.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",fill:!0},a.elements.Line=a.Element.extend({lineToNextPoint:function(a,b,c,d,e){var f=this,g=f._chart.ctx,h=f._view?f._view.spanGaps:!1;b._view.skip&&!h?d.call(f,a,b,c):a._view.skip&&!h?e.call(f,a,b,c):0===b._view.tension?g.lineTo(b._view.x,b._view.y):g.bezierCurveTo(a._view.controlPointNextX,a._view.controlPointNextY,b._view.controlPointPreviousX,b._view.controlPointPreviousY,b._view.x,b._view.y)},draw:function(){function a(a){g._view.skip||h._view.skip?a&&f.lineTo(d._view.scaleZero.x,d._view.scaleZero.y):f.bezierCurveTo(h._view.controlPointNextX,h._view.controlPointNextY,g._view.controlPointPreviousX,g._view.controlPointPreviousY,g._view.x,g._view.y)}var d=this,e=d._view,f=d._chart.ctx,g=d._children[0],h=d._children[d._children.length-1];f.save(),d._children.length>0&&e.fill&&(f.beginPath(),b.each(d._children,function(a,c){var g=b.previousItem(d._children,c),h=b.nextItem(d._children,c);0===c?(d._loop?f.moveTo(e.scaleZero.x,e.scaleZero.y):f.moveTo(a._view.x,e.scaleZero),a._view.skip?d._loop||f.moveTo(h._view.x,d._view.scaleZero):f.lineTo(a._view.x,a._view.y)):d.lineToNextPoint(g,a,h,function(a,b,c){d._loop?f.lineTo(d._view.scaleZero.x,d._view.scaleZero.y):(f.lineTo(a._view.x,d._view.scaleZero),f.moveTo(c._view.x,d._view.scaleZero))},function(a,b){f.lineTo(b._view.x,b._view.y)})},d),d._loop?a(!0):(f.lineTo(d._children[d._children.length-1]._view.x,e.scaleZero),f.lineTo(d._children[0]._view.x,e.scaleZero)),f.fillStyle=e.backgroundColor||c.defaultColor,f.closePath(),f.fill());var i=c.elements.line;f.lineCap=e.borderCapStyle||i.borderCapStyle,f.setLineDash&&f.setLineDash(e.borderDash||i.borderDash),f.lineDashOffset=e.borderDashOffset||i.borderDashOffset,f.lineJoin=e.borderJoinStyle||i.borderJoinStyle,f.lineWidth=e.borderWidth||i.borderWidth,f.strokeStyle=e.borderColor||c.defaultColor,f.beginPath(),b.each(d._children,function(a,c){var e=b.previousItem(d._children,c),g=b.nextItem(d._children,c);0===c?f.moveTo(a._view.x,a._view.y):d.lineToNextPoint(e,a,g,function(a,b,c){f.moveTo(c._view.x,c._view.y)},function(a,b){f.moveTo(b._view.x,b._view.y)})},d),d._loop&&d._children.length>0&&a(),f.stroke(),f.restore()}})}},{}],36:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global,d=c.defaultColor;c.elements.point={radius:3,pointStyle:"circle",backgroundColor:d,borderWidth:1,borderColor:d,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},a.elements.Point=a.Element.extend({inRange:function(a,b){var c=this._view;return c?Math.pow(a-c.x,2)+Math.pow(b-c.y,2)<Math.pow(c.hitRadius+c.radius,2):!1},inLabelRange:function(a){var b=this._view;return b?Math.pow(a-b.x,2)<Math.pow(b.radius+b.hitRadius,2):!1},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y,padding:a.radius+a.borderWidth}},draw:function(){var a,e,f,g,h,i,j=this._view,k=this._chart.ctx,l=j.pointStyle,m=j.radius,n=j.x,o=j.y;if(!j.skip){if("object"==typeof l&&(a=l.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return void k.drawImage(l,n-l.width/2,o-l.height/2);if(!(isNaN(m)||0>=m)){switch(k.strokeStyle=j.borderColor||d,k.lineWidth=b.getValueOrDefault(j.borderWidth,c.elements.point.borderWidth),k.fillStyle=j.backgroundColor||d,l){default:k.beginPath(),k.arc(n,o,m,0,2*Math.PI),k.closePath(),k.fill();break;case"triangle":k.beginPath(),e=3*m/Math.sqrt(3),h=e*Math.sqrt(3)/2,k.moveTo(n-e/2,o+h/3),k.lineTo(n+e/2,o+h/3),k.lineTo(n,o-2*h/3),k.closePath(),k.fill();break;case"rect":i=1/Math.SQRT2*m,k.fillRect(n-i,o-i,2*i,2*i),k.strokeRect(n-i,o-i,2*i,2*i);break;case"rectRot":i=1/Math.SQRT2*m,k.beginPath(),k.moveTo(n-i,o),k.lineTo(n,o+i),k.lineTo(n+i,o),k.lineTo(n,o-i),k.closePath(),k.fill();break;case"cross":k.beginPath(),k.moveTo(n,o+m),k.lineTo(n,o-m),k.moveTo(n-m,o),k.lineTo(n+m,o),k.closePath();break;case"crossRot":k.beginPath(),f=Math.cos(Math.PI/4)*m,g=Math.sin(Math.PI/4)*m,k.moveTo(n-f,o-g),k.lineTo(n+f,o+g),k.moveTo(n-f,o+g),k.lineTo(n+f,o-g),k.closePath();break;case"star":k.beginPath(),k.moveTo(n,o+m),k.lineTo(n,o-m),k.moveTo(n-m,o),k.lineTo(n+m,o),f=Math.cos(Math.PI/4)*m,g=Math.sin(Math.PI/4)*m,k.moveTo(n-f,o-g),k.lineTo(n+f,o+g),k.moveTo(n-f,o+g),k.lineTo(n+f,o-g),k.closePath();break;case"line":k.beginPath(),k.moveTo(n-m,o),k.lineTo(n+m,o),k.closePath();break;case"dash":k.beginPath(),k.moveTo(n,o),k.lineTo(n+m,o),k.closePath()}k.stroke()}}}})}},{}],37:[function(a,b,c){"use strict";b.exports=function(a){var b=(a.helpers,a.defaults.global);b.elements.rectangle={backgroundColor:b.defaultColor,borderWidth:0,borderColor:b.defaultColor,borderSkipped:"bottom"},a.elements.Rectangle=a.Element.extend({draw:function(){function a(a){return i[(k+a)%4]}var b=this._chart.ctx,c=this._view,d=c.width/2,e=c.x-d,f=c.x+d,g=c.base-(c.base-c.y),h=c.borderWidth/2;c.borderWidth&&(e+=h,f-=h,g+=h),b.beginPath(),b.fillStyle=c.backgroundColor,b.strokeStyle=c.borderColor,b.lineWidth=c.borderWidth;var i=[[e,c.base],[e,g],[f,g],[f,c.base]],j=["bottom","left","top","right"],k=j.indexOf(c.borderSkipped,0);-1===k&&(k=0),b.moveTo.apply(b,a(0));for(var l=1;4>l;l++)b.lineTo.apply(b,a(l));b.fill(),c.borderWidth&&b.stroke()},height:function(){var a=this._view;return a.base-a.y},inRange:function(a,b){var c=this._view;return c?c.y<c.base?a>=c.x-c.width/2&&a<=c.x+c.width/2&&b>=c.y&&b<=c.base:a>=c.x-c.width/2&&a<=c.x+c.width/2&&b>=c.base&&b<=c.y:!1},inLabelRange:function(a){var b=this._view;return b?a>=b.x-b.width/2&&a<=b.x+b.width/2:!1},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y}}})}},{}],38:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"bottom"},d=a.Scale.extend({determineDataLimits:function(){var a=this;a.minIndex=0,a.maxIndex=a.chart.data.labels.length-1;var c;void 0!==a.options.ticks.min&&(c=b.indexOf(a.chart.data.labels,a.options.ticks.min),a.minIndex=-1!==c?c:a.minIndex),void 0!==a.options.ticks.max&&(c=b.indexOf(a.chart.data.labels,a.options.ticks.max),a.maxIndex=-1!==c?c:a.maxIndex),a.min=a.chart.data.labels[a.minIndex],a.max=a.chart.data.labels[a.maxIndex]},buildTicks:function(a){var b=this;b.ticks=0===b.minIndex&&b.maxIndex===b.chart.data.labels.length-1?b.chart.data.labels:b.chart.data.labels.slice(b.minIndex,b.maxIndex+1)},getLabelForIndex:function(a,b){return this.ticks[a]},getPixelForValue:function(a,b,c,d){var e=this,f=Math.max(e.maxIndex+1-e.minIndex-(e.options.gridLines.offsetGridLines?0:1),1);if(e.isHorizontal()){var g=e.width-(e.paddingLeft+e.paddingRight),h=g/f,i=h*(b-e.minIndex)+e.paddingLeft;return e.options.gridLines.offsetGridLines&&d&&(i+=h/2),e.left+Math.round(i)}var j=e.height-(e.paddingTop+e.paddingBottom),k=j/f,l=k*(b-e.minIndex)+e.paddingTop;return e.options.gridLines.offsetGridLines&&d&&(l+=k/2),e.top+Math.round(l)},getPixelForTick:function(a,b){return this.getPixelForValue(this.ticks[a],a+this.minIndex,null,b)},getValueForPixel:function(a){var b,c=this,d=Math.max(c.ticks.length-(c.options.gridLines.offsetGridLines?0:1),1),e=c.isHorizontal(),f=e?c.width-(c.paddingLeft+c.paddingRight):c.height-(c.paddingTop+c.paddingBottom),g=f/d;return c.options.gridLines.offsetGridLines&&(a-=g/2),a-=e?c.paddingLeft:c.paddingTop,b=0>=a?0:Math.round(a/g)}});a.scaleService.registerScaleType("category",d,c)}},{}],39:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"left",ticks:{callback:function(a,c,d){var e=d.length>3?d[2]-d[1]:d[1]-d[0];Math.abs(e)>1&&a!==Math.floor(a)&&(e=a-Math.floor(a));var f=b.log10(Math.abs(e)),g="";if(0!==a){var h=-1*Math.floor(f);h=Math.max(Math.min(h,20),0),g=a.toFixed(h)}else g="0";return g}}},d=a.LinearScaleBase.extend({determineDataLimits:function(){function a(a){return h?a.xAxisID===c.id:a.yAxisID===c.id}var c=this,d=c.options,e=(d.ticks,c.chart),f=e.data,g=f.datasets,h=c.isHorizontal();if(c.min=null,c.max=null,d.stacked){var i={},j=!1,k=!1;b.each(g,function(f,g){var h=e.getDatasetMeta(g);void 0===i[h.type]&&(i[h.type]={positiveValues:[],negativeValues:[]});var l=i[h.type].positiveValues,m=i[h.type].negativeValues;
e.isDatasetVisible(g)&&a(h)&&b.each(f.data,function(a,b){var e=+c.getRightValue(a);isNaN(e)||h.data[b].hidden||(l[b]=l[b]||0,m[b]=m[b]||0,d.relativePoints?l[b]=100:0>e?(k=!0,m[b]+=e):(j=!0,l[b]+=e))})}),b.each(i,function(a){var d=a.positiveValues.concat(a.negativeValues),e=b.min(d),f=b.max(d);c.min=null===c.min?e:Math.min(c.min,e),c.max=null===c.max?f:Math.max(c.max,f)})}else b.each(g,function(d,f){var g=e.getDatasetMeta(f);e.isDatasetVisible(f)&&a(g)&&b.each(d.data,function(a,b){var d=+c.getRightValue(a);isNaN(d)||g.data[b].hidden||(null===c.min?c.min=d:d<c.min&&(c.min=d),null===c.max?c.max=d:d>c.max&&(c.max=d))})});this.handleTickRangeOptions()},getTickLimit:function(){var c,d=this,e=d.options.ticks;if(d.isHorizontal())c=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(d.width/50));else{var f=b.getValueOrDefault(e.fontSize,a.defaults.global.defaultFontSize);c=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(d.height/(2*f)))}return c},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},getPixelForValue:function(a,b,c,d){var e,f,g=this,h=g.paddingLeft,i=g.paddingBottom,j=g.start,k=+g.getRightValue(a),l=g.end-j;return g.isHorizontal()?(f=g.width-(h+g.paddingRight),e=g.left+f/l*(k-j),Math.round(e+h)):(f=g.height-(g.paddingTop+i),e=g.bottom-i-f/l*(k-j),Math.round(e))},getValueForPixel:function(a){var b=this,c=b.isHorizontal(),d=b.paddingLeft,e=b.paddingBottom,f=c?b.width-(d+b.paddingRight):b.height-(b.paddingTop+e),g=(c?a-b.left-d:b.bottom-e-a)/f;return b.start+(b.end-b.start)*g},getPixelForTick:function(a,b){return this.getPixelForValue(this.ticksAsNumbers[a],null,null,b)}});a.scaleService.registerScaleType("linear",d,c)}},{}],40:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.LinearScaleBase=a.Scale.extend({handleTickRangeOptions:function(){var a=this,c=a.options,d=c.ticks;if(d.beginAtZero){var e=b.sign(a.min),f=b.sign(a.max);0>e&&0>f?a.max=0:e>0&&f>0&&(a.min=0)}void 0!==d.min?a.min=d.min:void 0!==d.suggestedMin&&(a.min=Math.min(a.min,d.suggestedMin)),void 0!==d.max?a.max=d.max:void 0!==d.suggestedMax&&(a.max=Math.max(a.max,d.suggestedMax)),a.min===a.max&&(a.max++,d.beginAtZero||a.min--)},getTickLimit:c,handleDirectionalChanges:c,buildTicks:function(){var a=this,c=a.options,d=c.ticks,e=b.getValueOrDefault,f=(a.isHorizontal(),a.ticks=[]),g=a.getTickLimit();g=Math.max(2,g);var h,i=d.fixedStepSize&&d.fixedStepSize>0||d.stepSize&&d.stepSize>0;if(i)h=e(d.fixedStepSize,d.stepSize);else{var j=b.niceNum(a.max-a.min,!1);h=b.niceNum(j/(g-1),!0)}var k=Math.floor(a.min/h)*h,l=Math.ceil(a.max/h)*h,m=(l-k)/h;m=b.almostEquals(m,Math.round(m),h/1e3)?Math.round(m):Math.ceil(m),f.push(void 0!==d.min?d.min:k);for(var n=1;m>n;++n)f.push(k+n*h);f.push(void 0!==d.max?d.max:l),a.handleDirectionalChanges(),a.max=b.max(f),a.min=b.min(f),d.reverse?(f.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){var b=this;b.ticksAsNumbers=b.ticks.slice(),b.zeroLineIndex=b.ticks.indexOf(0),a.Scale.prototype.convertTicksToLabels.call(b)}})}},{}],41:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"left",ticks:{callback:function(a,c,d){var e=a/Math.pow(10,Math.floor(b.log10(a)));return 1===e||2===e||5===e||0===c||c===d.length-1?a.toExponential():""}}},d=a.Scale.extend({determineDataLimits:function(){function a(a){return j?a.xAxisID===c.id:a.yAxisID===c.id}var c=this,d=c.options,e=d.ticks,f=c.chart,g=f.data,h=g.datasets,i=b.getValueOrDefault,j=c.isHorizontal();if(c.min=null,c.max=null,d.stacked){var k={};b.each(h,function(e,g){var h=f.getDatasetMeta(g);f.isDatasetVisible(g)&&a(h)&&(void 0===k[h.type]&&(k[h.type]=[]),b.each(e.data,function(a,b){var e=k[h.type],f=+c.getRightValue(a);isNaN(f)||h.data[b].hidden||(e[b]=e[b]||0,d.relativePoints?e[b]=100:e[b]+=f)}))}),b.each(k,function(a){var d=b.min(a),e=b.max(a);c.min=null===c.min?d:Math.min(c.min,d),c.max=null===c.max?e:Math.max(c.max,e)})}else b.each(h,function(d,e){var g=f.getDatasetMeta(e);f.isDatasetVisible(e)&&a(g)&&b.each(d.data,function(a,b){var d=+c.getRightValue(a);isNaN(d)||g.data[b].hidden||(null===c.min?c.min=d:d<c.min&&(c.min=d),null===c.max?c.max=d:d>c.max&&(c.max=d))})});c.min=i(e.min,c.min),c.max=i(e.max,c.max),c.min===c.max&&(0!==c.min&&null!==c.min?(c.min=Math.pow(10,Math.floor(b.log10(c.min))-1),c.max=Math.pow(10,Math.floor(b.log10(c.max))+1)):(c.min=1,c.max=10))},buildTicks:function(){for(var a=this,c=a.options,d=c.ticks,e=b.getValueOrDefault,f=a.ticks=[],g=e(d.min,Math.pow(10,Math.floor(b.log10(a.min))));g<a.max;){f.push(g);var h=Math.floor(b.log10(g)),i=Math.floor(g/Math.pow(10,h))+1;10===i&&(i=1,++h),g=i*Math.pow(10,h)}var j=e(d.max,g);f.push(j),a.isHorizontal()||f.reverse(),a.max=b.max(f),a.min=b.min(f),d.reverse?(f.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),a.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},getPixelForTick:function(a,b){return this.getPixelForValue(this.tickValues[a],null,null,b)},getPixelForValue:function(a,c,d,e){var f,g,h=this,i=h.start,j=+h.getRightValue(a),k=b.log10(h.end)-b.log10(i),l=h.paddingTop,m=h.paddingBottom,n=h.paddingLeft;return h.isHorizontal()?0===j?g=h.left+n:(f=h.width-(n+h.paddingRight),g=h.left+f/k*(b.log10(j)-b.log10(i)),g+=n):0===j?g=h.top+l:(f=h.height-(l+m),g=h.bottom-m-f/k*(b.log10(j)-b.log10(i))),g},getValueForPixel:function(a){var c,d,e=this,f=b.log10(e.end)-b.log10(e.start);return e.isHorizontal()?(d=e.width-(e.paddingLeft+e.paddingRight),c=e.start*Math.pow(10,(a-e.left-e.paddingLeft)*f/d)):(d=e.height-(e.paddingTop+e.paddingBottom),c=Math.pow(10,(e.bottom-e.paddingBottom-a)*f/d)/e.start),c}});a.scaleService.registerScaleType("logarithmic",d,c)}},{}],42:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global,d={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(a){return a}}},e=a.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var a=this,d=a.options,e=d.ticks;a.width=a.maxWidth,a.height=a.maxHeight,a.xCenter=Math.round(a.width/2),a.yCenter=Math.round(a.height/2);var f=b.min([a.height,a.width]),g=b.getValueOrDefault(e.fontSize,c.defaultFontSize);a.drawingArea=d.display?f/2-(g/2+e.backdropPaddingY):f/2},determineDataLimits:function(){var a=this,c=a.chart;a.min=null,a.max=null,b.each(c.data.datasets,function(d,e){if(c.isDatasetVisible(e)){var f=c.getDatasetMeta(e);b.each(d.data,function(b,c){var d=+a.getRightValue(b);isNaN(d)||f.data[c].hidden||(null===a.min?a.min=d:d<a.min&&(a.min=d),null===a.max?a.max=d:d>a.max&&(a.max=d))})}}),a.handleTickRangeOptions()},getTickLimit:function(){var a=this.options.ticks,d=b.getValueOrDefault(a.fontSize,c.defaultFontSize);return Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*d)))},convertTicksToLabels:function(){var b=this;a.LinearScaleBase.prototype.convertTicksToLabels.call(b),b.pointLabels=b.chart.data.labels.map(b.options.pointLabels.callback,b)},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},fit:function(){var a,d,e,f,g,h,i,j,k,l,m,n,o=this.options.pointLabels,p=b.getValueOrDefault(o.fontSize,c.defaultFontSize),q=b.getValueOrDefault(o.fontStyle,c.defaultFontStyle),r=b.getValueOrDefault(o.fontFamily,c.defaultFontFamily),s=b.fontString(p,q,r),t=b.min([this.height/2-p-5,this.width/2]),u=this.width,v=0;for(this.ctx.font=s,d=0;d<this.getValueCount();d++)a=this.getPointPosition(d,t),e=this.ctx.measureText(this.pointLabels[d]?this.pointLabels[d]:"").width+5,0===d||d===this.getValueCount()/2?(f=e/2,a.x+f>u&&(u=a.x+f,g=d),a.x-f<v&&(v=a.x-f,i=d)):d<this.getValueCount()/2?a.x+e>u&&(u=a.x+e,g=d):d>this.getValueCount()/2&&a.x-e<v&&(v=a.x-e,i=d);k=v,l=Math.ceil(u-this.width),h=this.getIndexAngle(g),j=this.getIndexAngle(i),m=l/Math.sin(h+Math.PI/2),n=k/Math.sin(j+Math.PI/2),m=b.isNumber(m)?m:0,n=b.isNumber(n)?n:0,this.drawingArea=Math.round(t-(n+m)/2),this.setCenterPoint(n,m)},setCenterPoint:function(a,b){var c=this,d=c.width-b-c.drawingArea,e=a+c.drawingArea;c.xCenter=Math.round((e+d)/2+c.left),c.yCenter=Math.round(c.height/2+c.top)},getIndexAngle:function(a){var b=2*Math.PI/this.getValueCount();return a*b-Math.PI/2},getDistanceFromCenterForValue:function(a){var b=this;if(null===a)return 0;var c=b.drawingArea/(b.max-b.min);return b.options.reverse?(b.max-a)*c:(a-b.min)*c},getPointPosition:function(a,b){var c=this,d=c.getIndexAngle(a);return{x:Math.round(Math.cos(d)*b)+c.xCenter,y:Math.round(Math.sin(d)*b)+c.yCenter}},getPointPositionForValue:function(a,b){return this.getPointPosition(a,this.getDistanceFromCenterForValue(b))},getBasePosition:function(){var a=this,b=a.min,c=a.max;return a.getPointPositionForValue(0,a.beginAtZero?0:0>b&&0>c?c:b>0&&c>0?b:0)},draw:function(){var a=this,d=a.options,e=d.gridLines,f=d.ticks,g=d.angleLines,h=d.pointLabels,i=b.getValueOrDefault;if(d.display){var j=a.ctx,k=i(f.fontSize,c.defaultFontSize),l=i(f.fontStyle,c.defaultFontStyle),m=i(f.fontFamily,c.defaultFontFamily),n=b.fontString(k,l,m);if(b.each(a.ticks,function(g,h){if(h>0||d.reverse){var l=a.getDistanceFromCenterForValue(a.ticksAsNumbers[h]),m=a.yCenter-l;if(e.display&&0!==h)if(j.strokeStyle=b.getValueAtIndexOrDefault(e.color,h-1),j.lineWidth=b.getValueAtIndexOrDefault(e.lineWidth,h-1),d.lineArc)j.beginPath(),j.arc(a.xCenter,a.yCenter,l,0,2*Math.PI),j.closePath(),j.stroke();else{j.beginPath();for(var o=0;o<a.getValueCount();o++){var p=a.getPointPosition(o,l);0===o?j.moveTo(p.x,p.y):j.lineTo(p.x,p.y)}j.closePath(),j.stroke()}if(f.display){var q=i(f.fontColor,c.defaultFontColor);if(j.font=n,f.showLabelBackdrop){var r=j.measureText(g).width;j.fillStyle=f.backdropColor,j.fillRect(a.xCenter-r/2-f.backdropPaddingX,m-k/2-f.backdropPaddingY,r+2*f.backdropPaddingX,k+2*f.backdropPaddingY)}j.textAlign="center",j.textBaseline="middle",j.fillStyle=q,j.fillText(g,a.xCenter,m)}}}),!d.lineArc){j.lineWidth=g.lineWidth,j.strokeStyle=g.color;for(var o=a.getDistanceFromCenterForValue(d.reverse?a.min:a.max),p=i(h.fontSize,c.defaultFontSize),q=i(h.fontStyle,c.defaultFontStyle),r=i(h.fontFamily,c.defaultFontFamily),s=b.fontString(p,q,r),t=a.getValueCount()-1;t>=0;t--){if(g.display){var u=a.getPointPosition(t,o);j.beginPath(),j.moveTo(a.xCenter,a.yCenter),j.lineTo(u.x,u.y),j.stroke(),j.closePath()}var v=a.getPointPosition(t,o+5),w=i(h.fontColor,c.defaultFontColor);j.font=s,j.fillStyle=w;var x=a.pointLabels,y=x.length,z=x.length/2,A=z/2,B=A>t||t>y-A,C=t===A||t===y-A;0===t?j.textAlign="center":t===z?j.textAlign="center":z>t?j.textAlign="left":j.textAlign="right",C?j.textBaseline="middle":B?j.textBaseline="bottom":j.textBaseline="top",j.fillText(x[t]?x[t]:"",v.x,v.y)}}}}});a.scaleService.registerScaleType("radialLinear",e,d)}},{}],43:[function(a,b,c){"use strict";var d=a(1);d="function"==typeof d?d:window.moment,b.exports=function(a){var b=a.helpers,c={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},e={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},f=a.Scale.extend({initialize:function(){if(!d)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");a.Scale.prototype.initialize.call(this)},getLabelMoment:function(a,b){return this.labelMoments[a][b]},getMomentStartOf:function(a){var b=this;return"week"===b.options.time.unit&&b.options.time.isoWeekday!==!1?a.clone().startOf("isoWeek").isoWeekday(b.options.time.isoWeekday):a.clone().startOf(b.tickUnit)},determineDataLimits:function(){var a=this;a.labelMoments=[];var c=[];a.chart.data.labels&&a.chart.data.labels.length>0?(b.each(a.chart.data.labels,function(b,d){var e=a.parseTime(b);e.isValid()&&(a.options.time.round&&e.startOf(a.options.time.round),c.push(e))},a),a.firstTick=d.min.call(a,c),a.lastTick=d.max.call(a,c)):(a.firstTick=null,a.lastTick=null),b.each(a.chart.data.datasets,function(e,f){var g=[],h=a.chart.isDatasetVisible(f);"object"==typeof e.data[0]&&null!==e.data[0]?b.each(e.data,function(b,c){var e=a.parseTime(a.getRightValue(b));e.isValid()&&(a.options.time.round&&e.startOf(a.options.time.round),g.push(e),h&&(a.firstTick=null!==a.firstTick?d.min(a.firstTick,e):e,a.lastTick=null!==a.lastTick?d.max(a.lastTick,e):e))},a):g=c,a.labelMoments.push(g)},a),a.options.time.min&&(a.firstTick=a.parseTime(a.options.time.min)),a.options.time.max&&(a.lastTick=a.parseTime(a.options.time.max)),a.firstTick=(a.firstTick||d()).clone(),a.lastTick=(a.lastTick||d()).clone()},buildTicks:function(d){var e=this;e.ctx.save();var f=b.getValueOrDefault(e.options.ticks.fontSize,a.defaults.global.defaultFontSize),g=b.getValueOrDefault(e.options.ticks.fontStyle,a.defaults.global.defaultFontStyle),h=b.getValueOrDefault(e.options.ticks.fontFamily,a.defaults.global.defaultFontFamily),i=b.fontString(f,g,h);if(e.ctx.font=i,e.ticks=[],e.unitScale=1,e.scaleSizeInUnits=0,e.options.time.unit)e.tickUnit=e.options.time.unit||"day",e.displayFormat=e.options.time.displayFormats[e.tickUnit],e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0),e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,1);else{var j=e.isHorizontal()?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom),k=e.tickFormatFunction(e.firstTick,0,[]),l=e.ctx.measureText(k).width,m=Math.cos(b.toRadians(e.options.ticks.maxRotation)),n=Math.sin(b.toRadians(e.options.ticks.maxRotation));l=l*m+f*n;var o=j/l;e.tickUnit="millisecond",e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0),e.displayFormat=e.options.time.displayFormats[e.tickUnit];for(var p=0,q=c.units[p];p<c.units.length;){if(e.unitScale=1,b.isArray(q.steps)&&Math.ceil(e.scaleSizeInUnits/o)<b.max(q.steps)){for(var r=0;r<q.steps.length;++r)if(q.steps[r]>=Math.ceil(e.scaleSizeInUnits/o)){e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,q.steps[r]);break}break}if(q.maxStep===!1||Math.ceil(e.scaleSizeInUnits/o)<q.maxStep){e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,Math.ceil(e.scaleSizeInUnits/o));break}++p,q=c.units[p],e.tickUnit=q.name;var s=e.firstTick.diff(e.getMomentStartOf(e.firstTick),e.tickUnit,!0),t=e.getMomentStartOf(e.lastTick.clone().add(1,e.tickUnit)).diff(e.lastTick,e.tickUnit,!0);e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0)+s+t,e.displayFormat=e.options.time.displayFormats[q.name]}}var u;if(e.options.time.min?u=e.getMomentStartOf(e.firstTick):(e.firstTick=e.getMomentStartOf(e.firstTick),u=e.firstTick),!e.options.time.max){var v=e.getMomentStartOf(e.lastTick);0!==v.diff(e.lastTick,e.tickUnit,!0)&&(e.lastTick=e.getMomentStartOf(e.lastTick.add(1,e.tickUnit)))}e.smallestLabelSeparation=e.width,b.each(e.chart.data.datasets,function(a,b){for(var c=1;c<e.labelMoments[b].length;c++)e.smallestLabelSeparation=Math.min(e.smallestLabelSeparation,e.labelMoments[b][c].diff(e.labelMoments[b][c-1],e.tickUnit,!0))},e),e.options.time.displayFormat&&(e.displayFormat=e.options.time.displayFormat),e.ticks.push(e.firstTick.clone());for(var w=1;w<=e.scaleSizeInUnits;++w){var x=u.clone().add(w,e.tickUnit);if(e.options.time.max&&x.diff(e.lastTick,e.tickUnit,!0)>=0)break;w%e.unitScale===0&&e.ticks.push(x)}var y=e.ticks[e.ticks.length-1].diff(e.lastTick,e.tickUnit);(0!==y||0===e.scaleSizeInUnits)&&(e.options.time.max?(e.ticks.push(e.lastTick.clone()),e.scaleSizeInUnits=e.lastTick.diff(e.ticks[0],e.tickUnit,!0)):(e.ticks.push(e.lastTick.clone()),e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0))),e.ctx.restore()},getLabelForIndex:function(a,b){var c=this,d=c.chart.data.labels&&a<c.chart.data.labels.length?c.chart.data.labels[a]:"";return"object"==typeof c.chart.data.datasets[b].data[0]&&(d=c.getRightValue(c.chart.data.datasets[b].data[a])),c.options.time.tooltipFormat&&(d=c.parseTime(d).format(c.options.time.tooltipFormat)),d},tickFormatFunction:function(a,c,d){var e=a.format(this.displayFormat),f=this.options.ticks,g=b.getValueOrDefault(f.callback,f.userCallback);return g?g(e,c,d):e},convertTicksToLabels:function(){var a=this;a.tickMoments=a.ticks,a.ticks=a.ticks.map(a.tickFormatFunction,a)},getPixelForValue:function(a,b,c,d){var e=this,f=a&&a.isValid&&a.isValid()?a:e.getLabelMoment(c,b);if(f){var g=f.diff(e.firstTick,e.tickUnit,!0),h=g/e.scaleSizeInUnits;if(e.isHorizontal()){var i=e.width-(e.paddingLeft+e.paddingRight),j=(i/Math.max(e.ticks.length-1,1),i*h+e.paddingLeft);return e.left+Math.round(j)}var k=e.height-(e.paddingTop+e.paddingBottom),l=(k/Math.max(e.ticks.length-1,1),k*h+e.paddingTop);return e.top+Math.round(l)}},getPixelForTick:function(a,b){return this.getPixelForValue(this.tickMoments[a],null,null,b)},getValueForPixel:function(a){var b=this,c=b.isHorizontal()?b.width-(b.paddingLeft+b.paddingRight):b.height-(b.paddingTop+b.paddingBottom),e=(a-(b.isHorizontal()?b.left+b.paddingLeft:b.top+b.paddingTop))/c;return e*=b.scaleSizeInUnits,b.firstTick.clone().add(d.duration(e,b.tickUnit).asSeconds(),"seconds")},parseTime:function(a){var b=this;return"string"==typeof b.options.time.parser?d(a,b.options.time.parser):"function"==typeof b.options.time.parser?b.options.time.parser(a):"function"==typeof a.getMonth||"number"==typeof a?d(a):a.isValid&&a.isValid()?a:"string"!=typeof b.options.time.format&&b.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),b.options.time.format(a)):d(a,b.options.time.format)}});a.scaleService.registerScaleType("time",f,e)}},{1:1}]},{},[7])(7)}),!function(a){"use strict";if("object"==typeof exports)module.exports=a("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],a);else{if("undefined"==typeof angular||"undefined"==typeof Chart)throw new Error("Chart.js library needs to included, see http://jtblin.github.io/angular-chart.js/");a(angular,Chart)}}(function(a,b){"use strict";function c(){var c={},d={Chart:b,getOptions:function(b){var d=b&&c[b]||{};return a.extend({},c,d)}};this.setOptions=function(b,d){return d?void(c[b]=a.extend(c[b]||{},d)):(d=b,void(c=a.extend(c,d)))},this.$get=function(){return d}}function d(c,d){function f(a,b){return a&&b&&a.length&&b.length?Array.isArray(a[0])?a.length===b.length&&a.every(function(a,c){return a.length===b[c].length}):b.reduce(g,0)>0?a.length===b.length:!1:!1}function g(a,b){return a+b}function h(b,c,d,e){var f=null;return function(g){var h=c.getElementsAtEvent||c.getPointsAtEvent;if(h){var i=h.call(c,g);e!==!1&&a.equals(f,i)!==!1||(f=i,b[d](i,g))}}}function i(d,e){for(var f=a.copy(e.chartColors||c.getOptions(d).chartColors||b.defaults.global.colors),g=f.length<e.chartData.length;f.length<e.chartData.length;)f.push(e.chartGetColor());return g&&(e.chartColors=f),f.map(j)}function j(a){return"object"==typeof a&&null!==a?a:"string"==typeof a&&"#"===a[0]?l(o(a.substr(1))):k()}function k(){var a=[m(0,255),m(0,255),m(0,255)];return l(a)}function l(a){return{backgroundColor:n(a,.2),pointBackgroundColor:n(a,1),pointHoverBackgroundColor:n(a,.8),borderColor:n(a,1),pointBorderColor:"#fff",pointHoverBorderColor:n(a,1)}}function m(a,b){return Math.floor(Math.random()*(b-a+1))+a}function n(a,b){return e?"rgb("+a.join(",")+")":"rgba("+a.concat(b).join(",")+")"}function o(a){var b=parseInt(a,16),c=b>>16&255,d=b>>8&255,e=255&b;return[c,d,e]}function p(a){return a.chartData&&a.chartData.length&&a.chartLabels&&a.chartLabels.length}function q(b,c,d,e,f){return{labels:b,datasets:c.map(function(b,c){var g=a.extend({},e[c],{label:d[c],data:b});return f&&f.length>=c&&a.merge(g,f[c]),g})}}function r(b,c,d,e){var f={labels:b,datasets:[{data:c,backgroundColor:d.map(function(a){return a.pointBackgroundColor}),hoverBackgroundColor:d.map(function(a){return a.backgroundColor})}]};return e&&a.merge(f.datasets[0],e),f}function s(a,b,c){Array.isArray(c.chartData[0])?a.data.datasets.forEach(function(a,c){a.data=b[c]}):a.data.datasets[0].data=b,a.update(),c.$emit("chart-update",a)}function t(a){return!a||Array.isArray(a)&&!a.length||"object"==typeof a&&!Object.keys(a).length}function u(d,e){var f=a.extend({},b.defaults.global,c.getOptions(d),e.chartOptions);return f.responsive}function v(a,b){a&&(a.destroy(),b.$emit("chart-destroy",a))}return function(b){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(g,j){function l(c,d){if(!t(c)&&!a.equals(c,d)){var e=b||g.chartType;e&&m(e)}}function m(b){if(u(b,g)&&0===j[0].clientHeight)return d(function(){m(b)},50,!1);if(p(g)){g.chartGetColor="function"==typeof g.chartGetColor?g.chartGetColor:k;var e=i(b,g),f=j[0],l=f.getContext("2d"),o=Array.isArray(g.chartData[0])?q(g.chartLabels,g.chartData,g.chartSeries||[],e,g.chartDatasetOverride):r(g.chartLabels,g.chartData,e,g.chartDatasetOverride),s=a.extend({},c.getOptions(b),g.chartOptions);v(n,g),n=new c.Chart(l,{type:b,data:o,options:s}),g.$emit("chart-create",n),f.onclick=g.chartClick?h(g,n,"chartClick",!1):a.noop,f.onmousemove=g.chartHover?h(g,n,"chartHover",!0):a.noop}}var n;e&&window.G_vmlCanvasManager.initElement(j[0]),g.$watch("chartData",function(a,c){if(!a||!a.length||Array.isArray(a[0])&&!a[0].length)return void v(n,g);var d=b||g.chartType;return d?n&&f(a,c)?s(n,a,g):void m(d):void 0},!0),g.$watch("chartSeries",l,!0),g.$watch("chartLabels",l,!0),g.$watch("chartOptions",l,!0),g.$watch("chartColors",l,!0),g.$watch("chartDatasetOverride",l,!0),g.$watch("chartType",function(b,c){t(b)||a.equals(b,c)||m(b)}),g.$on("$destroy",function(){v(n,g)}),g.$on("$resize",function(){n&&n.resize()})}}}}b.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",b.defaults.global.tooltips.mode="label",b.defaults.global.elements.line.borderWidth=2,b.defaults.global.elements.rectangle.borderWidth=2,b.defaults.global.legend.display=!1,b.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var e="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return e&&(b.defaults.global.animation=!1),a.module("chart.js",[]).provider("ChartJs",c).factory("ChartJsFactory",["ChartJs","$timeout",d]).directive("chartBase",["ChartJsFactory",function(a){return new a}]).directive("chartLine",["ChartJsFactory",function(a){return new a("line")}]).directive("chartBar",["ChartJsFactory",function(a){return new a("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(a){return new a("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(a){return new a("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(a){return new a("doughnut")}]).directive("chartPie",["ChartJsFactory",function(a){return new a("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(a){return new a("polarArea")}])}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?i+"":"null";case"boolean":case"null":return i+"";case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text+="",rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),angular.module("PKBL",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.tpls","ui.utils","ngRoute","ngResource","ivh.treeview","wysiwyg.module","angularFileUpload","sticky","duScroll","timepickerPop","ui.date","chart.js"]),angular.module("PKBL").config(["$routeProvider",function(a){a.when("/location",{templateUrl:"app/master/location/location-list.html"}),a.when("/designation",{templateUrl:"app/master/designation/designation-list.html"}),a.when("/routingGroup",{templateUrl:"app/master/routingGroup/routingGroup.html"}),a.when("/department",{templateUrl:"app/master/department/department-list.html"}),a.when("/employeeCategory",{templateUrl:"app/master/employeeCategory/employeeCategory-list.html"}),a.when("/institution",{templateUrl:"app/master/institution/institution-list.html"}),a.when("/role",{templateUrl:"app/master/role/role-list.html"}),a.when("/workflow",{templateUrl:"app/master/workflow/workflow.html"}),a.when("/userACL",{templateUrl:"app/master/acl/acl-list.html"}),a.when("/user",{templateUrl:"app/master/user/user-list.html"}),a.when("/committeeGroup",{templateUrl:"app/master/committeeGroup/committeeGroup.html"}),a.when("/incidentType",{templateUrl:"app/master/incidentType/incidentType-list.html"}),a.when("/newIncident",{templateUrl:"app/incident/newIncident/newIncident.html"}),a.when("/incidentList",{templateUrl:"app/incident/incidentList/incidentList.html"}),a.when("/discipline",{templateUrl:"app/master/discipline/discipline-list.html"}),a.when("/patientClass",{templateUrl:"app/master/patientClass/patientClass-list.html"}),a.when("/applicationSetting",{templateUrl:"app/master/applicationSetting/applicationSetting-form.html"}),a.when("/security",{templateUrl:"app/incident-details/security-detail/security-detail.html"}),a.when("/incident/track",{templateUrl:"app/incident/track/incident-track-list.html"}),a.when("/incident/form_old",{templateUrl:"app/incident/form/incident-form.html"}),a.when("/anesthesia",{templateUrl:"app/incident-details/anesthesia/anesthesia-detail.html"}),a.when("/routingGroupUser",{templateUrl:"app/master/routingGroup/routing-group-user/routing-group-user.html"}),a.when("/designationGroup",{templateUrl:"app/master/designationGroup/designationGroup-list.html"}),a.when("/gcs",{templateUrl:"app/master/gcs/gcs-list.html"}),a.when("/incident/form/reporterConfirmation",{templateUrl:"app/incident/form/reporter-confirmation/incident-reporter-confirmation.html"}),a.when("/rootCauseCategory",{templateUrl:"app/master/rootCauseCategory/rootCauseCategory.html"}),a.when("/rootCause",{templateUrl:"app/master/rootCause/rootCause.html"}),a.when("/bloodProductTransfusion",{templateUrl:"app/incident-details/blood-product-transfusion/blood-product-transfusion.html"}),a.when("/incident/followUp",{templateUrl:"app/incident/track/incident-follow-up/incident-follow-up.html"}),a.when("/clinicalAssessmentTreatment",{templateUrl:"app/incident-details/clinical-assessment-treatment/clinical-assessment-treatment.html"}),a.when("/behaviour",{templateUrl:"app/incident-details/behaviour/behaviour.html"}),a.when("/incident/merge",{templateUrl:"app/incident/merge/incident-merge-list.html"}),a.when("/incident/merge/form",{templateUrl:"app/incident/merge/form/incident-merge-form.html"}),a.when("/incident/forward",{templateUrl:"app/incident/forward/incident-forward/incident-forward-list.html"}),a.when("/incident/forward/guest",{templateUrl:"app/incident/forward/incident-forward-guest/incident-forward-guest-list.html"}),a.when("/incident/forward/guest/view",{templateUrl:"app/incident/forward/incident-forward-guest/incident-view/incident-forward-guest-view.html"}),a.when("/appSetting",{templateUrl:"app/setting/application-setting/application-setting.html"}),a.when("/deviceEquipment",{templateUrl:"app/incident-details/device-equipment/device-equipment.html"}),a.when("/environmentSafety",{templateUrl:"app/incident-details/environment-safety/environment-safety.html"}),a.when("/falls",{templateUrl:"app/incident-details/falls/falls.html"}),a.when("/laboratoryPathology",{templateUrl:"app/incident-details/laboratory-pathology/laboratory-pathology.html"}),a.when("/documentation",{templateUrl:"app/incident-details/documentation/documentation.html"}),a.when("/medicationEvents",{templateUrl:"app/incident-details/medication-events/medication-events.html"}),a.when("/peripheralVenousComplications",{templateUrl:"app/incident-details/peripheral-venous-complications/peripheral-venous-complications.html"}),a.when("/pressureInjury",{templateUrl:"app/incident-details/pressure-injury/pressure-injury.html"}),a.when("/others",{
templateUrl:"app/incident-details/others/others.html"}),a.when("/emailTemplate",{templateUrl:"app/master/emailTemplate/emailTemplate.html"}),a.when("/patientLocation",{templateUrl:"app/master/patient-location/patient-location-list.html"}),a.when("/auditTrail",{templateUrl:"app/master/auditTrail/audit-trail-list.html"}),a.when("/editUser",{templateUrl:"app/master/user/edit-user-form/edit-user-form.html"}),a.when("/hospitalOccurrenceReport",{templateUrl:"app/report/all-incident-report/hospital-occurrence-report/hospital-occurrence-report.html"}),a.when("/report/sacScoreReport",{templateUrl:"app/report/all-incident-report/sac-score-report/sac-score-report.html"}),a.when("/report/falls/location",{templateUrl:"app/report/falls/fall-location-report.html"}),a.when("/report/ens/ensSharpIncidence",{templateUrl:"app/report/environment-and-safety/ens-sharp-incidence-report/ens-sharp-incidence-report.html"}),a.when("/report/typeOfIncident",{templateUrl:"app/report/all-incident-report/type-of-incident-report/type-of-incident-report.html"}),a.when("/report/rootCauseClassificationReport",{templateUrl:"app/report/all-incident-report/root-cause-classification-report/root-cause-classification-report.html"}),a.when("/report/SRENumberReport",{templateUrl:"app/report/all-incident-report/sre-number-report/sre-number-report.html"}),a.when("/report/ens/ensSharpInjuryByDepartment",{templateUrl:"app/report/environment-and-safety/ens-sharp-injury-by-department-report/ens-sharp-injury-by-department-report.html"}),a.when("/report/me/meSafetyCommitteebyLocation",{templateUrl:"app/report/medication-events/me-safety-committee-by-location-report/me-safety-committee-by-location-report.html"}),a.when("/report/me/meSafetyCommitteeByStaff",{templateUrl:"app/report/medication-events/me-safety-committee-by-staff-report/me-safety-committee-by-staff-report.html"}),a.when("/report/hamReport",{templateUrl:"app/report/all-incident-report/ham-report/ham-report.html"}),a.when("/report/me/meTypeOfMedicationError",{templateUrl:"app/report/medication-events/me-type-of-medication-error-report/me-type-of-medication-error-report.html"}),a.when("/report/ens/ensWorkplaceAggression",{templateUrl:"app/report/environment-and-safety/ens-workplace-aggression-report/ens-workplace-aggression-report.html"}),a.when("/report/falls/exactLocation",{templateUrl:"app/report/falls/exact-location/fall-exact-location.html"}),a.when("/report/falls/levelInjury",{templateUrl:"app/report/falls/level-injury/fall-level-injury.html"}),a.when("/report/ens/ensWorkplaceAggressionN7",{templateUrl:"app/report/environment-and-safety/ens-workplace-aggression-n7-report/ens-workplace-aggression-n7-report.html"}),a.when("/report/ens/ensSharpInjuryMotDsot",{templateUrl:"app/report/environment-and-safety/ens-sharp-injury-mot-dsot-report/ens-sharp-injury-msot-dsot-report.html"}),a.when("/report/ens/ensPoliceReportLodged",{templateUrl:"app/report/environment-and-safety/ens-police-report-lodged-report/ens-police-report-lodged-report.html"}),a.when("/report/ens/ensSharpInjuryHwc",{templateUrl:"app/report/environment-and-safety/ens-sharp-injury-hwc/ens-sharp-injury-hwc.html"}),a.when("/report/falls/time",{templateUrl:"app/report/falls/fall-by-time/fall-by-time.html"}),a.when("/report/falls/shift",{templateUrl:"app/report/falls/shift/fall-by-shift.html"}),a.when("/report/falls/ageGroup",{templateUrl:"app/report/falls/fall-age-group/fall-age-group.html"}),a.when("/report/falls/discipline",{templateUrl:"app/report/falls/fall-by-discipline/fall-by-discipline.html"}),a.when("/report/falls/departmentWorkload",{templateUrl:"app/report/falls/department-workload/fall-department-workload.html"}),a.when("/report/falls/gender",{templateUrl:"app/report/falls/gender/fall-by-gender.html"}),a.when("/report/falls/activity",{templateUrl:"app/report/falls/activity/fall-by-activity.html"}),a.when("/report/falls/adHoc",{templateUrl:"app/report/falls/ad-hoc/fall-ad-hoc.html"}),a.when("/report/me/levelOfInjury",{templateUrl:"app/report/medication-events/me-level-of-injury-report/me-level-of-injury-report.html"}),a.when("/patientDays",{templateUrl:"app/master/patientDays/patient-days.html"}),a.when("/report/me/meNoOfAlliedHealth",{templateUrl:"app/report/medication-events/me-no-of-allied-health/me-no-of-allied-health.html"}),a.when("/report/me/meNoOfMedicationByDesignationDiscipline",{templateUrl:"app/report/medication-events/me-no-of-medication-by-designation-discipline/me-no-of-medication-by-designation-discipline.html"}),a.when("/report/me/meNoOfMedicationByStaffDesignation",{templateUrl:"app/report/medication-events/me-no-of-medication-by-staff-designation/me-no-of-medication-by-staff-designation.html"}),a.when("/report/me/meNoOfMedicationByDesignationAndSequentialStage",{templateUrl:"app/report/medication-events/me-no-of-medication-by-designation-and-sequential-stage/me-no-of-medication-by-designation-and-sequential-stage.html"}),a.when("/report/falls/inpatientInjury",{templateUrl:"app/report/falls/inpatientInjury/fall-inpatient-injury.html"}),a.when("/report/psi/pressureInjuryReport",{templateUrl:"app/report/pressure-injury/psi-presure-injury-report/psi-pressure-injury-report.html"}),a.when("/report/me/meSequentialStage",{templateUrl:"app/report/medication-events/me-sequential-stage/me-sequential-stage.html"}),a.when("/report/me/meTypeOfMedication",{templateUrl:"app/report/medication-events/me-type-of-medication/me-type-of-medication.html"}),a.when("/aeAttendance",{templateUrl:"app/master/aeAttendance/ae-attendance.html"}),a.when("/shift",{templateUrl:"app/master/shift/shift.html"}),a.when("/report/me/meLevelOfInjury",{templateUrl:"app/report/medication-events/me-level-of-injury-report/me-level-of-injury-report.html"}),a.when("/report/RCAHistory",{templateUrl:"app/report/all-incident-report/rca-history/rca-history-report.html"}),a.when("/rawData",{templateUrl:"app/rawData/raw-data.html"}),a.when("/report/uam/userListingReport",{templateUrl:"app/report/uam/uam-user-listing-report/uam-user-listing-report.html"}),a.when("/report/uam/accessMatrixReport",{templateUrl:"app/report/uam/uam-access-matrix-report/uam-access-matrix-report.html"}),a.when("/unauthorized",{templateUrl:"app/unauthorized/unauthorized.html"}),a.when("/landingPage",{templateUrl:"app/landing-page/landing-page.html"}),a.when("/incident/notFound",{templateUrl:"app/incident/incident-not-found/incident-not-found.html.html"}),a.when("/releaseLock",{templateUrl:"app/setting/release-incident-lock/release-incident-lock.html.html"}),a.when("/incident/form/generalInformation",{templateUrl:"app/incident/form/step/general-information/general-information.html"}),a.when("/incident/form",{templateUrl:"app/incident/form/incident-form-main.html"}),a.when("/incident/form/personInvolved",{templateUrl:"app/incident/form/step/person-involved/person-involved.html"}),a.when("/incident/form/incidentDetails",{templateUrl:"app/incident/form/step/incident-details/incident-details.html"}),a.when("/incident/form/description",{templateUrl:"app/incident/form/step/description/description.html"}),a.when("/incident/form/response",{templateUrl:"app/incident/form/step/comments/comments.html"}),a.when("/incident/form/sac",{templateUrl:"app/incident/form/step/sac/sac.html"}),a.when("/incident/form/rca",{templateUrl:"app/incident/form/step/rca/rca.html"}),a.when("/incident/report",{templateUrl:"app/report/incident-reports/incident-reports.html"}),a.when("/add/incident",{templateUrl:"app/incident/form/add-new-incident/add-new-incident.html"}),a.when("/userManagement",{templateUrl:"app/master/userManagement/user-management.html"}),a.when("/masterData",{templateUrl:"app/master/masterData/master-data.html"}),a.when("/report/uam",{templateUrl:"app/report/uam/uam-report.html"}),a.when("/admissionDays",{templateUrl:"app/master/admissionDays/admission-days.html"}),a.when("/incident/form/print",{templateUrl:"app/incident/form/incident-print/incident-print.html"}),a.when("/emailQueue",{templateUrl:"app/master/emailQueue/emailQueue.html"}),a.when("/incident/form/tab",{templateUrl:"app/incident/form/tab/incident-open-tab.html"}),a.when("/log",{templateUrl:"app/setting/logging-list/logging-list.html"}),a.when("/dashboard",{templateUrl:"app/dashboard/dashboard.html"}),a.otherwise({redirectTo:"/landingPage"})}]).config(["ChartJsProvider",function(a){a.setOptions("Line",{animation:!1,fill:!1,maintainAspectRatio:!1})}]),angular.module("HITS").run(["$rootScope","SessionService",function(a,b){a.safeApply=function(b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():this.$apply(b)},a.loginUrl="/Web/login.html",b.scheduleReminder()}]),angular.module("PKBL").factory("ModuleService",["$resource",function(a){return a("/Module/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},RenderNavigation:{method:"POST",params:{verb:"RenderNavigation"}}})}]).factory("AuthenticationService",["$resource",function(a){return a("/Authentication/:verb",{},{Login:{method:"POST",params:{verb:"Login"}},Logout:{method:"POST",params:{verb:"Logout"}},IsLoggedIn:{method:"POST",params:{verb:"IsLoggedIn"}},GetCurrentUser:{method:"POST",params:{verb:"GetCurrentUser"}},GetCurrentUserAcl:{method:"POST",params:{verb:"GetCurrentUserAcl"}},GetRoleAcl:{method:"POST",params:{verb:"GetRoleAcl"}},SetAuthorizationUser:{method:"POST",params:{verb:"SetAuthorizationUser"}}})}]).factory("HospitalOccurrenceReportService",["$resource",function(a){return a("/HospitalOccurrenceReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GenerateData:{method:"POST",params:{verb:"GenerateData"}}})}]).factory("TypeOfIncidentReportService",["$resource",function(a){return a("/TypeOfIncidentReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateData:{method:"POST",params:{verb:"GenerateData"}}})}]).factory("SRENumberReportService",["$resource",function(a){return a("/SRENumberReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("RCAHistoryReportService",["$resource",function(a){return a("/RCAHistoryReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("RawDataService",["$resource",function(a){return a("/RawDataReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("RootCauseClassificationReportService",["$resource",function(a){return a("/RootCauseClassificationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GenerateData:{method:"POST",params:{verb:"GenerateData"}}})}]).factory("LocationService",["$resource",function(a){return a("/Location/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllLocationByUserId:{method:"POST",params:{verb:"FetchAllLocationByUserId"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},CheckIsCommonArea:{method:"POST",params:{verb:"CheckIsCommonArea"}},FetchAllLocationByCommonArea:{method:"POST",params:{verb:"FetchAllLocationByCommonArea"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("InstitutionService",["$resource",function(a){return a("/Institution/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("RoutingGroupService",["$resource",function(a){return a("/RoutingGroup/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},DeleteRoutingUser:{method:"POST",params:{verb:"DeleteRoutingUser"}},FetchAllLocationByUserId:{method:"POST",params:{verb:"FetchAllLocationByUserId"}},FetchAllDepartmentByUserId:{method:"POST",params:{verb:"FetchAllDepartmentByUserId"}},FetchAllSubmittedStatus:{method:"POST",params:{verb:"FetchAllSubmittedStatus"}},SaveUserRoutingLocation:{method:"POST",params:{verb:"SaveUserRoutingLocation"}},SaveUserRoutingDepartment:{method:"POST",params:{verb:"SaveUserRoutingDepartment"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("CommitteeGroupService",["$resource",function(a){return a("/CommitteeGroup/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByIncidentTypeId:{method:"POST",params:{verb:"FetchAllByIncidentTypeId"}},FetchAllForIncidentCc:{method:"POST",params:{verb:"FetchAllForIncidentCc"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("DesignationService",["$resource",function(a){return a("/Designation/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByEmployeeCategoryId:{method:"POST",params:{verb:"FetchAllByEmployeeCategoryId"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("DepartmentService",["$resource",function(a){return a("/Department/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},FetchAllDropDownList:{method:"POST",params:{verb:"FetchAllDropDownList"}},FetchAllDepartmentByUserId:{method:"POST",params:{verb:"FetchAllDepartmentByUserId"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("EmployeeCategoryService",["$resource",function(a){return a("/EmployeeCategory/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("RoleService",["$resource",function(a){return a("/Role/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("WorkflowService",["$resource",function(a){return a("/Workflow/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},SaveList:{method:"POST",params:{verb:"SaveList"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchNextRoutingGroup:{method:"POST",params:{verb:"FetchNextRoutingGroup"}},FetchReRouteRoutingGroup:{method:"POST",params:{verb:"FetchReRouteRoutingGroup"}},FetchAllRoutingGroup:{method:"POST",params:{verb:"FetchAllRoutingGroup"}},FetchHighestWorkflow:{method:"POST",params:{verb:"FetchHighestWorkflow"}},FetchNextWorkflow:{method:"POST",params:{verb:"FetchNextWorkflow"}}})}]).factory("RoleAclService",["$resource",function(a){return a("/RoleAcl/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("AclService",["$resource",function(a){return a("/Acl/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("UserService",["$resource",function(a){return a("/User/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},FetchAllDeletedWithPagination:{method:"POST",params:{verb:"FetchAllDeletedWithPagination"}},FetchAllIsActiveWithPagination:{method:"POST",params:{verb:"FetchAllIsActiveWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},SaveForm:{method:"POST",params:{verb:"SaveForm"}},Delete:{method:"POST",params:{verb:"Delete"}},UnDelete:{method:"POST",params:{verb:"UnDelete"}},FetchAllForRoutingGroup:{method:"POST",params:{verb:"FetchAllForRoutingGroup"}}})}]).factory("AuditTrailService",["$resource",function(a){return a("/AuditTrail/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}}})}]).factory("UserAuditTrailService",["$resource",function(a){return a("/UserAuditTrail/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},FetchDetailFor:{method:"POST",params:{verb:"FetchDetailFor"}}})}]).factory("UserAuditTrailReportService",["$resource",function(a){return a("/UserAuditTrailReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("UserRoleService",["$resource",function(a){return a("/UserRole/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}}})}]).factory("IncidentTypeService",["$resource",function(a){return a("/IncidentType/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllForSearchIncident:{method:"POST",params:{verb:"FetchAllForSearchIncident"}},FetchAllSimpleModel:{method:"POST",params:{verb:"FetchAllSimpleModel"}},FetchAllByUserId:{method:"POST",params:{verb:"FetchAllByUserId"}},FetchIncidentTemplate:{method:"POST",params:{verb:"FetchIncidentTemplate"}}})}]).factory("IncidentStatusMovementService",["$resource",function(a){return a("/IncidentStatusMovement/:verb",{},{FetchStatus:{method:"POST",params:{verb:"FetchStatus"}},FetchLastStatus:{method:"POST",params:{verb:"FetchLastStatus"}}})}]).factory("ApplicationSettingService",["$resource",function(a){return a("/ApplicationSetting/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},Save:{method:"POST",params:{verb:"Save"}},BulkSave:{method:"POST",params:{verb:"BulkSave"}},BulkSaveEmailTemplateSetting:{method:"POST",params:{verb:"BulkSaveEmailTemplateSetting"}},FetchSapHrSetting:{method:"POST",params:{verb:"FetchSapHrSetting"}},FetchSmtpSetting:{method:"POST",params:{verb:"FetchSmtpSetting"}},FetchHitsSetting:{method:"POST",params:{verb:"FetchHitsSetting"}},FetchEmailTemplateSetting:{method:"POST",params:{verb:"FetchEmailTemplateSetting"}},FetchOneByKey:{method:"POST",params:{verb:"FetchOneByKey"}}})}]).factory("SapHrInterfaceService",["$resource",function(a){return a("/SapHrInterface/:verb",{},{})}]).factory("TempSapHrService",["$resource",function(a){return a("/TempSapHr/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllHistory:{method:"POST",params:{verb:"FetchAllHistory"}},FetchAllHistoryDetail:{method:"POST",params:{verb:"FetchAllHistoryDetail"}},FetchOneToUserModel:{method:"POST",params:{verb:"FetchOneToUserModel"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},FetchAllForIncidentForward:{method:"POST",params:{verb:"FetchAllForIncidentForward"}},FetchAllUserForIncidentForward:{method:"POST",params:{verb:"FetchAllUserForIncidentForward"}},FetchAllUserWithException:{method:"POST",params:{verb:"FetchAllUserWithException"}}})}]).factory("IncidentService",["$resource",function(a){return a("/Incident/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllDraftWithPagination:{method:"POST",params:{verb:"FetchAllDraftWithPagination"}},FetchDraft:{method:"POST",params:{verb:"FetchDraft"}},FetchAllPendingWithPagination:{method:"POST",params:{verb:"FetchAllPendingWithPagination"}},FetchAllForwardWithPagination:{method:"POST",params:{verb:"FetchAllForwardWithPagination"}},FetchPending:{method:"POST",params:{verb:"FetchPending"}},FetchAllClosedWithPagination:{method:"POST",params:{verb:"FetchAllClosedWithPagination"}},FetchForViewCommentsWithPagination:{method:"POST",params:{verb:"FetchForViewCommentsWithPagination"}},FetchClosed:{method:"POST",params:{verb:"FetchClosed"}},FetchForMerge:{method:"POST",params:{verb:"FetchForMerge"}},FetchForForward:{method:"POST",params:{verb:"FetchForForward"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchIncidentRcaCategory:{method:"POST",params:{verb:"FetchIncidentRcaCategory"}},SearchForForward:{method:"POST",params:{verb:"SearchForForward"}},SearchForMerge:{method:"POST",params:{verb:"SearchForMerge"}},SearchPending:{method:"POST",params:{verb:"SearchPending"}},SearchDraft:{method:"POST",params:{verb:"SearchDraft"}},SearchClosed:{method:"POST",params:{verb:"SearchClosed"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},DeleteData:{method:"POST",params:{verb:"DeleteData"}},Restore:{method:"POST",params:{verb:"Restore"}},Submit:{method:"POST",params:{verb:"Submit"}},SubmitToNextLevel:{method:"POST",params:{verb:"SubmitToNextLevel"}},ReRoute:{method:"POST",params:{verb:"ReRoute"}},Close:{method:"POST",params:{verb:"Close"}},ReOpen:{method:"POST",params:{verb:"ReOpen"}},MassReRoute:{method:"POST",params:{verb:"MassReRoute"}},MassClose:{method:"POST",params:{verb:"MassClose"}},MassReOpen:{method:"POST",params:{verb:"MassReOpen"}},MassDelete:{method:"POST",params:{verb:"MassDelete"}},FetchTopFIve:{method:"POST",params:{verb:"FetchTopFIve"}},IsAnyDraft:{method:"POST",params:{verb:"IsAnyDraft"}},CheckIsResponsibleForIncident:{method:"POST",params:{verb:"CheckIsResponsibleForIncident"}},FetchAllMySubmissionWithPagination:{method:"POST",params:{verb:"FetchAllMySubmissionWithPagination"}},FetchAllDeletedIncidentWithPagination:{method:"POST",params:{verb:"FetchAllDeletedIncidentWithPagination"}},FetchMergedIncidents:{method:"POST",params:{verb:"FetchMergedIncidents"}},FetchMainIncidents:{method:"POST",params:{verb:"FetchMainIncidents"}},UpdateReadStatus:{method:"POST",params:{verb:"UpdateReadStatus"}}})}]).factory("IncidentFormService",["$resource",function(a,b){var c={incident_id:0,incident_no:"",reporter_name:"",designation_id:0,department_id:0,employee_category_id:0,incident_type_id:0,incident_sub_type_id:0,is_near_miss:!1,is_witnessed:!1,witness_name:"",witness_contact_no:"",witness_relation_type:"",witness_relation_other_description:"",date_of_occurance:new Date,time_of_occurance:new Date,report_date:new Date,location_id:0,is_potential_sre:!1,sre_description:"",is_potential_media:!1,is_potential_legal:!1,routing_group_id:0,committee_group_id:0,incident_description:"",situation:"",background:"",assessment:"",recommendations:"",sac_likelihood:"",sac_consequences:"",current_tracking_status:"DRAFT",current_tracking_status_holder:"",current_tracking_order_level:0,main_template:"",main_template_value:{},incident_year:0,incident_month:0,incident_sequence:0,Designation:{},Department:{},EmployeeCategory:{},IncidentType:{},IncidentSubType:{},Location:{},RoutingGroup:{},CommitteeGroup:{},PersonInvolveds:[],Attachments:[],RcaCategories:[],Comments:[],Gcs:[],AdditionalCcs:[],is_edited:!0,is_forwarded_to_you:!1,incident_merged:[],is_merged:!1,is_suspected_duplicate:!1},d={is_edited:!0,is_forwarded_to_you:!1,incident_main:"",incident_merged:[],is_merged:!1,is_suspected_duplicate:!1,autopurge:0,form_state_edit:!0,form_action_button_enabled:!0,isHighest:!1,is_custom_role:!1,custom_role_id:0,is_read_only:!1,is_read:!1},e={};e.btnSaveDraft=!1,e.btnForward=!1,e.btnReRoute=!1,e.btnSubmit=!1,e.btnSubmitToNextLevel=!1,e.btnViewHistory=!1,e.btnClose=!1,e.btnReOpen=!1,e.btnBackToMerge=!1,e.btnAddComment=!1,e.btnAddCorrectiveAction=!1,e.btnAddFollowUp=!1,e.btnDelete=!1,e.btnRestore=!1,e.btnBack=!1,e.btnRead=!1,e.btnReadLabel="Read";var f={totalSteps:7,stepIndicatorClass:"steps-7",currentStep:1,steps:[{order:1,completed:!1,selected:!0,showed:!0,validated:!1,acl:"",title:"General Information",url:"/incident/form/generalInformation"},{order:2,completed:!1,selected:!1,showed:!0,validated:!1,title:"Person Involved",acl:"",url:"/incident/form/personInvolved"},{order:3,completed:!1,selected:!1,showed:!0,validated:!1,acl:"",title:"Incident Details",url:"/incident/form/incidentDetails"},{order:4,completed:!1,selected:!1,showed:!0,validated:!1,acl:"",title:"Description",url:"/incident/form/description"},{order:5,completed:!1,selected:!1,showed:!1,validated:!0,acl:"",title:"Response",url:"/incident/form/response"},{order:6,completed:!1,selected:!1,showed:!1,validated:!1,acl:"INCIDENT_TRACK_INCIDENT_SAC_VIEW",title:"SAC",url:"/incident/form/sac"},{order:7,completed:!1,selected:!1,showed:!1,validated:!1,acl:"INCIDENT_TRACK_INCIDENT_RCA_VIEW",title:"Root Cause Analysis",url:"/incident/form/rca"}]},g={};return{set:function(a){c=a},get:function(){return c},setStatusData:function(a){d=a},getStatusData:function(){return d},setWizardData:function(a){f=a},getWizardData:function(){return f},setButtonStateData:function(a){e=a},getButtonStateData:function(){return e},setIncidentAcl:function(a){g=a},getIncidentAcl:function(){return g},initialize:function(){c={incident_id:0,incident_no:"",reporter_name:"",designation_id:0,department_id:0,employee_category_id:0,incident_type_id:0,incident_sub_type_id:0,is_near_miss:!1,is_witnessed:!1,witness_name:"",witness_contact_no:"",witness_relation_type:"",witness_relation_other_description:"",date_of_occurance:new Date,time_of_occurance:new Date,report_date:new Date,location_id:0,is_potential_sre:!1,sre_description:"",is_potential_media:!1,is_potential_legal:!1,routing_group_id:0,committee_group_id:0,incident_description:"",situation:"",background:"",assessment:"",recommendations:"",sac_likelihood:"",sac_consequences:"",current_tracking_status:"DRAFT",current_tracking_status_holder:"DRAFT",current_tracking_order_level:0,main_template:"",main_template_value:{},incident_year:0,incident_month:0,incident_sequence:0,Designation:{},Department:{},EmployeeCategory:{},IncidentType:{},IncidentSubType:{},Location:{},RoutingGroup:{},CommitteeGroup:{},PersonInvolveds:[],Attachments:[],RcaCategories:[],Comments:[],Gcs:[],AdditionalCcs:[],is_edited:!0,is_forwarded_to_you:!1,incident_merged:[],is_merged:!1,is_suspected_duplicate:!1},d={is_edited:!0,is_forwarded_to_you:!1,incident_main:"",incident_merged:[],is_merged:!1,is_suspected_duplicate:!1,autopurge:0,isHighest:!1,is_custom_role:!1,custom_role_id:0,is_read_only:!1,is_read:!1},f={totalSteps:7,stepIndicatorClass:"steps-7",currentStep:1,steps:[{order:1,completed:!1,selected:!0,showed:!0,validated:!1,acl:"",title:"General Information",url:"/incident/form/generalInformation"},{order:2,completed:!1,selected:!1,showed:!0,validated:!1,title:"Person Involved",acl:"",url:"/incident/form/personInvolved"},{order:3,completed:!1,selected:!1,showed:!0,validated:!1,acl:"",title:"Incident Details",url:"/incident/form/incidentDetails"},{order:4,completed:!1,selected:!1,showed:!0,validated:!1,acl:"",title:"Description",url:"/incident/form/description"},{order:5,completed:!1,selected:!1,showed:!1,validated:!0,acl:"",title:"Response",url:"/incident/form/response"},{order:6,completed:!1,selected:!1,showed:!1,validated:!1,title:"SAC",acl:"INCIDENT_TRACK_INCIDENT_SAC_VIEW",url:"/incident/form/sac"},{order:7,completed:!1,selected:!1,showed:!1,validated:!1,acl:"INCIDENT_TRACK_INCIDENT_RCA_VIEW",title:"Root Cause Analysis",url:"/incident/form/rca"}]},e={},e.btnSaveDraft=!1,e.btnForward=!1,e.btnReRoute=!1,e.btnSubmit=!1,e.btnSubmitToNextLevel=!1,e.btnViewHistory=!1,e.btnClose=!1,e.btnReOpen=!1,e.btnBackToMerge=!1,e.btnAddComment=!1,e.btnAddCorrectiveAction=!1,e.btnAddFollowUp=!1,e.btnDelete=!1,e.btnRestore=!1,e.btnBack=!1,e.btnRead=!1}}}]).factory("IncidentTrackListTabService",["$resource",function(a){var b={};return b.incidentPending=!0,b.incidentClosed=!1,b.incidentDeleted=!1,b.incidentFollowUps=!1,b.incidentForwards=!1,b.incidentForwardedToMe=!1,b.incidentDraft=!1,b.incidentMySubmission=!1,{initialize:function(){var a={};a.incidentPending=!0,a.incidentClosed=!1,a.incidentDeleted=!1,a.incidentFollowUps=!1,a.incidentForwards=!1,a.incidentForwardedToMe=!1,a.incidentDraft=!1,a.incidentMySubmission=!1},setState:function(a){b=a},getState:function(){return b}}}]).factory("IncidentFollowUpFormService",["$resource",function(a){var b={};return{set:function(a){b=a},get:function(){return b}}}]).factory("IncidentCommentService",["$resource",function(a){return a("/IncidentComment/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithReporterView:{method:"POST",params:{verb:"FetchAllWithReporterView"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchFollowUpByUser:{method:"POST",params:{verb:"FetchFollowUpByUser"}},FetchFollowUpSentByUser:{method:"POST",params:{verb:"FetchFollowUpSentByUser"}},FetchAllForViewComments:{method:"POST",params:{verb:"FetchAllForViewComments"}}})}]).factory("RoutingGroupFormService",["$resource",function(a){var b={};return{set:function(a){b=a},get:function(){return b}}}]).factory("DisciplineService",["$resource",function(a){return a("/Discipline/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("PatientClassService",["$resource",function(a){return a("/PatientClass/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("PatientDaysService",["$resource",function(a){return a("/PatientDays/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("OperationDaysService",["$resource",function(a){return a("/OperationDays/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("AEAttendanceService",["$resource",function(a){return a("/AEAttendance/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("AdmissionDaysService",["$resource",function(a){return a("/AdmissionDays/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("ShiftService",["$resource",function(a){return a("/Shift/:verb",{},{
FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("PatientLocationService",["$resource",function(a){return a("/PatientLocation/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("IncidentSubTypeService",["$resource",function(a){return a("/IncidentSubType/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllByIncidentType:{method:"POST",params:{verb:"FetchAllByIncidentType"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("IncidentTypeReportService",["$resource",function(a){return a("/IncidentTypeReport/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllByUserId:{method:"POST",params:{verb:"FetchAllByUserId"}}})}]).factory("DesignationGroupService",["$resource",function(a){return a("/DesignationGroup/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("EmailTemplateService",["$resource",function(a){return a("/EmailTemplate/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("EmailQueueService",["$resource",function(a){return a("/EmailQueue/:verb",{},{FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}}})}]).factory("GcsService",["$resource",function(a){return a("/Gcs/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("FileService",["$resource",function(a){return a("/File/:verb",{},{Download:{method:"POST",params:{verb:"Download"}}})}]).factory("GcsDetailService",["$resource",function(a){return a("/GcsDetail/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll",gcsId:"@gcs_id"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("RootCauseCategoryService",["$resource",function(a){return a("/RootCauseCategory/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("RootCauseService",["$resource",function(a){return a("/RootCause/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("IncidentRcaCategoryService",["$resource",function(a){return a("/IncidentRcaCategory/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}}})}]).factory("IncidentMergeService",["$resource",function(a){return a("/IncidentMerge/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},SearchForMerge:{method:"POST",params:{verb:"SearchForMerge"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchSuspectedIncident:{method:"POST",params:{verb:"FetchSuspectedIncident"}},Unmerge:{method:"POST",params:{verb:"Unmerge"}}})}]).factory("IncidentMergeFormService",["$resource",function(a){var b={};return{set:function(a){b=a},get:function(){return b}}}]).factory("IncidentForwardService",["$resource",function(a){return a("/IncidentForward/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllForwardWithPagination:{method:"POST",params:{verb:"FetchAllForwardWithPagination"}},FetchAllForwardByMeWithPagination:{method:"POST",params:{verb:"FetchAllForwardByMeWithPagination"}},FetchAllForwardToMeWithPagination:{method:"POST",params:{verb:"FetchAllForwardToMeWithPagination"}},FetchGuestIncidentForward:{method:"POST",params:{verb:"FetchGuestIncidentForward"}},FetchOne:{method:"POST",params:{verb:"FetchOne"}},SearchForForward:{method:"POST",params:{verb:"SearchForForward"}},Save:{method:"POST",params:{verb:"Save"}},SaveOne:{method:"POST",params:{verb:"SaveOne"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("IncidentForwardFormService",["$resource",function(a){var b={};return{set:function(a){b=a},get:function(){return b}}}]).factory("PatientViewService",["$resource",function(a){return a("/PatientView/:verb",{},{FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}}})}]).factory("WorkflowEmployeeService",["$resource",function(a){return a("/WorkflowEmployee/:verb",{},{Fetch:{method:"POST",params:{verb:"Fetch"}},Save:{method:"POST",params:{verb:"Save"}}})}]).factory("IncidentSacSevereService",["$resource",function(a){return a("/IncidentSacSevere/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("IncidentTypeSevereService",["$resource",function(a){return a("/IncidentTypeSevere/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}}})}]).factory("SacScoreReportService",["$resource",function(a){return a("/SacScoreReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsIncidenceReportService",["$resource",function(a){return a("/EnsIncidenceReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsSharpInjuryByDepartmentReportService",["$resource",function(a){return a("/EnsSharpInjuryByDepartment/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsSharpInjuryMsotDsotReportService",["$resource",function(a){return a("/EnsSharpInjuryMsotDsotReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsSharpInjuryAmongHcwReportService",["$resource",function(a){return a("/EnsSharpInjuryAmongHcwReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsWorkplaceAggressionReportService",["$resource",function(a){return a("/EnsWorkplaceAggressionReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsWorkplaceAggressionN7ReportService",["$resource",function(a){return a("/EnsWorkplaceAggressionN7Report/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("EnsPoliceReportLodgedReportService",["$resource",function(a){return a("/EnsPoliceReportLodgedReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("PressureInjuryReportService",["$resource",function(a){return a("/PressureInjuryReport/:verb",{},{GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}}})}]).factory("FallsLocationReportService",["$resource",function(a){return a("/FallsLocationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("IncidentReportService",["$resource",function(a){return a("/IncidentReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsExactLocationReportService",["$resource",function(a){return a("/FallsExactLocationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsActivityReportService",["$resource",function(a){return a("/FallsActivityReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsLevelInjuryReportService",["$resource",function(a){return a("/FallsLevelInjuryReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsInpatientInjuryReportService",["$resource",function(a){return a("/FallsInpatientInjuryReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("HAMReportService",["$resource",function(a){return a("/HAMReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}},GenerateData:{method:"POST",params:{verb:"GenerateData"}}})}]).factory("MeSafetyCommitteeByLocationReportService",["$resource",function(a){return a("/MeSafetyCommitteeByLocationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeSafetyCommitteeByStaffReportService",["$resource",function(a){return a("/MeSafetyCommitteeByStaffReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeNoOfMedicationByStaffDesignationReportService",["$resource",function(a){return a("/MeNoOfMedicationErrorAndNearMissByStaffDesignationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeLevelInjuryReportService",["$resource",function(a){return a("/MeLevelInjuryReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeTypeOfMedicationReportService",["$resource",function(a){return a("/MeTypeOfMedicationReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeTypeOfMedicationErrorReportService",["$resource",function(a){return a("/MeTypeOfMedicationErrorReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeSequentialStageReportService",["$resource",function(a){return a("/MeSequentialStageReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeNoOfMedicationByDesignationAndSequentialStageReportService",["$resource",function(a){return a("/MeNoOfMedicationErrorByDesignationAndSequentialStageReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeNoOfMedicationByDesignationDisciplineReportService",["$resource",function(a){return a("/MeNoOfMedicationErrorAndNearMissByDesignationAndDisciplineReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("MeAlliedHealthReportService",["$resource",function(a){return a("/MeNoOfAlliedHealthReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsDepartmentWorkloadReportService",["$resource",function(a){return a("/FallsDepartmentWorkloadReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsTimeOccurenceReportService",["$resource",function(a){return a("/FallsTimeOccurenceReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsShiftReportService",["$resource",function(a){return a("/FallsShiftReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsAgeGroupReportService",["$resource",function(a){return a("/FallsAgeGroupReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsDisciplineReportService",["$resource",function(a){return a("/FallsDisciplineReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("FallsGenderReportService",["$resource",function(a){return a("/FallsGenderReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("UserListingReportService",["$resource",function(a){return a("/UserListingReport/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("UserAccessMatrixReportService",["$resource",function(a){return a("/UserAccessMatrix/:verb",{},{GeneratePdf:{method:"POST",params:{verb:"GeneratePdf"}},GenerateXls:{method:"POST",params:{verb:"GenerateXls"}}})}]).factory("IncidentLockService",["$resource",function(a){return a("/IncidentLock/:verb",{},{LockIncident:{method:"POST",params:{verb:"LockIncident"}},ReleaseLock:{method:"POST",params:{verb:"ReleaseLock"}},DeleteLock:{method:"POST",params:{verb:"DeleteLock"}},ExtendLockExpiredTime:{method:"POST",params:{verb:"ExtendLockExpiredTime"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}}})}]).factory("IncidentPrintService",["$resource",function(a){return a("/IncidentPrint/:verb",{},{Print:{method:"POST",params:{verb:"Print"}}})}]).factory("LogService",["$resource",function(a){return a("/Log/:verb",{},{FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}}})}]).factory("DashboardService",["$resource",function(a){return a("/Dashboard/:verb",{},{GetIncidentMonthlyData:{method:"POST",params:{verb:"GetIncidentMonthlyData"}},GenerateIncidentMonthlyXls:{method:"POST",params:{verb:"GenerateIncidentMonthlyXls"}},GetIncidentRateMonthlyData:{method:"POST",params:{verb:"GetIncidentRateMonthlyData"}},GenerateIncidentRateMonthlyXls:{method:"POST",params:{verb:"GenerateIncidentRateMonthlyXls"}},GetContaminatedSharpInjuryData:{method:"POST",params:{verb:"GetContaminatedSharpInjuryData"}},GetContaminatedSharpInjuryXls:{method:"POST",params:{verb:"GetContaminatedSharpInjuryXls"}},GetIncidentRateYearlyData:{method:"POST",params:{verb:"GetIncidentRateYearlyData"}},GetIncidentRateYearlyXls:{method:"POST",params:{verb:"GetIncidentRateYearlyXls"}},GetIncidentOutstandingData:{method:"POST",params:{verb:"GetIncidentOutstandingData"}},GetIncidentOutstandingXls:{method:"POST",params:{verb:"GetIncidentOutstandingXls"}}})}]).factory("MedicationNameService",["$resource",function(a){return a("/MedicationName/:verb",{},{FetchOne:{method:"POST",params:{verb:"FetchOne"}},FetchAll:{method:"POST",params:{verb:"FetchAll"}},FetchAllWithPagination:{method:"POST",params:{verb:"FetchAllWithPagination"}},Save:{method:"POST",params:{verb:"Save"}},Delete:{method:"POST",params:{verb:"Delete"}},FetchAllByInstitutionId:{method:"POST",params:{verb:"FetchAllByInstitutionId"}}})}]).factory("IncidentMorbidityReviewService",["$resource",function(a){return a("/IncidentMorbidityReview/:verb",{},{FetchByIncidentId:{method:"POST",params:{verb:"FetchByIncidentId"}},Save:{method:"POST",params:{verb:"Save"}}})}]),angular.module("PKBL").value("UserSessionData",null).value("UserAclSessionData",null).factory("ToastMessageService",function(){var a=function(){},b=[];return{addAlerts:function(c,d){b.push({type:c,msg:d}),a()},registerCallback:function(b){a=b},getAlerts:function(){return b},removeAlerts:function(){return b=[]}}}).factory("SessionService",["$rootScope","$location","$interval","$timeout","$modal","AuthenticationService","IncidentService","ApplicationSettingService","UserSessionData","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n=!1,o=0,p=!1,q=function(c){var d=f.IsLoggedIn(function(){var e=d.data;if(e){s.setSession(i);var f=i;"anonymous"==f.user_name&&s.setIsAnonymous();var k=j;s.setAclSession(k);var l=h.FetchOneByKey({keyValue:"SESSION_TIMEOUT_REMINDER"},function(){var a=l.data.setting_value_default;a=60*a*1e3;var b=0,d=h.FetchOneByKey({keyValue:"SESSION_TIMEOUT"},function(){b=d.data.setting_value_default,c(a,b)})});if(s.isAnonymous())b.path("/incident/form");else if(null==b.path()||""==b.path()||"/"==b.path()){if(f.is_reporter)var m=g.IsAnyDraft(function(){var a=m.data;a?b.path(f.default_landing_page):b.path("/incident/form")});b.path(f.default_landing_page)}else window.location="/Web/index.html#"+b.$$url}else var l=h.FetchOneByKey({keyValue:"MAINTENANCE_MODE"},function(){var c=l.data.setting_value_default;"true"==c?window.location="/Web/maintenance.html#/":b.$$absUrl.indexOf("login")<=-1&&(null==b.path()||""==b.path()||b.path()?window.location=a.loginUrl+"#/":window.location=a.loginUrl+"#"+b.$$url)})})},r=function(b){e.open({templateUrl:"internal/session-reminder/session-reminder.html",controller:"SessionReminderCtrl",backdrop:"static",resolve:{SessionTimeoutData:function(){return b}}}).result.then(function(b){if(b){angular.isDefined(m)&&(d.cancel(m),m=void 0);var c=s.getSession();f.Login({username:c.user_name,password:c.password,institutionId:c.institution_id},function(){o=0,p=!1})}else angular.isDefined(m)&&(d.cancel(m),m=void 0),f.Logout({},function(){o=0,p=!1,window.location=a.loginUrl+"#/"})})},s={setSession:function(a){k=a},getSession:function(){return k},setAclSession:function(a){l=a},getAclSession:function(){return l},setAcltoScope:function(a){a.currentAcl={},angular.forEach(l,function(b,c){a.currentAcl[b]=!0})},setIsAnonymous:function(){n=!0},isAnonymous:function(){return n},scheduleReminder:function(){q(function(b,e){c(function(){if(o++,o>b/6e4-1&&!p){var c=e,g=60*c*1e3;m=d(function(){f.Logout({},function(){window.location=a.loginUrl+"#/"})},g),r(c),p=!0}var h=f.GetCurrentUser(function(){var b=h.data;null==b||null==b.user_id?f.Logout({},function(){window.location=a.loginUrl+"#/"}):b.user_id!=i.user_id&&window.location.reload()},function(){f.Logout({},function(){window.location=a.loginUrl+"#/"})})},6e4)})},resetReminder:function(){o=0}};return s}]).factory("LoadingScreenService",function(){var a=function(){},b=!0;return{showLoading:function(){b=!0,a()},registerCallback:function(b){a=b},hideLoading:function(){b=!1,a()},getIsShow:function(){return b}}}).config(["$httpProvider",function(a){var b,c=function(a,c,d){function e(a){return b=b||c.get("$http"),b.pendingRequests.length<1&&d.hideLoading(),a}function f(e){return b=b||c.get("$http"),b.pendingRequests.length<1&&d.hideLoading(),a.reject(e)}return function(a){return d.showLoading(),a.then(e,f)}};c.$inject=["$q","$injector","LoadingScreenService"],a.responseInterceptors.push(c)}]),angular.module("HITS").controller("LocationListCtrl",["$rootScope","$scope","$resource","$location","$modal","$timeout","LocationService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j){i.setAclSession(j),i.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_LOCATION_VIEW||d.path("/unauthorized");var k=function(a){e.open({templateUrl:"app/master/location/location-form/location-form.html",controller:"LocationFormCtrl",resolve:{locationData:function(){return a}}}).result.then(function(a){var c="",d="";a?(c="success",d="Data Saved Succesfully"):(c="danger",d="Save location failed"),h.addAlerts(c,d),b.Fetch()})};b.rows=[10,25,50,100],b.SearchQuery={page:1,row_per_page:10,sort_by:"location_name",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["location_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=g.FetchAllWithPagination(b.SearchQuery,function(){b.locations=[];var c=a.data.list;b.SearchQuery.total_data=a.data.totalData,b.locations=c})},b.onCreateNew=function(){k({})},b.onRowEdit=function(a){k(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Location ["+a.location_name+"] ?");if(c)var d=g.Delete(a,function(){var a="",c="";d?(a="success",c="Data Deleted Succesfully"):(a="danger",c="Delete location failed"),h.addAlerts(a,c),b.Fetch()})},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("LocationFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","LocationService","locationData",function(a,b,c,d,e,f,g){b.location=g,b.validate={},b.validate.button=!0,b.location.location_name&&(b.validate.location_name=!1),b.isValid=function(){return b.location.location_name?b.validate.location_name=!1:b.validate.location_name=!0,b.validate.location_name?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){var a=!0;e.close(a)})}}}]),angular.module("PKBL").directive("toastMessage",function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"directive/toastMessage/toastMessage.html",link:function(a,b,c,d){},controller:["$scope","$timeout","ToastMessageService",function(a,b,c){c.registerCallback(function(){a.alerts=c.getAlerts(),b(function(){a.alerts=c.removeAlerts()},3e3)})}]}}),angular.module("PKBL").controller("LoginCtrl",["$rootScope","$scope","$resource","$location","AuthenticationService","InstitutionService","SessionService","ToastMessageService",function(a,b,c,d,e,f,g,h){b.userInfo={};var i="MIIJJQIBAAKCAgEA1CIsTXf3wdle4BMOY67TxiXtMKr5+0laaI9w1Fe4xBl0qIeRDP1KlYvGpe0Np3eOT/y/u/3RMr3WGgAxZWckXTtEwIFvkuHBljYVwBuH0/nguAikqyYEUy46svQnHdFdDzhrp9LVEv6/hi6ljVuFWah53vabOV3PQccr3VCpVRCUA5KUsdZq/u+ANI9wMOcr6v3dFvLEYrBySbrL3AFqR3Oku6mjYGgEvX96qb/6ammaSrWKYA3KkKezRoW5aKzf1th0LPaLa/lvGyLllfYzP/HOppKHnCifIQk0r1nuFrpFj8Z8PqQnZ4jscvuX5bldzYeQXpd6qwFkNzIGM4GSbBKkteF/b3BF0qhC6kRFyHetG9NJeivjyUvy2bSNkzruY7Zxg8q1C5oj5m/3HyFvXZTvtfD1eth0ARGNJIRbskrfezXGLjZBo1dURKktZUbikIaYM8DrkMEVsRpsniMbSo5QaAk46MiigYHBDcnlnMc8ddzfTyGFzNc4FU+EI/QIRPYnQae4r/U7TqocOZrSHGGXvfESooWR8oAcX6XAGkkaiMNCegFRbzfD2/neJD2QS/9q7LYnFIa5QSamub/jDuaUWVhaOB/+l03STBMcvSGjb+8PmCi5gcU+45oojBoYtr+zZwDBZZJhMrEzzWxSiR1aIlvYtuA1xleMqFErqEMCASMCggIABg+a3aRXiTIYp1EAaT+CZL9BSoiKzKpTCk09vOyQQB38BNCsX3TzgJ2X9hy3P0yPCZmB0ivSxu97JVB2cJyMAqnsBYAKgIobeVIAnxa6vOnh2V9VKXYdYXZZctPGmnOyM6KGu6bwJR04rA/2GftM8+7e6Rz9HuVsUlYl0x+Pzzr86ijCa3snoOJFfdg2Z8wXMpmJ+VdkslzQELwxtdQnm6Q36BrKJ1Nt2YdMpcOoEas+7DESlQe1VJcTwC+01xrh0vA91WYhPZlpkw+gKNsmCSQqecmsGmePhJnc7xEysDE1L/5bUj80U2pP5gcwOcN3tWpF9BL04FB/NMbqO/xjRN1BFXvmmgksXAyYeGl2QeLrO+1KhZ+MZZhakE/PJwId6HB5uYxdg0ePGaiYBzypUAxwzTg3pgNz2P/MZRrSeXLC/wHaUTkwe5xCZMooMvHVwnE3MHUBy2FXDxGDYMI1iH4VuMV4/c9nQoe6d4/z2EoJbAKVJnT+85Yp/4FivHo8rR4QKl6fUqGsGl84QHTGuMct+I4f9N2actflEACQCQnyiuD/8/hGG8URIZvW8uxhzcdx3nfCPhoEk6PuvnNdWpC65Dc1FZCc9a7rkz7t4scUuCwFmsZ486O19AAS7ZvsXQ0puoWZ8YheVYRz/Ocy6hGCQnQp2lG9IOIY5ge+cOMCggEBAPXi9eDELOdX5fuKy9H6ofl7cDdxVkUdDdpt5pphMT47tZcLcy1aqkT+vKF4OSKd6CSLplS1yugOvMWsZymeffStaNFtdyqkwMKcnDwT9rcpQluTVkvfB83QN3hKG8cM6r4Gz4Q+bnmDJSoAROXUHQQySES70r2+eylOM+eunRRe/rCE6z4cfBiOeYt7JWCpFia0eRMGTnMwTCCoiWvoKmKP2Id3UubASzZa9FvLD2Zk8finZrNJH7DzJLQxH/NChBbLJJQbl+AXqKVoZ40yS76F3QOGyY7RoN3xsyW8JinfFQYiUyBejSzDkGLfXI5KGpPmjrxvpw4qiesyh1iQ6f0CggEBANzb0BA0M0fdVvPfqAcgJHgIeiqn3xaU150jODDaDLKb5r7BsmyRboyUp8G16LOrg7z4AOyj/XeOmVLu6q/2maWJNSN/nDn7/Dej4Mmad39/uLB5PXXNuqReaj0sR868tpNRVYVvxvQBQ8lCcDW67aPAaT2/OmTsBCYr8rdVwildmylsi3nT58IlOhnwREL9wv+aSW+t2cZD8tsipiYms4phs3jMzCj7WBART0+v3oXMN8IyG6NPd0cl7QjRkAbdKQY8ATf8rXpxV740wutkcCtIZObEpXdekYVs1HHV6Z7o6Ozck5xW0sC38TJ43UISbiSkfb2wNqUvvYLyremRTz8CggEAd2486YPbS8ubl29NDjfoRfogj/U4h/grTNZLb45LHjpCQgzgK/jWXAazZF73LhIu7S3jEzO6U3TfWLLTBZYf698y6WEN/sUNK1Nh1AmyWPbIdZ9VzRSOww1cxWXS+kgaPwqfTtx+zU5T4TNUqiUyqkRO/NBByeAtMVHeslwgaPrwvCNNsHQ8RnEWdvKrwTwvVKDNF9594C1mzgi3xrKYPoBh22XXzyozKQebQoczXZ6+q/mJp4nq0ko2ZiZ9O6P3A8HBT0CaOaUXZkinUzWvwvCP68UgEitOIqiY19BqTtoRhqL1LPq5mWZNcdo0RRyt0s8SIQMH/5EBKRiK4d/8nwKCAQAMntiweALuKee2KgmaAdYyvqflLioBSlV2sY4urV/PsSMg195PWMR9D88SYiqN7IsvXqD3lFegboxrI5hh05PAUPu44rh4V4rBWdJUqb2vg6QnV2KZBHEQtPAgwLOlad6ME0a3KvVtB2L1jsSVWyOFszk2unhdidRZ8+H72QPH2XaUpx3ptFZi3Y5KoAPmkihmYJZ7aQUhRbYbJo0mwGIH6FNl/RL7BwxYsIgwcHMdlqQZubhvu2XmzveaGpqEDKNCL1CG2z0c8IiryIAqtUg8/NKQ2Al0iQ+hOWs5tHO/8A1PXQ+/ynJxaZjBDjiHbsR3H1ekcHgmskVX8Jw5O4DfAoIBABE8JDfN2fbY7/yVIyNwXhhCK8W9TswIq04KxULLRwy4oAxtH23IlAsqg4hfUEc4Yo6no/r/H3Jo25cD3d+dsHZ3pIDFw0jPtoEPfWPnlj5a4TUqwq1GKGOW5KaTCN8bW+Y6AyAlUKNxOFLh54Hm2sM64QghnHALCDxs0Rh0gLo3/A8XjEv1fihLKrGqDo/5m3Jbgcd2zUP8QtGX9MDDii5XyzyWlZgKPKi4c6UQpWJ/UXrF2OqBWeZMH4QEN73NjmY595RjhlbGq7zfSkeOM5EAr3TokW8WTAwVXG2Kaj/X07BfZROnvZL1NlhS5bvkMSRA2288NPyesvdLMcbeKOY=";b.doEncrypt=function(a){var b=new JSEncrypt;b.setKey(i);var c=b.encrypt(a);return c},b.onLogin=function(a){if(!a||null==a)return h.removeAlerts(),void h.addAlerts("danger","Please provide your login ID and password");if(!a.username||""==a.username)return h.removeAlerts(),void h.addAlerts("danger","Please provide your login ID");if(!a.password||""==a.password)return h.removeAlerts(),void h.addAlerts("danger","Please provide your password");var c=b.doEncrypt(a.password),f=e.Login({username:a.username,password:c},function(){var b=f.data;if(console.log(a),console.log(c),console.log(b),b.IsSuccess)h.addAlerts("success","Successfully login"),null==d.path()||""==d.path()||"/"==d.path()?window.location="/Web/index.html#/":window.location="/Web/index.html#"+d.$$url;else{var e=b.Message;"User is not active!"==b.Message&&(e="Login failed. User is not active!"),h.removeAlerts(),h.addAlerts("danger",e)}},function(){alert("Page already expired. Please refresh this page."),window.location.reload()})},b.onLogout=function(){var a=e.Logout(function(){var b=a.data;b&&(null==d.path()||""==d.path()||"/"==d.path()?window.location="/Web/login.html#/":window.location="/Web/login.html#/")})},b.onEditProfile=function(){g.isAnonymous()||d.path("/editUser")},b.onKeyPress=function(a,c){13===a.keyCode&&b.onLogin(c)};var j=e.GetCurrentUser(function(){j&&(b.userInfo=j.data,null!=b.userInfo&&(b.userInfo.username=null,b.userInfo.password=null))})}]),angular.module("PKBL").controller("NavigationCtrl",["$rootScope","$scope","$resource","$location","ModuleService","AuthenticationService","UserSessionData",function(a,b,c,d,e,f,g){b.isShowHome=!0,b.navScope=b;var h=g;"anonymous"==h.user_name&&(b.isShowHome=!1),b.onMenuClick=function(a){null!=a&&""!==a&&"undefined"!==a&&d.path(a)},b.onHomeClick=function(){var a=g;d.path()==a.default_landing_page&&window.location.reload(),d.path(a.default_landing_page)}}]),angular.module("PKBL").controller("UserProfileCtrl",["$rootScope","$scope","$resource","$location","AuthenticationService","UserSessionData","SessionService",function(a,b,c,d,e,f,g){b.userInfo=f,b.onLogout=function(){var a=e.Logout(function(){var b=a.data;b&&(null==d.path()||""==d.path()||"/"==d.path()?window.location="/Web/login.html#/":window.location="/Web/login.html#/")})},b.onEditProfile=function(){g.isAnonymous()||d.path("/editUser")},b.onLogoClick=function(){d.path(b.userInfo.default_landing_page)}}]),angular.module("PKBL").controller("MainCtrl",["$rootScope","$scope","$interval",function(a,b,c){function d(){var a=document.getElementById("main-content-app");if(a){var b=$("#main-content-app");b.empty(),angular.element(a).empty()}}a.$on("$routeChangeStart",function(a,b,c){d()});var e;a.$on("autoSaveStart",function(b,d){var f=d;e=c(function(){a.$broadcast("doAutoSave")},60*f*1e3)}),a.$on("autoSaveStop",function(){angular.isDefined(e)&&(c.cancel(e),e=void 0)})}]),angular.module("HITS").controller("RoutinggroupCtrl",["$scope","$modal","$location","RoutingGroupService","RoutingGroupFormService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g){f.setAclSession(g),f.setAcltoScope(a),a.currentAcl.SM_ROUTING_GROUP_VIEW||c.path("/unauthorized");var h=function(c){b.open({templateUrl:"app/master/routingGroup/routingGroupForm/routingGroupForm.html",controller:"RoutinggroupformCtrl",backdrop:!0,resolve:{routingGroup:function(){return c}}}).result.then(function(b){a.Fetch()})};a.openUserForm=function(a){e.set(a),c.path("/routingGroupUser")},a.openLocationForm=function(c){b.open({templateUrl:"app/master/routingGroup/locationForm/AddLocationForm.html",controller:"AddlocationformCtrl",resolve:{routingGroup:function(){return c}}}).result.then(function(b){a.Fetch()})},a.onCreateNew=function(){h({})},a.onRowEdit=function(a){h(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Routing Group ["+b.name+"] ?");if(c){d.Delete(b,function(){a.Fetch()})}},a.SearchQuery={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["name","Institution.institution_name"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=d.FetchAllWithPagination(a.SearchQuery,function(){a.routingGroups=b.data.list,a.SearchQuery.total_data=b.data.totalData})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.Fetch()}]),angular.module("HITS").controller("RoutinggroupformCtrl",["$scope","routingGroup","RoutingGroupService","$modalInstance","InstitutionService","UserSessionData","RoleService",function(a,b,c,d,e,f,g){a.routingGroup=b,a.routingGroup.institution_id=f.institution_id;var h=e.FetchAll(function(){a.institutions=h.data}),i=g.FetchAll(function(){a.roles=i.data}),j=function(){a.action=!a.action};a.validate={},a.validate.button=!0,a.routingGroup.name&&(a.validate.name=!1),a.routingGroup.status_description&&(a.validate.status_description=!1),a.routingGroup.institution_id&&(a.validate.institution_id=!1),a.isValid=function(){return a.validate.name=!a.routingGroup.name,a.validate.institution_id=!a.routingGroup.institution_id,a.validate.status_description=!a.routingGroup.status_description,!(a.validate.name||a.validate.institution_id||a.validate.status_description)},a.onSave=function(b){if(a.isValid()){a.validate.button=!1,j();c.Save(b,function(){d.close(),j()})}}}]),angular.module("HITS").controller("AddlocationformCtrl",["$scope","LocationService","routingGroup","RoutingGroupService","$modalInstance",function(a,b,c,d,e){a.routingGroup=c;var f={};angular.forEach(a.routingGroup.Locations,function(a,b){f[a.location_id]=a});var g=b.FetchAll(function(){a.locations=g.data,angular.forEach(a.locations,function(a,b){f[a.location_id]||c.Locations.push({routing_group_id:c.routing_group_id,location_id:a.location_id,is_active:!1,Location:a})})}),h=function(){a.action=!a.action};a.onSave=function(b){h();var c=angular.copy(a.routingGroup.Locations);a.routingGroup.Locations=[],angular.forEach(c,function(b,c){(b.routing_location_id||b.is_active)&&a.routingGroup.Locations.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("ManageuserformCtrl",["$scope","UserService","routingGroup","RoutingGroupService","$modalInstance","UserSessionData",function(a,b,c,d,e,f){
a.routingGroup=c;var g={};angular.forEach(a.routingGroup.RoutingUsers,function(a,b){g[a.user_id]=a});var h=b.FetchAll({institutionId:f.institution_id},function(){a.users=h.data,angular.forEach(a.users,function(a,b){g[a.user_id]||c.RoutingUsers.push({routing_group_id:c.routing_group_id,user_id:a.user_id,is_active:!1,User:a})})}),i=function(){a.action=!a.action};a.onSave=function(b){i();var c=angular.copy(a.routingGroup.RoutingUsers);a.routingGroup.Users=[],angular.forEach(c,function(b,c){(b.routing_user_id||b.is_active)&&a.routingGroup.RoutingUsers.push(b)});d.Save(b,function(){e.close(),i()})}}]),angular.module("HITS").controller("DesignationListCtrl",["$rootScope","$scope","$resource","$location","$modal","DesignationService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b);var j=function(a){e.open({templateUrl:"app/master/designation/designation-form/designation-form.html",controller:"DesignationFormCtrl",resolve:{designationData:function(){return a}}}).result.then(function(a){var c="",d="";a?(c="success",d="Data Saved Succesfully"):(c="danger",d="Save designation failed"),g.addAlerts(c,d),b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"designation_description",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["designation_description","EmployeeCategory.employee_category_description","DesignationGroup.designation_group_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.designations=[];var c=a.data.list;b.designations=c,b.SearchQuery.total_data=a.data.totalData,g.removeAlerts()})},b.onCreateNew=function(){j({}),g.removeAlerts()},b.onRowEdit=function(a){j(angular.copy(a)),g.removeAlerts()},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Designation ["+a.designation_description+"] ?");if(c)var d=f.Delete(a,function(){d.data.IsSuccess?(g.addAlerts("success",d.data.Message),b.Fetch()):(g.removeAlerts(),g.addAlerts("danger","Delete designation failed"))})},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("DesignationFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DesignationService","EmployeeCategoryService","DesignationGroupService","designationData",function(a,b,c,d,e,f,g,h,i){b.designation=i,b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(b.designation,function(){e.close(!0)})}},b.validate={},b.validate.button=!0,b.designation.designation_description&&(b.validate.designation_description=!1),b.isValid=function(){return b.designation.designation_description?b.validate.designation_description=!1:b.validate.designation_description=!0,b.validate.designation_description?!1:!0};var j=g.FetchAll(function(){b.employeeCategories=j.data}),k=h.FetchAll(function(){b.designationGroups=k.data})}]),angular.module("HITS").controller("DepartmentListCtrl",["$rootScope","$scope","$resource","$location","$modal","$timeout","DepartmentService","ToastMessageService","LoadingScreenService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j,k){j.setAclSession(k),j.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_DEPARTMENT_VIEW||d.path("/unauthorized");var l=function(a){e.open({templateUrl:"app/master/department/department-form/department-form.html",controller:"DepartmentFormCtrl",resolve:{departmentData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"department_code",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["department_description","department_code"]}},b.Rows=[10,15,20,25,50,100],b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=g.FetchAllWithPagination(b.SearchQuery,function(){b.departments=[];var c=a.data.list;b.SearchQuery.total_data=a.data.totalData,b.departments=c})},b.onCreateNew=function(){l({})},b.onRowEdit=function(a){l(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Department ["+a.department_description+"] ?");if(c){g.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("DepartmentFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DepartmentService","departmentData",function(a,b,c,d,e,f,g){b.department=g,b.validate={},b.validate.button=!0,b.department.department_description&&(b.validate.department_description=!1),b.department.department_code&&(b.validate.department_code=!1),b.isValid=function(){return b.department.department_description?b.validate.department_description=!1:b.validate.department_description=!0,b.department.department_code?b.validate.department_code=!1:b.validate.department_code=!0,b.validate.department_description||b.validate.department_code?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("EmployeeCategoryListCtrl",["$rootScope","$scope","$resource","$location","$modal","EmployeeCategoryService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_EMPLOYEE_CATEGORY_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/employeeCategory/employeeCategory-form/employeeCategory-form.html",controller:"EmployeeCategoryFormCtrl",resolve:{employeeCategoryData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"employee_category_code",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["employee_category_description","employee_category_code"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.employeeCategorys=[];var c=a.data.list;b.employeeCategorys=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Employee Category ["+a.employee_category_description+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("EmployeeCategoryFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","EmployeeCategoryService","employeeCategoryData",function(a,b,c,d,e,f,g){b.employeeCategory=g,b.validate={},b.validate.button=!0,b.employeeCategory.employee_category_description&&(b.validate.employee_category_description=!1),b.employeeCategory.employee_category_code&&(b.validate.employee_category_code=!1),b.isValid=function(){return b.employeeCategory.employee_category_description?b.validate.employee_category_description=!1:b.validate.employee_category_description=!0,b.employeeCategory.employee_category_code?b.validate.employee_category_code=!1:b.validate.employee_category_code=!0,b.validate.employee_category_description||b.validate.employee_category_code?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("RoleListCtrl",["$scope","$resource","$location","$modal","RoleService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h){g.setAclSession(h),g.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT_ROLE_VIEW||c.path("/unauthorized");var i=function(b){d.open({templateUrl:"app/master/role/form/role-form.html",controller:"RoleFormCtrl",windowClass:"modal-medium",resolve:{roleData:function(){return b}}}).result.then(function(b){var c="",d="";b?(c="success",d="Data Saved Succesfully"):(c="danger",d="Save role failed"),f.addAlerts(c,d),a.Fetch()})};a.SearchQuery={page:1,row_per_page:10,sort_by:"role_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["role_name"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=e.FetchAllWithPagination(a.SearchQuery,function(){a.roles=[];var c=b.data.list;a.roles=c,a.SearchQuery.total_data=b.data.totalData})},a.onCreateNew=function(){i({role_id:null})},a.onRowEdit=function(a){i(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Role ["+b.role_name+"] ?");if(c)var d=e.Delete(b,function(){var b="",c="";d?(b="success",c="Data Deleted Succesfully"):(b="danger",c="Delete role failed"),f.addAlerts(b,c),a.Fetch()})},a.onSearch=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.Fetch(),a.acls=[{label:"Glasses",value:"glasses",children:[{label:"Top Hat",value:"top_hat"},{label:"Curly Mustache",value:"mustachio"}]}]}]),angular.module("HITS").controller("RoleFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","RoleService","RoleAclService","roleData",function(a,b,c,d,e,f,g,h){b.role=h,b.validate={},b.validate.button=!0,b.role&&b.role.role_name&&(b.validate.role_name=!1),b.isValid=function(){return b.role.role_name?b.validate.role_name=!1:b.validate.role_name=!0,b.validate.role_name?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1,(null==a.institution_id||0===a.institution_id)&&(a.institution_id=1),a.Children=[],a.Children.push(b.acls);f.Save(a,function(){var a=!0;e.close(a)})}},b.FetchAcl=function(){var a=0,c=1;null!=b.role.role_id&&(a=b.role.role_id,c=b.role.institution_id);var d=g.FetchAll({roleId:a,institutionId:c},function(){b.acls=[];var a=d.data;b.acls=a})},b.FetchAcl()}]).config(["ivhTreeviewOptionsProvider",function(a){a.set({twistieCollapsedTpl:'<span class="fa fa-plus-square"></span>',twistieExpandedTpl:'<span class="fa fa-minus-square"></span>',twistieLeafTpl:'<span class="fa fa-list-alt"></span>'})}]),angular.module("HITS").controller("InstitutionListCtrl",["$rootScope","$scope","$resource","$location","$modal","InstitutionService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b);var j=function(a){e.open({templateUrl:"app/master/institution/institution-form/institution-form.html",controller:"InstitutionFormCtrl",resolve:{institutionData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.Fetch=function(){var a=f.FetchAll(function(){b.institutions=[];var c=a.data;b.institutions=c})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Institution ["+a.institution_description+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.OnSearch=function(){b.Fetch()},b.Fetch()}]),angular.module("HITS").controller("InstitutionFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","InstitutionService","institutionData",function(a,b,c,d,e,f,g){b.institution=g,b.onSave=function(a){f.Save(a,function(){e.close()})}}]),angular.module("HITS").controller("WorkflowCtrl",["$scope","$modal","$location","WorkflowService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g){f.setAclSession(g),f.setAcltoScope(a),a.currentAcl.SM_WORKFLOW_VIEW||c.path("/unauthorized");var h=function(c){b.open({templateUrl:"app/master/workflow/workflowForm/workflowForm.html",controller:"WorkflowformCtrl",resolve:{workflow:function(){return c}}}).result.then(function(b){b?(e.removeAlerts(),e.addAlerts("success","Save workflow success")):(e.removeAlerts(),e.addAlerts("danger","Save workflow failed")),a.Fetch()})};a.openEmployeeCategoryForm=function(c){b.open({templateUrl:"app/master/workflow/workflowEmployeeForm/workflowEmployeeForm.html",controller:"WorkflowemployeeformCtrl",resolve:{workflow:function(){return c}}}).result.then(function(b){a.Fetch()})},a.openDepartmentForm=function(c){b.open({templateUrl:"app/master/workflow/workflowDepartmentForm/workflowDepartmentForm.html",controller:"WorkflowDepartmentFormCtrl",resolve:{workflow:function(){return c}}}).result.then(function(b){a.Fetch()})},a.openLocationForm=function(c){b.open({templateUrl:"app/master/workflow/workflowLocationForm/workflowLocationForm.html",controller:"WorkflowLocationFormCtrl",resolve:{workflow:function(){return c}}}).result.then(function(b){a.Fetch()})},a.onCreateNew=function(){h({Details:[{is_active:!0}]})},a.onRowEdit=function(a){h(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Workflow ["+b.name+"] ?");if(c){d.Delete(b,function(){a.Fetch()})}};var i=function(){a.action=!a.action};a.save=function(){i();d.SaveList(a.workflows,function(){i(),a.Fetch()})},a.moveUp=function(b){b.order>1&&(a.workflows[b.order-2].order++,b.order--,a.save())},a.moveDown=function(b){b.order<a.workflows.length&&(a.workflows[b.order].order--,b.order++,a.save())},a.SearchQuery={page:1,row_per_page:10,sort_by:"workflow_description",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["workflow_description"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=d.FetchAllWithPagination(a.SearchQuery,function(){a.workflows=b.data.list,a.SearchQuery.total_data=b.data.totalData})},a.onSearch=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.Fetch();var j=function(a){b.open({templateUrl:"app/master/workflow/manage-employee-designation/manage-employee-designation.html",controller:"ManageEmployeeDesignationCtrl",windowClass:"modal-large",resolve:{workflowEmployee:function(){return a}}}).result.then(function(a){a.IsSuccess?(e.removeAlerts(),e.addAlerts("success","Data Saved Successfully")):(e.removeAlerts(),e.addAlerts("danger","Failed to Save data. Error : "+a.Message))})};a.onManageDesignation=function(a){j(a)}}]),angular.module("HITS").controller("WorkflowformCtrl",["$scope","workflow","WorkflowService","RoutingGroupService","$modalInstance","InstitutionService","EmployeeCategoryService",function(a,b,c,d,e,f,g){a.workflow=b;var h=function(){a.workflow.Details&&angular.forEach(a.workflow.Details,function(b,c){b.order=c+1,a.max=b.order})};h();var i=function(){a.workflow.Details.sort(function(a,b){return!a.is_active&&b.is_active})};a.onDelete=function(b){b.is_active=!1,i(),h(),a.max--},a.moveUp=function(b){b.order>1&&(a.workflow.Details[b.order-2].order++,b.order--,a.workflow.Details.sort(function(a,b){return a.order-b.order}),h())},a.moveDown=function(b){b.order<a.max&&(a.workflow.Details[b.order].order--,b.order++,a.workflow.Details.sort(function(a,b){return a.order-b.order}),h())};var j=d.FetchAll(function(){a.routingGroups=j.data}),k=g.FetchAll(function(){a.employeeCategories=k.data});a.addDetail=function(a){a.Details.push({is_active:!0}),i(),h()};var l=function(){a.action=!a.action};a.validate={},a.validate.button=!0,a.workflow.workflow_description&&(a.validate.workflow_description=!1),a.isValid=function(){return a.workflow.workflow_description?a.validate.workflow_description=!1:a.validate.workflow_description=!0,a.validate.details=!1,a.workflow.Details&&angular.forEach(a.workflow.Details,function(b,c){b.routing_group_id||(a.validate.details=!0)}),a.validate.workflow_description||a.validate.details?!1:!0},a.onSave=function(b){if(a.isValid()){a.validate.button=!1,l();var d=c.Save(b,function(){e.close(d.data.IsSuccess),l()})}}}]),angular.module("HITS").controller("AclListCtrl",["$scope","$location","AclService","SessionService","UserAclSessionData",function(a,b,c,d,e){d.setAclSession(e),d.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT_ACL_VIEW||b.path("/unauthorized");var f=d.getSession();a.institutionId=f.institution_id,a.Fetch=function(){var b=c.FetchAll({institutionId:a.institutionId},function(){a.acls=[];var c=b.data;a.acls=c})},a.Fetch()}]),angular.module("HITS").controller("UserListCtrl",["$scope","$modal","$location","ToastMessageService","UserService","SessionService","UserAclSessionData","UserSessionData",function(a,b,c,d,e,f,g,h){f.setAclSession(g),f.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT_USER_VIEW||c.path("/unauthorized"),a.usertab=1,a.onTabChanged=function(){1==a.usertab?a.Fetch():a.FetchDeleted()},a.keyword={};var i=function(c){b.open({templateUrl:"app/master/user/user-form/user-form.html",controller:"UserFormCtrl",backdrop:"static",windowClass:"modal-fullscreen",resolve:{userData:function(){return c}}}).result.then(function(b){var c="",e="";b.IsSuccess?(c="success",e="Data Saved Succesfully"):(c="danger",e="Save user failed"),d.addAlerts(c,e),a.Fetch()})};a.SearchQuery={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.keyword,fields:["name","user_name","MasterInstitution.institution_description","gender","email","adid"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword.keyword;var b=e.FetchAllWithPagination({searchQuery:a.SearchQuery,institutionId:h.institution_id},function(){a.users=[];var c=b.data.list;a.users=c,a.SearchQuery.total_data=b.data.totalData})},a.onCreateNew=function(){i({})},a.onRowEdit=function(a){i(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the User ["+b.user_name+"] ?");if(c)var f=e.Delete(b,function(){var b="",c="";f?(b="success",c="Data Deleted Succesfully"):(b="danger",c="Delete user failed"),d.addAlerts(b,c),a.Fetch(),a.FetchDeleted()})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.Fetch(),a.SearchQueryDeleted={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.deletedKeyword,fields:["name","user_name","MasterInstitution.institution_description","gender","email","adid"]}},a.FetchDeleted=function(){a.SearchQueryDeleted.search.keyword=a.keyword.deletedKeyword;var b=e.FetchAllDeletedWithPagination({searchQuery:a.SearchQuery,institutionId:h.institution_id},function(){a.DeletedUsers=[];var c=b.data.list;a.DeletedUsers=c,a.SearchQueryDeleted.total_data=b.data.totalData})},a.onRowUnDelete=function(b){var c=confirm("Are you sure you want to restore the User ["+b.user_name+"] ?");if(c)var f=e.UnDelete(b,function(){var b="",c="";f?(b="success",c="Data Restored Succesfully"):(b="danger",c="Error Restoring Data"),d.addAlerts(b,c),a.FetchDeleted(),a.Fetch()})},a.onSearchDeleted=function(){a.FetchDeleted()},a.onKeyPressDeleted=function(b){13===b.keyCode&&a.onSearchDeleted()},a.onPageDeletedChanged=function(b){a.SearchQueryDeleted.page=b,a.FetchDeleted()},a.onSortDeleted=function(b){a.SearchQueryDeleted.sort_by==b?a.SearchQueryDeleted.is_sort_asc=!a.SearchQueryDeleted.is_sort_asc:a.SearchQueryDeleted.is_sort_asc=!0,a.SearchQueryDeleted.sort_by=b,a.FetchDeleted()},a.FetchDeleted()}]),angular.module("HITS").controller("UserFormCtrl",["$scope","$timeout","$modal","$modalInstance","UserService","UserRoleService","userData","InstitutionService","DepartmentService","EmployeeCategoryService","DesignationService","ToastMessageService","LoadingScreenService","RoleService","UserSessionData",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.isDateEnable=!0,a.institution_id=o.institution_id,a.syncRoleWithRoutingAndCommGroup=function(){angular.forEach(a.user.UserRoles,function(b,c){b.is_active||(angular.forEach(a.user.CommitteeGroups,function(a,c){a.CommitteeGroup.role_id==b.role_id&&(a.is_active=!1)}),angular.forEach(a.user.RoutingGroups,function(a,c){a.RoutingGroup.role_id==b.role_id&&(a.is_active=!1)}))})};var p=function(b){c.open({templateUrl:"app/master/user/search-user/search-user.html",controller:"SearchUserCtrl",windowClass:"modal-large",resolve:{keywordData:function(){return b}}}).result.then(function(b){a.user=b,a.user.institution_id=a.institution_id})},q=function(b){c.open({templateUrl:"app/master/user/add-user-role/add-user-role.html",controller:"AddUserRoleCtrl",resolve:{userRolesData:function(){return b},userId:function(){return a.user.user_id},institutionId:function(){return a.user.institution_id}}}).result.then(function(b){angular.forEach(b,function(b,c){var d=!1;angular.forEach(a.user.UserRoles,function(a,c){a.role_id==b.role_id&&(a.is_active=b.is_active,d=!0)}),d||(a.user.UserRoles||(a.user.UserRoles=[]),a.user.UserRoles.push(b))}),A(a.user.UserRoles),a.syncRoleWithRoutingAndCommGroup()})},r=function(b){c.open({templateUrl:"app/modal/committeeGroupModal/committee-group-modal.html",controller:"CommitteeGroupModalCtrl",resolve:{CommitteeGroups:function(){return angular.copy(b.CommitteeGroups)},userRolesData:function(){return b.UserRoles}}}).result.then(function(b){angular.forEach(b,function(b,c){var d=!1;angular.forEach(a.user.CommitteeGroups,function(a,c){a.committee_group_id==b.committee_group_id&&(a.is_active=b.is_active,d=!0)}),d||(a.user.CommitteeGroups||(a.user.CommitteeGroups=[]),a.user.CommitteeGroups.push(b))}),A(a.user.UserRoles),v(a.user.CommitteeGroups)})},s=function(b){c.open({templateUrl:"app/modal/routingGroupModal/routing-group-modal.html",controller:"RoutingGroupModalCtrl",resolve:{RoutingGroups:function(){return angular.copy(b.RoutingGroups)},userRolesData:function(){return b.UserRoles}}}).result.then(function(b){angular.forEach(b,function(b,c){var d=!1;angular.forEach(a.user.RoutingGroups,function(a,c){a.routing_group_id==b.routing_group_id&&(a.is_active=b.is_active,d=!0)}),d||(a.user.RoutingGroups||(a.user.RoutingGroups=[]),a.user.RoutingGroups.push(b))})})},t=function(a){c.open({templateUrl:"app/modal/locationModal/location-modal.html",controller:"LocationModalCtrl",resolve:{Locations:function(){return angular.copy(a.RoutingLocations)},RoutingUser:function(){return a}}}).result.then(function(b){var c=b;a.RoutingLocations=[],angular.forEach(c,function(b,c){(b.routing_location_id||b.is_active)&&(b.routing_user_id=a.routing_user_id,a.RoutingLocations.push(b))})})},u=function(a){c.open({templateUrl:"app/modal/departmentModal/department-modal.html",controller:"DepartmentModalCtrl",resolve:{Departments:function(){return angular.copy(a.RoutingDepartments)},RoutingUser:function(){return a}}}).result.then(function(b){var c=b;a.RoutingDepartments=[],angular.forEach(c,function(b,c){(b.routing_department_id||b.is_active)&&(b.routing_user_id=a.routing_user_id,a.RoutingDepartments.push(b))})})};a.user=g,a.user.institution_id=a.institution_id,a.user.CommitteeGroups||(a.user.CommitteeGroups=[]);var v=function(b){a.hashComm={},angular.forEach(b,function(b,c){b.is_active&&(a.hashComm[b.committee_group_id]||(a.hashComm[b.committee_group_id]=b))})};v(a.user.CommitteeGroups),null==a.user?a.tempUsername=null:a.tempUsername=angular.copy(a.user.user_name);var w=h.FetchAll(function(){a.institutions=w.data}),x=i.FetchAll(function(){a.departments=x.data}),y=j.FetchAll(function(){a.employeeCategories=y.data}),z=k.FetchAll(function(){a.designations=z.data});a.validate={},a.validate.button=!0,a.user.name&&(a.validate.name=!1),a.user.institution_id&&(a.validate.institution_id=!1),a.user.adid&&(a.validate.adid=!1),a.user.user_name&&(a.validate.user_name=!1),a.user.email&&(a.validate.email=!1),a.isValid=function(){return a.user.name?a.validate.name=!1:a.validate.name=!0,a.user.institution_id?a.validate.institution_id=!1:a.validate.institution_id=!0,a.user.adid?a.validate.adid=!1:a.validate.adid=!0,a.user.user_name?a.validate.user_name=!1:a.validate.user_name=!0,a.user.email?a.validate.email=!1:a.validate.email=!0,a.validate.name||a.validate.institution_id||a.validate.adid||a.validate.user_name||a.validate.email?!1:!0},a.onSave=function(b){if(a.user.user_name||(a.user.user_name=a.user.adid),b.user_name||(b.user_name=b.adid),a.isValid()){a.validate.button=!1;var c=angular.copy(b.UserRoles);b.UserRoles=[],angular.forEach(c,function(a,c){(a.is_active||a.user_role_id>0)&&b.UserRoles.push(a)}),b.default_landing_page||(b.default_landing_page="/incident/track"),m.showLoading();var f=e.SaveForm(b,function(){var b=f.data;b.IsSuccess?d.close(b):(l.removeAlerts(),l.addAlerts("danger","Failed Saving Data. Error : "+b.Message),a.validate.button=!0),m.hideLoading()})}},a.onSearchUser=function(a){p(a)};var A=function(b){a.hashRole||(a.hashRole={}),angular.forEach(b,function(b,c){a.hashRole[b.role_id]||(a.hashRole[b.role_id]=b)})};a.FetchUserRoles=function(b){var c=f.FetchAll({userId:b},function(){a.user.UserRoles=[];var b=c.data;a.user.UserRoles=b,A(a.user.UserRoles)})},null!=a.tempUsername&&a.FetchUserRoles(a.user.user_id),a.onDeleteRole=function(b){var c=a.user.UserRoles.indexOf(b);a.user.UserRoles[c].is_active=!1,a.syncRoleWithRoutingAndCommGroup()},a.onAddRole=function(a){q(a)},a.onAddCommitteeGroup=function(a){r(a)},a.onAddRoutingGroup=function(a){s(a)},a.onAddLocation=function(a){t(a)},a.onAddDepartment=function(a){u(a)};var B=n.FetchAll(function(){a.hashCompleteRole={};var b=B.data;angular.forEach(b,function(b,c){a.hashCompleteRole[b.role_id]||(a.hashCompleteRole[b.role_id]=b)})});a.onDeleteCommittee=function(b){b.is_active=!1,v(a.user.CommitteeGroups)}}]),angular.module("HITS").controller("SearchUserCtrl",["$scope","keywordData","TempSapHrService","$modalInstance",function(a,b,c,d){a.isValid=!0,a.keyword="",a.SearchQuery={page:1,row_per_page:10,sort_by:"employee_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["employee_name","institution","department","designation","email_address"]}},a.FetchSapHr=function(){a.SearchQuery.search.keyword=a.keyword;var b=c.FetchAllWithPagination(a.SearchQuery,function(){a.employees=[],a.SearchQuery.total_data=b.data.totalData,a.employees=b.data.list})},a.chooseUser=function(a){var b=c.FetchOneToUserModel({sapHrId:a.sap_hr_id},function(){var a=b.data;d.close(a)})},a.onSearch=function(b){a.keyword=b,a.checkSearchValid(),a.isValid&&a.FetchSapHr()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchSapHr()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchSapHr()},a.checkSearchValid=function(){a.isValid=a.keyword.length>0},null!=b&&(a.keyword=b,a.FetchSapHr())}]),angular.module("HITS").controller("AddUserRoleCtrl",["$scope","$modalInstance","userRolesData","userId","institutionId","RoleService",function(a,b,c,d,e,f){a.userRoles=c,a.dataTemplate={user_role_id:0,user_id:d,institution_id:e,role_id:0,is_active:!1,User:null,Institution:null,Role:{role_id:0,role_name:"",institution_id:e,Institution:null,RoleAcl:null}},a.Fetch=function(){var b=f.FetchAll(function(){a.roles=[];var c=b.data;angular.forEach(c,function(b,c){var d=angular.copy(a.dataTemplate);d.role_id=b.role_id,d.Role=angular.copy(b),b.is_selected=!1,angular.forEach(a.userRoles,function(a,b){d.role_id==a.role_id&&(d.user_role_id=a.user_role_id,d.is_active=a.is_active)}),a.roles.push(d)})})},a.Fetch(),a.validate={},a.validate.button=!0,a.onSaveRole=function(){a.validate.button=!1,a.savedRoles=[],angular.forEach(a.roles,function(b,c){(b.is_selected||b.is_active)&&(b.is_active=!0,a.savedRoles.push(b))}),b.close(a.savedRoles)}}]),angular.module("HITS").controller("CommitteegroupCtrl",["$scope","$modal","$location","CommitteeGroupService","SessionService","UserAclSessionData",function(a,b,c,d,e,f){e.setAclSession(f),e.setAcltoScope(a),a.currentAcl.SM_ROUTING_GROUP_VIEW||c.path("/unauthorized");var g=function(c){b.open({templateUrl:"app/master/committeeGroup/committeeGroupForm/committeeGroupForm.html",controller:"CommitteegroupformCtrl",windowClass:"modal-medium",resolve:{committeeGroup:function(){return c}}}).result.then(function(b){a.Fetch()})};a.openUserForm=function(c){b.open({templateUrl:"app/master/committeeGroup/committeeUserForm/committeeUserForm.html",controller:"CommitteeuserformCtrl",resolve:{committeeGroupId:function(){return c.committee_group_id}}}).result.then(function(b){a.Fetch()})},a.openDisciplineForm=function(c){b.open({templateUrl:"app/master/committeeGroup/committeeDisciplineForm/committeeDisciplineForm.html",controller:"CommitteedisciplineformCtrl",resolve:{committeeGroup:function(){return c}}}).result.then(function(b){a.Fetch()})},a.openDepartmentForm=function(c){b.open({templateUrl:"app/master/committeeGroup/committeeDepartmentForm/committeeDepartmentForm.html",controller:"CommitteedepartmentformCtrl",resolve:{committeeGroup:function(){return c}}}).result.then(function(b){a.Fetch()})},a.openLocationForm=function(c){b.open({templateUrl:"app/master/committeeGroup/committeeLocationForm/committeeLocationForm.html",controller:"CommitteelocationformCtrl",resolve:{committeeGroup:function(){return c}}}).result.then(function(b){a.Fetch()})},a.onCreateNew=function(){g({})},a.onRowEdit=function(a){g(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Committee Group ["+b.name+"] ?");if(c){d.Delete(b,function(){a.Fetch()})}},a.SearchQueryCommittee={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keywordCommittee,fields:["name","IncidentType.incident_type_name"]}},a.Fetch=function(){a.SearchQueryCommittee.search.keyword=a.keywordCommittee;var b=d.FetchAllWithPagination(a.SearchQueryCommittee,function(){a.committeeGroups=b.data.list,a.SearchQueryCommittee.total_data=b.data.totalData})},a.onSearchCommittee=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearchCommittee()},a.onPageChanged=function(b){a.SearchQueryCommittee.page=b,a.Fetch()},a.onSort=function(b){a.SearchQueryCommittee.sort_by==b?a.SearchQueryCommittee.is_sort_asc=!a.SearchQueryCommittee.is_sort_asc:a.SearchQueryCommittee.is_sort_asc=!0,a.SearchQueryCommittee.sort_by=b,a.Fetch()},a.Fetch()}]),angular.module("HITS").controller("CommitteegroupformCtrl",["$scope","committeeGroup","CommitteeGroupService","$modal","$modalInstance","IncidentTypeService","RoleService","LoadingScreenService",function(a,b,c,d,e,f,g,h){a.incidentSubType={},a.checkbox=[],a.committeeGroup=b,a.subType={},a.hash=[],angular.forEach(a.committeeGroup.IncidentSubTypes,function(b,c){a.hash[c]=b.incident_sub_type_id}),a.incidentType={},a.checkSelected=function(b){var c=!1;return angular.forEach(a.committeeGroup.IncidentSubTypes,function(a,d){c||a.incident_sub_type_id==b&&(c=!0)}),c},a.FetchAll=function(){var c=f.FetchAll(function(){a.incidentTypes=c.data,angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==b.incident_type_id&&null!=c.MasterIncidentSubTypes&&angular.forEach(c.MasterIncidentSubTypes,function(b,c){b.is_selected=!1,a.checkSelected(b.incident_sub_type_id)&&(b.is_selected=!0)})})}),d=g.FetchAll(function(){a.Roles=d.data})},a.openDisciplineForm=function(b){d.open({templateUrl:"app/master/committeeGroup/committeeDisciplineForm/committeeDisciplineForm.html",controller:"CommitteedisciplineformCtrl",resolve:{committeeGroup:function(){return b;
}}}).result.then(function(b){a.committeeGroup=b})},a.openDepartmentForm=function(b){d.open({templateUrl:"app/master/committeeGroup/committeeDepartmentForm/committeeDepartmentForm.html",controller:"CommitteedepartmentformCtrl",resolve:{committeeGroup:function(){return b}}}).result.then(function(b){a.committeeGroup=b})},a.openLocationForm=function(b){d.open({templateUrl:"app/master/committeeGroup/committeeLocationForm/committeeLocationForm.html",controller:"CommitteelocationformCtrl",resolve:{committeeGroup:function(){return b}}}).result.then(function(b){a.committeeGroup=b})},a.openPersonCategoryForm=function(b){d.open({templateUrl:"app/master/committeeGroup/committeePersonCategoryForm/committeePersonCategoryForm.html",controller:"CommitteepersoncategoryformCtrl",resolve:{committeeGroup:function(){return b}}}).result.then(function(b){a.committeeGroup=b})},a.openEmployeeCategoryForm=function(b){d.open({templateUrl:"app/master/committeeGroup/committee-emp-category-form/committee-emp-category-form.html",controller:"CommitteeEmpCategoryFormCtrl",resolve:{committeeGroup:function(){return b}}}).result.then(function(b){a.committeeGroup=b})};var i=function(){a.action=!a.action};a.validate={},a.validate.button=!0,a.committeeGroup.name&&(a.validate.name=!1),a.committeeGroup.incident_type_id&&(a.validate.incident_type_id=!1),a.isValid=function(){return a.committeeGroup.name?a.validate.name=!1:a.validate.name=!0,a.validate.name?!1:!0},a.onSave=function(d){if(a.isValid()){a.validate.button=!1,a.savedSubTypes=[],angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==b.incident_type_id&&null!=c.MasterIncidentSubTypes&&angular.forEach(c.MasterIncidentSubTypes,function(b,c){b.is_selected&&(a.subtypeSelected={},a.subtypeSelected.incident_sub_type_id=b.incident_sub_type_id,a.subtypeSelected.IncidentSubType=b,a.savedSubTypes.push(a.subtypeSelected))})}),d.IncidentSubTypes=a.savedSubTypes,h.showLoading(),i();c.Save(d,function(){h.hideLoading(),e.close(),i()})}},a.onChangeIncident=function(){},a.onChange=function(a){},a.FetchAll()}]),angular.module("HITS").controller("IncidentTypeListCtrl",["$scope","$modal","$location","ToastMessageService","IncidentTypeService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g){f.setAclSession(g),f.setAcltoScope(a),a.currentAcl.SM_MASTER_DATA_SM_INCIDENT_SETUP_INCIDENT_DATA_VIEW||c.path("/unauthorized");var h=function(c){b.open({templateUrl:"app/master/incidentType/incidentType-form/incidentType-form.html",controller:"IncidentTypeFormCtrl",windowClass:"modal-large",resolve:{incidentTypeData:function(){return angular.copy(c)},incidentTypeLength:function(){return a.SearchQuery.total_data}}}).result.then(function(b){var c="",e="";b?(c="success",e="Data Saved Succesfully"):(c="danger",e="Save incident type failed"),d.addAlerts(c,e),a.Fetch()})};a.incidentTypes={},a.SearchQuery={page:1,row_per_page:10,sort_by:"incident_type_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["incident_type_name","description"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=e.FetchAllWithPagination(a.SearchQuery,function(){b.data.list;a.incidentTypes=b.data.list,a.SearchQuery.total_data=b.data.totalData})},a.onCreateNew=function(){h(null)},a.onRowEdit=function(a){h(a)},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Incident Type ["+b.incident_type_name+"] ?");if(c)var f=e.Delete(b,function(){var b="",c="";f?(b="success",c="Data Deleted Succesfully"):(b="danger",c="Delete  incident type failed"),d.addAlerts(b,c),a.Fetch()})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.Fetch()}]),angular.module("HITS").controller("IncidentTypeFormCtrl",["$scope","$modal","$modalInstance","IncidentTypeService","IncidentSubTypeService","incidentTypeData","incidentTypeLength","ToastMessageService",function(a,b,c,d,e,f,g,h){a.order_no=[g];for(var i=0;g>i;i++)a.order_no[i]=i+1;a.incidentType={},a.incidentSubTypes=[],null!=f&&(a.incidentType=f,null!=a.incidentType.MasterIncidentSubTypes&&(a.incidentSubTypes=f.MasterIncidentSubTypes)),a.validate={},a.validate.button=!0,a.incidentType.incident_type_name&&(a.validate.incident_type_name=!1),a.incidentType.description&&(a.validate.description=!1),a.isValid=function(){return a.incidentType.incident_type_name?a.validate.incident_type_name=!1:a.validate.incident_type_name=!0,a.incidentType.description?a.validate.description=!1:a.validate.description=!0,a.validate.incident_type_name||a.validate.description?!1:!0},a.onSave=function(){if(a.isValid()&&(a.validate.button=!1,null!=a.incidentType)){a.incidentType.MasterIncidentSubTypes=a.incidentSubTypes;d.Save(a.incidentType,function(){c.close(!0)})}},a.Fetch=function(){},a.onDelete=function(b){a.incidentSubTypes.splice(a.incidentSubTypes.indexOf(b),1),0==a.incidentSubTypes.length&&(a.incidentType.tooltip_info="")},a.onRowEdit=function(b){j(b,a.incidentSubTypes.indexOf(b))},a.onRowDelete=function(a){confirm("Are you sure you want to delete the Incident Sub Type ["+a.incident_sub_type_name+"] ?")};var j=function(c,d){b.open({templateUrl:"app/master/incidentType/incidentSubType-form/incidentSubType-form.html",controller:"IncidentSubTypeFormCtrl",windowClass:"",resolve:{incidentSubTypeData:function(){return c},indexSubtype:function(){return d},indexSubtypeLength:function(){return a.incidentSubTypes.length}}}).result.then(function(b){if(null==d)a.incidentSubTypes.push(b);else{var c=0;null!=a.incidentSubTypes[d].incident_sub_type_id?(c=a.incidentSubTypes[d].incident_sub_type_id,a.incidentSubTypes[d]=b,a.incidentSubTypes[d].incident_sub_type_id=c):a.incidentSubTypes[d]=b}})};a.onCreateNew=function(){j(null,null)},a.Fetch()}]),angular.module("HITS").controller("CommitteeuserformCtrl",["$scope","UserService","committeeGroupId","CommitteeGroupService","$modalInstance","LoadingScreenService","UserSessionData",function(a,b,c,d,e,f,g){a.committeeGroupId=c;var h=d.FetchOne({committeeGroupId:a.committeeGroupId},function(){a.committeeGroup=h.data,a.select={},a.select.selectAllUser=!1,a.select.unselectAllUser=!1;var c={};angular.forEach(a.committeeGroup.Users,function(a,b){c[a.user_id]=a});var d=b.FetchAll({institutionId:g.institution_id},function(){a.users=d.data,angular.forEach(a.users,function(b,d){c[b.user_id]||a.committeeGroup.Users.push({committee_group_id:a.committeeGroup.committee_group_id,user_id:b.user_id,is_active:!1,User:b})})});a.validate={},a.validate.button=!0});a.select_all_user=function(){a.select.selectAllUser?(a.select.selectAllUser=!1,a.select.unselectAllUser=!1):(a.select.selectAllUser=!0,a.select.unselectAllUser=!1),angular.forEach(a.committeeGroup.Users,function(b){b.is_active=a.select.selectAllUser})},a.unselect_all_user=function(){a.select.unselectAllUser?(a.select.selectAllUser=!1,a.select.unselectAllUser=!1):(a.select.selectAllUser=!1,a.select.unselectAllUser=!0),a.select.unselectAllUser&&angular.forEach(a.committeeGroup.Users,function(a){a.is_active=!1})};var i=function(){a.action=!a.action};a.onSave=function(){a.validate.button=!1,i(),f.showLoading();d.Save(a.committeeGroup,function(){f.hideLoading(),e.close(),i()})}}]),angular.module("PKBL").directive("loadingScreen",function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"directive/loadingScreen/loadingScreen.html",link:function(a,b,c,d){},controller:["$scope","LoadingScreenService",function(a,b){a.isShown=!1,b.registerCallback(function(){a.isShown=b.getIsShow()})}]}}),angular.module("HITS").filter("momentDateFilter",function(){return function(a,b){if(null==a)return"";b=b||"DD/MM/YYYY";var c=moment(a).format(b);return c}}).filter("momentTimeFilter",function(){return function(a,b){if(null==a)return"";b=b||"HH:mm";var c=moment(a).format(b);return c}}).filter("momentDateTimeFilter",function(){return function(a,b){if(null==a)return"";b=b||"DD/MM/YYYY HH:mm:ss";var c=moment(a).format(b);return c}}),angular.module("HITS").controller("NewincidentCtrl",["$scope","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","IncidentService","IncidentFormService",function(a,b,c,d,e,f,g,h){a.incident=h.get(),a.incident||(a.incident={}),a.step=1;var i=b.FetchAll(function(){a.designations=i.data}),j=c.FetchAll(function(){a.departments=j.data}),k=d.FetchAll(function(){a.employeeCategorys=k.data}),l=e.FetchAll(function(){a.incidentTypes=l.data}),m=f.FetchAll(function(){a.locations=m.data});a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.newIncident={},a.addPerson=function(){a.newIncident={}},a.savePerson=function(){a.incident||(a.incident={}),a.incident.PersonInvolveds||(a.incident.PersonInvolveds=[]),a.incident.PersonInvolveds.push(angular.copy(a.newIncident))};var n=function(){a.action=!a.action};a.onSave=function(){n();g.Save(a.incident,function(){n()})}}]),angular.module("HITS").controller("IncidentlistCtrl",["$scope","$modal","$location","IncidentService","IncidentFormService",function(a,b,c,d,e){a.onCreateNew=function(){e.set(null),c.path("/newIncident")},a.onRowEdit=function(a){e.set(a),c.path("/newIncident")},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Incident ["+b.name+"] ?");if(c){d.Delete(b,function(){a.Fetch()})}},a.Fetch=function(){var b=d.FetchAll(function(){a.incidents=b.data})},a.Fetch()}]),angular.module("HITS").controller("DisciplineListCtrl",["$rootScope","$scope","$resource","$location","$modal","DisciplineService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_DISCIPLINE_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/discipline/discipline-form/discipline-form.html",controller:"DisciplineFormCtrl",resolve:{disciplineData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"discipline_name",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["discipline_name","discipline_code"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.disciplines=[];var c=a.data.list;b.disciplines=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Discipline ["+a.discipline_name+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("DisciplineFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DisciplineService","disciplineData",function(a,b,c,d,e,f,g){b.discipline=g,b.validate={},b.validate.button=!0,b.discipline.discipline_code&&(b.validate.discipline_code=!1),b.discipline.discipline_name&&(b.validate.discipline_name=!1),b.isValid=function(){return b.discipline.discipline_code?b.validate.discipline_code=!1:b.validate.discipline_code=!0,b.discipline.discipline_name?b.validate.discipline_name=!1:b.validate.discipline_name=!0,b.validate.discipline_code||b.validate.discipline_name?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("PatientClassListCtrl",["$rootScope","$scope","$resource","$location","$modal","PatientClassService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_PATIENT_CLASS_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/patientClass/patientClass-form/patientClass-form.html",controller:"PatientClassFormCtrl",resolve:{patientClassData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"patient_class_name",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["patient_class_name","patient_class_code","short_description"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.patientClasses=[];var c=a.data.list;b.patientClasses=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Patient Class ["+a.patient_class_name+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("PatientClassFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","PatientClassService","patientClassData",function(a,b,c,d,e,f,g){b.patientClass=g,b.validate={},b.validate.button=!0,b.patientClass.patient_class_code&&(b.validate.patient_class_code=!1),b.patientClass.patient_class_name&&(b.validate.patient_class_name=!1),b.isValid=function(){return b.patientClass.patient_class_code?b.validate.patient_class_code=!1:b.validate.patient_class_code=!0,b.patientClass.patient_class_name?b.validate.patient_class_name=!1:b.validate.patient_class_name=!0,b.validate.patient_class_code||b.validate.patient_class_name?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("IncidentSubTypeFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","IncidentSubTypeService","incidentSubTypeData","indexSubtype","indexSubtypeLength",function(a,b,c,d,e,f,g,h,i){b.incidentSubType={},null!=g&&(b.incidentSubType.incident_sub_type_name=g.incident_sub_type_name,b.incidentSubType.description=g.description,b.incidentSubType.is_specify=g.is_specify,b.incidentSubType.keywords=g.keywords,b.incidentSubType.order_no=g.order_no),b.order_no=[i];for(var j=0;i>j;j++)b.order_no[j]=j+1;b.validate={},b.validate.button=!0,b.incidentSubType.incident_sub_type_name&&(b.validate.incident_sub_type_name=!1),b.incidentSubType.description&&(b.validate.description=!1),b.isValid=function(){return b.incidentSubType.incident_sub_type_name?b.validate.incident_sub_type_name=!1:b.validate.incident_sub_type_name=!0,b.incidentSubType.description?b.validate.description=!1:b.validate.description=!0,b.validate.incident_sub_type_name||b.validate.description?!1:!0},b.onSave=function(){b.isValid()&&(b.validate.button=!1,e.close(b.incidentSubType))}}]),angular.module("HITS").controller("ApplicationSettingFormCtrl",["$rootScope","$scope","$resource","$location","$modal","ApplicationSettingService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_APPLICATION_SETTING_VIEW||d.path("/unauthorized");var j;b.Fetch=function(){var a=f.FetchAll(function(){b.applicationSettings=[];var c=a.data;b.applicationSettings=c,j=b.applicationSettings})},b.onSave=function(a){f.Save(a,function(){alert("Successfully Saved!")})},b.OnSearch=function(){b.Fetch()},b.Fetch()}]),angular.module("HITS").controller("SecurityDetailCtrl",["$scope","$sce","LocationService","IncidentTypeService",function(a,b,c,d){a.incident={incident_type_id:1,incident_sub_type_id:1},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1},a.validateTime=function(a,b){if(!a||!b)return b;var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b.getHours(),b.getMinutes());return c>new Date?null:b}}]),angular.module("HITS").directive("angularHtmlBind",["$compile",function(a){return function(b,c,d){b.$watch(d.angularHtmlBind,function(e,f){e&&e!==f&&(c.children().empty(),c.children().remove(),c.html(e),a(c.contents())(b.$eval(d.compileScope)),$(".nav-incident-detail").onePageNav())})}}]).directive("angularHtmlBindArray",["$compile","$interval","LoadingScreenService",function(a,b,c){return function(d,e,f){d.$watch(f.angularHtmlBindArray,function(g,h){if(g&&g!==h){c.showLoading();var i=0,j=g.length;if(e.children().empty(),e.children().remove(),j>0)var k=b(function(){var h=g[i];i++;var l="section"+i,m=i,n=$("<div>",{id:l,"ng-attr-tabindex":m});e.append(n);var o=n;o.html(h.template_section),a(o.contents())(d.$eval(f.compileScope)),i==j&&(c.hideLoading(),angular.isDefined(k)&&(b.cancel(k),k=void 0))},20,j)}})}}]).directive("angularHtmlBindTemplate",["$compile",function(a){return function(b,c,d){b.$watch(d.angularHtmlBindTemplate,function(e,f){e&&e!==f&&(c.children().empty(),c.children().remove(),c.html(e),a(c.contents())(b.$eval(d.compileScope)))})}}]).directive("angularForceHtmlBindTemplate",["$compile",function(a){return function(b,c,d){b.$watch(d.angularForceHtmlBindTemplate,function(e,f){c.children().empty(),c.children().remove(),c.html(e),b.$eval(d.compileScope)&&a(c.contents())(b.$eval(d.compileScope))})}}]),angular.module("HITS").controller("IncidentTrackListCtrl",["$scope","$location","$timeout","$window","$routeParams","IncidentTrackListTabService","IncidentService","IncidentForwardService","IncidentForwardFormService","DepartmentService","LocationService","IncidentTypeService","RoutingGroupService","IncidentFormService","$modal","ToastMessageService","IncidentCommentService","SessionService","IncidentFollowUpFormService","AuthenticationService","UserSessionData","UserAclSessionData","$http","$compile","LoadingScreenService","IncidentLockService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){a.user=u,a.tabState=f.getState();var A=v;if(r.setAclSession(A),r.setAcltoScope(a),a.isDateEnable=!0,a.incident={},a.incidentPending={is_read:!1},a.incidentPendingRead={is_read:!0},a.incidentClosed={},a.incidentMySubmission={},a.isConfirmed=0,a.isPendingActive=!0,a.incidentDeleted={},a.isMyTodoListActive=!0,a.draftIncidents=[],a.pendingIncidents=[],a.pendingIncidentReads=[],a.closedIncidents=[],a.incidentFollowUps=[],a.incidentForwards=[],a.incidentForwardedToMe=[],a.mySubmissionIncidents=[],a.deletedIncidents=[],a.mainScope=a,a.trackDashboardTemplate="",a.trackDraftTemplate="",a.trackPendingTemplate="",a.trackPendingReadTemplate="",a.trackClosedTemplate="",a.trackFollowUpTemplate="",a.trackForwardedByMeTemplate="",a.trackForwardedToMeTemplate="",a.trackMySubmissionTemplate="",a.trackDeletedTemplate="",a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.datePickerOpen=function(a){c(function(){$("#"+a).focus()})},e.is_follow_up)var B=e.incident_comment_id,C=q.FetchOne({incidentCommentId:B},function(){var a=C.data;s.set(a),b.url("/incident/followUp")});a.appendURL=function(a,b,c){return a.indexOf("?")>=0?a+"&"+b+"="+c:a+"?"+b+"="+c},a.openInNewTab=function(a,b){d.incidentData=n.get(),d.wizardData=n.getWizardData(),d.formData=n.getStatusData(),d.incidentFollowUpdata=s.get(),d.url=b;var c="/Web/index.html#",e=c+a;d.open(e,"_blank")},a.onSearch=function(){a.FetchDraft()},a.SearchQueryDraft={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.FetchDraft=function(){var b=g.FetchAllDraftWithPagination({searchQuery:a.SearchQueryDraft,searchdata:a.incident},function(){a.draftIncidents=b.data.list,a.SearchQueryDraft.total_data=b.data.totalData,angular.forEach(a.draftIncidents,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_read_only",b.is_read_only),b.url=a.appendURL(b.url,"is_custom_role",b.is_custom_role),b.url=a.appendURL(b.url,"custom_role_id",b.custom_role_id),"DRAFT (RE-ROUTE)"==b.current_tracking_status?(b.url=a.appendURL(b.url,"lock","1"),!a.currentAcl.INCIDENT_TRACK_INCIDENT_REROUTE||a.user.user_id==b.created_by||a.currentAcl.INCIDENT_TRACK_INCIDENT_EDIT_ALL_DRAFT_REROUTE?b.url=a.appendURL(b.url,"is_edited","true"):b.url=a.appendURL(b.url,"is_edited","false")):(b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"is_edited","true")),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onPageDraftChanged=function(b){a.SearchQueryDraft.page=b,a.FetchDraft()},a.onSortDraft=function(b){a.SearchQueryDraft.sort_by==b?a.SearchQueryDraft.is_sort_asc=!a.SearchQueryDraft.is_sort_asc:a.SearchQueryDraft.is_sort_asc=!0,a.SearchQueryDraft.sort_by=b,a.FetchDraft()},a.SearchQueryPending={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.tryParseJSON=function(a){try{var b=JSON.parse(a);if(b&&"object"==typeof b&&null!==b)return b}catch(c){}return null},a.FetchPending=function(){var b=g.FetchAllPendingWithPagination({searchQuery:a.SearchQueryPending,searchdata:a.incidentPending},function(){a.pendingIncidents=[],a.pendingIncidents=b.data.list,a.SearchQueryPending.total_data=b.data.totalData,angular.forEach(a.pendingIncidents,function(b,c){if("null"!=b.main_template_value&&null!=b.main_template_value){var d=a.tryParseJSON(b.main_template_value);b.main_template_value_sac="",b.main_template_value_ham="",null!=d&&(d.hasOwnProperty("assessment_of_injury")&&(b.main_template_value_sac=d.assessment_of_injury),d.hasOwnProperty("patient_outcome")&&("category_a"==d.patient_outcome&&(b.main_template_value_ham+=" A "),"category_b"==d.patient_outcome&&(b.main_template_value_ham+=" B "),"category_c"==d.patient_outcome&&(b.main_template_value_ham+=" C "),"category_d"==d.patient_outcome&&(b.main_template_value_ham+=" D "),"category_e"==d.patient_outcome&&(b.main_template_value_ham+=" E "),"category_f"==d.patient_outcome&&(b.main_template_value_ham+=" F "),"category_g"==d.patient_outcome&&(b.main_template_value_ham+=" G "),"category_h"==d.patient_outcome&&(b.main_template_value_ham+=" H "),"category_i"==d.patient_outcome&&(b.main_template_value_ham+=" I ")))}else b.main_template_value_sac="",b.main_template_value_ham="";var e="/Web/index.html#/incident/form/tab";b.url=e,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.can_edit?(b.url=a.appendURL(b.url,"is_edited","CLOSED"!=a.incident.current_tracking_status),b.url=a.appendURL(b.url,"lock","1"),b.url=a.appendURL(b.url,"is_read_only",b.is_read_only),b.url=a.appendURL(b.url,"is_read",b.is_read)):(b.url=a.appendURL(b.url,"is_edited","false"),"CLOSED"==b.current_tracking_status?b.url=a.appendURL(b.url,"is_forwarded_to_you","false"):b.url=a.appendURL(b.url,"is_forwarded_to_you","true"),b.url=a.appendURL(b.url,"is_read_only",b.is_read_only),b.url=a.appendURL(b.url,"is_read",b.is_read),b.url=a.appendURL(b.url,"is_custom_role",b.is_custom_role),b.url=a.appendURL(b.url,"custom_role_id",b.custom_role_id),b.url=a.appendURL(b.url,"lock","0")),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchPending=function(){a.FetchPending()},a.onPagePendingChanged=function(b){a.SearchQueryPending.page=b,a.FetchPending()},a.onSortPending=function(b){a.SearchQueryPending.sort_by==b?a.SearchQueryPending.is_sort_asc=!a.SearchQueryPending.is_sort_asc:a.SearchQueryPending.is_sort_asc=!0,a.SearchQueryPending.sort_by=b,a.FetchPending()},a.onRowDelete=function(b){var c=(b.incident_no,confirm("Are you sure you want to delete the Incident?"));if(c)var d=z.LockIncident({incidentId:b.incident_id,incidentNo:b.incident_no},function(){var c=d.data;if(c.IsSuccess){g.Delete(b,function(){a.FetchDraft(),a.FetchPending(),a.FetchMySubmission(),a.FetchDeletedIncidents(),p.removeAlerts(),p.addAlerts("success","Incident successfully deleted")})}else{var e=c.Data;p.removeAlerts(),p.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User ("+e+").")}},function(){p.removeAlerts(),p.addAlerts("danger","Failed to lock incident.")})},a.onRowDeleteData=function(b){var c=(b.incident_no,confirm("Are you sure you want to delete the Incident?"));if(c)var d=z.LockIncident({incidentId:b.incident_id,incidentNo:b.incident_no},function(){var c=d.data;if(c.IsSuccess){g.DeleteData(b,function(){a.FetchDraft(),a.FetchPending(),a.FetchMySubmission(),a.FetchDeletedIncidents(),p.removeAlerts(),p.addAlerts("success","Incident successfully deleted")})}else{var e=c.Data;p.removeAlerts(),p.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User ("+e+").")}},function(){p.removeAlerts(),p.addAlerts("danger","Failed to lock incident.")})},a.onRowRestore=function(b){var c=(b.incident_no,confirm("Are you sure you want to restore the Incident?"));if(c){g.Restore(b,function(){a.FetchDraft(),a.FetchPending(),a.FetchMySubmission(),a.FetchDeletedIncidents(),p.addAlerts("success","Incident successfully restored")})}},a.SearchQueryClosed={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.FetchClosed=function(){var b=g.FetchAllClosedWithPagination({searchQuery:a.SearchQueryClosed,searchdata:a.incidentClosed},function(){a.closedIncidents=[],a.closedIncidents=b.data.list,a.SearchQueryClosed.total_data=b.data.totalData,angular.forEach(a.closedIncidents,function(b,c){if("null"!=b.main_template_value&&null!=b.main_template_value){var d=a.tryParseJSON(b.main_template_value);b.main_template_value_sac="",b.main_template_value_ham="",null!=d&&(d.hasOwnProperty("assessment_of_injury")&&(b.main_template_value_sac=d.assessment_of_injury),d.hasOwnProperty("patient_outcome")&&("category_a"==d.patient_outcome&&(b.main_template_value_ham+=" A "),"category_b"==d.patient_outcome&&(b.main_template_value_ham+=" B "),"category_c"==d.patient_outcome&&(b.main_template_value_ham+=" C "),"category_d"==d.patient_outcome&&(b.main_template_value_ham+=" D "),"category_e"==d.patient_outcome&&(b.main_template_value_ham+=" E "),"category_f"==d.patient_outcome&&(b.main_template_value_ham+=" F "),"category_g"==d.patient_outcome&&(b.main_template_value_ham+=" G "),"category_h"==d.patient_outcome&&(b.main_template_value_ham+=" H "),"category_i"==d.patient_outcome&&(b.main_template_value_ham+=" I ")))}else b.main_template_value_sac="",b.main_template_value_ham="";var e="/Web/index.html#/incident/form/tab";b.url=e,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_edited","false"),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onPageClosedChanged=function(b){a.SearchQueryClosed.page=b,a.FetchClosed()},a.onSortClosed=function(b){a.SearchQueryClosed.sort_by==b?a.SearchQueryClosed.is_sort_asc=!a.SearchQueryClosed.is_sort_asc:a.SearchQueryClosed.is_sort_asc=!0,a.SearchQueryClosed.sort_by=b,a.FetchClosed()},a.onSearchClosed=function(){a.FetchClosed()},a.onFetchDashboard=function(){if(a.trackDashboardTemplate.length<=0){var b="app/incident/track/incident-track-template/track-dashboard.html";w.get(b).then(function(b){var c=b.data;a.trackDashboardTemplate=c})}},a.onFetchDraft=function(){if(a.trackDraftTemplate.length<=0){var b="app/incident/track/incident-track-template/track-draft.html";w.get(b).then(function(b){var c=b.data;a.trackDraftTemplate=c})}c(function(){a.FetchDraft()},100)},a.onFetchPending=function(){if(a.trackPendingTemplate.length<=0){var b="app/incident/track/incident-track-template/track-pending.html";w.get(b).then(function(b){var c=b.data;a.trackPendingTemplate=c})}c(function(){a.FetchPending()},100)},a.onFetchClosed=function(){if(a.trackClosedTemplate.length<=0){var b="app/incident/track/incident-track-template/track-closed.html";w.get(b).then(function(b){var c=b.data;a.trackClosedTemplate=c})}a.FetchClosed()},a.onFetchFollowUp=function(){if(a.trackFollowUpTemplate.length<=0){var b="app/incident/track/incident-track-template/track-follow-up.html";w.get(b).then(function(b){var c=b.data;a.trackFollowUpTemplate=c})}a.FetchFollowUp()},a.onFetchForwardedByMe=function(){if(a.trackForwardedByMeTemplate.length<=0){var b="app/incident/track/incident-track-template/track-forwarded-by-me.html";w.get(b).then(function(b){var c=b.data;a.trackForwardedByMeTemplate=c})}a.fetchIncidentForward()},a.onFetchForwardedToMe=function(){if(a.trackForwardedToMeTemplate.length<=0){var b="app/incident/track/incident-track-template/track-forwarded-to-me.html";w.get(b).then(function(b){var c=b.data;a.trackForwardedToMeTemplate=c})}a.fetchIncidentForwardedToMe()},a.onFetchMySubmission=function(){if(a.trackMySubmissionTemplate.length<=0){var b="app/incident/track/incident-track-template/track-my-submission.html";w.get(b).then(function(b){var c=b.data;a.trackMySubmissionTemplate=c})}a.FetchMySubmission()},a.onFetchDeletedIncidents=function(){if(a.trackDeletedTemplate.length<=0){var b="app/incident/track/incident-track-template/track-deleted.html";w.get(b).then(function(b){var c=b.data;a.trackDeletedTemplate=c})}a.FetchDeletedIncidents()},a.SearchQueryFollowUp={page:1,row_per_page:10,sort_by:"IncidentMainInfo.incident_no",is_sort_asc:!0,total_data:0,search:{keyword:"",fields:["IncidentMainInfo.incident_no"]}},a.FetchFollowUp=function(){var b=a.user.user_id,c=a.isConfirmed,d=q.FetchFollowUpByUser({userId:b,isConfirmed:c,searchQuery:a.SearchQueryFollowUp},function(){a.incidentFollowUps=[],a.incidentFollowUps=d.data.list,a.SearchQueryFollowUp.total_data=d.data.totalData,angular.forEach(a.incidentFollowUps,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.IncidentMainInfo.incident_id),b.url=a.appendURL(b.url,"incident_no",b.IncidentMainInfo.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.IncidentMainInfo.current_tracking_status),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"incident_comment_id",b.incident_comment_id),b.url=a.appendURL(b.url,"formRouteUrl","/incident/followUp")})})},a.onPageFollowUpChanged=function(b){a.SearchQueryFollowUp.page=b,a.FetchFollowUp()},a.onSortFollowUp=function(b){a.SearchQueryFollowUp.sort_by==b?a.SearchQueryFollowUp.is_sort_asc=!a.SearchQueryFollowUp.is_sort_asc:a.SearchQueryFollowUp.is_sort_asc=!0,a.SearchQueryFollowUp.sort_by=b,a.FetchFollowUp()},a.incidentFollowUp=s.get(),a.tabState.incidentFollowUps?(a.tabState.incidentFollowUps=!0,a.tabState.incidentPending=!1,a.onFetchFollowUp()):a.currentAcl.INCIDENT_TRACK_INCIDENT_VIEW_PENDING?(a.tabState.incidentPending=!0,a.onFetchPending()):(a.tabState.incidentFollowUps=!1,a.tabState.incidentPending=!1,a.tabState.incidentDraft=!0,a.onFetchDraft()),a.onCreateNew=function(){n.initialize(),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onRowEdit=function(a,d){a.preventDefault();var e=z.LockIncident({incidentId:d.incident_id,incidentNo:d.incident_no},function(){var a=e.data;if(a.IsSuccess)n.initialize(),n.getStatusData().is_edited="CLOSED"!=d.current_tracking_status,n.getStatusData().access_from="pending",n.set(d),y.showLoading(),c(function(){b.path("/incident/form")},500);else{var f=a.Data;confirm("Incident is being processed by another User ("+f+"). Do you want to open the incident in view/read-only mode?")&&(n.initialize(),n.getStatusData().is_read_only=!0,n.getStatusData().is_edited=!1,
n.getStatusData().is_forwarded_to_you=!1,n.getStatusData().is_custom_role=d.is_custom_role,n.getStatusData().custom_role_id=d.custom_role_id,n.getStatusData().access_from="pending",n.set(d),y.showLoading(),c(function(){b.path("/incident/form")},500))}},function(){p.removeAlerts(),p.addAlerts("danger","Failed to lock incident.")})},a.onRowView=function(d,e){d.preventDefault(),n.initialize(),n.getStatusData().is_edited=!1;var f=!1;angular.forEach(e.CurrentHolderUserList,function(b,c){b==a.user.name&&(f=!0)}),"CLOSED"==e.current_tracking_status?n.getStatusData().is_forwarded_to_you=!1:n.getStatusData().is_forwarded_to_you=!0,n.getStatusData().is_read_only=e.is_read_only,n.getStatusData().is_custom_role=e.is_custom_role,n.getStatusData().custom_role_id=e.custom_role_id,n.getStatusData().access_from="pending",n.set(e),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onRowViewClosed=function(a,d){a.preventDefault(),n.initialize(),n.getStatusData().is_edited=!1,n.set(d),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onRowViewDraftRerouted=function(d,e){if(d.preventDefault(),"DRAFT (RE-ROUTE)"==e.current_tracking_status)var f=z.LockIncident({incidentId:e.incident_id,incidentNo:e.incident_no},function(){var d=f.data;if(d.IsSuccess)n.initialize(),n.getStatusData().is_edited=!1,n.getStatusData().is_custom_role=e.is_custom_role,n.getStatusData().custom_role_id=e.custom_role_id,(!a.currentAcl.INCIDENT_TRACK_INCIDENT_REROUTE||a.user.user_id==e.created_by||a.currentAcl.INCIDENT_TRACK_INCIDENT_EDIT_ALL_DRAFT_REROUTE)&&(n.getStatusData().is_edited=!0),n.set(e),y.showLoading(),c(function(){b.path("/incident/form")},500);else{var g=d.Data;confirm("Incident is being processed by another User ("+g+"). Do you want to open the incident in view/read-only mode?")&&(n.initialize(),n.getStatusData().is_read_only=!0,n.getStatusData().is_edited=!1,n.getStatusData().is_forwarded_to_you=!1,n.set(e),y.showLoading(),c(function(){b.path("/incident/form")},500))}},function(){p.removeAlerts(),p.addAlerts("danger","Failed to lock incident.")});else n.initialize(),n.getStatusData().is_edited=!0,n.getStatusData().is_custom_role=e.is_custom_role,n.getStatusData().custom_role_id=e.custom_role_id,(!a.currentAcl.INCIDENT_TRACK_INCIDENT_REROUTE||a.user.user_id==e.created_by||a.currentAcl.INCIDENT_TRACK_INCIDENT_EDIT_ALL_DRAFT_REROUTE)&&(n.getStatusData().is_edited=!0),n.set(e),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onView=function(a,d){a.preventDefault(),n.initialize(),n.getStatusData().is_edited=!1,n.set(d),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onViewMySubmission=function(a,d){a.preventDefault(),n.initialize(),n.getStatusData().is_edited=!1,n.getStatusData().is_custom_role=d.is_custom_role,n.getStatusData().custom_role_id=d.custom_role_id,n.set(d),y.showLoading(),c(function(){b.path("/incident/form")},500)};var D=l.FetchAll(function(){a.incidentTypes=D.data}),E=j.FetchAllDropDownList(function(){a.departments=E.data}),F=k.FetchAll(function(){a.locations=F.data}),G=m.FetchAllSubmittedStatus(function(){a.routingGroups=[],angular.forEach(G.data,function(b,c){b.status_description&&a.routingGroups.push(b)}),a.routingGroups.push({status_description:"Closed"}),a.routingGroups.push({status_description:"Merged"})}),H=function(a){o.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-medium",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){H(a)};var I=function(b,c){o.open({templateUrl:"app/incident/track/incident-mass-re-route/incident-mass-re-route.html",controller:"IncidentMassReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return b},lowestStatusIncident:function(){return c}}}).result.then(function(b){var c="",d="";b.IsSuccess?(c="success",d="Re-route Incident(s) Success",p.removeAlerts(),p.addAlerts(c,d)):(c="danger",d="Re-route Incident(s) Failed",p.removeAlerts(),p.addAlerts(c,d)),a.FetchPending(),a.FetchClosed()})},J=function(b){o.open({templateUrl:"app/incident/track/incident-mass-close/incident-mass-close.html",controller:"IncidentMassCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return b}}}).result.then(function(b){var c="",d="";b.IsSuccess?(c="success",d="Close Incident(s) Success",p.removeAlerts(),p.addAlerts(c,d)):(c="danger",d="Close Incident(s) Failed",p.removeAlerts(),p.addAlerts(c,d)),a.FetchPending(),a.FetchClosed()})},K=function(b){o.open({templateUrl:"app/incident/track/incident-mass-re-open/incident-mass-re-open.html",controller:"IncidentMassReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return b}}}).result.then(function(b){var c="",d="";b.IsSuccess?(c="success",d="Re-open Incident(s) Success",p.removeAlerts(),p.addAlerts(c,d)):(c="danger",d="Re-open Incident(s) Failed",p.removeAlerts(),p.addAlerts(c,d)),a.FetchPending(),a.FetchClosed()})};a.onBulkReRouteIncident=function(){var b=null,c=[];if(angular.forEach(a.pendingIncidents,function(a,d){a.is_selected&&("Stage 1 (Supervisor 1)"==a.current_tracking_status_holder?b=a:"Stage 2 (Supervisor 2)"==a.current_tracking_status_holder?null==b?b=a:"Stage 3 (Administrator)"==b.current_tracking_status_holder&&(b=a):"Stage 3 (Administrator)"==a.current_tracking_status_holder&&null==b&&(b=a),c.push(a))}),c.length<=0){var d="danger",e="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(d,e)}I(c,b)},a.onBulkCloseIncident=function(){var b=[],c=!0;if(angular.forEach(a.pendingIncidents,function(a,d){a.is_selected&&("Stage 3 (Administrator)"!=a.current_tracking_status_holder&&(c=!1),b.push(a))}),b.length<=0){var d="danger",e="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(d,e)}if(!c){var d="danger",e="Only Stage 3 (Administrator) can be closed";return p.removeAlerts(),void p.addAlerts(d,e)}J(b)},a.onReOpenIncident=function(a){var b=[];b.push(a),K(b)},a.onBulkReOpenIncident=function(){var b=[];if(angular.forEach(a.closedIncidents,function(a,c){a.is_selected&&b.push(a)}),b.length<=0){var c="danger",d="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(c,d)}K(b)},a.onBulkDeleteDraftIncidents=function(){var b=[],c=!1,d="";if(angular.forEach(a.draftIncidents,function(a,e){a.is_selected&&(""==d?d=a.current_tracking_status:d!=a.current_tracking_status&&(c=!0),b.push(a))}),b.length<=0){var e="danger",f="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(e,f)}if(c){var e="danger",f="Please select same incident status.";return p.removeAlerts(),void p.addAlerts(e,f)}if("DRAFT"==d)var h={Incidents:b,DeleteRemarks:""},i=g.MassDelete(h,function(){var b="",c="",d=i.data;d.IsSuccess?(b="success",c="Delete Incident(s) Success",p.removeAlerts(),p.addAlerts(b,c)):(b="danger",c="Delete Incident(s) Failed",p.removeAlerts(),p.addAlerts(b,c)),a.FetchDraft()});else L(b)};var L=function(b){o.open({templateUrl:"app/incident/track/incident-mass-delete/incident-mass-delete.html",controller:"IncidentMassDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return b}}}).result.then(function(b){var c="",d="";b.IsSuccess?(c="success",d="Delete Incident(s) Success",p.removeAlerts(),p.addAlerts(c,d)):(c="danger",d="Delete Incident(s) Failed",p.removeAlerts(),p.addAlerts(c,d)),a.FetchDraft()})};a.onBulkDeleteClosedIncidents=function(){var b=[];if(angular.forEach(a.closedIncidents,function(a,c){a.is_selected&&b.push(a)}),b.length<=0){var c="danger",d="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(c,d)}var e=g.MassDelete(b,function(){var b="",c="",d=e.data;d.IsSuccess?(b="success",c="Delete Incident(s) Success",p.removeAlerts(),p.addAlerts(b,c)):(b="danger",c="Error Deleting Data. Error: "+d.Message,p.removeAlerts(),p.addAlerts(b,c)),a.FetchClosed()})},a.followUpStatus=[{statusDescription:"Pending",statusValue:0},{statusDescription:"Finished",statusValue:1}],a.onRefreshFollowUp=function(b){a.isConfirmed=b,a.FetchFollowUp()},a.onEditFollowUp=function(a,c){a.preventDefault(),s.set(c),b.path("/incident/followUp")};var M=function(b){o.open({templateUrl:"app/incident/track/incident-mass-forward/incident-forward-form.html",controller:"IncidentMassForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return b}}}).result.then(function(b){if(b.IsSuccess){var c="Forward Incident Success";p.removeAlerts(),p.addAlerts("success",c)}a.FetchPending(),a.fetchIncidentForward()})};a.onBulkForwardIncident=function(){var b=[];if(angular.forEach(a.pendingIncidents,function(a,c){a.is_selected&&b.push(a)}),b.length<=0){var c="danger",d="Please select at least one incident.";return p.removeAlerts(),void p.addAlerts(c,d)}M(b)},a.keyword={},a.SearchQueryForward={page:1,row_per_page:10,sort_by:"IncidentMainInfo.incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["forward_to_name","IncidentMainInfo.IncidentType.incident_type_name","IncidentMainInfo.IncidentSubType.incident_sub_type_name","IncidentMainInfo.Location.location_name"]}},a.incidentFBM={},a.fetchIncidentForward=function(){a.SearchQueryForward.search.keyword=a.keyword.keywordIncidentForward;var b=h.FetchAllForwardByMeWithPagination({searchQuery:a.SearchQueryForward,searchdata:a.incidentFBM},function(){a.incidentForwards=[],a.incidentForwards=b.data.list,a.SearchQueryForward.total_data=b.data.totalData,angular.forEach(a.incidentForwards,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_edited","true"),b.url=a.appendURL(b.url,"is_forwarded_to_you","false"),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchIncidentForward=function(){a.fetchIncidentForward()},a.onSortForward=function(b){a.SearchQueryForward.sort_by==b?a.SearchQueryForward.is_sort_asc=!a.SearchQueryForward.is_sort_asc:a.SearchQueryForward.is_sort_asc=!0,a.SearchQueryForward.sort_by=b,a.fetchIncidentForward()},a.onPageChangedForward=function(b){a.SearchQueryForward.page=b,a.fetchIncidentForward()},a.SearchQueryForwardedToMe={page:1,row_per_page:10,sort_by:"IncidentMainInfo.incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["forward_to_name","IncidentMainInfo.IncidentType.incident_type_name","IncidentMainInfo.IncidentSubType.incident_sub_type_name","IncidentMainInfo.Location.location_name"]}},a.incidentFTM={},a.fetchIncidentForwardedToMe=function(){var b=h.FetchAllForwardToMeWithPagination({searchQuery:a.SearchQueryForwardedToMe,searchdata:a.incidentFTM},function(){a.incidentForwardedToMe=[],a.incidentForwardedToMe=b.data.list,a.SearchQueryForwardedToMe.total_data=b.data.totalData,angular.forEach(a.incidentForwardedToMe,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_edited","false"),b.url=a.appendURL(b.url,"is_forwarded_to_you","true"),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchIncidentForwardToMe=function(){a.fetchIncidentForwardedToMe()},a.onSortForwardTM=function(b){a.SearchQueryForwardedToMe.sort_by==b?a.SearchQueryForwardedToMe.is_sort_asc=!a.SearchQueryForwardedToMe.is_sort_asc:a.SearchQueryForwardedToMe.is_sort_asc=!0,a.SearchQueryForwardedToMe.sort_by=b,a.fetchIncidentForwardedToMe()},a.onPageChangedForwardTM=function(b){a.SearchQueryForwardedToMe.page=b,a.fetchIncidentForwardedToMe()},a.onRowEditForward=function(a,d){a.preventDefault(),n.initialize(),n.getStatusData().is_edited=!1,n.getStatusData().is_forwarded_to_you=!0,n.set(d.IncidentMainInfo),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onRowViewForward=function(a,d){a.preventDefault(),n.initialize(),n.getStatusData().is_edited=!0,n.getStatusData().is_forwarded_to_you=!1,n.set(d.IncidentMainInfo),y.showLoading(),c(function(){b.path("/incident/form")},500)},a.onRowViewForwardHistory=function(a){M(a)};var M=function(a){o.open({templateUrl:"app/incident/track/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardHistoryFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.SearchQueryMySubmission={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.FetchMySubmission=function(){var b=g.FetchAllMySubmissionWithPagination({searchQuery:a.SearchQueryMySubmission,searchdata:a.incidentMySubmission},function(){a.mySubmissionIncidents=[],a.mySubmissionIncidents=b.data.list,a.SearchQueryMySubmission.total_data=b.data.totalData,angular.forEach(a.mySubmissionIncidents,function(b,c){if("null"!=b.main_template_value&&null!=b.main_template_value){var d=a.tryParseJSON(b.main_template_value);b.main_template_value_sac="",b.main_template_value_ham="",null!=d&&(d.hasOwnProperty("assessment_of_injury")&&(b.main_template_value_sac=d.assessment_of_injury),d.hasOwnProperty("patient_outcome")&&("category_a"==d.patient_outcome&&(b.main_template_value_ham+=" A "),"category_b"==d.patient_outcome&&(b.main_template_value_ham+=" B "),"category_c"==d.patient_outcome&&(b.main_template_value_ham+=" C "),"category_d"==d.patient_outcome&&(b.main_template_value_ham+=" D "),"category_e"==d.patient_outcome&&(b.main_template_value_ham+=" E "),"category_f"==d.patient_outcome&&(b.main_template_value_ham+=" F "),"category_g"==d.patient_outcome&&(b.main_template_value_ham+=" G "),"category_h"==d.patient_outcome&&(b.main_template_value_ham+=" H "),"category_i"==d.patient_outcome&&(b.main_template_value_ham+=" I ")))}else b.main_template_value_sac="",b.main_template_value_ham="";var e="/Web/index.html#/incident/form/tab";b.url=e,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_edited","false"),b.url=a.appendURL(b.url,"is_custom_role",b.is_custom_role),b.url=a.appendURL(b.url,"custom_role_id",b.custom_role_id),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchMySubmission=function(){a.FetchMySubmission()},a.onPageMySubmissionChanged=function(b){a.SearchQueryMySubmission.page=b,a.FetchMySubmission()},a.onSortMySubmission=function(b){a.SearchQueryMySubmission.sort_by==b?a.SearchQueryMySubmission.is_sort_asc=!a.SearchQueryMySubmission.is_sort_asc:a.SearchQueryMySubmission.is_sort_asc=!0,a.SearchQueryMySubmission.sort_by=b,a.FetchMySubmission()},a.SearchQueryDeletedIncident={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.FetchDeletedIncidents=function(){var b=g.FetchAllDeletedIncidentWithPagination({searchQuery:a.SearchQueryDeletedIncident,searchdata:a.incidentDeleted},function(){a.deletedIncidents=[],a.deletedIncidents=b.data.list,a.SearchQueryDeletedIncident.total_data=b.data.totalData,angular.forEach(a.deletedIncidents,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.url=a.appendURL(b.url,"is_edited","false"),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchDeletedIncidents=function(){a.FetchDeletedIncidents()},a.onPageDeletedIncidentsChanged=function(b){a.SearchQueryDeletedIncident.page=b,a.FetchDeletedIncidents()},a.onSortDeletedIncidents=function(b){a.SearchQueryDeletedIncident.sort_by==b?a.SearchQueryDeletedIncident.is_sort_asc=!a.SearchQueryDeletedIncident.is_sort_asc:a.FetchDeletedIncidents.is_sort_asc=!0,a.SearchQueryDeletedIncident.sort_by=b,a.FetchDeletedIncidents()},a.onKeyPressDraft=function(b){13===b.keyCode&&a.onSearch()},a.onKeyPressPending=function(b){13===b.keyCode&&a.onSearchPending()},a.onKeyPressMySubmission=function(b){13===b.keyCode&&a.onSearchMySubmission()},a.onKeyPressFTM=function(b){13===b.keyCode&&a.onSearchIncidentForwardToMe()},a.onKeyPressFBM=function(b){13===b.keyCode&&a.onSearchIncidentForward()},a.onKeyPressDeleted=function(b){13===b.keyCode&&a.onSearchDeletedIncidents()},a.onKeyPressClosed=function(b){13===b.keyCode&&a.onSearchClosed()},a.SearchQueryPendingRead={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_no"]}},a.FetchPendingRead=function(){var b=g.FetchAllPendingWithPagination({searchQuery:a.SearchQueryPendingRead,searchdata:a.incidentPendingRead},function(){a.pendingIncidentReads=[],a.pendingIncidentReads=b.data.list,a.SearchQueryPendingRead.total_data=b.data.totalData,angular.forEach(a.pendingIncidentReads,function(b,c){if("null"!=b.main_template_value&&null!=b.main_template_value){var d=a.tryParseJSON(b.main_template_value);b.main_template_value_sac="",b.main_template_value_ham="",null!=d&&(d.hasOwnProperty("assessment_of_injury")&&(b.main_template_value_sac=d.assessment_of_injury),d.hasOwnProperty("patient_outcome")&&("category_a"==d.patient_outcome&&(b.main_template_value_ham+=" A "),"category_b"==d.patient_outcome&&(b.main_template_value_ham+=" B "),"category_c"==d.patient_outcome&&(b.main_template_value_ham+=" C "),"category_d"==d.patient_outcome&&(b.main_template_value_ham+=" D "),"category_e"==d.patient_outcome&&(b.main_template_value_ham+=" E "),"category_f"==d.patient_outcome&&(b.main_template_value_ham+=" F "),"category_g"==d.patient_outcome&&(b.main_template_value_ham+=" G "),"category_h"==d.patient_outcome&&(b.main_template_value_ham+=" H "),"category_i"==d.patient_outcome&&(b.main_template_value_ham+=" I ")))}else b.main_template_value_sac="",b.main_template_value_ham="";var e="/Web/index.html#/incident/form/tab";b.url=e,b.url=a.appendURL(b.url,"incident_id",b.incident_id),b.url=a.appendURL(b.url,"incident_no",b.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.current_tracking_status),b.can_edit?(b.url=a.appendURL(b.url,"is_edited","CLOSED"!=a.incident.current_tracking_status),b.url=a.appendURL(b.url,"lock","1")):(b.url=a.appendURL(b.url,"is_edited","false"),"CLOSED"==b.current_tracking_status?b.url=a.appendURL(b.url,"is_forwarded_to_you","false"):b.url=a.appendURL(b.url,"is_forwarded_to_you","true"),b.url=a.appendURL(b.url,"is_read_only",b.is_read_only),b.url=a.appendURL(b.url,"is_custom_role",b.is_custom_role),b.url=a.appendURL(b.url,"custom_role_id",b.custom_role_id),b.url=a.appendURL(b.url,"lock","0")),b.url=a.appendURL(b.url,"formRouteUrl","/incident/form")})})},a.onSearchPendingRead=function(){a.FetchPendingRead()},a.onPagePendingReadChanged=function(b){a.SearchQueryPendingRead.page=b,a.FetchPendingRead()},a.onSortPendingRead=function(b){a.SearchQueryPendingRead.sort_by==b?a.SearchQueryPendingRead.is_sort_asc=!a.SearchQueryPendingRead.is_sort_asc:a.SearchQueryPendingRead.is_sort_asc=!0,a.SearchQueryPendingRead.sort_by=b,a.FetchPendingRead()},a.onFetchPendingRead=function(){if(a.trackPendingReadTemplate.length<=0){var b="app/incident/track/incident-track-template/track-pending-read.html";w.get(b).then(function(b){var c=b.data;a.trackPendingReadTemplate=c})}c(function(){a.FetchPendingRead()},100)},a.onKeyPressPendingRead=function(b){13===b.keyCode&&a.onSearchPendingRead()},a.$on("$destroy",function(){var a=document.getElementById("incident-track-content");if(a){var b=$("#incident-track-content");b.each(function(a,b){b.parentNode&&b.parentNode.removeChild(b)}),b.empty(),b.remove()}})}]),angular.module("HITS").controller("IncidentFormCtrl",["$scope","$timeout","$interval","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","IncidentService","IncidentFormService","DisciplineService","$location","SessionService","IncidentSubTypeService","RoutingGroupService","CommitteeGroupService","WorkflowService","ApplicationSettingService","ToastMessageService","LoadingScreenService","IncidentCommentService","FileUploader","FileService","$window","$modal","IncidentRcaCategoryService","GcsService","PatientClassService","PatientLocationService","$routeParams","$document","UserSessionData","UserAclSessionData","IncidentLockService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H){m.setAclSession(G),m.setAcltoScope(a);var I=F;if(a.userSession=I,D.incident_id){if(a.incident=j.set({incident_id:D.incident_id}),D.is_forwarded_to_you)if(a.currentAcl.INCIDENT_TRACK_INCIDENT_DESCRIPTION_SUPERVISOR){var J=!1,K=i.CheckIsResponsibleForIncident({userId:a.userSession.user_id,incidentId:D.incident_id},function(){K.data&&(J=!0)});a.incident=j.set({incident_id:D.incident_id,is_forwarded_to_you:!1,is_edited:J})}else a.incident=j.set({incident_id:D.incident_id,is_forwarded_to_you:!0,is_edited:!1});D.is_merged&&(a.incident=j.set({incident_id:D.incident_id,is_edited:!1,is_merged:!0,access_from_link:!0})),l.url(l.path())}a.submitNextLevelValidation={},a.sac={},a.sac.validation_sac=!1,a.incident={},a.today=new Date,a.personInvolvedNotValid=!1,a.personInvolvedNotValidNearMiss=!1,a.personInvolvedDuplicate=!1,a.main_template_value={},a.main_template_supervisor_value={},a.submitValid=!0,a.isAnonymous=m.isAnonymous(),a.situation_invalid=!1,a.background_invalid=!1,a.assessment_invalid=!1,a.recommendations_invalid=!1,a.hasSearch=!1,a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.showItem=function(a,b){if(a){var c=a.display_name,d=!0;return angular.forEach(a.keywords,function(a,e){angular.lowercase(a).indexOf(angular.lowercase(b))>-1&&(d?(c=c+" - "+a,d=!1):c=c+" - "+a)}),c}return a};var L=function(a){y.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-medium",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){L(a)},a.onForwardIncident=function(){M(a.incident)};var M=function(a){y.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";s.removeAlerts(),s.addAlerts("success",b)}})};a.onIncidentsubTypeChange=function(){a.incident.incident_sub_type_others_description=""},a.onIncidentTypeChange=function(b){a.incident.incident_type_id=b.incident_type_id,a.incident.IncidentType.incident_type_name=b.incident_type_name,a.incident.incident_sub_type_id=null,a.incident.IncidentSubType.incident_sub_type_name=null,"undefined"==typeof a.incident.validation&&(a.incident.validation={}),a.incident.validation.incidentSubType=!1,a.incident.incident_type_others="",a.incident.validation.incidentTypeOther=!1,6==a.incident.incident_type_id&&y.open({templateUrl:"app/incident/form/incident-additional-info/incident-additional-info.html",controller:"IncidentAdditionalInfoCtrl",windowClass:"modal-medium"})},a.onIncidentSubTypeChange=function(b){a.incident.incident_sub_type_id=b.incident_sub_type_id,a.incident.IncidentSubType||(a.incident.IncidentSubType={}),a.incident.IncidentSubType.incident_sub_type_name=b.incident_sub_type_name},a.onChangeDateOfOccurance=function(b){var c=new Date(a.incident.time_of_occurance),d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.incident.time_of_occurance=d},a.onWitnessedChange=function(b){b||(a.incident.witness_name="",a.incident.witness_relation_type=null,a.incident.witness_relation_other_description="",a.incident.witness_contact_no="",a.incident.witness_address="")},a.autoSave=function(){if(a.form.is_edited){ba(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){var c=b.data;c.IsSuccess&&(a.incident=c.Data,a.fetchAllowEdit(),a.FetchMergedIncidents(),a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_value=angular.fromJson(a.incident.main_template_value)),ba()},function(){ba()})}};var N;a.stopAutoSave=function(){angular.isDefined(N)&&(c.cancel(N),N=void 0)};var O=a.uploader=new v({url:"/File/Upload",autoUpload:!0,removeAfterUpload:!0});if(O.onSuccessItem=function(b,c,d,e){a.incident.Attachments||(a.incident.Attachments=[]),a.incident.Attachments.push({is_active:!0,filename:b.file.name}),a.successFile++},O.onErrorItem=function(b,c,d,e){c.message?b.errorMessage=c.message:(b.errorMessage=c.match(/<title[^>]*>[\s\S]*<\/title>/gi)[0],b.errorMessage=b.errorMessage.replace("<title>",""),b.errorMessage=b.errorMessage.replace("</title>","")),a.failedFile++},O.onAfterAddingAll=function(b){a.totalFile=b.length,a.successFile=0,a.failedFile=0},O.onCompleteAll=function(){s.removeAlerts();var b="";a.successFile>0&&(b+=a.successFile+"/"+a.totalFile+" uploaded successfully. "),a.failedFile>0&&(b+=a.failedFile+"/"+a.totalFile+" upload failed. "),a.failedFile>0?s.addAlerts("danger",b):s.addAlerts("success",b)},a.download=function(a){x.open("/File/Download?name="+encodeURIComponent(a.filename))},a.onDeleteAttachment=function(a){confirm("Are you sure you want to delete this attachment?")&&(a.is_active=!1,s.addAlerts("success","File removed successfully"))},a.incident=j.get(),a.incident.Comments=[],a.form={},a.fetchAllowEdit=function(){null==j.get().is_edited||1==j.get().is_edited?a.form.is_edited=!0:a.form.is_edited=!1,a.form.is_merged=j.get().is_merged,a.form.access_from_link=j.get().access_from_link,a.form.is_suspected_duplicate=j.get().is_suspected_duplicate,a.form.is_forwarded_to_you=j.get().is_forwarded_to_you},a.autopurge=null,a.fetchAllowEdit(),a.incident.incident_id>0){t.showLoading();var P=i.FetchOne({incidentId:a.incident.incident_id},function(){if(a.incident=P.data,a.incident.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_supervisor_value=angular.fromJson(a.incident.main_template_supervisor_value),a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.main_template_value=a.incident.main_template_value,a.main_template_supervisor_value=a.incident.main_template_supervisor_value,a.isAnonymous=a.incident.is_anonymous,a.FetchComments(),a.fetchHighestWorkflow(),!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var b=r.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var d=b.data.setting_value_default;N=c(a.autoSave,60*d*1e3)});if("DRAFT"==a.incident.current_tracking_status_holder)var d=r.FetchOneByKey({keyValue:"DAYS_TO_AUTO_PURGE_DRAFT_INCIDENT"},function(){a.autopurge=d.data.setting_value_default});if(a.incident.incident_no)var e=i.CheckIsResponsibleForIncident({userId:a.userSession.user_id,incidentId:a.incident.incident_id,routingGroupId:a.incident.routing_group_id},function(){!e.data||null!=j.get().is_edited&&1!=j.get().is_edited?a.form.is_edited=!1:a.form.is_edited=!0,"DRAFT (RE-ROUTE)"==a.incident.current_tracking_status&&a.incident.created_by==a.userSession.user_id&&(a.form.is_edited=!0)});a.incident.incident_id<=0&&l.path("/incident/notFound"),t.hideLoading()},function(){t.hideLoading()})}else{t.showLoading();var P=i.FetchOne({incidentId:0},function(){a.incident=P.data,a.userSession=m.getSession(),a.incident.reporter_name=a.userSession.name,a.incident.designation_id=a.userSession.designation_id,a.incident.department_id=a.userSession.department_id,a.incident.employee_category_id=a.userSession.employee_category_id,a.incident.main_template_value={},a.incident.main_template_supervisor_value={},a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.main_template_value={},a.incident.AdditionalCcs=[],a.incident.incident_description="Situation:\n\nBackground:\n\nAssessment:\n\nRecommendations:\n\n",a.incident.date_of_occurance=angular.copy(a.today),a.incident.time_of_occurance=angular.copy(a.today),a.incident.is_witnessed=!1,a.incident.is_near_miss=null,a.incident.is_anonymous=a.isAnonymous;var b=r.FetchOneByKey({keyValue:"DAYS_TO_AUTO_PURGE_DRAFT_INCIDENT"},function(){a.autopurge=b.data.setting_value_default});if(a.isHighest=!1,!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var d=r.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var b=d.data.setting_value_default;N=c(a.autoSave,60*b*1e3)});t.hideLoading()},function(){t.hideLoading()})}a.FetchMergedIncidents=function(){if(a.incident.incident_id>0)if("MERGED"==a.incident.current_tracking_status)var b=i.FetchMainIncidents({incidentId:a.incident.incident_id},function(){a.incident.incident_main=b.data});else var c=i.FetchMergedIncidents({incidentId:a.incident.incident_id},function(){a.incident.incident_merged=c.data});else var c=i.FetchMergedIncidents({incidentId:0},function(){a.incident.incident_merged=c.data})},b(function(){a.FetchMergedIncidents()},2e3),a.onViewIncidentMerged=function(a){"MERGED"==a.current_tracking_status?a.is_edited=!1:a.is_edited=!0,a.is_edited=!1,j.set(a),Q(a)};var Q=function(a){y.open({templateUrl:"app/incident/form/incident-merged-details/incident-merged-details.html",controller:"IncidentMergedDetailsCtrl",windowClass:"modal-fullscreen",resolve:{IncidentFormServiceData:function(){return a}}}).result.then(function(a){})};b(function(){var b=i.FetchTopFIve(function(){a.topFives=b.data})},2e3),a.onTopFiveChoosen=function(b){var c=a.form.is_edited;c&&(a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.incident_sub_type_id)},a.step=1;var R=d.FetchAll(function(){a.designations=R.data}),S=e.FetchAll(function(){a.departments=S.data}),T=f.FetchAll(function(){a.employeeCategorys=T.data}),U=g.FetchAllSimpleModel(function(){a.incidentTypes=U.data,a.incidentTypes1=[],a.incidentTypes2=[],angular.forEach(a.incidentTypes,function(b,c){c<a.incidentTypes.length/2?a.incidentTypes1.push(b):a.incidentTypes2.push(b)})});a.isSubtypeSpecified=function(b){var c=!1;return angular.forEach(a.incidentTypes,function(a,d){angular.forEach(a.MasterIncidentSubTypes,function(a,d){a.incident_sub_type_id==b&&a.is_specify&&(c=!0)})}),c};var V=n.FetchAll(function(){a.incidentSubTypes=V.data}),W=h.FetchAll(function(){a.locations=W.data}),X=k.FetchAll(function(){a.disciplines=X.data}),Y=C.FetchAll(function(){a.patientLocations=Y.data}),Z=B.FetchAll(function(){a.patientClasses=Z.data}),_=g.FetchAllForSearchIncident(function(){a.incidentTypeFlats=_.data});a.onSelectSearchIncident=function(b){a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.sub_incident_type_id},a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.addPerson=function(){a.tempPerson=null,a.newPerson={is_active:!0,is_affected:null},a.personAddMode=!0,a.add=!a.add,a.hasSearch=!1},a.onPersonEdit=function(b){a.tempPerson=angular.copy(b),a.newPerson=angular.copy(b),a.editPersonIndex=a.incident.PersonInvolveds.indexOf(b),a.personAddMode=!1,a.add=!0,a.hasSearch=!0},a.onPersonDelete=function(a){var b=confirm("Are you sure you want to delete this record ?");b&&(s.addAlerts("success","Data Person Deleted Successfully"),a.is_active=!1)},a.onPersonCategoryChange=function(b){if("Visitor"==b||"Others"==b?a.hasSearch=!0:a.personAddMode?a.hasSearch=!1:a.hasSearch=!0,a.tempPerson&&a.tempPerson.person_category==b)a.newPerson=angular.copy(a.tempPerson);else{var c=null;c=a.tempPerson?a.tempPerson.is_affected:a.newPerson.is_affected,a.newPerson={person_category:b,is_active:!0,
is_affected:c}}};var aa=function(b){b.validation={};var c=!0,d=b.person_category==a.patient,e=b.person_category==a.staff;b.person_category==a.visitor,b.person_category==a.others;return b.person_category?b.person_category!=a.others||b.person_category_other_description||(b.validation.category_other=!0,c=!1):(b.validation.category=!0,c=!1),null===b.is_affected&&(b.validation.near_miss=!0,c=!1),b.fullname||(b.validation.name=!0,c=!1),e&&!b.person_id&&(b.validation.id=!0,c=!1),d&&!b.nric&&(b.validation.nric=!0,c=!1),d||e||b.contact_no||(b.validation.contact=!0,c=!1),d&&e&&b.contact_no&&b.contact_no.length<8&&(b.validation.contact_length=!0,c=!1),b.gender||!d&&!e||(b.validation.gender=!0,c=!1),d&&!b.age&&(b.validation.age=!0,c=!1),d&&!b.case_number&&"O"!=b.patient_type,d&&!b.patient_admission_date&&(b.validation.admission=!0,c=!1),d&&!b.patient_discipline&&(b.validation.discipline=!0,c=!1),e&&11==a.incident.incident_type_id&&(b.staff_category||(b.validation.staff_category=!0,c=!1),"Others"!=b.staff_category||b.staff_category_other||(b.validation.staff_category_other=!0,c=!1),b.staff_years_of_service||(b.validation.staff_years_of_service=!0,c=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,c=!1)),e&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(b.staff_years_of_service||(b.validation.staff_years_of_service=!0,c=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,c=!1),b.staff_protective_is_other&&!b.staff_protective_is_other_description&&(b.validation.staff_protective_is_other_description=!0,c=!1)),d&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(18==a.incident.incident_sub_type_id&&(b.patient_caused_injury_is_hypo_needle||b.patient_caused_injury_is_spinal_needle||b.patient_caused_injury_is_suture_needle||b.patient_caused_injury_is_catheter||b.patient_caused_injury_is_lancet||b.patient_caused_injury_is_other||(b.validation.patient_caused_injury=!0,c=!1)),b.patient_caused_injury_is_other&&!b.patient_caused_injury_other_description&&(b.validation.patient_caused_injury_other_description=!0,c=!1),b.patient_body_fluid_is_other&&!b.patient_body_fluid_other_description&&(b.validation.patient_body_fluid_other_description=!0,c=!1)),angular.forEach(a.incident.PersonInvolveds,function(d,e){d.is_active&&d.fullname==b.fullname&&d.person_category==b.person_category&&(a.add?(b.validation.duplicate_name=!0,c=!1):!a.add&&a.hasSearch&&(b.validation.duplicate_name=!0,c=!1))}),c};a.onCancelSavePerson=function(){a.add=!1},a.savePerson=function(){a.incident||(a.incident={}),a.incident.PersonInvolveds||(a.incident.PersonInvolveds=[]),aa(a.newPerson)&&(a.personAddMode?a.isPersonInvolvedIsExist(a.newPerson,null)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds.push(angular.copy(a.newPerson)),s.addAlerts("success","Data Person Saved Successfully"),a.personInvolvedDuplicate=!1,a.add=!1):a.isPersonInvolvedIsExist(a.newPerson,a.editPersonIndex)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds[a.editPersonIndex]=a.newPerson,s.addAlerts("success","Data Person Updated Successfully"),a.personInvolvedDuplicate=!1,a.add=!1))};var ba=function(){a.action=!a.action};a.onSave=function(){var b=H.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var c=b.data;if(c.IsSuccess){ba(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var d=i.Save(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,a.FetchMergedIncidents(),a.fetchAllowEdit(),a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_value=angular.fromJson(a.incident.main_template_value),s.removeAlerts(),s.addAlerts("success","Data Saved Successfully")):(s.removeAlerts(),s.addAlerts("danger","Save draft incident failed")),ba()})}})},a.onSaveNext=function(){},a.onSaveRca=function(){ba(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){var c=b.data;c.IsSuccess?(a.incident=c.Data,a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.FetchComments(),s.removeAlerts(),s.addAlerts("success","Data Saved Successfully")):(s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+c.Message)),ba()})},a.first_time=!0,a.generalValidation=function(){a.incident.validation={};var b=!0;return a.first_time=!1,a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.incident.validation.incidentTypeOther=!0,b=!1):(a.incident.validation.incidentType=!0,b=!1),angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==a.incident.incident_type_id&&c.MasterIncidentSubTypes.length>0&&(null==a.incident.incident_sub_type_id||0==a.incident.incident_sub_type_id?(a.incident.validation.incidentSubType=!0,b=!1):a.isSubtypeSpecified(a.incident.incident_sub_type_id)&&!a.incident.incident_sub_type_others_description&&(b=!1))}),null===a.incident.is_near_miss&&(a.incident.validation.near_miss=!0,b=!1),a.incident.location_id||(a.incident.validation.location=!0,b=!1),a.incident.date_of_occurance||(a.incident.validation.date=!0,b=!1),a.incident.time_of_occurance?a.incident.time_of_occurance>a.today&&(a.incident.validation.time_max=!0,b=!1):(a.incident.validation.time=!0,b=!1),a.incident.reporter_name.length>200&&(b=!1),a.isAnonymous||(a.incident.reporter_name||(a.incident.validation.reporter_name=!0,b=!1),a.incident.designation_id&&0!=a.incident.designation_id||(a.incident.validation.designation=!0,b=!1),a.incident.department_id&&0!=a.incident.department_id||(a.incident.validation.department=!0,b=!1),a.incident.employee_category_id&&0!=a.incident.employee_category_id||(a.incident.validation.employee_category=!0,b=!1)),b},a.add=!1,a.personInvolvedValidation=function(){return a.personInvolvedNotValid=!0,a.personInvolvedNotValidNearMiss=!0,a.form.is_edited||(a.personInvolvedNotValidNearMiss=!1,a.personInvolvedNotValid=!1),angular.forEach(a.incident.PersonInvolveds,function(b,c){b.is_active&&(a.personInvolvedNotValid=!1)}),!a.personInvolvedNotValid&&!a.add&&a.form.is_edited||!a.form.is_edited},a.main_template={},a.incident_detail={},a.fetchIncidentTemplate=function(){t.showLoading();var b=g.FetchIncidentTemplate({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id},function(){a.main_template_navigation=b.data.main_template_navigation,a.templateSections=b.data.DetailTemplates,a.main_template=b.data.main_template,t.hideLoading()},function(){t.hideLoading()})},a.incidentDetailEnterValidation=function(){if(a.incident_detail.validation=!1,null==a.incident.incident_type_id)return alert("Please choose Incident Type and Incident Sub Type (if any) first!"),!1;var b=this.$$nextSibling.details;return a.dynamicFormScope&&a.dynamicFormScope.$destroy(),a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.$on("$destroy",function(){a.dynamicFormScope.$$watchers=null,a.dynamicFormScope.$$listeners=null}),a.incident.incident_id>0&&(a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value)),b.$valid=!0,b.$invalid=!1,b&&angular.forEach(b,function(a,c){a.hasOwnProperty("$modelValue")&&b.$removeControl(a)}),a.main_template="",a.main_template_navigation="",a.templateSections=[],a.fetchIncidentTemplate(),!0},a.firstTimeDetails=!1,a.incidentDetailExitValidation=function(){var b=this.$$nextSibling.details;return a.firstTimeDetails=!0,b.$valid?(E.unbind("click"),a.incident.main_template_value=angular.fromJson(a.dynamicFormScope.main_template_value),!0):(a.incident_detail.validation=!0,!1)},a.$on("$destroy",function(){a.stopAutoSave(),a.dynamicFormScope&&a.dynamicFormScope.$destroy(),E.unbind("scroll"),$(window).unbind("scroll"),$(window).unbind("resize");var b=document.getElementById("incident-form-content");if(b){var c=$("#incident-form-content");c.each(function(a,b){b.parentNode&&b.parentNode.removeChild(b)}),c.empty(),c.remove()}var d=H.ReleaseLock({incidentId:a.incident.incident_id},function(){d.data},function(){})}),a.onCheckRequiredDateElements=function(a,b){var c=!1;return a?"yes"==a&&(b?""==b&&(c=!0):c=!0):c=!0,c},a.onCheckRequiredRadioElements=function(a){var b=!1;return a||(b=!0),b},a.onChangeRoutingGroup=function(b){a.routingUsers=[],angular.forEach(b.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incident.location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incident.department_id&&c.is_active&&a.routingUsers.push(b)})})},a.fetchRoutingGroup=function(){var b=1;a.incident.current_tracking_order_level&&(b=a.incident.current_tracking_order_level);var c=0;a.incident.workflow_id&&(c=a.incident.workflow_id);var d=q.FetchNextRoutingGroup({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:b,designationId:a.incident.designation_id,currentWorkflowId:c,locationId:a.incident.location_id,departmentId:a.incident.department_id,isAnonymous:a.incident.is_anonymous,reporterId:a.incident.created_by},function(){a.routingGroups=d.data,a.routingUsers=[],a.routingGroup={};var b=!0;angular.forEach(a.routingGroups,function(c,d){b&&(a.routingGroup=c,b=!1,angular.forEach(c.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incident.location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incident.department_id&&c.is_active&&a.routingUsers.push(b)})}))})})},a.fetchCommitteeGroup=function(){var b=[],c=[];a.committeeGroups=[],angular.forEach(a.incident.PersonInvolveds,function(a,d){null!=a.patient_class&&b.push(a.patient_class),"patient"==a.person_category.toLowerCase()?c.push(a.patient_type):c.push(a.person_category)});var d=p.FetchAllForIncidentCc({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id,locationId:a.incident.location_id,departmentId:a.incident.department_id,listDisciplineCode:b,listPersonInvolved:c},function(){a.committeeGroups=d.data,a.incident.Ccs=[],angular.forEach(a.committeeGroups,function(b,c){a.incident.Ccs.push(b)})})},a.incidentDescriptionEnterValidation=function(){if(null==a.incident.incident_type_id)return alert("Please choose Incident Type and Location of Incident first!"),!1;a.fetchRoutingGroup(),a.fetchCommitteeGroup(),a.main_template="";var b=g.FetchOne({incidentTypeId:a.incident.incident_type_id},function(){var c=b.data;a.main_template_supervisor="",a.main_template_supervisor=c.main_template_supervisor,a.incident.main_template_supervisor=a.main_template_supervisor});return!0},a.onSubmit=function(){if(null==a.incident.is_witnessed&&(a.incident.is_witnessed=!1),a.incident_description_invalid=!1,a.situation_invalid=!1,a.background_invalid=!1,a.assessment_invalid=!1,a.recommendations_invalid=!1,a.incident.situation.length<10&&(a.situation_invalid=!0),a.incident.background.length<10&&(a.background_invalid=!0),a.incident.assessment.length<10&&(a.assessment_invalid=!0),a.incident.recommendations.length<10&&(a.recommendations_invalid=!0),a.incident.routing_group_id>0&&a.incident.situation.length>=10&&a.incident.background.length>=10&&a.incident.assessment.length>=10&&a.incident.recommendations.length>=10){a.situation_invalid=!1,a.background_invalid=!1,a.assessment_invalid=!1,a.recommendations_invalid=!1,a.submitValid=!0,ba(),a.dynamicFormScope.main_template_value&&(a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value)),a.main_template_supervisor_value&&(a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value));var b=i.Save(a.incident,function(){t.showLoading();var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.Submit(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,j.set(a.incident),t.hideLoading(),ba(),l.path("/incident/form/reporterConfirmation")):(t.hideLoading(),ba(),s.removeAlerts(),s.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else ba(),t.hideLoading(),s.removeAlerts(),s.addAlerts("danger","Submit incident failed")},function(){t.hideLoading(),ba()})}},a.FetchComments=function(){var b=a.incident.incident_id;if(null==b&&(b=0),a.currentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_VIEW_ALL)var c=u.FetchAll({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})});else var c=u.FetchAllWithReporterView({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})})},a.commentEnterValidation=function(){return a.FetchComments(),!0};var ca=function(b){y.open({templateUrl:"app/incident/form/incident-comment/incident-comment.html",controller:"IncidentCommentCtrl",windowClass:"modal-large",resolve:{incidentComment:function(){return b},incident:function(){return angular.copy(a.incident)}}}).result.then(function(b){var c="",d="";b?(c="success",d="Comment Saved Succesfully"):(c="danger",d="Save comment failed"),s.removeAlerts(),s.addAlerts(c,d),a.FetchComments()})};a.onViewComment=function(a){a.is_edited=!1,ca(a)},a.onAddComment=function(b){a.userSession=m.getSession();var c={incident_id:a.incident.incident_id,comment_type:b,comment_date:new Date,comment_by:a.userSession.name,user_id:a.userSession.user_id,is_active:!0};ca(c)},a.onCommentEdit=function(a){var b=a;ca(b)},a.onCommentDelete=function(b){var c=u.Delete(b,function(){var b=c.data;b.IsSuccess?(s.removeAlerts(),s.addAlerts("success","Data Deleted")):(s.removeAlerts(),s.addAlerts("danger","Delete comment failed")),a.FetchComments()})},a.onCommentAttachmentDownload=function(a){window.open("/File/Download?name="+encodeURIComponent(a.attachment_filename))},a.calculateSAC=function(){a.sacScore="",a.sacScore=String(a.incident.sac_likelihood)+String(a.incident.sac_consequences)},a.sacEnterValidation=function(){return a.sac.validation_sac=!1,a.calculateSAC(),!0},a.sacExitValidation=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(a.sac.validation_sac=!0,b=!1),b},a.fetchIncidentRca=function(){var b=a.incident.incident_id;null==b&&(b=0);var c=z.FetchAll({incidentId:b},function(){a.incident.RcaCategories=[],a.incident.RcaCategories=c.data})},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0;return angular.forEach(a.incident.RcaCategories,function(a,d){if(c){var e=!1;angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(e=!0)}),b=e,c=!b}}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()&&(a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,valid=!1,s.removeAlerts(),s.addAlerts("danger","Please provide SAC value")),valid){ba(),a.dynamicFormScope.main_template_value&&(a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value)),a.main_template_supervisor_value&&(a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value));var b=i.Save(a.incident,function(){var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(s.removeAlerts(),s.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),j.set(a.incident),ba(),l.path("/incident/track")):(ba(),s.removeAlerts(),s.addAlerts("danger","Submit Failed. Error : "+c.Message))})}else s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+c.Message),ba()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()};var da=function(){y.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track"))})},ea=function(){y.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track")})},fa=function(){y.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),a.incident.is_anonymous?(s.removeAlerts(),s.addAlerts("danger","This incident can't be rerouted")):da()},a.onCloseIncident=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),ea()},a.onReOpenIncident=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),fa()},a.onBack=function(){l.path("/incident/track")},a.onBackToMerged=function(){a.form.is_merged?l.path("/incident/merge/form"):l.path("/incident/merge")},a.onTest=function(){},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var ga=A.FetchAll(function(){a.gcs=ga.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})});a.isInPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"I"==a.patient_type&&(b=!0)}),b},a.isAnyNearMiss=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){a.is_affected&&(b=!0)}),b},a.isPersonInvolvedIsExist=function(b,c){var d=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,e){c!=e&&a.person_category==b.person_category&&a.is_active&&("Staff"==b.person_category?b.fullname==a.fullname&&b.person_id==a.person_id&&(d=!0):b.fullname==a.fullname&&b.nric==a.nric&&(d=!0))}),d},a.isExceptStaff=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){("Patient"==a.person_category||"Visitor"==a.person_category||"Others"==a.person_category)&&(b=!0)}),b};var ha=function(b){y.open({templateUrl:"app/incident/form/search-person-involved-staff/search-person-involved-staff.html",controller:"SearchPersonInvolvedStaffCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;a.newPerson.fullname=c.employee_name,a.newPerson.person_id=c.employee_id,a.newPerson.gender=c.gender,a.newPerson.staff_designation_id=parseInt(c.DesignationMaster.designation_id),a.newPerson.staff_discipline_id=parseInt(c.DepartmentMaster.department_id),a.newPerson.service_long=c.service_long,c.service_long<3?a.newPerson.staff_years_of_service="less3mo":c.service_long<=6?a.newPerson.staff_years_of_service="36mo":c.service_long<=12?a.newPerson.staff_years_of_service="612mo":c.service_long<=24?a.newPerson.staff_years_of_service="12years":c.service_long<=60?a.newPerson.staff_years_of_service="25years":a.newPerson.staff_years_of_service="more5years"}})};a.onSearchStaff=function(){ha({})};var ia=function(b){y.open({templateUrl:"app/incident/form/search-person-involved-patient/search-person-involved-patient.html",controller:"SearchPersonInvolvedPatientCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;a.newPerson.fullname=c.PatientName,a.newPerson.case_number=c.CaseID,a.newPerson.gender=c.gender,a.newPerson.nric=c.IdentificationDocNo,a.newPerson.patient_bed_no=c.Bed,a.newPerson.age=c.Age,a.newPerson.patient_type=c.CaseType,a.newPerson.patient_admission_date=c.MovementDateTime,a.newPerson.patient_class=c.PatientClass,a.newPerson.patient_location=c.OrganizationalUnit,a.newPerson.patient_discipline=c.Department,a.newPerson.patient_consultant_in_charge=c.AttendingDoctor,a.hasSearch=!0}})};a.onSearchPatient=function(){ia({})};var ja=function(b){y.open({templateUrl:"app/incident/form/add-cc-sap-hr/add-cc-sap-hr.html",controller:"AddCcSapHrCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){var c=b,d={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:c.adid,addition_cc_type:1,email:c.email_address,name:c.employee_name};a.incident.AdditionalCcs.push(d)})};a.onAddCcSapHr=function(){ja({})};var ka=function(b){y.open({templateUrl:"app/incident/form/add-cc-user/add-cc-user.html",controller:"AddCcUserCtrl",windowClass:"modal-large"}).result.then(function(b){var c={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:b.adid,addition_cc_type:1,email:b.email,name:b.name},d=!1;angular.forEach(a.incident.AdditionalCcs,function(a,b){a.email==c.email&&(d=!0)}),d||a.incident.AdditionalCcs.push(c)})};a.onAddCcUser=function(){ka({})},a.onDeleteAdditionalCc=function(b){var c=a.incident.AdditionalCcs.indexOf(b);a.incident.AdditionalCcs.splice(c,1)},a.fetchHighestWorkflow=function(){t.showLoading();var b=q.FetchHighestWorkflow({employeeCategoryId:a.incident.employee_category_id,designationId:a.incident.designation_id,isAnonymous:a.incident.is_anonymous,departmentId:a.incident.department_id,locationId:a.incident.location_id},function(){var c=b.data;a.incident.current_tracking_order_level>=c.order?a.isHighest=!0:a.isHighest=!1,t.hideLoading()},function(){t.hideLoading()})},a.rcaEnterValidation=function(){return a.fetchHighestWorkflow(),$(".nav-incident-detail").onePageNav(),!0};var la=function(){y.open({templateUrl:"app/incident/form/tooltip/incident-likelihood-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},ma=function(){y.open({templateUrl:"app/incident/form/tooltip/incident-consequences-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},na=function(){y.open({templateUrl:"app/incident/form/tooltip/incident-sre-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},oa=function(){y.open({templateUrl:"app/incident/form/tooltip/incident-stage-tooltip.html",windowClass:"modal-fullscreen"}).result.then(function(a){})},pa=function(){y.open({templateUrl:"app/incident/form/tooltip/ham-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenConsequencesModal=function(){ma({})},a.onOpenSREModal=function(){na({})},a.onOpenStageModal=function(){oa({})},a.onOpenLikelihoodModal=function(){la({})},a.onOpenHamModal=function(){pa()}}]),angular.module("HITS").controller("AnesthesiaDetailCtrl",["$scope",function(a){a.incident={incident_type_id:2},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("RoutingGroupUserCtrl",["$scope","$modal","$location","RoutingGroupService","RoutingGroupFormService","ToastMessageService","SessionService","UserAclSessionData","UserSessionData",function(a,b,c,d,e,f,g,h,i){g.setAclSession(h),g.setAcltoScope(a),a.currentAcl.SM_ROUTING_GROUP_VIEW||c.path("/unauthorized"),a.institution_id=i.institution_id,a.routingGroupData=e.get();var j=d.FetchOne({routingGroupId:a.routingGroupData.routing_group_id},function(){a.routingGroup=j.data});a.filterRoutingUser=function(b){return b.is_active&&b.User.institution_id==a.institution_id?!0:!1},a.onAddUser=function(c){b.open({templateUrl:"app/master/routingGroup/add-routing-group-user/add-routing-group-user.html",controller:"AddRoutingGroupUserCtrl",backdrop:!0,windowClass:"modal-medium",resolve:{routingGroupId:function(){return a.routingGroup.routing_group_id}}}).result.then(function(b){var c="",e="";b?(c="success",e="Data Saved Succesfully"):(c="danger",e="Save routing group user failed"),f.addAlerts(c,e);var g=d.FetchOne({routingGroupId:a.routingGroup.routing_group_id},function(){a.routingGroup=g.data})})},a.onManageLocation=function(c,e){a.routingGroup.RoutingUsers.indexOf(c);b.open({templateUrl:"app/master/routingGroup/add-routing-group-location/add-routing-group-location.html",controller:"AddRoutingGroupLocationCtrl",backdrop:!0,windowClass:"modal-medium",resolve:{routingUser:function(){return angular.copy(c)},routingGroup:function(){return angular.copy(e)}}}).result.then(function(b){var c="",e="";b?(c="success",e="Data Saved Succesfully"):(c="danger",e="Save routing group location failed"),f.addAlerts(c,e);var g=d.FetchOne({routingGroupId:a.routingGroup.routing_group_id},function(){a.routingGroup=g.data})})},a.onManageDepartment=function(c,e){a.routingGroup.RoutingUsers.indexOf(c);b.open({templateUrl:"app/master/routingGroup/add-routing-group-department/add-routing-group-department.html",controller:"AddRoutingGroupDepartmentCtrl",backdrop:!0,windowClass:"modal-medium",resolve:{routingUser:function(){return angular.copy(c)},routingGroup:function(){return angular.copy(e)}}}).result.then(function(b){var c="",e="";b?(c="success",e="Data Saved Succesfully"):(c="danger",e="Save routing group department failed"),f.addAlerts(c,e);var g=d.FetchOne({routingGroupId:a.routingGroup.routing_group_id},function(){a.routingGroup=g.data})})},a.onBack=function(){c.path("/routingGroup")},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the User Data ["+b.User.name+"] ?");if(c)var e=d.DeleteRoutingUser({routingUserId:b.routing_user_id},function(){if(e.data.IsSuccess)var b=d.FetchOne({routingGroupId:a.routingGroup.routing_group_id},function(){a.routingGroup=b.data});else f.addAlerts("danger","Delete routing group user failed")})}}]),angular.module("HITS").controller("AddRoutingGroupUserCtrl",["$scope","$q","$modalInstance","routingGroupId","RoutingGroupService","UserService","LoadingScreenService","UserSessionData",function(a,b,c,d,e,f,g,h){a.routingGroupId=d;var i={};a.fetchRoutingGroup=function(){var c=b.defer(),d=e.FetchOne({routingGroupId:a.routingGroupId},function(){var a=d.data;c.resolve(a)});return c.promise},a.Fetch=function(){var b=f.FetchAllForRoutingGroup({institutionId:h.institution_id,routingGroupId:a.routingGroupId},function(){a.users=[],a.users=b.data,angular.forEach(a.users,function(b,c){i[b.user_id]||a.routingGroup.RoutingUsers.push({routing_group_id:a.routingGroup.routing_group_id,user_id:b.user_id,is_active:!1,User:b,routing_user_id:0})})})},a.validate={},a.validate.button=!0,a.select={},a.select.selectAllUser=!1,a.select.unselectAllUser=!1,b.all([a.fetchRoutingGroup()]).then(function(b){a.routingGroup=b[0],angular.forEach(a.routingGroup.RoutingUsers,function(a,b){i[a.user_id]=a}),a.Fetch()}),a.select_all_user=function(){a.select.selectAllUser?(a.select.selectAllUser=!1,a.select.unselectAllUser=!1):(a.select.selectAllUser=!0,a.select.unselectAllUser=!1),a.routingGroup.RoutingUsers&&angular.forEach(a.routingGroup.RoutingUsers,function(b){b.is_active=a.select.selectAllUser})},a.unselect_all_user=function(){a.select.unselectAllUser?(a.select.selectAllUser=!1,a.select.unselectAllUser=!1):(a.select.selectAllUser=!1,a.select.unselectAllUser=!0),a.select.unselectAllUser&&a.routingGroup.RoutingUsers&&angular.forEach(a.routingGroup.RoutingUsers,function(a){a.is_active=!1})};var j=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,g.showLoading(),j();var d=[];angular.forEach(a.routingGroup.RoutingUsers,function(a,b){(a.routing_user_id>0||a.is_active)&&d.push(a)}),a.routingGroup.RoutingUsers=[],angular.forEach(d,function(b,c){a.routingGroup.RoutingUsers.push(b)});e.Save(a.routingGroup,function(){j(),g.hideLoading(),c.close(a.routingGroup)},function(){j(),g.hideLoading(),c.close(null),a.validate.button=!0})}}]),angular.module("HITS").controller("AddRoutingGroupLocationCtrl",["$scope","LocationService","RoutingGroupService","routingUser","routingGroup","$modalInstance","LoadingScreenService",function(a,b,c,d,e,f,g){a.routingUser=d,a.routingGroup=e,a.select={},a.validate={},a.validate.button=!0,a.select.selectAllLoc=!1,a.select.unselectAllLoc=!1;var h={};angular.forEach(a.routingUser.RoutingLocations,function(a,b){h[a.location_id]=a});var i=b.FetchAll(function(){a.locations=i.data,a.tempRoutingLocations=angular.copy(a.routingUser.RoutingLocations),null==a.tempRoutingLocations&&(a.tempRoutingLocations=[]),angular.forEach(a.locations,function(b,c){h[b.location_id]||a.tempRoutingLocations.push({routing_user_id:a.routingUser.routing_user_id,location_id:b.location_id,is_active:!1,Location:b})})});a.select_all_location=function(){a.select.selectAllLoc?(a.select.selectAllLoc=!1,a.select.unselectAllLoc=!1):(a.select.selectAllLoc=!0,a.select.unselectAllLoc=!1),angular.forEach(a.tempRoutingLocations,function(b){b.is_active=a.select.selectAllLoc})},a.unselect_all_location=function(){a.select.unselectAllLoc?(a.select.selectAllLoc=!1,a.select.unselectAllLoc=!1):(a.select.selectAllLoc=!1,a.select.unselectAllLoc=!0),a.select.unselectAllLoc&&angular.forEach(a.tempRoutingLocations,function(a){a.is_active=!1})};var j=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,g.showLoading(),j();var d=angular.copy(a.tempRoutingLocations);a.routingUser.RoutingLocations=[],angular.forEach(d,function(b,c){(b.routing_location_id||b.is_active)&&a.routingUser.RoutingLocations.push(b)});var e=-1,h=0;angular.forEach(a.routingGroup.RoutingUsers,function(b,c){b.routing_user_id==a.routingUser.routing_user_id&&(e=h),h++}),e>=0&&(a.routingGroup.RoutingUsers[e]=a.routingUser);c.SaveUserRoutingLocation({routingUserId:a.routingUser.routing_user_id,listLocation:a.routingUser.RoutingLocations,isAllLocation:a.routingUser.is_all_location},function(){j(),g.hideLoading(),f.close(a.routingUser)},function(){j(),g.hideLoading(),f.close(null),a.validate.button=!0})}}]),angular.module("HITS").controller("DesignationGroupListCtrl",["$rootScope","$scope","$resource","$location","$modal","DesignationGroupService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_DESIGNATION_GROUP_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/designationGroup/designationGroup-form/designationGroup-form.html",controller:"DesignationGroupFormCtrl",resolve:{designationGroupData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"designation_group_name",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["designation_group_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.designationGroups=[];var c=a.data.list;b.designationGroups=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a));
},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Designation Group ["+a.designation_group_name+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("WorkflowemployeeformCtrl",["$scope","EmployeeCategoryService","workflow","WorkflowService","$modalInstance",function(a,b,c,d,e){a.workflow=angular.copy(c),a.select={},a.select.selectAllEmployee=!1,a.select.unselectAllEmployee=!1;var f={};angular.forEach(a.workflow.Employees,function(a,b){f[a.employee_category_id]=a});var g=b.FetchAll(function(){a.employeeCategorys=g.data,angular.forEach(a.employeeCategorys,function(b,d){f[b.employee_category_id]||a.workflow.Employees.push({workflow_id:c.workflow_id,employee_category_id:b.employee_category_id,is_active:!1,EmployeeCategory:b})})});a.select_all_employee=function(){a.select.selectAllEmployee?(a.select.selectAllEmployee=!1,a.select.unselectAllEmployee=!1):(a.select.selectAllEmployee=!0,a.select.unselectAllEmployee=!1),angular.forEach(a.workflow.Employees,function(b){b.is_active=a.select.selectAllEmployee})},a.unselect_all_employee=function(){a.select.unselectAllEmployee?(a.select.selectAllEmployee=!1,a.select.unselectAllEmployee=!1):(a.select.selectAllEmployee=!1,a.select.unselectAllEmployee=!0),a.select.unselectAllEmployee&&angular.forEach(a.workflow.Employees,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.workflow.Employees);a.workflow.Employees=[],angular.forEach(c,function(b,c){(b.workflow_employee_id||b.is_active)&&a.workflow.Employees.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("WorkflowDepartmentFormCtrl",["$scope","DepartmentService","workflow","WorkflowService","$modalInstance",function(a,b,c,d,e){a.workflow=angular.copy(c),a.select={},a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1;var f={};angular.forEach(a.workflow.Departments,function(a,b){f[a.department_id]=a});var g=b.FetchAll(function(){a.departments=g.data,angular.forEach(a.departments,function(b,d){f[b.department_id]||a.workflow.Departments.push({workflow_id:c.workflow_id,department_id:b.department_id,is_active:!1,Department:b})})});a.select_all_department=function(){a.select.selectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!0,a.select.unselectAllDepartment=!1),angular.forEach(a.workflow.Departments,function(b){b.is_active=a.select.selectAllDepartment})},a.unselect_all_department=function(){a.select.unselectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!0),a.select.unselectAllDepartment&&angular.forEach(a.workflow.Departments,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.workflow.Departments);a.workflow.Departments=[],angular.forEach(c,function(b,c){(b.workflow_department_id||b.is_active)&&a.workflow.Departments.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("WorkflowLocationFormCtrl",["$scope","LocationService","workflow","WorkflowService","$modalInstance",function(a,b,c,d,e){a.workflow=angular.copy(c),a.select={},a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1;var f={};angular.forEach(a.workflow.Locations,function(a,b){f[a.location_id]=a});var g=b.FetchAll(function(){a.locations=g.data,angular.forEach(a.locations,function(b,d){f[b.location_id]||a.workflow.Locations.push({workflow_id:c.workflow_id,location_id:b.location_id,is_active:!1,Location:b})})});a.select_all_location=function(){a.select.selectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!0,a.select.unselectAllLocation=!1),angular.forEach(a.workflow.Locations,function(b){b.is_active=a.select.selectAllLocation})},a.unselect_all_location=function(){a.select.unselectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!0),a.select.unselectAllLocation&&angular.forEach(a.workflow.Locations,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.workflow.Locations);a.workflow.Locations=[],angular.forEach(c,function(b,c){(b.workflow_location_id||b.is_active)&&a.workflow.Locations.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("DesignationGroupFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DesignationGroupService","designationGroupData",function(a,b,c,d,e,f,g){b.designationGroup=g,b.validate={},b.validate.button=!0,b.designationGroup.designation_group_name&&(b.validate.designation_group_name=!1),b.isValid=function(){return b.designationGroup.designation_group_name?b.validate.designation_group_name=!1:b.validate.designation_group_name=!0,b.validate.designation_group_name?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("IncidentCommentCtrl",["$scope","$timeout","$modalInstance","$modal","$window","incidentComment","IncidentCommentService","FileUploader","incident","SessionService","ToastMessageService","LoadingScreenService",function(a,b,c,d,e,f,g,h,i,j,k,l){a.today=new Date,a.incidentComment=angular.copy(f),a.text={},a.text.MaxlengthComment=0,"COMMENT"==a.incidentComment.comment_type||"FOLLOW UP"==a.incidentComment.comment_type?a.text.MaxlengthComment=1e4:a.text.MaxlengthComment=6e3,a.factors_minimizing_incident={},a.isDateEnable=!0,a.factors_minimizing_incident={},a.how_to_prevent={},a.incidentComment.factors_minimizing_incident&&"undefined"!=a.incidentComment.factors_minimizing_incident&&(a.factors_minimizing_incident=angular.fromJson(a.incidentComment.factors_minimizing_incident)),a.incidentComment.how_to_prevent&&"undefined"!=a.incidentComment.how_to_prevent&&(a.how_to_prevent=angular.fromJson(a.incidentComment.how_to_prevent));var m="";a.successFile=0,a.failedFile=0,null==a.incidentComment.is_edited&&(a.incidentComment.is_edited=!0),a.incident=i,j.setAcltoScope(a),a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.inAct=!1;var n=a.uploader=new h({url:"/File/UploadIncidentCommentAttachment",autoUpload:!0,removeAfterUpload:!0});n.filters.push({name:"fileTypeFilter",fn:function(a,b){var c="|"+a.name.slice(a.name.lastIndexOf(".")+1)+"|",d="|jpg|png|jpeg|bmp|gif|txt|doc|docx|xls|xlsx|ppt|pptx|pdf|rtf|csv|zip|7z|rar|",e=-1!==d.indexOf(c.toLowerCase());return e||(k.removeAlerts(),k.addAlerts("danger","Please upload whitelisted file only (image, txt, doc, excel, pdf, zip)")),e}}),n.onBeforeUploadItem=function(b){b.formData.push({incidentId:a.incident.incident_id})},n.onSuccessItem=function(b,c,d,e){if(m="",a.successFile=0,a.failedFile=0,c.Content){var f=c.Content.split("|"),d=f[0];f[2];if("1"==d)a.incidentComment.attachment_filename=b.file.name,a.incidentComment.attachment_filepath=b.url+"/"+b.file.name,a.successFile++,k.removeAlerts(),k.addAlerts("success","File uploaded successfully.");else{var g=f[1];m=g,a.failedFile++}}},n.onErrorItem=function(a,b,c,d){k.removeAlerts(),k.addAlerts("danger","File upload failed.")},n.onCompleteAll=function(){k.removeAlerts();var b="";a.failedFile>0&&(b+="Upload failed. "+m,k.addAlerts("danger",b))},a.download=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,e.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(b.attachment_filename)+"&incidentId="+c)},a.valid={},a.valid.description=!1,a.valid.user=!1,a.isValid=function(){var b=!0,c=!1;return"FOLLOW UP"==a.incidentComment.comment_type&&(null!=a.incidentComment.CommentTo?(a.valid.user=!1,b=!0):(a.valid.user=!0,b=!1)),a.incidentComment.comment_description?(c=!0,a.valid.description=!1):(a.valid.description=!0,c=!1),b&&c},a.onSave=function(b){if(a.isValid()){if(a.factors_minimizing_incident&&a.factors_minimizing_incident.other&&!a.factors_minimizing_incident.factors_minimizing_incident_other_description)return;if(a.how_to_prevent&&a.how_to_prevent.other&&!a.how_to_prevent.how_to_prevent_other_description)return;a.inAct=!0,l.showLoading(),a.factors_minimizing_incident&&(b.factors_minimizing_incident=JSON.stringify(a.factors_minimizing_incident)),a.how_to_prevent&&(b.how_to_prevent=JSON.stringify(a.how_to_prevent));var d=g.Save(b,function(){l.hideLoading();var b=!0;d.data||(b=!0),c.close(b),a.inAct=!1})}},a.onSearchUser=function(){d.open({templateUrl:"app/incident/form/incident-comment/incident-comment-choose-user/incident-comment-choose-user.html",controller:"IncidentCommentChooseUserCtrl",windowClass:"modal-medium",resolve:{commentData:function(){return a.incidentComment}}}).result.then(function(b){b&&(a.incidentComment=b)})}}]),angular.module("HITS").controller("GcsListCtrl",["$rootScope","$scope","$resource","$location","$modal","GcsService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b);var j=function(a){e.open({templateUrl:"app/master/gcs/gcs-form/gcs-form.html",controller:"GcsFormCtrl",resolve:{gcsData:function(){return a}}}).result.then(function(a){var c="",d="";a?(c="success",d="Data Saved Succesfully"):(c="danger",d="Error Saving Data"),g.addAlerts(c,d),b.Fetch()})};b.Fetch=function(){var a=f.FetchAll(function(){b.gcss=[];var c=a.data;b.gcss=c})},b.onCreateNew=function(){j(null)},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the GCS ["+a.gcs_description+"] ?");if(c)var d=f.Delete(a,function(){var a="",c="";d?(a="success",c="Data Deleted Succesfully"):(a="danger",c="Error Deleting Data"),g.addAlerts(a,c),b.Fetch()})},b.OnSearch=function(){b.Fetch()},b.Fetch()}]),angular.module("HITS").controller("GcsFormCtrl",["$scope","$modal","$modalInstance","ToastMessageService","GcsService","GcsDetailService","gcsData",function(a,b,c,d,e,f,g){a.gcs=g,a.GcsDetails={},a.onSave=function(a){e.Save(a,function(){c.close()})},a.Fetch=function(){var b=f.FetchAll({gcsId:a.gcs.gcs_id},function(){a.gcsDetails=[];var c=b.data;a.gcsDetails=c})},a.onDelete=function(b){var c=a.gcs.GcsDetails.indexOf(b);a.gcs.GcsDetails[c].is_active=!1},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the GCS Detail ["+b.gcs_detail_description+"] ?");if(c)var e=f.Delete(b,function(){var b="",c="";e?(b="success",c="Data Deleted Succesfully"):(b="danger",c="Error Deleting Data"),d.addAlerts(b,c),a.Fetch()})};var h=function(c){b.open({templateUrl:"app/master/gcs/gcsDetail-form/gcsDetail-form.html",controller:"GcsDetailFormCtrl",resolve:{gcsData:function(){return c}}}).result.then(function(b){var c="",e="";b?(c="success",e="Data Saved Succesfully"):(c="danger",e="Error Saving Data"),d.addAlerts(c,e),a.Fetch()})};a.onCreateNew=function(b){a.gcs.GcsDetails.gcs_id=b,h(a.gcs)},a.Fetch()}]),angular.module("HITS").controller("GcsDetailFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","GcsDetailService","gcsData",function(a,b,c,d,e,f,g){b.gcs=g.gcs,b.onSave=function(a){f.Save(a,function(){e.close()})}}]),angular.module("HITS").controller("IncidentReporterConfirmationCtrl",["$scope","$location","IncidentFormService","AuthenticationService","SessionService",function(a,b,c,d,e){a.incident=c.get();var f=e.isAnonymous();a.is_Anonymous=f,a.onConfirm=function(){if(f=e.isAnonymous())var a=d.Logout(function(){var b=a.data;b&&(window.location="/Web/login.html#/")});else b.path("/incident/track")},a.onAddnew=function(){a.incident={},c.set(a.incident),c.initialize(),b.path("/incident/form")}}]),angular.module("HITS").controller("RootcausecategoryCtrl",["$scope","RootCauseCategoryService","$modal","SessionService","UserAclSessionData",function(a,b,c,d,e){d.setAclSession(e),d.setAcltoScope(a);var f=function(b){c.open({templateUrl:"app/master/rootCauseCategory/rootCauseCategoryForm/rootCauseCategoryForm.html",controller:"RootcausecategoryformCtrl",backdrop:!0,resolve:{rootCauseCategory:function(){return b}}}).result.then(function(b){a.Fetch()})};a.onCreateNew=function(){f({})},a.onRowEdit=function(a){f(angular.copy(a))},a.onRowDelete=function(c){var d=confirm("Are you sure you want to delete the Root Cause Category ["+c.description+"] ?");if(d){b.Delete(c,function(){a.Fetch()})}},a.Fetch=function(){var c=b.FetchAll(function(){a.rootCauseCategorys=c.data})},a.Fetch()}]),angular.module("HITS").controller("RootcausecategoryformCtrl",["$scope","rootCauseCategory","RootCauseCategoryService","$modalInstance",function(a,b,c,d){a.rootCauseCategory=b;var e=function(){a.action=!a.action};a.onSave=function(a){e();c.Save(a,function(){d.close(),e()})}}]),angular.module("HITS").controller("RootcauseCtrl",["$scope","RootCauseService","$modal","SessionService","UserAclSessionData",function(a,b,c,d,e){d.setAclSession(e),d.setAcltoScope(a);var f=function(b){c.open({templateUrl:"app/master/rootCause/rootCauseForm/rootCauseForm.html",controller:"RootcauseformCtrl",backdrop:!0,resolve:{rootCause:function(){return b}}}).result.then(function(b){a.Fetch()})};a.onCreateNew=function(){f({})},a.onRowEdit=function(a){f(angular.copy(a))},a.onRowDelete=function(c){var d=confirm("Are you sure you want to delete the Root Cause ["+c.description+"] ?");if(d){b.Delete(c,function(){a.Fetch()})}},a.Fetch=function(){var c=b.FetchAll(function(){a.rootCauses=c.data})},a.Fetch()}]),angular.module("HITS").controller("RootcauseformCtrl",["$scope","rootCause","RootCauseService","$modalInstance","RootCauseCategoryService",function(a,b,c,d,e){a.rootCause=b;var f=e.FetchAll(function(){a.rootCauseCategorys=f.data}),g=function(){a.action=!a.action};a.onSave=function(a){g();c.Save(a,function(){d.close(),g()})}}]),angular.module("HITS").controller("IncidentReRouteCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance","ToastMessageService","LoadingScreenService",function(a,b,c,d,e,f,g){a.incidentReRouteAction={Incident:b,ReRouteToLevel:null,ReRouteRemarks:""},a.warning={},a.inAction=!1;var h=d.FetchReRouteRoutingGroup({employeeCategoryId:a.incidentReRouteAction.Incident.employee_category_id,currentTrackingOrderLevel:a.incidentReRouteAction.Incident.current_tracking_order_level,designationId:a.incidentReRouteAction.Incident.designation_id,currentWorkflowId:a.incidentReRouteAction.Incident.workflow_id,locationId:a.incidentReRouteAction.Incident.routing_location_id,departmentId:a.incidentReRouteAction.Incident.department_id,isAnonymous:a.incidentReRouteAction.Incident.is_anonymous,incidentId:a.incidentReRouteAction.Incident.incident_id},function(){a.incidentReRouteAction.Incident.is_anonymous||(a.routingGroups=h.data,a.routingGroups.length>0&&(a.incidentReRouteAction.ReRouteToLevel=a.routingGroups[0].order))});a.onChangeRoutingGroup=function(b){a.routingUsers=[],a.warning.routingUser=!1,angular.forEach(a.routingGroups,function(c,d){c.order==b&&angular.forEach(c.RoutingGroup.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incidentReRouteAction.Incident.routing_location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incidentReRouteAction.Incident.department_id&&c.is_active&&a.routingUsers.push(b)})})}),a.routingUsers.length<=0&&1!=b&&(a.warning.routingUser=!0)},a.validate={},a.isValid=function(){var b=!1;return a.incidentReRouteAction.ReRouteToLevel?a.validate.ReRouteToLevel=!1:a.validate.ReRouteToLevel=!0,a.incidentReRouteAction.ReRouteRemarks?a.validate.ReRouteRemarks=!1:a.validate.ReRouteRemarks=!0,b=!a.validate.ReRouteToLevel&&!a.validate.ReRouteRemarks},a.onSave=function(b){if(a.isValid()){a.inAction=!0,g.showLoading();var d=c.ReRoute(b,function(){g.hideLoading();var b=d.data;if(b.IsSuccess)e.close(!0),a.inAction=!1;else{var c="danger",h="Re-route incident failed";f.removeAlerts(),f.addAlerts(c,h),e.close(!1),a.inAction=!1}})}}}]),angular.module("HITS").controller("IncidentCloseCtrl",["$scope","incidentData","isSacScoreValid","isRcaValid","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e,f,g){a.incidentCloseAction={Incident:b,CloseRemarks:""},a.inAction=!1,a.message={},a.message.isSacScoreValid=!c,a.message.isRcaValid=!d,a.onSave=function(b){a.inAction=!0;var c=e.Close(b,function(){c.data&&(g.close(!0),a.inAction=!1)})}}]),angular.module("HITS").controller("BloodProductTransfusionCtrl",["$scope",function(a){a.incident={is_near_miss:!0,incident_type_id:3},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("ClinicalAssessmentTreatmentCtrl",["$scope",function(a){a.incident={incident_type_id:4,incident_sub_type_id:7},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("BehaviourCtrl",["$scope","GcsService",function(a,b){a.incident={incident_type_id:5},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var c=b.FetchAll(function(){a.gcs=c.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})})}]),angular.module("HITS").controller("IncidentReOpenCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance","ToastMessageService",function(a,b,c,d,e,f){a.incidentReOpenAction={Incident:b,ReOpenToLevel:null,ReOpenRemarks:""},a.inAction=!1;var g=d.FetchHighestWorkflow({employeeCategoryId:a.incidentReOpenAction.Incident.employee_category_id,designationId:a.incidentReOpenAction.Incident.designation_id,isAnonymous:a.incidentReOpenAction.Incident.is_anonymous,departmentId:a.incidentReOpenAction.Incident.department_id,locationId:a.incidentReOpenAction.Incident.location_id},function(){var b=g.data;a.routingGroups=[],a.routingGroups.push(b),a.incidentReOpenAction.ReOpenToLevel=b.order});a.validate={},a.isValid=function(){var b=!1;return a.incidentReOpenAction.ReOpenToLevel?a.validate.ReOpenToLevel=!1:a.validate.ReOpenToLevel=!0,a.incidentReOpenAction.ReOpenRemarks?a.validate.ReOpenRemarks=!1:a.validate.ReOpenRemarks=!0,b=!a.validate.ReOpenRemarks&&!a.validate.ReOpenToLevel},a.onSave=function(b){if(a.isValid()){a.inAction=!0;var d=c.ReOpen(b,function(){var b=d.data;if(b.IsSuccess)e.close(!0),a.inAction=!1;else{a.inAction=!1;var c="danger",g="Re-open incident failed";f.removeAlerts(),f.addAlerts(c,g),e.close(!1)}})}}}]),angular.module("HITS").controller("IncidentStatusMovementCtrl",["$scope","IncidentStatusMovementService","incidentData",function(a,b,c){a.incident=c;var d=b.FetchStatus({incidentId:a.incident.incident_id},function(){a.incidentStatusMovement=d.data})}]),angular.module("HITS").controller("IncidentMassCloseCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e){a.incidentMassCloseAction={Incidents:b,CloseRemarks:"Close Incident"},a.inAction=!1,a.onSave=function(b){a.inAction=!0;var d=c.MassClose(b,function(){e.close(d.data),a.inAction=!1})}}]),angular.module("HITS").controller("IncidentMassReRouteCtrl",["$scope","incidentData","lowestStatusIncident","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e,f){a.incidentMassReRouteAction={Incidents:b,ReRouteToLevel:null,ReRouteRemarks:""},a.inAction=!1;var g=e.FetchReRouteRoutingGroup({employeeCategoryId:c.employee_category_id,currentTrackingOrderLevel:c.current_tracking_order_level,designationId:c.designation_id,currentWorkflowId:c.workflow_id,locationId:c.location_id,departmentId:c.department_id,isAnonymous:c.is_anonymous,incidentId:0},function(){a.routingGroups=g.data;var b=!1;if(angular.forEach(a.incidentMassReRouteAction.Incidents,function(a,c){a.is_anonymous&&(b=!0)}),b){var c=-1,d=0;angular.forEach(a.routingGroups,function(a,b){1==a.order&&(c=d),d++}),c>=0&&a.routingGroups.splice(c,1)}});a.validate={},a.isValid=function(){var b=!1;return a.incidentMassReRouteAction.ReRouteToLevel?a.validate.ReRouteToLevel=!1:a.validate.ReRouteToLevel=!0,a.incidentMassReRouteAction.ReRouteRemarks?a.validate.ReRouteRemarks=!1:a.validate.ReRouteRemarks=!0,b=!a.validate.ReRouteToLevel&&!a.validate.ReRouteRemarks},a.onSave=function(b){if(a.inAction=!0,a.isValid())var c=d.MassReRoute(b,function(){f.close(c.data),a.inAction=!1})}}]),angular.module("HITS").controller("IncidentMassReOpenCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e){a.incidentMassReOpenAction={Incidents:b,ReOpenToLevel:null,ReOpenRemarks:""},a.inAction=!1;var f=d.FetchHighestWorkflow({employeeCategoryId:a.incidentMassReOpenAction.Incidents[0].employee_category_id,designationId:a.incidentMassReOpenAction.Incidents[0].designation_id,isAnonymous:a.incidentMassReOpenAction.Incidents[0].is_anonymous,departmentId:a.incidentMassReOpenAction.Incidents[0].department_id},function(){var b=f.data;a.routingGroups=[],a.routingGroups.push(b),a.incidentMassReOpenAction.ReOpenToLevel=b.order});a.onSave=function(b){a.inAction=!0;var d=c.MassReOpen(b,function(){e.close(d.data),a.inAction=!1})}}]),angular.module("HITS").controller("IncidentFollowUpCtrl",["$scope","IncidentFollowUpFormService","IncidentTrackListTabService","IncidentCommentService","$location","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h){a.incidentFollowUp=b.get(),a.textAreaMenu=[],g.setAclSession(h),g.setAcltoScope(a),a.appendURL=function(a,b,c){return a.indexOf("?")>=0?a+"&"+b+"="+c:a+"?"+b+"="+c},a.onBack=function(){if("dashboard"==a.incidentFollowUp.from_page)e.search({tabActive:"5"}),e.path("dashboard");else{c.initialize();var b=c.getState();b.incidentPending=!1,b.incidentFollowUps=!0,c.setState(b),e.path("/incident/track")}},a.onSave=function(c){c.follow_up_is_confirmed=!0;d.Save(c,function(){a.incidentFollowUp.is_followed_up=!0,b.set(a.incidentFollowUp),f.addAlerts("success","Follow Up Data saved successfully"),"dashboard"==a.incidentFollowUp.from_page?(e.search({tabActive:"5"}),e.path("dashboard")):e.path("/incident/track")})};var i="/Web/index.html#/incident/form/tab";a.incidentFollowUp.url=i,a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"incident_id",a.incidentFollowUp.incident_id),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"incident_no",a.incidentFollowUp.incident_no),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"current_tracking_status",a.incidentFollowUp.current_tracking_status),a.incidentFollowUp.can_edit?(a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_edited","CLOSED"!=a.incidentFollowUp.current_tracking_status),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"lock","1"),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_read_only",a.incidentFollowUp.is_read_only),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_read",a.incidentFollowUp.is_read)):(a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_edited","false"),"CLOSED"==a.incidentFollowUp.current_tracking_status?a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_forwarded_to_you","false"):a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_forwarded_to_you","true"),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_read_only",a.incidentFollowUp.is_read_only),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_read",a.incidentFollowUp.is_read),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"is_custom_role",a.incidentFollowUp.is_custom_role),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"custom_role_id",a.incidentFollowUp.custom_role_id),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"lock","0")),a.incidentFollowUp.url=a.appendURL(a.incidentFollowUp.url,"formRouteUrl","/incident/form")}]),angular.module("HITS").controller("IncidentCommentChooseUserCtrl",["$scope","$modalInstance","commentData","UserService","UserSessionData",function(a,b,c,d,e){a.incidentComment=c,a.keyword="",a.SearchQuery={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["name"]}},a.FetchUser=function(){a.SearchQuery.search.keyword=a.keyword;var b=d.FetchAllIsActiveWithPagination({searchQuery:a.SearchQuery,institutionId:e.institution_id,currentUserId:e.user_id},function(){a.users=[],a.SearchQuery.total_data=b.data.totalData,a.users=b.data.list})},a.FetchUser(),a.onSearch=function(b){a.keyword=b,a.FetchUser()},a.onKeyPress=function(b,c){13===b.keyCode&&a.onSearch(c)},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchUser()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchUser()},a.onChooseUser=function(c){a.incidentComment.user_id=c.user_id,a.incidentComment.CommentTo=c,b.close(a.incidentComment)}}]),angular.module("HITS").controller("IncidentMergeListCtrl",["$scope","$timeout","$location","$modal","SessionService","IncidentService","IncidentTypeService","DepartmentService","LocationService","IncidentMergeFormService","IncidentFormService","IncidentMergeService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j,k,l,m){e.setAclSession(m),e.setAcltoScope(a),a.isDateEnable=!0,a.currentAcl.INCIDENT_MERGE_INCIDENT_VIEW||c.path("/unauthorized"),a.keyword={},a.isDateEnable=!0,a.incident={},a.today=new Date,a.arrayYears=[];for(var n=2014;n<=a.today.getFullYear();n++)a.arrayYears.push(n);a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.SearchQuery={page:1,row_per_page:10,sort_by:"incident_merge_id",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["incident_merge_id"]}},a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.suspectedIncidents=[],a.keyword.keyword="",a.keyword.searchType="date_range",a.suspectedIncidents=[],a.suspectedIncidents.selected=[],a.onSelected=function(){angular.forEach(a.suspectedIncidents,function(a,b){var c=[];angular.forEach(a.Incidents,function(a,b){a.is_selected&&c.push(a)}),a.selected=c})},a.Fetch=function(){var b=l.FetchAllWithPagination({searchQuery:a.SearchQuery,searchdata:a.incident},function(){a.incidentMerges=[],a.incidentMerges=b.data.list,a.SearchQuery.total_data=b.data.totalData})},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()};var o=g.FetchAll(function(){a.incidentTypes=o.data}),p=h.FetchAll(function(){a.departments=p.data}),q=i.FetchAll(function(){a.locations=q.data});a.Fetch(),a.onSearch=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearch()},a.onCreateNew=function(a){var b=e.getSession(),d={incident_merge_id:0,incident_id:0,user_id:b.user_id,merge_date:new Date,merge_remarks:"",Incident:null,MergeBy:b,IncidentMergeDetails:[],isAdd:!0,merge_status:"INPROGRESS"};angular.forEach(a.selected,function(a,b){var c={incident_merge_detail_id:0,incident_merge_id:0,incident_id:a.incident_id,Incident:a};d.IncidentMergeDetails.push(c)}),j.set(d),c.path("/incident/merge/form")},a.onViewIncident=function(a){a.is_suspected_duplicate=!0,a.is_edited=!0,k.set(a),c.path("/incident/form")},a.onRowView=function(a){a.isAdd=!1,j.set(a),c.path("/incident/merge/form")},a.suspectedIncidents=[],a.onChangeSearch=function(){a.keyword.startDate=null,a.keyword.endDate=null,a.keyword.incident_no=null,a.suspectedIncidents=[]},a.onSearchSuspect=function(){if("date_range"==a.keyword.searchType)a.fetchSuspected();else if("incident_no"==a.keyword.searchType){if(0==a.suspectedIncidents.length){var b={};b.Incidents=[],a.suspectedIncidents[0]=b}r()}},a.fetchSuspected=function(){if(null!=a.keyword.startDate&&""!=a.keyword.startDate&&null!=a.keyword.endDate&&""!=a.keyword.endDate)var b=l.FetchSuspectedIncident({startDate:a.keyword.startDate,endDate:a.keyword.endDate},function(){a.suspectedIncidents=[],a.suspectedIncidents=b.data})};var r=function(){d.open({templateUrl:"app/incident/merge/form/incident-merge-add-incident-detail/incident-merge-add-incident-detail.html",controller:"IncidentMergeAddIncidentDetailCtrl",windowClass:"modal-large",resolve:{incidentMergeData:function(){return a.suspectedIncidents[0].Incidents},incidentNo:function(){return a.keyword.incident_no}}}).result.then(function(b){var c=b;angular.forEach(c,function(b,c){a.suspectedIncidents[0].Incidents.push(b)}),a.onSelected()})}}]),angular.module("HITS").controller("IncidentMergeFormCtrl",["$scope","$modal","$location","IncidentFormService","IncidentMergeFormService","IncidentMergeService","ToastMessageService","LoadingScreenService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j){a.incidentMerge=e.get(),i.setAclSession(j),i.setAcltoScope(a),a.onDeleteIncidentMain=function(){a.incidentMerge.incident_id=0,a.incidentMerge.Incident=null},a.inAction=!1,a.onDeleteIncidentDetail=function(b){var c=a.incidentMerge.IncidentMergeDetails.indexOf(b);a.incidentMerge.IncidentMergeDetails.splice(c,1)},a.onPushToMain=function(b){if(0==a.incidentMerge.incident_id){var c=a.incidentMerge.IncidentMergeDetails.indexOf(b),d=angular.copy(a.incidentMerge.IncidentMergeDetails[c].Incident);a.incidentMerge.incident_id=d.incident_id,a.incidentMerge.Incident=d,a.incidentMerge.IncidentMergeDetails.splice(c,1)}else g.removeAlerts(),g.addAlerts("warning","Incident Main already exist")},a.onRemoveFromMain=function(b){var c=angular.copy(a.incidentMerge.Incident),d={incident_merge_detail_id:0,incident_merge_id:0,incident_id:c.incident_id,Incident:c};a.incidentMerge.IncidentMergeDetails.push(d),a.incidentMerge.incident_id=0,a.incidentMerge.Incident=null};var k=function(){b.open({templateUrl:"app/incident//merge/form/incident-merge-add-incident-main/incident-merge-add-incident-main.html",controller:"IncidentMergeAddIncidentMainCtrl",windowClass:"modal-large"}).result.then(function(b){b&&(a.incidentMerge.incident_id=b.incident_id,a.incidentMerge.Incident=b)})},l=function(){b.open({templateUrl:"app/incident/merge/form/incident-merge-add-incident-detail/incident-merge-add-incident-detail.html",controller:"IncidentMergeAddIncidentDetailCtrl",windowClass:"modal-large",resolve:{incidentMergeData:function(){return a.incidentMerge}}}).result.then(function(b){var c=b;angular.forEach(c,function(b,c){var d={incident_merge_detail_id:0,incident_merge_id:0,incident_id:b.incident_id,Incident:b};a.incidentMerge.IncidentMergeDetails.push(d)})})};a.onAddIncidentMain=function(){k()},a.onAddIncidentDetail=function(){l()},a.isWrong=!1,a.isWrongDetails=!1,a.onSave=function(){if(a.inAction=!0,0!=a.incidentMerge.incident_id&&a.incidentMerge.IncidentMergeDetails.length>0){a.isWrong=!1;var b=f.Save(a.incidentMerge,function(){var a=b.data,d="";a.IsSuccess?(d="Merge Incidents Success! Redirecting now...",g.removeAlerts(),g.addAlerts("success",d),c.path("/incident/merge")):(d="Merge incident failed",g.removeAlerts(),g.addAlerts("danger",d))})}else 0==a.incidentMerge.incident_id?a.isWrong=!0:a.isWrong=!1,a.incidentMerge.IncidentMergeDetails.length<=0?a.isWrongDetails=!0:a.isWrongDetails=!1,a.inAction=!1},a.onBack=function(){c.path("/incident/merge")},a.onViewIncident=function(a){d.initialize(),"MERGED"==a.Incident.current_tracking_status?a.Incident.is_edited=!1:a.Incident.is_edited=!0;var b=d.getStatusData();
b.is_edited=a.Incident.is_edited,b.is_merged=!0,d.setStatusData(b),d.set(a.Incident),c.path("/incident/form")};var m=function(){b.open({templateUrl:"app/incident/merge/form/incident-unmerge/incident-unmerge.html",controller:"IncidentUnmergeCtrl",windowClass:"modal-large",resolve:{incidentMergeData:function(){return a.incidentMerge}}}).result.then(function(a){a&&c.path("/incident/merge")})};a.onUnmerge=function(){m()}}]),angular.module("HITS").controller("IncidentMergeAddIncidentMainCtrl",["$scope","$modalInstance","IncidentService",function(a,b,c){a.incidents=[],a.fetch=function(){var b=c.FetchForMerge(function(){a.incidents=[],a.incidents=b.data})},a.fetch(),a.onChooseIncident=function(a){b.close(a)}}]),angular.module("HITS").controller("IncidentMergeAddIncidentDetailCtrl",["$scope","$modalInstance","IncidentService","incidentMergeData","incidentNo",function(a,b,c,d,e){a.incidents=[];var f={};f[d.incident_id]=!0,angular.forEach(d,function(a,b){f[a.incident_id]=!0}),a.keyword={},a.keyword.keyword="",e&&(a.keyword.keyword=e),a.onSearch=function(){a.fetch()},a.fetch=function(){var b=c.FetchForMerge({incidentNo:a.keyword.keyword},function(){a.incidents=[];var c=b.data;angular.forEach(c,function(b,c){f[b.incident_id]||a.incidents.push(b)})})},a.fetch(),a.onSave=function(){var c=[];angular.forEach(a.incidents,function(a,b){a.is_selected&&c.push(a)}),b.close(c)}}]),angular.module("HITS").controller("IncidentForwardListCtrl",["$scope","$modal","IncidentService","IncidentTypeService","DepartmentService","LocationService","IncidentForwardService","ToastMessageService",function(a,b,c,d,e,f,g,h){a.incident={},a.keyword={},a.incidentForward={},a.SearchQuery={page:1,row_per_page:10,sort_by:"incident_id",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.keywordIncident,fields:["current_tracking_status_holder"]}},a.fetchIncident=function(){a.SearchQuery.search.keyword=a.keyword.keywordIncident;var b=c.FetchAllForwardWithPagination(a.SearchQuery,function(){a.incidents=[],a.incidents=b.data.list,a.SearchQuery.total_data=b.data.totalData})},a.onSearchIncident=function(){a.fetchIncident()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.fetchIncident()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.fetchIncident()},a.fetchIncident(),a.SearchQueryForward={page:1,row_per_page:10,sort_by:"incident_forward_id",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.keywordIncidentForward,fields:["forward_to_name"]}},a.fetchIncidentForward=function(){a.SearchQueryForward.search.keyword=a.keyword.keywordIncidentForward;var b=g.FetchAllForwardWithPagination(a.SearchQueryForward,function(){a.incidentForwards=[],a.incidentForwards=b.data.list,a.SearchQueryForward.total_data=b.data.totalData})},a.onSearchIncidentForward=function(){a.fetchIncidentForward()},a.onSortForward=function(b){a.SearchQueryForward.sort_by==b?a.SearchQueryForward.is_sort_asc=!a.SearchQueryForward.is_sort_asc:a.SearchQueryForward.is_sort_asc=!0,a.SearchQueryForward.sort_by=b,a.fetchIncidentForward()},a.onPageChangedForward=function(b){a.SearchQueryForward.page=b,a.fetchIncidentForward()},a.fetchIncidentForward();var i=d.FetchAll(function(){a.incidentTypes=i.data}),j=e.FetchAll(function(){a.departments=j.data}),k=f.FetchAll(function(){a.locations=k.data});a.onSearch=function(){var b=c.SearchForForward({searchdata:a.incident},function(){a.incidents=[],a.incidents=b.data})},a.onSearchForward=function(){var b=g.SearchForForward({searchdata:a.incidentForward},function(){a.incidentForwards=[],a.incidentForwards=b.data})};var l=function(c){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return c}}}).result.then(function(b){if(b.IsSuccess){var c="Forward Incident Success";h.removeAlerts(),h.addAlerts("success",c)}a.fetchIncident(),a.fetchIncidentForward()})};a.onForwardIncident=function(a){l(a)}}]),angular.module("HITS").controller("IncidentForwardFormCtrl",["$scope","$modalInstance","$modal","$timeout","incidentData","IncidentForwardService","ToastMessageService","LoadingScreenService",function(a,b,c,d,e,f,g,h){a.inAction=!1,a.isDateEnable=!0,a.validation={},a.validation.to=!1,a.validation.due_date=!1,a.today=new Date,a.datePickerOpen=function(a){d(function(){$("#"+a).focus()})},a.forwardType={},a.forwardType.data=[{code:"FYA",description:"For Your Action"},{code:"FYI",description:"For Your Information"}],a.incidentForward={incident_forward_id:0,incident_id:e.incident_id,employee_id:"",forward_to_name:"",forward_to_email:"",remarks:"",adid:"",forward_type:"FYA",IncidentMainInfo:e};var i=function(b,d){c.open({templateUrl:"app/incident/forward/incident-forward/form/choose-guest/incident-forward-form-choose-guest.html",controller:"IncidentForwardFormChooseGuestCtrl",windowClass:"modal-medium",resolve:{userNameData:function(){return b},incidentIdData:function(){return d}}}).result.then(function(b){a.incidentForward.adid=b.adid,a.incidentForward.employee_id=b.employee_id,a.incidentForward.forward_to_name=b.employee_name,a.incidentForward.forward_to_email=b.email_address,a.incidentForward.forward_to_adid=b.adid})};a.onSearchGuest=function(b){i(b,a.incidentForward.IncidentMainInfo.incident_id)},a.onSave=function(c){var d=!0;if(a.validation.to=!1,a.validation.due_date=!1,(""==a.incidentForward.adid||null==a.incidentForward.adid)&&(a.validation.to=!0,d=!1),"FYA"!=a.incidentForward.forward_type||null!=a.incidentForward.forward_due_date&&""!=a.incidentForward.forward_due_date||(a.validation.due_date=!0,d=!1),d){a.inAction=!0,h.showLoading();var e=f.SaveOne(c,function(){var c=e.data;if(h.hideLoading(),c.IsSuccess)b.close(c);else{var d="Forward incident failed";g.removeAlerts(),g.addAlerts("danger",d),a.inAction=!1}})}},a.checkForwardType=function(b){"FYI"==b&&(a.validation.due_date=!1)}}]),angular.module("HITS").controller("IncidentMassForwardFormCtrl",["$scope","$modalInstance","$modal","incidentData","IncidentForwardService","ToastMessageService",function(a,b,c,d,e,f){a.incidentForwards=[],a.incident_no=[],a.inAction=!1,angular.forEach(d,function(b,c){var d={incident_forward_id:0,incident_id:b.incident_id,employee_id:"",forward_to_name:"",forward_to_email:"",remarks:"",adid:"",IncidentMainInfo:b};a.incident_no.push(b.incident_no),a.incidentForwards.push(d)}),a.incidentForward={incident_forward_id:0,incident_id:d.incident_id,employee_id:"",forward_to_name:"",forward_to_email:"",remarks:"",adid:"",IncidentMainInfo:d};var g=function(b){c.open({templateUrl:"app/incident/track/incident-mass-forward/choose-guest/incident-forward-form-choose-guest.html",controller:"IncidentMassForwardFormChooseGuestCtrl",windowClass:"modal-medium",resolve:{userNameData:function(){return b}}}).result.then(function(b){angular.forEach(a.incidentForwards,function(c,d){a.incidentForward.employee_id=b.employee_id,a.incidentForward.forward_to_name=b.employee_name,a.incidentForward.forward_to_email=b.email_address,a.incidentForward.adid=b.adid,c.employee_id=a.incidentForward.employee_id,c.forward_to_name=a.incidentForward.forward_to_name,c.forward_to_email=a.incidentForward.forward_to_email,c.adid=a.incidentForward.adid})})};a.onSearchGuest=function(a){g(a)},a.onSave=function(c){a.inAction=!0;var d=e.Save(c,function(){var c=d.data;if(c.IsSuccess)b.close(c),a.inAction=!1;else{a.inAction=!1;var e="Forward Incident failed. Error : "+c.Message;f.removeAlerts(),f.addAlerts("danger",e)}})}}]),angular.module("HITS").controller("IncidentForwardGuestListCtrl",["$scope","$modal","$location","IncidentForwardFormService","IncidentForwardService","ToastMessageService",function(a,b,c,d,e,f){a.fetchIncidentForwardedToMe=function(){var b=e.FetchGuestIncidentForward(function(){a.incidentForwards=[],a.incidentForwards=b.data})},a.fetchIncidentForwardedToMe(),a.onRowEdit=function(a){d.set(a.IncidentMainInfo),c.path("/incident/forward/guest/view")}}]),angular.module("HITS").controller("IncidentForwardFormChooseGuestCtrl",["$scope","TempSapHrService","userNameData","incidentIdData","$modalInstance",function(a,b,c,d,e){a.keyword={},a.incident_id=d,a.SearchQuery={page:1,row_per_page:10,sort_by:"employee_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.key,fields:["employee_name"]}},a.keyword.key=c,a.FetchSapHr=function(){a.SearchQuery.search.keyword=a.keyword.key;var c=b.FetchAllUserForIncidentForward({searchQuery:a.SearchQuery,incident_id:a.incident_id},function(){a.employees=[],a.employees=c.data.list,a.SearchQuery.total_data=c.data.totalData})},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchSapHr()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchSapHr()},a.onSearch=function(){a.FetchSapHr()},a.FetchSapHr(),a.chooseUser=function(a){e.close(a)}}]),angular.module("HITS").controller("IncidentMassForwardFormChooseGuestCtrl",["$scope","TempSapHrService","userNameData","$modalInstance",function(a,b,c,d){a.keyword={},a.SearchQuery={page:1,row_per_page:10,sort_by:"employee_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword.key,fields:["employee_name"]}},a.keyword.key=c,a.FetchSapHr=function(){a.SearchQuery.search.keyword=a.keyword.key;var c=b.FetchAllForIncidentForward(a.SearchQuery,function(){a.employees=[],a.employees=c.data.list,a.SearchQuery.total_data=c.data.totalData})},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchSapHr()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchSapHr()},a.onSearch=function(){a.FetchSapHr()},a.FetchSapHr(),a.chooseUser=function(a){d.close(a)}}]),angular.module("HITS").controller("IncidentForwardGuestViewCtrl",["$scope","$timeout","$interval","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","IncidentService","IncidentForwardFormService","DisciplineService","$location","SessionService","IncidentSubTypeService","RoutingGroupService","CommitteeGroupService","WorkflowService","ApplicationSettingService","ToastMessageService","LoadingScreenService","IncidentCommentService","FileUploader","FileService","$window","$modal","IncidentRcaCategoryService","GcsService","PatientClassService","PatientLocationService","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){D.incident_id&&(a.incident=j.set({incident_id:D.incident_id}),l.url(l.path())),m.setAcltoScope(a),a.incident={},a.today=new Date,a.personInvolvedNotValid=!1,a.main_template_value={},a.main_template_supervisor_value={},a.submitValid=!0,a.isAnonymous=m.isAnonymous(),a.incident_description_invalid=!1,a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.showItem=function(a,b){if(a){var c=a.display_name,d=!0;return angular.forEach(a.keywords,function(a,e){angular.lowercase(a).indexOf(angular.lowercase(b))>-1&&(d?(c=c+" - "+a,d=!1):c=c+" - "+a)}),c}return a},a.onIncidentTypeChange=function(b){a.incident.incident_type_id=b,a.incident.incident_sub_type_id=null},a.onChangeDateOfOccurance=function(b){var c=new Date(a.incident.time_of_occurance),d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.incident.time_of_occurance=d},a.onWitnessedChange=function(b){b||(a.incident.witness_name="",a.incident.witness_relation_type=null,a.incident.witness_relation_other_description="",a.incident.witness_contact_no="",a.incident.witness_address="")},a.autoSave=function(){};var E;a.stopAutoSave=function(){angular.isDefined(E)&&(c.cancel(E),E=void 0)},a.$on("$destroy",function(){a.stopAutoSave()});var F=a.uploader=new v({url:"/File/Upload"});F.onSuccessItem=function(b,c,d,e){a.incident.Attachments||(a.incident.Attachments=[]),a.incident.Attachments.push({is_active:!0,filename:b.file.name})},a.download=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,x.open("/File/DownloadIncidentAttachment?name="+encodeURIComponent(b.filename)+"&incidentId="+c)},a.incident=j.get(),a.incident.Comments=[];var G=m.getSession();if(a.userSession=G,a.incident.incident_id>0){t.showLoading();var H=i.FetchOne({incidentId:a.incident.incident_id},function(){if(a.incident=H.data,a.incident.main_template_value=angular.fromJson(a.incident.main_template_value),a.main_template_value=a.incident.main_template_value,a.incident.main_template_supervisor_value=angular.fromJson(a.incident.main_template_supervisor_value),a.main_template_supervisor_value=a.incident.main_template_supervisor_value,a.FetchComments(),!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var b=r.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var d=b.data.setting_value_default;E=c(a.autoSave,60*d*1e3)});t.hideLoading()})}else{t.showLoading();var H=i.FetchOne({incidentId:0},function(){if(a.incident=H.data,a.incident.reporter_name=a.userSession.name,a.incident.designation_id=a.userSession.designation_id,a.incident.department_id=a.userSession.department_id,a.incident.employee_category_id=a.userSession.employee_category_id,a.incident.main_template_value={},a.incident.main_template_supervisor_value={},a.incident.AdditionalCcs=[],a.incident.incident_description="Situation:\n\nBackground:\n\nAssessment:\n\nRecommendations:\n\n",a.incident.date_of_occurance=angular.copy(a.today),a.incident.time_of_occurance=angular.copy(a.today),a.incident.is_witnessed=!1,a.incident.is_near_miss=null,a.incident.is_anonymous=a.isAnonymous,!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var b=r.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var d=b.data.setting_value_default;E=c(a.autoSave,60*d*1e3)});t.hideLoading()})}var I=i.FetchTopFIve(function(){a.topFives=I.data});a.step=1;var J=d.FetchAll(function(){a.designations=J.data}),K=e.FetchAll(function(){a.departments=K.data}),L=f.FetchAll(function(){a.employeeCategorys=L.data}),M=g.FetchAllSimpleModel(function(){a.incidentTypes=M.data}),N=n.FetchAll(function(){a.incidentSubTypes=N.data}),O=h.FetchAll(function(){a.locations=O.data}),P=k.FetchAll(function(){a.disciplines=P.data}),Q=C.FetchAll(function(){a.patientLocations=Q.data}),R=B.FetchAll(function(){a.patientClasses=R.data}),S=g.FetchAllForSearchIncident(function(){a.incidentTypeFlats=S.data});a.onSelectSearchIncident=function(b){a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.sub_incident_type_id},a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.addPerson=function(){a.tempPerson={},a.newPerson={is_active:!0,is_affected:null},a.personAddMode=!0,a.add=!a.add},a.onPersonEdit=function(b){a.tempPerson=angular.copy(b),a.newPerson=angular.copy(b),a.editPersonIndex=a.incident.PersonInvolveds.indexOf(b),a.personAddMode=!1,a.add=!0},a.onPersonDelete=function(a){a.is_active=!1},a.onPersonCategoryChange=function(b){a.tempPerson.person_category==b?a.newPerson=angular.copy(a.tempPerson):a.newPerson={person_category:b,is_active:!0,is_affected:null}};var T=function(b){b.validation={};var c=!0,d=b.person_category==a.patient,e=b.person_category==a.staff;b.person_category==a.visitor,b.person_category==a.others;return b.person_category?b.person_category!=a.others||b.person_category_other_description||(b.validation.category_other=!0,c=!1):(b.validation.category=!0,c=!1),null===b.is_affected&&(b.validation.near_miss=!0,c=!1),b.fullname||(b.validation.name=!0,c=!1),e&&!b.person_id&&(b.validation.id=!0,c=!1),d&&!b.nric&&(b.validation.nric=!0,c=!1),d||e||b.contact_no||(b.validation.contact=!0,c=!1),b.gender||!d&&!e||(b.validation.gender=!0,c=!1),d&&!b.age&&(b.validation.age=!0,c=!1),d&&!b.case_number&&(b.validation.case_number=!0,c=!1),d&&!b.patient_admission_date&&(b.validation.admission=!0,c=!1),d&&!b.patient_discipline&&(b.validation.discipline=!0,c=!1),c};a.onCancelSavePerson=function(){a.add=!1},a.savePerson=function(){a.incident||(a.incident={}),a.incident.PersonInvolveds||(a.incident.PersonInvolveds=[]),T(a.newPerson)&&(a.personAddMode?a.incident.PersonInvolveds.push(angular.copy(a.newPerson)):a.incident.PersonInvolveds[a.editPersonIndex]=a.newPerson,a.add=!1)};var U=function(){a.action=!a.action};a.onSave=function(){U(),a.incident.main_template_value=JSON.stringify(a.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){var c=b.data;c.IsSuccess?(a.incident=c.Data,s.removeAlerts(),s.addAlerts("success","Data Saved Successfully")):(s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+c.Message)),U()})},a.onSaveRca=function(){var b=angular.copy(a.incident.RcaCategories);U(),a.incident.main_template_value=JSON.stringify(a.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var c=i.Save(a.incident,function(){var d=c.data;d.IsSuccess?(a.incident=d.Data,a.incident.RcaCategories=b,s.removeAlerts(),s.addAlerts("success","Data Saved Successfully")):(s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+d.Message)),U()})},a.generalValidation=function(){a.incident.validation={};var b=!0;return a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.incident.validation.incidentTypeOther=!0,b=!1):(a.incident.validation.incidentType=!0,b=!1),null===a.incident.is_near_miss&&(a.incident.validation.near_miss=!0,b=!1),a.incident.location_id||(a.incident.validation.location=!0,b=!1),a.incident.date_of_occurance||(a.incident.validation.date=!0,b=!1),a.incident.time_of_occurance?a.incident.time_of_occurance>a.today&&(a.incident.validation.time_max=!0,b=!1):(a.incident.validation.time=!0,b=!1),a.isAnonymous||"Anonymous"==a.incident.reporter_name||(a.incident.reporter_name||(a.incident.validation.reporter_name=!0,b=!1),a.incident.designation_id&&0!=a.incident.designation_id||(a.incident.validation.designation=!0,b=!1),a.incident.department_id&&0!=a.incident.department_id||(a.incident.validation.department=!0,b=!1),a.incident.employee_category_id&&0!=a.incident.employee_category_id||(a.incident.validation.employee_category=!0,b=!1)),b},a.personInvolvedValidation=function(){return a.personInvolvedNotValid=!0,angular.forEach(a.incident.PersonInvolveds,function(b,c){b.is_active&&(a.personInvolvedNotValid=!1)}),!a.personInvolvedNotValid},a.main_template={},a.fetchIncidentTemplate=function(){t.showLoading();var b=g.FetchIncidentTemplate({incidentTypeId:a.incident.incident_type_id},function(){a.main_template_navigation=b.data.main_template_navigation,a.templateSections=b.data.DetailTemplates,a.main_template=b.data.main_template,t.hideLoading()})},a.incidentDetailEnterValidation=function(){return null==a.incident.incident_type_id?(alert("Please choose Incident Type and Incident Sub Type (if any) first!"),!1):(a.main_template="",a.main_template_navigation="",a.templateSections=[],a.fetchIncidentTemplate(),!0)},a.incidentDetailExitValidation=function(){return!0},a.fetchRoutingGroup=function(){var b=1;a.incident.current_tracking_order_level&&(b=a.incident.current_tracking_order_level);var c=0;a.incident.workflow_id&&(c=a.incident.workflow_id);var d=q.FetchNextRoutingGroup({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:b,designationId:a.incident.designation_id,currentWorkflowId:c,isAnonymous:a.incident.is_anonymous,reporterId:a.incident.created_by},function(){a.routingGroups=d.data;var b=!0;angular.forEach(a.routingGroups,function(c,d){b&&(a.incident.routing_group_id=c.routing_group_id,b=!1)})})},a.fetchCommitteeGroup=function(){var b=p.FetchAllByIncidentTypeId({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id},function(){if(a.committeeGroups=b.data,0==a.incident.committee_group_id||null==a.incident.committee_group_id){var c=!0;angular.forEach(a.committeeGroups,function(b,d){c&&(a.incident.committee_group_id=b.committee_group_id,c=!1)})}})},a.incidentDescriptionEnterValidation=function(){if(null==a.incident.incident_type_id)return alert("Please choose Incident Type and Location of Incident first!"),!1;a.fetchRoutingGroup(),a.fetchCommitteeGroup(),a.main_template="";var b=g.FetchOne({incidentTypeId:a.incident.incident_type_id},function(){var c=b.data;a.main_template_supervisor="",a.main_template_supervisor=c.main_template_supervisor,a.incident.main_template_supervisor=a.main_template_supervisor});return!0},a.onSubmit=function(){if(null==a.incident.is_witnessed&&(a.incident.is_witnessed=!1),a.incident_description_invalid=!1,a.incident.incident_description.length<84&&(a.incident_description_invalid=!0),a.incident.routing_group_id<=0&&(a.submitValid=!1),a.incident.routing_group_id>0&&a.incident.incident_description.length>=84){a.incident_description_invalid=!1,a.submitValid=!0,U(),a.incident.main_template_value=JSON.stringify(a.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){t.showLoading();var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.Submit(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,j.set(a.incident),t.hideLoading(),U(),l.path("/incident/form/reporterConfirmation")):(t.hideLoading(),U(),s.removeAlerts(),s.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else U(),t.hideLoading(),s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+c.Message)})}},a.FetchComments=function(){var b=a.incident.incident_id;if(null==b&&(b=0),a.currentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_ADD)var c=u.FetchAll({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data});else var c=u.FetchAllWithReporterView({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data})},a.commentEnterValidation=function(){return a.FetchComments(),!0};var V=function(b){y.open({templateUrl:"app/incident/form/incident-comment/incident-comment.html",controller:"IncidentCommentCtrl",windowClass:"modal-large",resolve:{incidentComment:function(){return b}}}).result.then(function(b){var c="",d="";b?(c="success",d="Comment Saved Succesfully"):(c="danger",d="Error Saving Comment"),s.removeAlerts(),s.addAlerts(c,d),a.FetchComments()})};a.onAddComment=function(b){var c={incident_id:a.incident.incident_id,comment_type:b,comment_date:new Date,comment_by:a.userSession.name,is_active:!0};V(c)},a.onCommentEdit=function(a){var b=a;V(b)},a.onCommentDelete=function(b){var c=u.Delete(b,function(){var b=c.data;b.IsSuccess?(s.removeAlerts(),s.addAlerts("success","Data Deleted")):(s.removeAlerts(),s.addAlerts("danger","Delete Failed. Error : "+b.Message)),a.FetchComments()})},a.onCommentAttachmentDownload=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,x.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(b.attachment_filename)+"&incidentId="+c)},a.calculateSAC=function(){a.sacScore="",a.sacScore=String(a.incident.sac_likelihood)+String(a.incident.sac_consequences)},a.sacEnterValidation=function(){return a.calculateSAC(),!0},a.fetchIncidentRca=function(){var b=a.incident.incident_id;null==b&&(b=0);var c=z.FetchAll({incidentId:b},function(){a.incident.RcaCategories=[],a.incident.RcaCategories=c.data})},a.onSubmitToNextLevel=function(){U(),a.incident.main_template_value=JSON.stringify(a.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(j.set(a.incident),U(),l.path("/incident/track")):(U(),s.removeAlerts(),s.addAlerts("danger","Submit Failed. Error : "+c.Message))})}else s.removeAlerts(),s.addAlerts("danger","Save Failed. Error : "+c.Message),U()})};var W=function(){y.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track"))})},X=function(){y.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track")})},Y=function(){y.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",s.removeAlerts(),s.addAlerts(b,c),l.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){W()},a.onCloseIncident=function(){X()},a.onReOpenIncident=function(){Y()},a.onBack=function(){l.path("/incident/track")},a.onTest=function(){},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var Z=A.FetchAll(function(){a.gcs=Z.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})});a.isInPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"In-Patient"==a.patient_type&&(b=!0)}),b},a.isExceptStaff=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){("Patient"==a.person_category||"Visitor"==a.person_category||"Others"==a.person_category)&&(b=!0)}),b};var _=function(b){y.open({templateUrl:"app/incident/form/search-person-involved-staff/search-person-involved-staff.html",controller:"SearchPersonInvolvedStaffCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){var c=b;a.newPerson.fullname=c.employee_name,a.newPerson.person_id=c.employee_id,a.newPerson.gender=c.gender})};a.onSearchStaff=function(){_({})};var aa=function(b){y.open({templateUrl:"app/incident/form/search-person-involved-patient/search-person-involved-patient.html",controller:"SearchPersonInvolvedPatientCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){var c=b;a.newPerson.fullname=c.PatientName,a.newPerson.case_number=c.CaseID,a.newPerson.gender=c.gender,a.newPerson.nric=c.IdentificationDocNo,a.newPerson.patient_bed_no=c.Bed,a.newPerson.age=c.Age,a.newPerson.patient_type=c.CaseType,a.newPerson.patient_admission_date=c.MovementDateTime,a.newPerson.patient_class=c.PatientClass,a.newPerson.patient_location=c.OrganizationalUnit,a.newPerson.patient_discipline=c.Department,a.newPerson.patient_consultant_in_charge=c.AttendingDoctor})};a.onSearchPatient=function(){aa({})};var ba=function(b){y.open({templateUrl:"app/incident/form/search-person-involved-staff/search-person-involved-staff.html",controller:"SearchPersonInvolvedStaffCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){var c=b,d={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:c.adid,addition_cc_type:1,email:c.email_address,name:c.employee_name},e=!1;angular.forEach(a.incident.AdditionalCcs,function(a,b){a.email==d.email&&(e=!0)}),e||a.incident.AdditionalCcs.push(d)})};a.onAddCcSapHr=function(){ba({})};var ca=function(b){y.open({templateUrl:"app/incident/form/add-cc-user/add-cc-user.html",controller:"AddCcUserCtrl",windowClass:"modal-large"}).result.then(function(b){var c={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:b.adid,addition_cc_type:1,email:b.email,name:b.name},d=!1;angular.forEach(a.incident.AdditionalCcs,function(a,b){a.email==c.email&&(d=!0)}),d||a.incident.AdditionalCcs.push(c)})};a.onAddCcUser=function(){ca({})},a.onDeleteAdditionalCc=function(b){var c=a.incident.AdditionalCcs.indexOf(b);a.incident.AdditionalCcs.splice(c,1)},a.rcaEnterValidation=function(){t.showLoading();var b=i.FetchIncidentRcaCategory({incidentId:a.incident.incident_id},function(){a.incident.RcaCategories=b.data,t.hideLoading()}),c=q.FetchHighestWorkflow({employeeCategoryId:a.incident.employee_category_id,designationId:a.incident.designation_id,isAnonymous:a.incident.is_anonymous,departmentId:a.incident.department_id,locationId:a.incident.location_id},function(){var b=c.data;a.incident.current_tracking_order_level>=b.order?a.isHighest=!0:a.isHighest=!1});return!0};var da=function(){y.open({templateUrl:"app/incident/form/incident-consequences-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenConsequencesModal=function(){da({})}}]),angular.module("HITS").controller("ApplicationSettingCtrl",["$scope","$location","ApplicationSettingService","SapHrInterfaceService","TempSapHrService","ToastMessageService","SessionService",function(a,b,c,d,e,f,g){g.setAcltoScope(a),a.currentAcl.SM_APPLICATION_SETTING_VIEW||b.path("/unauthorized"),a.days=[{day:"Monday",value:"Monday"},{day:"Tuesday",value:"Tuesday"},{day:"Wednesday",value:"Wednesday"},{day:"Thursday",value:"Thursday"},{day:"Friday",value:"Friday"},{day:"Saturday",value:"Saturday"},{day:"Sunday",value:"Sunday"}],a.appSettingHITS=[],a.appSettingSFTP=[],a.appSettingSMTP=[],a.appSettingHITSWithLabel=[],a.invalid={},a.invalid.ReminderAutoPurgeDraft=!1,a.invalid.ReminderAutoPurgeDraftSeverity=!1,a.invalid.ReminderSessionStart=!1,a.invalid.TimeoutReminder=!1,a.isValid=function(b){var c=!0,d=0,e=0,f=0,g=0,h=0;return angular.forEach(b,function(a,b){"DAYS_TO_COMPLETE_INCIDENT"==a.key_value&&(d=parseInt(a.setting_value_default)),"DAYS_TO_REMINDER_AUTO_PURGE_DRAFT_INCIDENT"==a.key_value&&(f=parseInt(a.setting_value_default)),"DAYS_TO_COMPLETE_SEVERITY_INCIDENT"==a.key_value&&(e=parseInt(a.setting_value_default)),"SESSION_TIMEOUT"==a.key_value&&(g=parseInt(a.setting_value_default)),"SESSION_TIMEOUT_REMINDER"==a.key_value&&(h=parseInt(a.setting_value_default))}),d>=f?a.invalid.ReminderAutoPurgeDraft=!1:a.invalid.ReminderAutoPurgeDraft=!1,e>=f?a.invalid.ReminderAutoPurgeDraftSeverity=!1:a.invalid.ReminderAutoPurgeDraftSeverity=!1,2>h?(a.invalid.ReminderSessionStart=!0,c=!1):a.invalid.ReminderSessionStart=!1,2>g?(a.invalid.TimeoutReminder=!0,c=!1):a.invalid.TimeoutReminder=!1,c},a.onSave=function(){if(a.isValid(a.appSettingHITS)){var b=[];angular.forEach(a.appSettingHITS,function(a,c){b.push(a)});var d=c.BulkSave(b,function(){var a="",b="";d?(a="success",b="Data Saved Succesfully"):(a="danger",b="Save application setting failed"),f.addAlerts(a,b)})}},a.onSaveEmailTemplateSetting=function(){var b=[];angular.forEach(a.emailTemplateSettings,function(a,c){b.push(a)});var d=c.BulkSaveEmailTemplateSetting(b,function(){var a="",b="";d?(a="success",b="Data Saved Succesfully"):(a="danger",b="Save application setting failed"),f.addAlerts(a,b)})},a.AppSettingGroups=[],a.FetchHITSSetting=function(){var b=c.FetchHitsSetting(function(){a.appSettingHITS=[];var c=b.data;a.appSettingHITS=c,a.AppSettinggroups=[],angular.forEach(a.appSettingHITS,function(b,c){a.AppSettingGroups.indexOf(b.group_name)<0&&a.AppSettingGroups.push(b.group_name)}),a.isValid(a.appSettingHITS)})},a.FetchHITSEmailTemplateSetting=function(){var b=c.FetchEmailTemplateSetting(function(){a.emailTemplateSettings=[];var c=b.data;a.emailTemplateSettings=c})},a.onFetchHITSEmailTemplateSetting=function(){a.FetchHITSEmailTemplateSetting()},a.ReplaceString=function(a){return a.replace(/\d+\_/," ")},a.FetchHITSSetting()}]),angular.module("HITS").controller("DeviceEquipmentCtrl",["$scope",function(a){a.incident={incident_sub_type_id:1},a.someSelected=function(a){return a?Object.keys(a).some(function(b){
return a[b]}):!1}}]),angular.module("HITS").controller("EnvironmentSafetyCtrl",["$scope","GcsService",function(a,b){a.incident={incident_type_id:7},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var c=b.FetchAll(function(){a.gcs=c.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})})}]),angular.module("HITS").controller("FallsCtrl",["$scope","GcsService",function(a,b){a.incident={incident_type_id:8},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var c=b.FetchAll(function(){a.gcs=c.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})});a.isInPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"In-Patient"==a.patient_type&&(b=!0)}),b},a.isExceptStaff=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){("Patient"==a.person_category||"Visitor"==a.person_category||"Others"==a.person_category)&&(b=!0)}),b}}]),angular.module("HITS").controller("LaboratoryPathologyCtrl",["$scope",function(a){a.incident={incident_type_id:9}}]),angular.module("HITS").controller("DocumentationCtrl",["$scope",function(a){a.incident={incident_type_id:10}}]),angular.module("HITS").controller("MedicationEventsCtrl",["$scope",function(a){a.incident={incident_type_id:11},a.copy=function(a){return angular.copy(a)},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1},a.push=function(a,b){a||(a=[]),a.push(b)},a.init=function(a){a||(a=[])}}]),angular.module("HITS").controller("PeripheralVenousComplicationsCtrl",["$scope",function(a){a.incident={incident_type_id:12},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("PressureInjuryCtrl",["$scope",function(a){a.incident={incident_type_id:13},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("OthersCtrl",["$scope",function(a){a.incident={incident_type_id:14},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("AddRoutingGroupDepartmentCtrl",["$scope","DepartmentService","RoutingGroupService","routingUser","routingGroup","$modalInstance","LoadingScreenService",function(a,b,c,d,e,f,g){a.routingUser=d,a.routingGroup=e,a.select={},a.select.selectAllDept=!1,a.select.unselectAllDept=!1;var h={};angular.forEach(a.routingUser.RoutingDepartments,function(a,b){h[a.department_id]=a}),a.validate={},a.validate.button=!0;var i=b.FetchAll(function(){a.departments=i.data,a.tempRoutingDepartments=angular.copy(a.routingUser.RoutingDepartments),null==a.tempRoutingDepartments&&(a.tempRoutingDepartments=[]),angular.forEach(a.departments,function(b,c){h[b.department_id]||a.tempRoutingDepartments.push({routing_user_id:a.routingUser.routing_user_id,department_id:b.department_id,is_active:!1,Department:b})})});a.select_all_dept=function(){a.select.selectAllDept?(a.select.selectAllDept=!1,a.select.unselectAllDept=!1):(a.select.selectAllDept=!0,a.select.unselectAllDept=!1),angular.forEach(a.tempRoutingDepartments,function(b){b.is_active=a.select.selectAllDept})},a.unselect_all_dept=function(){a.select.unselectAllLoc?(a.select.selectAllDept=!1,a.select.unselectAllDept=!1):(a.select.selectAllDept=!1,a.select.unselectAllDept=!0),a.select.unselectAllDept&&angular.forEach(a.tempRoutingDepartments,function(a){a.is_active=!1})};var j=function(){a.action=!a.action};a.onSave=function(b){a.validate.button=!1,g.showLoading(),j();var d=angular.copy(a.tempRoutingDepartments);a.routingUser.RoutingDepartments=[],angular.forEach(d,function(b,c){(b.routing_department_id||b.is_active)&&a.routingUser.RoutingDepartments.push(b)});var e=-1,h=0;angular.forEach(a.routingGroup.RoutingUsers,function(b,c){b.routing_user_id==a.routingUser.routing_user_id&&(e=h),h++}),e>=0&&(a.routingGroup.RoutingUsers[e]=a.routingUser);c.SaveUserRoutingDepartment({routingUserId:a.routingUser.routing_user_id,listDepartment:a.routingUser.RoutingDepartments,isAllDepartment:a.routingUser.is_all_department},function(){j(),g.hideLoading(),f.close(a.routingUser)},function(){j(),g.hideLoading(),f.close(null),a.validate.button=!0})}}]),angular.module("HITS").controller("SearchPersonInvolvedStaffCtrl",["$scope","TempSapHrService","$modalInstance","ToastMessageService",function(a,b,c,d){a.isValid=!0,a.searchBy=1,a.keyword="",a.SearchQuery={page:1,row_per_page:10,sort_by:"employee_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["employee_name","department","designation"]}},a.FetchSapHr=function(){a.SearchQuery.search.keyword=a.keyword;var e=b.FetchAllWithPagination(a.SearchQuery,function(){if(a.employees=[],a.SearchQuery.total_data=e.data.totalData,a.employees=e.data.list,a.SearchQuery.total_data<=0&&a.searchBy<=2){var b=confirm("Person not found. Do you want to add manually?");if(b){var f={};f.employee_name="",f.employee_id="",1==a.searchBy?f.employee_name=a.keyword:2==a.searchBy&&(f.employee_id=a.keyword),f.DesignationMaster={},f.DesignationMaster.designation_id=0,f.DepartmentMaster={},f.DepartmentMaster.department_id=0,c.close(f)}}else a.SearchQuery.total_data<=0&&(d.removeAlerts(),d.addAlerts("danger","No data found in the system"))})},a.chooseUser=function(a){"M"==a.gender?a.gender="Male":a.gender="Female",c.close(a)},a.onSearch=function(b,c){a.keyword=b,a.SearchQuery.search.fields=[],1==c?a.SearchQuery.search.fields.push("employee_name"):2==c?a.SearchQuery.search.fields.push("employee_id"):3==c?a.SearchQuery.search.fields.push("department"):4==c&&a.SearchQuery.search.fields.push("designation"),a.searchBy=c,a.checkSearchValid(c),a.isValid&&a.FetchSapHr()},a.onKeyPress=function(b,c,d){13===b.keyCode&&a.onSearch(c,d)},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchSapHr()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchSapHr()},a.checkSearchValid=function(b){if(a.isValid=!0,a.keyword.length<=0)a.errorMessage="Please provide search keyword",a.isValid=!1;else if(1==b){var c=/^([a-zA-Z]+\s)*[a-zA-Z]+$/,d=c.test(a.keyword);d||(a.errorMessage="Only character allowed in search keyword",a.isValid=!1)}else if(2==b){var e=a.keyword.replace(/[^a-zA-Z0-9]+/g,"");a.keyword!==e&&(a.errorMessage="Only alphanumeric character allowed in search keyword",a.isValid=!1)}},a.onSearchByChange=function(b){a.keyword="",3==b?(a.inputMaxLength=100,a.regexKeyword=/^.*$/):4==b?(a.inputMaxLength=100,a.regexKeyword=/^.*$/):1==b?(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z]*$/):2==b&&(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z0-9]*$/),a.searchBy=b}}]),angular.module("HITS").controller("SearchPersonInvolvedPatientCtrl",["$scope","PatientViewService","$modalInstance","LoadingScreenService","IncidentFormService",function(a,b,c,d,e){a.isValid=!0,a.keyword="",a.searchBy=1,a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z]*$/,a.errorMessage="Only character allowed in search keyword",a.incident=e.get(),a.SearchQuery={page:1,row_per_page:5,sort_by:"PatientName",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["PatientName"]}},a.Fetch=function(){d.showLoading(),a.SearchQuery.search.keyword=a.keyword,a.patients=[];var e=b.FetchAllWithPagination({searchQuery:a.SearchQuery,dateOfOccurrence:a.incident.date_of_occurance},function(){if(a.SearchQuery.total_data=e.data.totalData,a.patients=e.data.list,a.SearchQuery.total_data<=0){var b=confirm("Person not found. Do you want to add manually?");if(b){var f={};1==a.searchBy?f.PatientName=a.keyword:2==a.searchBy?f.IdentificationDocNo=a.keyword:3==a.searchBy&&(f.CaseID=a.keyword),c.close(f)}}d.hideLoading()},function(){d.hideLoading()})},a.chooseUser=function(a){"M"==a.Sex?a.gender="Male":a.gender="Female",c.close(a)},a.onSearch=function(b,c){a.keyword=b,a.SearchQuery.search.fields=[],1==c?a.SearchQuery.search.fields.push("PatientName"):2==c?a.SearchQuery.search.fields.push("ExternalPatientID"):3==c&&a.SearchQuery.search.fields.push("CaseID"),a.checkSearchValid(c),a.isValid&&a.Fetch()},a.onKeyPress=function(b,c,d){13===b.keyCode&&a.onSearch(c,d)},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.checkSearchValid=function(b){if(a.isValid=!0,a.keyword.length<=0)a.errorMessage="Please provide search keyword",a.isValid=!1;else if(1==b){var c=/^([a-zA-Z]+\s)*[a-zA-Z]+$/,d=c.test(a.keyword);d||(a.errorMessage="Only character allowed in search keyword",a.isValid=!1)}else if(2==b){var e=a.keyword.replace(/[^a-zA-Z0-9]+/g,"");a.keyword!==e&&(a.errorMessage="Only alphanumeric character allowed in search keyword",a.isValid=!1);var f=/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/,g=f.test(a.keyword);g||(a.errorMessage="NRIC must contain character and number",a.isValid=!1)}},a.onSearchByChange=function(b){a.keyword="",3==b?(a.inputMaxLength=11,a.regexKeyword=/^.*$/):1==b?(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z]*$/):2==b&&(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z0-9]*$/),a.searchBy=b}}]),angular.module("HITS").controller("EmailtemplateCtrl",["$scope","$modal","$location","EmailTemplateService","SessionService","UserAclSessionData",function(a,b,c,d,e,f){e.setAclSession(f),e.setAcltoScope(a),a.currentAcl.SM_MASTER_DATA_SM_INCIDENT_SETUP_INCIDENT_DATA_VIEW||c.path("/unauthorized");var g=function(c){b.open({templateUrl:"app/master/emailTemplate/emailTemplateForm/emailTemplateForm.html",controller:"EmailtemplateformCtrl",windowClass:"modal-fullscreen",resolve:{emailTemplate:function(){return c}}}).result.then(function(b){a.Fetch()})};a.onCreateNew=function(){g({})},a.onRowEdit=function(a){g(angular.copy(a))},a.onRowDelete=function(b){var c=confirm("Are you sure you want to delete the Email Template ["+b.name+"] ?");if(c){d.Delete(b,function(){a.Fetch()})}},a.SearchQueryTemplate={page:1,row_per_page:10,sort_by:"email_template_id",is_sort_asc:!0,total_data:0,search:{keyword:a.keywordTemplate,fields:["action_description"]}},a.Fetch=function(){a.SearchQueryTemplate.search.keyword=a.keywordTemplate;var b=d.FetchAllWithPagination(a.SearchQueryTemplate,function(){a.emailTemplates=b.data.list,a.SearchQueryTemplate.total_data=b.data.totalData})},a.onSearchTemplate=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearchTemplate()},a.onPageChanged=function(b){a.SearchQueryTemplate.page=b,a.Fetch()},a.onSort=function(b){a.SearchQueryTemplate.sort_by==b?a.SearchQueryTemplate.is_sort_asc=!a.SearchQueryTemplate.is_sort_asc:a.SearchQueryTemplate.is_sort_asc=!0,a.SearchQueryTemplate.sort_by=b,a.Fetch()},a.Fetch()}]),angular.module("HITS").controller("EmailtemplateformCtrl",["$scope","emailTemplate","EmailTemplateService","$modalInstance",function(a,b,c,d){a.emailTemplate=b;var e=function(){a.action=!a.action};a.onSave=function(a){e();c.Save(a,function(){d.close(),e()})},a.customMenu=[["bold","italic","underline","strikethrough","subscript","superscript"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragragh"],["link"]]}]),angular.module("HITS").controller("PatienLocationListCtrl",["$rootScope","$scope","$resource","$location","$modal","PatientLocationService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b);var j=function(a){e.open({templateUrl:"app/master/patient-location/patient-form/patient-location-form.html",controller:"PatientLocationFormCtrl",resolve:{patientLocationData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"patient_location_code",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["patient_location_code","patient_location_unit_name","patient_location_unit_short_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.patientLocations=[];var c=a.data.list;b.patientLocations=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Patient Location ["+a.patient_location_unit_name+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("PatientLocationFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","PatientLocationService","patientLocationData",function(a,b,c,d,e,f,g){b.patientLocation=g,b.onSave=function(a){f.Save(a,function(){e.close()})}}]),angular.module("HITS").controller("AddCcSapHrCtrl",["$scope","TempSapHrService","$modalInstance","userSearchData",function(a,b,c,d){a.AddCcUserList=[],a.searchBy=1,d&&(a.AddCcUserList=d),a.isValid=!0,a.keyword="",a.SearchQuery={page:1,row_per_page:10,sort_by:"employee_name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["employee_name","department","designation"]}},a.FetchSapHr=function(){a.SearchQuery.search.keyword=a.keyword;var c=b.FetchAllUserWithException({searchQuery:a.SearchQuery,exceptionUser:a.AddCcUserList},function(){a.employees=[],a.SearchQuery.total_data=c.data.totalData,a.employees=c.data.list})},a.chooseUser=function(a){"M"==a.gender?a.gender="Male":a.gender="Female",c.close(a)},a.onSearch=function(b){a.keyword=b,a.checkSearchValid(),a.isValid&&a.FetchSapHr()},a.onSearch=function(b,c){a.keyword=b,a.SearchQuery.search.fields=[],1==c?a.SearchQuery.search.fields.push("employee_name"):2==c?a.SearchQuery.search.fields.push("employee_id"):3==c?a.SearchQuery.search.fields.push("department"):4==c&&a.SearchQuery.search.fields.push("designation"),a.searchBy=c,a.checkSearchValid(c),a.isValid&&a.FetchSapHr()},a.onKeyPress=function(b,c,d){13===b.keyCode&&a.onSearch(c,d)},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchSapHr()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchSapHr()},a.checkSearchValid=function(b){if(a.isValid=!0,a.keyword.length<=0)a.errorMessage="Please provide search keyword",a.isValid=!1;else if(1==b){var c=/^([a-zA-Z]+\s)*[a-zA-Z]+$/,d=c.test(a.keyword);d||(a.errorMessage="Only character allowed in search keyword",a.isValid=!1)}else if(2==b){var e=a.keyword.replace(/[^a-zA-Z0-9]+/g,"");a.keyword!==e&&(a.errorMessage="Only alphanumeric character allowed in search keyword",a.isValid=!1)}},a.onSearchByChange=function(b){a.keyword="",3==b?(a.inputMaxLength=100,a.regexKeyword=/^.*$/):4==b?(a.inputMaxLength=100,a.regexKeyword=/^.*$/):1==b?(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z]*$/):2==b&&(a.inputMaxLength=50,a.regexKeyword=/^[a-zA-Z0-9]*$/),a.searchBy=b}}]),angular.module("HITS").controller("AddCcUserCtrl",["$scope","$modalInstance","UserService","UserSessionData",function(a,b,c,d){a.AddCcUserList=[],a.keyword="",a.SearchQuery={page:1,row_per_page:10,sort_by:"name",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["name"]}},a.FetchUser=function(){a.SearchQuery.search.keyword=a.keyword;var b=c.FetchAllWithPagination({searchQuery:a.SearchQuery,institutionId:d.institution_id},function(){a.users=[],a.SearchQuery.total_data=b.data.totalData,a.users=b.data.list})},a.FetchUser(),a.onSearch=function(b){a.keyword=b,a.FetchUser()},a.onKeyPress=function(b,c){13===b.keyCode&&a.onSearch(c)},a.onPageChanged=function(b){a.SearchQuery.page=b,a.FetchUser()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.FetchUser()},a.onChooseUser=function(a){b.close(a)}}]),angular.module("HITS").controller("ManageEmployeeDesignationCtrl",["$scope","DesignationService","workflowEmployee","WorkflowEmployeeService","$modalInstance",function(a,b,c,d,e){a.select={},a.select.selectAll=!1,a.select.unselectAll=!1,a.fetch=function(){var e=c.workflow_employee_id,f=d.Fetch({workflowEmployeeId:e},function(){a.workflow=f.data;var d={};angular.forEach(a.workflow.EmployeeDesignations,function(a,b){d[a.designation_id]=a});var e=b.FetchAllByEmployeeCategoryId({employeeCategoryId:c.employee_category_id},function(){a.employeeDesignations=e.data,angular.forEach(a.employeeDesignations,function(b,c){d[b.designation_id]||a.workflow.EmployeeDesignations.push({workflow_employee_id:a.workflow.workflow_employee_id,designation_id:b.designation_id,is_active:!1,Designation:b})})})})},a.fetch();var f=function(){a.action=!a.action};a.onSave=function(b){f();var c=angular.copy(a.workflow.EmployeeDesignations);a.workflow.EmployeeDesignations=[],angular.forEach(c,function(b,c){(b.workflow_employee_designation_id||b.is_active)&&a.workflow.EmployeeDesignations.push(b)});var g=d.Save(b,function(){e.close(g.data),f()})},a.onSelectAll=function(){a.select.selectAll?(a.select.selectAll=!1,a.select.unselectAll=!1):(a.select.selectAll=!0,a.select.unselectAll=!1),angular.forEach(a.workflow.EmployeeDesignations,function(b){b.is_active=a.select.selectAll})},a.onUnselectAll=function(){a.select.unselectAll?(a.select.selectAll=!1,a.select.unselectAll=!1):(a.select.selectAll=!1,a.select.unselectAll=!0),a.select.unselectAll&&angular.forEach(a.workflow.EmployeeDesignations,function(a){a.is_active=!1})}}]),angular.module("HITS").directive("numberOnlyInput",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&(d.$parsers.push(function(a){var b="";return null!=a&&a.length>0&&(b=a.replace(/[^0-9]+/g,""),a!==b&&(d.$setViewValue(b),d.$render())),c.max&&""!=b&&parseInt(b)>parseInt(c.max)&&(b=c.max,d.$setViewValue(b),d.$render()),c.min&&""!=b&&b<c.min&&(b=c.min,d.$setViewValue(b),d.$render()),b}),b.bind("keypress",function(a){32===a.keyCode&&a.preventDefault()}))}}}).directive("numberPhoneOnlyInput",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&(d.$parsers.push(function(a){var b=a.replace(/[^-+0-9]+/g,"");return a!==b&&(d.$setViewValue(b),d.$render()),b}),b.bind("keypress",function(a){32===a.keyCode&&a.preventDefault()}))}}}).directive("numberOnlyInputWithSlash",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&(d.$parsers.push(function(a){var b=a.replace(/[^0-9\/]+/g,"");return a!==b&&(d.$setViewValue(b),d.$render()),b}),b.bind("keypress",function(a){32===a.keyCode&&a.preventDefault()}))}}}),angular.module("HITS").controller("IncidentViewCommentCtrl",["$scope","$window","IncidentCommentService","incidentData",function(a,b,c,d){a.incident=d,a.searchQuery={page:1,row_per_page:10,sort_by:"comment_date",is_sort_asc:!0,total_data:0,search:{keyword:"",fields:["comment_description"]}},a.FetchComments=function(){var b=c.FetchAllForViewComments({incidentId:a.incident.incident_id,searchQuery:a.searchQuery},function(){a.incidentComments=b.data.list,a.searchQuery.total_data=b.data.totalData})},a.onCommentAttachmentDownload=function(c){var d=0;d=null==a.incident.incident_id?0:a.incident.incident_id,b.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(c.attachment_filename)+"&incidentId="+d)},a.FetchComments()}]),angular.module("HITS").directive("decimalOnlyInput",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&(d.$parsers.push(function(a){var b="";return null!=a&&a.length>0&&(b=a.replace(/[^0-9\.]+/g,""),a!==b&&(d.$setViewValue(b),d.$render())),c.max&&""!=b&&parseInt(b)>parseInt(c.max)&&(b=c.max,d.$setViewValue(b),d.$render()),c.min&&""!=b&&b<c.min&&(b=c.min,d.$setViewValue(b),d.$render()),b}),b.bind("keypress",function(a){32===a.keyCode&&a.preventDefault()}))}}}),angular.module("HITS").directive("calendar",function(){return{restrict:"A",require:"ngModel",scope:{max:"="},link:function(a,b,c,d){$(b).datepicker({dateFormat:"dd-mm-yy",maxDate:a.max,onSelect:function(b){a.$apply(function(){d.$setViewValue(b)})}})}}}),angular.module("HITS").controller("IncidentAdditionalInfoCtrl",["$scope",function(a){}]),angular.module("HITS").controller("AuditTrailListCtrl",["$scope","$modal","$timeout","$filter","$window","$location","ToastMessageService","UserAuditTrailService","UserAuditTrailReportService","LoadingScreenService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j,k,l){k.setAclSession(l),k.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT_USER_VIEW||f.path("/unauthorized"),a.datePickerOpen=function(a){c(function(){$("#"+a).focus()})},a.isDateEnable=!0,a.viewDetail=function(a){e.scrollTo(0,0),b.open({templateUrl:"app/master/auditTrail/auditTrail-detail/audit-trail-detail.html",controller:"AuditTrailDetailCtrl",windowClass:"modal-large",resolve:{auditTrailId:function(){return a}}})},a.SearchQuery={page:1,row_per_page:10,sort_by:"action_date",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["action_date","name","action","item_id"]}},a.searchParam={date_from:new Date,date_to:new Date,name:"",item_id:""},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=h.FetchAllWithPagination({searchQuery:a.SearchQuery,searchParam:a.searchParam},function(){a.userActivities=[];var c=b.data.list;a.userActivities=c,a.SearchQuery.total_data=b.data.totalData})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.Fetch(),a.onGenerateReport=function(b){var c=!0;if(a.searchParam.date_from>a.searchParam.date_to?(c=!1,a.validation.date_period=!0):(a.searchParam.date_from=d("momentDateFilter")(a.searchParam.date_from,"YYYY-MM-DD"),a.searchParam.date_to=d("momentDateFilter")(a.searchParam.date_to,"YYYY-MM-DD")),a.pdfLink="",c)if(a.action=!0,j.showLoading(),"Xls"==b)var f=i.GenerateXls(a.searchParam,function(){var b=f.data;e.location.assign("/File/DownloadXls?name="+encodeURIComponent(b)),a.action=!1,j.hideLoading()});else var f=i.GeneratePdf(a.searchParam,function(){var b=f.data;e.location.assign("/File/DownloadPdf?name="+encodeURIComponent(b)),a.action=!1,j.hideLoading()})}}]),angular.module("HITS").controller("UserEditFormCtrl",["$scope","AuthenticationService","UserService","SessionService","UserRoleService","InstitutionService","DepartmentService","EmployeeCategoryService","DesignationService","ToastMessageService",function(a,b,c,d,e,f,g,h,i,j){var k=b.GetCurrentUser(function(){a.user=k.data});a.isDisabled=!0,a.enabledSaveButton=function(){a.isDisabled=!1},null==a.user?a.tempUsername=null:a.tempUsername=angular.copy(a.user.user_name);var l=f.FetchAll(function(){a.institutions=l.data}),m=g.FetchAll(function(){a.departments=m.data}),n=h.FetchAll(function(){a.employeeCategories=n.data}),o=i.FetchAll(function(){a.designations=o.data});a.onSave=function(b){var e=angular.copy(b.UserRoles);b.UserRoles=[],angular.forEach(e,function(a,c){(a.is_active||a.user_role_id>0)&&b.UserRoles.push(a)}),b.default_landing_page||(b.default_landing_page="/incident/track");var f=c.Save(b,function(){var c=f.data;c.IsSuccess?(d.setSession(b),j.addAlerts("success","Data Saved Succesfully"),a.isDisabled=!0):(j.removeAlerts(),j.addAlerts("danger","Failed Saving Data. Error : "+c.Message))})},a.onSearchUser=function(){openSearchUserModal({})},a.FetchUserRoles=function(b){var c=e.FetchAll({userId:b},function(){a.user.UserRoles=[];var b=c.data;a.user.UserRoles=b})},null!=a.tempUsername&&a.FetchUserRoles(a.user.user_id),a.onDeleteRole=function(b){var c=a.user.UserRoles.indexOf(b);a.user.UserRoles[c].is_active=!1},a.onAddRole=function(a){openAddUserRoleModal(a)}}]),angular.module("HITS").controller("SacScoreReportCtrl",["$scope","SacScoreReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_3_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallLocationReportCtrl",["$scope","FallsLocationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_4_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("HospitalOccurrenceReportCtrl",["$scope","HospitalOccurrenceReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_1_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsSharpIncidenceReportCtrl",["$scope","EnsIncidenceReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ENS_1_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("TypeOfIncidentReportCtrl",["$scope","TypeOfIncidentReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_2_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("RootCauseClassificationReportCtrl",["$scope","RootCauseClassificationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_4_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("SRENumberReportCtrl",["$scope","SRENumberReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_5_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsSharpInjuryByDepartmentReportCtrl",["$scope","EnsSharpInjuryByDepartmentReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ENS_3_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeSafetyCommitteeByLocationReportCtrl",["$scope","MeSafetyCommitteeByLocationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_1_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("HAMReportCtrl",["$scope","$location","HAMReportService","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_6_REPORT_VIEW||b.path("/unauthorized"),a.param={},a.control={},a.service=c}]),angular.module("HITS").controller("MeSafetyCommitteeByStaffReportCtrl",["$scope","MeSafetyCommitteeByStaffReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_2_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeTypeOfMedicationErrorReportCtrl",["$scope","MeTypeOfMedicationErrorReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_6_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsWorkplaceAggressionReportCtrl",["$scope","EnsWorkplaceAggressionReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.BHV_2_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallExactLocationCtrl",["$scope","FallsExactLocationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_4_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallLevelInjuryCtrl",["$scope","FallsLevelInjuryReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_1_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsWorkplaceAggressionN7ReportCtrl",["$scope","EnsWorkplaceAggressionN7ReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.BHV_3_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsSharpInjuryMsotDsotReportCtrl",["$scope","EnsSharpInjuryMsotDsotReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ENS_4_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsPoliceReportLodgedReportCtrl",["$scope","EnsPoliceReportLodgedReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.BHV_1_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("EnsSharpInjuryHwcCtrl",["$scope","EnsSharpInjuryAmongHcwReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ENS_2_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallByTimeCtrl",["$scope","FallsTimeOccurenceReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_6_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallByShiftCtrl",["$scope","FallsShiftReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_7_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallAgeGroupCtrl",["$scope","FallsAgeGroupReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_8_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallByDisciplineCtrl",["$scope","FallsDisciplineReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_9_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallDepartmentWorkloadCtrl",["$scope","FallsDepartmentWorkloadReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_10_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallByGenderCtrl",["$scope","FallsGenderReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_11_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallByActivityCtrl",["$scope","FallsActivityReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_5_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallAdHocCtrl",["$scope","$timeout","$filter",function(a,b,c){a.param={report_type:"Monthly",report_type_period:"1",report_from_date:new Date,report_to_date:new Date,incident_type_id:0},a.today=new Date,a.months=["January","February","March","April","May","June","July","August","September","October","November","December"],a.flt={},a.flt.month_year=a.today.getFullYear(),a.flt.month_from=a.today.getMonth(),0==a.flt.month_from&&(a.flt.month_from=12),a.flt.month_to=a.today.getMonth()+1,a.flt.q_year=a.today.getFullYear(),a.flt.q_from="1",a.flt.q_to="4",a.flt.hf_year=a.today.getFullYear(),a.flt.hf_from="1",a.flt.hf_to="2",a.flt.year_from=a.today.getFullYear()-1,a.flt.year_to=a.today.getFullYear(),a.validation={},a.pdfLink="",a.datePickerOpen=function(a){b(function(){
$("#"+a).focus()})},a.onGenerateXls=function(){var b=!0;"DateRange"==a.param.report_type?a.param.report_from_date>a.param.report_to_date?(b=!1,a.validation.date_period=!0):(a.param.report_type_period="Date Range",a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Monthly"==a.param.report_type?a.flt.month_from>a.flt.month_to?(b=!1,a.validation.month_period=!0):(a.param.report_type_period="Monthly From "+a.months[a.flt.month_from-1]+" To "+a.months[a.flt.month_to-1]+", "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.month_year,a.flt.month_from-1,1),a.param.report_to_date=new Date(a.flt.month_year,a.flt.month_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Quarterly"==a.param.report_type?a.flt.q_from>a.flt.q_to?(b=!1,a.validation.q_period=!0):(a.flt.q_from==a.flt.q_to?a.param.report_type_period="Quarterly, For Quarter "+a.flt.q_from+", "+a.flt.q_year:a.param.report_type_period="Quarterly From Quarter "+a.flt.q_from+" To Quarter "+a.flt.q_to+", "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.q_year,3*(a.flt.q_from-1),1),a.param.report_to_date=new Date(a.flt.q_year,3*a.flt.q_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"HalfYearly"==a.param.report_type?a.flt.hf_from>a.flt.hf_to?(b=!1,a.validation.hf_period=!0):(a.flt.hf_from==a.flt.hf_to?1==a.flt.hf_from?a.param.report_type_period="Half-Yearly, Jan - Jun, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, Jul - Dec, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, From Jan - June and Jul - Dec , "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.hf_year,6*(a.flt.hf_from-1),1),a.param.report_to_date=new Date(a.flt.hf_year,6*a.flt.hf_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Yearly"==a.param.report_type&&(a.flt.year_from>a.flt.year_to?(b=!1,a.validation.year_period=!0):(a.param.report_type_period="Yearly From "+a.flt.year_from+" To "+a.flt.year_to,a.param.report_from_date=new Date(a.flt.year_from,0,1),a.param.report_to_date=new Date(a.flt.year_to,11,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))),a.pdfLink="",b&&(a.pdfLink="/FallsAdHocReport/GenerateXls/?"+$.param(a.param,!0),window.open(a.pdfLink,"_blank"))},a.onGeneratePdf=function(){var b=!0;"DateRange"==a.param.report_type?a.param.report_from_date>a.param.report_to_date?(b=!1,a.validation.date_period=!0):(a.param.report_type_period="Date Range",a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Monthly"==a.param.report_type?a.flt.month_from>a.flt.month_to?(b=!1,a.validation.month_period=!0):(a.param.report_type_period="Monthly From "+a.months[a.flt.month_from-1]+" To "+a.months[a.flt.month_to-1]+", "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.month_year,a.flt.month_from-1,1),a.param.report_to_date=new Date(a.flt.month_year,a.flt.month_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Quarterly"==a.param.report_type?a.flt.q_from>a.flt.q_to?(b=!1,a.validation.q_period=!0):(a.flt.q_from==a.flt.q_to?a.param.report_type_period="Quarterly, For Quarter "+a.flt.q_from+", "+a.flt.q_year:a.param.report_type_period="Quarterly From Quarter "+a.flt.q_from+" To Quarter "+a.flt.q_to+", "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.q_year,3*(a.flt.q_from-1),1),a.param.report_to_date=new Date(a.flt.q_year,3*a.flt.q_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"HalfYearly"==a.param.report_type?a.flt.hf_from>a.flt.hf_to?(b=!1,a.validation.hf_period=!0):(a.flt.hf_from==a.flt.hf_to?1==a.flt.hf_from?a.param.report_type_period="Half-Yearly, Jan - Jun, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, Jul - Dec, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, From Jan - June and Jul - Dec , "+a.flt.month_year,a.param.report_from_date=new Date(a.flt.hf_year,6*(a.flt.hf_from-1),1),a.param.report_to_date=new Date(a.flt.hf_year,6*a.flt.hf_to,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Yearly"==a.param.report_type&&(a.flt.year_from>a.flt.year_to?(b=!1,a.validation.year_period=!0):(a.param.report_type_period="Yearly From "+a.flt.year_from+" To "+a.flt.year_to,a.param.report_from_date=new Date(a.flt.year_from,0,1),a.param.report_to_date=new Date(a.flt.year_to,11,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))),a.pdfLink="",b&&(a.pdfLink="/FallsAdHocReport/GeneratePDF/?"+$.param(a.param,!0),window.open(a.pdfLink,"_blank"))}}]),angular.module("HITS").controller("MeLevelOfInjuryReportCtrl",["$scope","MeLevelInjuryReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_3_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("PatientDaysCtrl",["$rootScope","$scope","$resource","$location","$modal","PatientDaysService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_PATIENT_DAYS_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/patientDays/patientDaysForm/patient-days-form.html",controller:"PatientDaysFormCtrl",resolve:{patientDaysData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"default",is_sort_asc:!1,total_data:0,search:{keyword:b.keyword,fields:["year","month","Discipline.discipline_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.patientDayses=[];var c=a.data.list;b.patientDayses=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Patient Days ["+a.year+" "+a.month+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.SearchQuery.sort_by="default",b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()};var k=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months={};for(var l in k){var m=k[l],n=+l+1;b.months[n]=m}b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("PatientDaysFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DisciplineService","PatientDaysService","patientDaysData","ToastMessageService",function(a,b,c,d,e,f,g,h,i){b.patientDays=h,b.validate={},b.validate.button=!0,b.FetchAllDiscipline=function(){var a=f.FetchAll(function(){b.disciplines=[],b.disciplines=a.data})},b.FetchAllDiscipline(),b.patientDays.year&&(b.validate.year=!1),b.patientDays.month&&(b.validate.month=!1),b.patientDays.days&&(b.validate.days=!1),b.isValid=function(){return b.validate.year=!b.patientDays.year,b.validate.month=!b.patientDays.month,b.validate.days=!b.patientDays.days,!b.validate.year&&!b.validate.month&&!b.validate.days},b.patientDays.patient_days_id||(b.patientDays.patient_days_id=0),b.onSave=function(a){if(b.isValid()){b.validate.button=!1;var c=g.Save(a,function(){c.data?(i.addAlerts("success","Data Saved Succesfully"),e.close()):(b.validate.button=!0,i.addAlerts("danger","There is a record found for the year and month entered. Please update the existing record"))})}};var j=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months=[];for(var k in j){var l=j[k],m=+k+1;b.months.push({key:m,name:l})}b.years=[];for(var n=(new Date).getFullYear(),o=2030;n>o;)o+=15;for(var k=2015;o>=k;k++)b.years.push(k);b.onChangeDiscipline=function(){b.patientDays.Discipline={},b.patientDays.discipline_id&&angular.forEach(b.disciplines,function(a,c){a.discipline_id==b.patientDays.discipline_id&&(b.patientDays.Discipline=a)})}}]),angular.module("HITS").controller("OperationDaysCtrl",["$rootScope","$scope","$resource","$location","$modal","OperationDaysService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_PATIENT_DAYS_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/operationDays/operationDaysForm/operation-days-form.html",controller:"OperationDaysFormCtrl",resolve:{operationDaysData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"default",is_sort_asc:!1,total_data:0,search:{keyword:b.keyword,fields:["year","month","Discipline.discipline_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.operationDayses=[];var c=a.data.list;b.operationDayses=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Operation Days ["+a.year+" "+a.month+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.SearchQuery.sort_by="default",b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()};var k=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months={};for(var l in k){var m=k[l],n=+l+1;b.months[n]=m}b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("OperationDaysFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DisciplineService","OperationDaysService","operationDaysData","ToastMessageService",function(a,b,c,d,e,f,g,h,i){b.operationDays=h,b.validate={},b.validate.button=!0,b.FetchAllDiscipline=function(){var a=f.FetchAll(function(){b.disciplines=[],b.disciplines=a.data})},b.FetchAllDiscipline(),b.operationDays.year&&(b.validate.year=!1),b.operationDays.month&&(b.validate.month=!1),b.operationDays.days&&(b.validate.days=!1),b.isValid=function(){return b.validate.year=!b.operationDays.year,b.validate.month=!b.operationDays.month,b.validate.days=!b.operationDays.days,!b.validate.year&&!b.validate.month&&!b.validate.days},b.operationDays.operation_days_id||(b.operationDays.operation_days_id=0),b.onSave=function(a){if(b.isValid()){b.validate.button=!1;var c=g.Save(a,function(){c.data?(i.addAlerts("success","Data Saved Succesfully"),e.close()):(b.validate.button=!0,i.addAlerts("danger","There is a record found for the year and month entered. Please update the existing record"))})}};var j=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months=[];for(var k in j){var l=j[k],m=+k+1;b.months.push({key:m,name:l})}b.years=[];for(var n=(new Date).getFullYear(),o=2030;n>o;)o+=15;for(var k=2015;o>=k;k++)b.years.push(k);b.onChangeDiscipline=function(){b.operationDays.Discipline={},b.operationDays.discipline_id&&angular.forEach(b.disciplines,function(a,c){a.discipline_id==b.operationDays.discipline_id&&(b.operationDays.Discipline=a)})}}]),angular.module("HITS").controller("MeNoOfAlliedHealthCtrl",["$scope","MeAlliedHealthReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_10_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeNoOfMedicationByDesignationDisciplineCtrl",["$scope","MeNoOfMedicationByDesignationDisciplineReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_9_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeNoOfMedicationByStaffDesignationCtrl",["$scope","MeNoOfMedicationByStaffDesignationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_7_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeNoOfMedicationByDesignationAndSequentialStageCtrl",["$scope","MeNoOfMedicationByDesignationAndSequentialStageReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_8_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("FallInpatientInjuryCtrl",["$scope","FallsInpatientInjuryReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.FALLS_2_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("PsiPressureInjuryReportCtrl",["$scope","PressureInjuryReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.PSI_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeSequentialStageCtrl",["$scope","MeSequentialStageReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_5_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("MeTypeOfMedicationCtrl",["$scope","MeTypeOfMedicationReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.ME_4_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("AEAttendanceCtrl",["$rootScope","$scope","$resource","$location","$modal","AEAttendanceService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_AE_ATTENDANCE_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/aeAttendance/aeAttendanceForm/ae-attendance-form.html",controller:"AEAttendanceFormCtrl",resolve:{aeAttendanceData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"default",is_sort_asc:!1,total_data:0,search:{keyword:b.keyword,fields:["year","total"]}};var k=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months={};for(var l in k){var m=k[l],n=+l+1;b.months[n]=m}b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.aeAttendances=[];var c=a.data.list;b.aeAttendances=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the A&E Attendance ["+a.year+" "+a.month+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.SearchQuery.sort_by="default",b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("AEAttendanceFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","AEAttendanceService","ToastMessageService","aeAttendanceData",function(a,b,c,d,e,f,g,h){b.aeAttendance=h,b.aeAttendance.ae_attendance_id||(b.aeAttendance.ae_attendance_id=0),b.validate={},b.validate.button=!0,b.aeAttendance.year&&(b.validate.year=!1),b.aeAttendance.month&&(b.validate.month=!1),b.aeAttendance.total&&(b.validate.total=!1),b.isValid=function(){return b.aeAttendance.year?b.validate.year=!1:b.validate.year=!0,b.aeAttendance.month?b.validate.month=!1:b.validate.month=!0,b.aeAttendance.total?b.validate.total=!1:b.validate.total=!0,b.validate.year||b.validate.month||b.validate.total?!1:!0},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;var c=f.Save(a,function(){c.data?(g.addAlerts("success","Data Saved Succesfully"),e.close()):(b.validate.button=!0,g.addAlerts("danger","There is a record found for the year and month entered. Please update the existing record"))})}};var i=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months=[];for(var j in i){var k=i[j],l=+j+1;b.months.push({key:l,name:k})}b.years=[];for(var m=(new Date).getFullYear(),n=2030;m>n;)n+=15;for(var j=2015;n>=j;j++)b.years.push(j)}]),angular.module("HITS").controller("ShiftCtrl",["$rootScope","$scope","$resource","$location","$modal","ShiftService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_SHIFT_TIMING_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/shift/shiftForm/shift-form.html",controller:"ShiftFormCtrl",resolve:{shiftData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"start",is_sort_asc:!1,total_data:0,search:{keyword:b.keyword,fields:["description"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.shiftes=[];var c=a.data.list;b.shiftes=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Shift ["+a.description+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("ShiftFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","ShiftService","shiftData",function(a,b,c,d,e,f,g){b.shift=g,b.validate={},b.validate.button=!0,b.shift.description&&(b.validate.description=!1),b.shift.start&&(b.validate.start=!1),b.shift.end&&(b.validate.end=!1),b.isValid=function(){return b.shift.description?b.validate.description=!1:b.validate.description=!0,b.shift.start?b.validate.start=!1:b.validate.start=!0,b.shift.end?b.validate.end=!1:b.validate.end=!0,b.validate.description||b.validate.start||b.validate.end?!1:!0},b.onSave=function(a){if(b.isValid()){if(!a.description||!a.start||!a.end)return;try{a.start.setFullYear(1990),a.start.setMonth(0),a.start.setDate(1),a.end.setFullYear(1990),a.end.setMonth(0),a.end.setDate(1)}catch(c){}b.validate.button=!1;f.Save(a,function(){e.close()})}}}]),angular.module("HITS").controller("IncidentMergedDetailsCtrl",["$scope","$timeout","$interval","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","IncidentService","IncidentFormService","IncidentFormServiceData","DisciplineService","$location","SessionService","IncidentSubTypeService","RoutingGroupService","CommitteeGroupService","WorkflowService","ApplicationSettingService","ToastMessageService","LoadingScreenService","IncidentCommentService","FileUploader","FileService","$window","$modal","IncidentRcaCategoryService","GcsService","PatientClassService","PatientLocationService","$routeParams","$document","UserSessionData","UserAclSessionData","IncidentLockService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){n.setAclSession(H),n.setAcltoScope(a);var J=G;a.userSession=J,a.submitNextLevelValidation={},a.incident={},a.today=new Date,a.personInvolvedNotValid=!1,a.personInvolvedNotValidNearMiss=!1,a.personInvolvedDuplicate=!1,a.main_template_value={},a.main_template_supervisor_value={},a.submitValid=!0,a.isAnonymous=n.isAnonymous(),a.incident_description_invalid=!1,a.hasSearch=!1,a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.showItem=function(a,b){if(a){var c=a.display_name,d=!0;return angular.forEach(a.keywords,function(a,e){angular.lowercase(a).indexOf(angular.lowercase(b))>-1&&(d?(c=c+" - "+a,d=!1):c=c+" - "+a)}),c}return a};var K=function(a){z.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-medium",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){K(a)},a.onForwardIncident=function(){L(a.incident)};var L=function(a){z.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";t.removeAlerts(),t.addAlerts("success",b)}})};a.onIncidentsubTypeChange=function(){a.incident.incident_sub_type_others_description=""},a.onIncidentTypeChange=function(b){a.incident.incident_type_id=b,a.incident.incident_sub_type_id=null,"undefined"==typeof a.incident.validation&&(a.incident.validation={}),a.incident.validation.incidentSubType=!1,a.incident.incident_type_others="",a.incident.validation.incidentTypeOther=!1,6==a.incident.incident_type_id&&z.open({templateUrl:"app/incident/form/incident-additional-info/incident-additional-info.html",controller:"IncidentAdditionalInfoCtrl",windowClass:"modal-medium"})},a.onChangeDateOfOccurance=function(b){var c=new Date(a.incident.time_of_occurance),d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.incident.time_of_occurance=d},a.onWitnessedChange=function(b){b||(a.incident.witness_name="",a.incident.witness_relation_type=null,a.incident.witness_relation_other_description="",a.incident.witness_contact_no="",a.incident.witness_address="")},a.autoSave=function(){if(a.form.is_edited){var b=I.ExtendLockExpiredTime({incidentId:a.incident.incident_id},function(){b.data});_(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var c=i.Save(a.incident,function(){var b=c.data;b.IsSuccess&&(a.incident=b.Data,a.fetchAllowEdit(),a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_value=angular.fromJson(a.incident.main_template_value)),_()},function(){_()})}};var M;a.stopAutoSave=function(){angular.isDefined(M)&&(c.cancel(M),M=void 0)};var N=a.uploader=new w({url:"/File/Upload",autoUpload:!0,removeAfterUpload:!0});if(N.onSuccessItem=function(b,c,d,e){a.incident.Attachments||(a.incident.Attachments=[]),a.incident.Attachments.push({is_active:!0,filename:b.file.name}),a.successFile++},N.onErrorItem=function(b,c,d,e){c.message?b.errorMessage=c.message:(b.errorMessage=c.match(/<title[^>]*>[\s\S]*<\/title>/gi)[0],b.errorMessage=b.errorMessage.replace("<title>",""),b.errorMessage=b.errorMessage.replace("</title>","")),a.failedFile++},N.onAfterAddingAll=function(b){a.totalFile=b.length,a.successFile=0,a.failedFile=0},N.onCompleteAll=function(){t.removeAlerts();var b="";a.successFile>0&&(b+=a.successFile+"/"+a.totalFile+" uploaded successfully. "),a.failedFile>0&&(b+=a.failedFile+"/"+a.totalFile+" upload failed. "),a.failedFile>0?t.addAlerts("danger",b):t.addAlerts("success",b)},a.download=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,y.open("/File/DownloadIncidentAttachment?name="+encodeURIComponent(b.filename)+"&incidentId="+c)},a.onDeleteAttachment=function(a){confirm("Are you sure you want to delete this attachment?")&&(a.is_active=!1,t.addAlerts("success","File removed successfully"))},a.incident=k,a.incident.Comments=[],a.form={},a.fetchAllowEdit=function(){null==k.is_edited||1==k.is_edited?a.form.is_edited=!0:a.form.is_edited=!1,a.form.is_merged=k.is_merged,a.form.access_from_link=k.access_from_link,a.form.is_suspected_duplicate=k.is_suspected_duplicate,a.form.is_forwarded_to_you=k.is_forwarded_to_you},a.autopurge=null,a.fetchAllowEdit(),a.incident.incident_id>0){u.showLoading();var O=i.FetchOne({incidentId:a.incident.incident_id},function(){if(a.incident=O.data,a.incident.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_supervisor_value=angular.fromJson(a.incident.main_template_supervisor_value),a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.main_template_value=a.incident.main_template_value,a.main_template_supervisor_value=a.incident.main_template_supervisor_value,a.isAnonymous=a.incident.is_anonymous,a.FetchComments(),a.fetchHighestWorkflow(),!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var b=s.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var d=b.data.setting_value_default;M=c(a.autoSave,60*d*1e3)});if("DRAFT"==a.incident.current_tracking_status_holder)var d=s.FetchOneByKey({keyValue:"DAYS_TO_AUTO_PURGE_DRAFT_INCIDENT"},function(){a.autopurge=d.data.setting_value_default});if(a.incident.incident_no)var e=i.CheckIsResponsibleForIncident({userId:a.userSession.user_id,incidentId:a.incident.incident_id,routingGroupId:a.incident.routing_group_id},function(){!e.data||null!=k.is_edited&&1!=k.is_edited?a.form.is_edited=!1:a.form.is_edited=!0,"DRAFT (RE-ROUTE)"==a.incident.current_tracking_status&&a.incident.created_by==a.userSession.user_id&&(a.form.is_edited=!0)});a.incident.incident_id<=0&&m.path("/incident/notFound"),u.hideLoading()},function(){u.hideLoading()})}else{u.showLoading();var O=i.FetchOne({incidentId:0},function(){a.incident=O.data,a.userSession=n.getSession(),a.incident.reporter_name=a.userSession.name,a.incident.designation_id=a.userSession.designation_id,a.incident.department_id=a.userSession.department_id,a.incident.employee_category_id=a.userSession.employee_category_id,a.incident.main_template_value={},a.incident.main_template_supervisor_value={},a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.main_template_value={},a.incident.AdditionalCcs=[],a.incident.incident_description="Situation:\n\nBackground:\n\nAssessment:\n\nRecommendations:\n\n",a.incident.date_of_occurance=angular.copy(a.today),a.incident.time_of_occurance=angular.copy(a.today),a.incident.is_witnessed=!1,a.incident.is_near_miss=null,a.incident.is_anonymous=a.isAnonymous;var b=s.FetchOneByKey({keyValue:"DAYS_TO_AUTO_PURGE_DRAFT_INCIDENT"},function(){a.autopurge=b.data.setting_value_default});if(a.isHighest=!1,!a.isAnonymous&&"CLOSED"!=a.incident.current_tracking_status)var d=s.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var b=d.data.setting_value_default;M=c(a.autoSave,60*b*1e3)});u.hideLoading()},function(){u.hideLoading()})}a.FetchMergedIncidents=function(){if(a.incident.incident_id>0)if("MERGED"==a.incident.current_tracking_status)var b=i.FetchMainIncidents({incidentId:a.incident.incident_id},function(){a.incident.incident_main=b.data});else var c=i.FetchMergedIncidents({incidentId:a.incident.incident_id},function(){a.incident.incident_merged=c.data});else var c=i.FetchMergedIncidents({incidentId:0},function(){a.incident.incident_merged=c.data})},b(function(){a.FetchMergedIncidents()},2e3),a.onViewIncidentMerged=function(a){};b(function(){var b=i.FetchTopFIve(function(){a.topFives=b.data})},2e3),a.onTopFiveChoosen=function(b){var c=a.form.is_edited;c&&(a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.incident_sub_type_id)},a.step=1;var P=d.FetchAll(function(){a.designations=P.data}),Q=e.FetchAll(function(){a.departments=Q.data}),R=f.FetchAll(function(){a.employeeCategorys=R.data}),S=g.FetchAllSimpleModel(function(){a.incidentTypes=S.data,a.incidentTypes1=[],a.incidentTypes2=[],angular.forEach(a.incidentTypes,function(b,c){c<a.incidentTypes.length/2?a.incidentTypes1.push(b):a.incidentTypes2.push(b)})});a.isSubtypeSpecified=function(b){var c=!1;return angular.forEach(a.incidentTypes,function(a,d){angular.forEach(a.MasterIncidentSubTypes,function(a,d){a.incident_sub_type_id==b&&a.is_specify&&(c=!0)})}),c};var T=o.FetchAll(function(){a.incidentSubTypes=T.data}),U=h.FetchAll(function(){a.locations=U.data}),V=l.FetchAll(function(){a.disciplines=V.data}),W=D.FetchAll(function(){a.patientLocations=W.data}),X=C.FetchAll(function(){a.patientClasses=X.data}),Y=g.FetchAllForSearchIncident(function(){a.incidentTypeFlats=Y.data});a.onSelectSearchIncident=function(b){a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.sub_incident_type_id},a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.addPerson=function(){a.tempPerson=null,a.newPerson={is_active:!0,is_affected:null},a.personAddMode=!0,a.add=!a.add,a.hasSearch=!1},a.onPersonEdit=function(b){a.tempPerson=angular.copy(b),a.newPerson=angular.copy(b),a.editPersonIndex=a.incident.PersonInvolveds.indexOf(b),a.personAddMode=!1,a.add=!0,a.hasSearch=!0},a.onPersonDelete=function(a){var b=confirm("Are you sure you want to delete this record ?");b&&(t.addAlerts("success","Data Person Deleted Successfully"),a.is_active=!1)},a.onPersonCategoryChange=function(b){if("Visitor"==b||"Others"==b?a.hasSearch=!0:a.personAddMode?a.hasSearch=!1:a.hasSearch=!0,a.tempPerson&&a.tempPerson.person_category==b)a.newPerson=angular.copy(a.tempPerson);else{var c=null;c=a.tempPerson?a.tempPerson.is_affected:a.newPerson.is_affected,a.newPerson={person_category:b,is_active:!0,is_affected:c}}};var Z=function(b){b.validation={};var c=!0,d=b.person_category==a.patient,e=b.person_category==a.staff;b.person_category==a.visitor,b.person_category==a.others;return b.person_category?b.person_category!=a.others||b.person_category_other_description||(b.validation.category_other=!0,c=!1):(b.validation.category=!0,c=!1),null===b.is_affected&&(b.validation.near_miss=!0,c=!1),b.fullname||(b.validation.name=!0,c=!1),e&&!b.person_id&&(b.validation.id=!0,c=!1),d&&!b.nric&&(b.validation.nric=!0,c=!1),d||e||b.contact_no||(b.validation.contact=!0,c=!1),d&&e&&b.contact_no&&b.contact_no.length<8&&(b.validation.contact_length=!0,c=!1),b.gender||!d&&!e||(b.validation.gender=!0,c=!1),d&&!b.age&&(b.validation.age=!0,c=!1),d&&!b.case_number&&(b.validation.case_number=!0,c=!1),d&&!b.patient_admission_date&&(b.validation.admission=!0,c=!1),d&&!b.patient_discipline&&(b.validation.discipline=!0,c=!1),e&&11==a.incident.incident_type_id&&(b.staff_category||(b.validation.staff_category=!0,c=!1),"Others"!=b.staff_category||b.staff_category_other||(b.validation.staff_category_other=!0,c=!1),b.staff_years_of_service||(b.validation.staff_years_of_service=!0,c=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,c=!1)),e&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(b.staff_years_of_service||(b.validation.staff_years_of_service=!0,
c=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,c=!1),b.staff_protective_is_other&&!b.staff_protective_is_other_description&&(b.validation.staff_protective_is_other_description=!0,c=!1)),d&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(18==a.incident.incident_sub_type_id&&(b.patient_caused_injury_is_hypo_needle||b.patient_caused_injury_is_spinal_needle||b.patient_caused_injury_is_suture_needle||b.patient_caused_injury_is_catheter||b.patient_caused_injury_is_lancet||b.patient_caused_injury_is_other||(b.validation.patient_caused_injury=!0,c=!1)),b.patient_caused_injury_is_other&&!b.patient_caused_injury_other_description&&(b.validation.patient_caused_injury_other_description=!0,c=!1),b.patient_body_fluid_is_other&&!b.patient_body_fluid_other_description&&(b.validation.patient_body_fluid_other_description=!0,c=!1)),c};a.onCancelSavePerson=function(){a.add=!1},a.savePerson=function(){a.incident||(a.incident={}),a.incident.PersonInvolveds||(a.incident.PersonInvolveds=[]),Z(a.newPerson)&&(a.personAddMode?a.isPersonInvolvedIsExist(a.newPerson,null)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds.push(angular.copy(a.newPerson)),t.addAlerts("success","Data Person Saved Successfully"),a.personInvolvedDuplicate=!1,a.add=!1):a.isPersonInvolvedIsExist(a.newPerson,a.editPersonIndex)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds[a.editPersonIndex]=a.newPerson,t.addAlerts("success","Data Person Updated Successfully"),a.personInvolvedDuplicate=!1,a.add=!1))};var _=function(){a.action=!a.action};a.onSave=function(){var b=I.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var c=b.data;if(c.IsSuccess){_(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var d=i.Save(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,a.FetchMergedIncidents(),a.fetchAllowEdit(),a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.incident.main_template_value=angular.fromJson(a.incident.main_template_value),t.removeAlerts(),t.addAlerts("success","Data Saved Successfully")):(t.removeAlerts(),t.addAlerts("danger","Save draft incident failed")),_()})}})},a.onSaveNext=function(){},a.onSaveRca=function(){_(),a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var b=i.Save(a.incident,function(){var c=b.data;c.IsSuccess?(a.incident=c.Data,a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value),a.FetchComments(),t.removeAlerts(),t.addAlerts("success","Data Saved Successfully")):(t.removeAlerts(),t.addAlerts("danger","Save Failed. Error : "+c.Message)),_()})},a.first_time=!0,a.generalValidation=function(){a.incident.validation={};var b=!0;return a.first_time=!1,a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.incident.validation.incidentTypeOther=!0,b=!1):(a.incident.validation.incidentType=!0,b=!1),angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==a.incident.incident_type_id&&c.MasterIncidentSubTypes.length>0&&(null==a.incident.incident_sub_type_id||0==a.incident.incident_sub_type_id?(a.incident.validation.incidentSubType=!0,b=!1):a.isSubtypeSpecified(a.incident.incident_sub_type_id)&&!a.incident.incident_sub_type_others_description&&(b=!1))}),null===a.incident.is_near_miss&&(a.incident.validation.near_miss=!0,b=!1),a.incident.location_id||(a.incident.validation.location=!0,b=!1),a.incident.date_of_occurance||(a.incident.validation.date=!0,b=!1),a.incident.time_of_occurance?a.incident.time_of_occurance>a.today&&(a.incident.validation.time_max=!0,b=!1):(a.incident.validation.time=!0,b=!1),a.incident.reporter_name.length>200&&(b=!1),a.isAnonymous||(a.incident.reporter_name||(a.incident.validation.reporter_name=!0,b=!1),a.incident.designation_id&&0!=a.incident.designation_id||(a.incident.validation.designation=!0,b=!1),a.incident.department_id&&0!=a.incident.department_id||(a.incident.validation.department=!0,b=!1),a.incident.employee_category_id&&0!=a.incident.employee_category_id||(a.incident.validation.employee_category=!0,b=!1)),b},a.add=!1,a.personInvolvedValidation=function(){return a.personInvolvedNotValid=!0,a.personInvolvedNotValidNearMiss=!0,a.form.is_edited||(a.personInvolvedNotValidNearMiss=!1,a.personInvolvedNotValid=!1),angular.forEach(a.incident.PersonInvolveds,function(b,c){b.is_active&&(a.personInvolvedNotValid=!1)}),!a.personInvolvedNotValid&&!a.add&&a.form.is_edited||!a.form.is_edited},a.main_template={},a.incident_detail={},a.fetchIncidentTemplate=function(){u.showLoading();var b=g.FetchIncidentTemplate({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id},function(){a.main_template_navigation=b.data.main_template_navigation,a.templateSections=b.data.DetailTemplates,a.main_template=b.data.main_template,u.hideLoading()},function(){u.hideLoading()})},a.incidentDetailEnterValidation=function(){if(a.incident_detail.validation=!1,null==a.incident.incident_type_id)return alert("Please choose Incident Type and Incident Sub Type (if any) first!"),!1;var b=this.$$nextSibling.details;return a.dynamicFormScope&&a.dynamicFormScope.$destroy(),a.dynamicFormScope=a.$new(!1),a.dynamicFormScope.$on("$destroy",function(){a.dynamicFormScope.$$watchers=null,a.dynamicFormScope.$$listeners=null}),a.incident.incident_id>0&&(a.dynamicFormScope.main_template_value=angular.fromJson(a.incident.main_template_value)),b.$valid=!0,b.$invalid=!1,b&&angular.forEach(b,function(a,c){a.hasOwnProperty("$modelValue")&&b.$removeControl(a)}),a.main_template="",a.main_template_navigation="",a.templateSections=[],a.fetchIncidentTemplate(),!0},a.incidentDetailExitValidation=function(){var b=this.$$nextSibling.details;return b.$valid?(F.unbind("click"),a.incident.main_template_value=angular.fromJson(a.dynamicFormScope.main_template_value),!0):(a.incident_detail.validation=!0,!1)},a.$on("$destroy",function(){a.stopAutoSave(),a.dynamicFormScope&&a.dynamicFormScope.$destroy(),F.unbind("scroll"),$(window).unbind("scroll"),$(window).unbind("resize");var b=document.getElementById("incident-form-content");if(b){var c=$("#incident-form-content");c.empty(),c.remove()}var d=I.ReleaseLock({incidentId:a.incident.incident_id},function(){d.data},function(){})}),a.onCheckRequiredDateElements=function(a,b){var c=!1;return a?"yes"==a&&(b?""==b&&(c=!0):c=!0):c=!0,c},a.onCheckRequiredRadioElements=function(a){var b=!1;return a||(b=!0),b},a.onChangeRoutingGroup=function(b){a.routingUsers=[],angular.forEach(b.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incident.location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incident.department_id&&c.is_active&&a.routingUsers.push(b)})})},a.fetchRoutingGroup=function(){var b=1;a.incident.current_tracking_order_level&&(b=a.incident.current_tracking_order_level);var c=0;a.incident.workflow_id&&(c=a.incident.workflow_id);var d=r.FetchNextRoutingGroup({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:b,designationId:a.incident.designation_id,currentWorkflowId:c,locationId:a.incident.location_id,departmentId:a.incident.department_id,isAnonymous:a.incident.is_anonymous,reporterId:a.incident.created_by},function(){a.routingGroups=d.data,a.routingUsers=[],a.routingGroup={};var b=!0;angular.forEach(a.routingGroups,function(c,d){b&&(a.routingGroup=c,b=!1,angular.forEach(c.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incident.location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incident.department_id&&c.is_active&&a.routingUsers.push(b)})}))})})},a.fetchCommitteeGroup=function(){var b=[],c=[];a.committeeGroups=[],angular.forEach(a.incident.PersonInvolveds,function(a,d){null!=a.patient_class&&b.push(a.patient_class),"patient"==a.person_category.toLowerCase()?c.push(a.patient_type):c.push(a.person_category)});var d=q.FetchAllForIncidentCc({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id,locationId:a.incident.location_id,departmentId:a.incident.department_id,listDisciplineCode:b,listPersonInvolved:c},function(){a.committeeGroups=d.data,a.incident.Ccs=[],angular.forEach(a.committeeGroups,function(b,c){a.incident.Ccs.push(b)})})},a.incidentDescriptionEnterValidation=function(){if(null==a.incident.incident_type_id)return alert("Please choose Incident Type and Location of Incident first!"),!1;a.fetchRoutingGroup(),a.fetchCommitteeGroup(),a.main_template="";var b=g.FetchOne({incidentTypeId:a.incident.incident_type_id},function(){var c=b.data;a.main_template_supervisor="",a.main_template_supervisor=c.main_template_supervisor,a.incident.main_template_supervisor=a.main_template_supervisor});return!0},a.onSubmit=function(){if(null==a.incident.is_witnessed&&(a.incident.is_witnessed=!1),a.incident_description_invalid=!1,a.incident.incident_description.length<84&&(a.incident_description_invalid=!0),a.incident.incident_description.length>=84){a.incident_description_invalid=!1,a.submitValid=!0,_(),a.dynamicFormScope.main_template_value&&(a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value)),a.main_template_supervisor_value&&(a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value));var b=i.Save(a.incident,function(){u.showLoading();var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.Submit(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,j.set(a.incident),u.hideLoading(),_(),m.path("/incident/form/reporterConfirmation")):(u.hideLoading(),_(),t.removeAlerts(),t.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else _(),u.hideLoading(),t.removeAlerts(),t.addAlerts("danger","Submit incident failed")},function(){u.hideLoading(),_()})}},a.FetchComments=function(){var b=a.incident.incident_id;if(null==b&&(b=0),a.currentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_VIEW_ALL)var c=v.FetchAll({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})});else var c=v.FetchAllWithReporterView({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})})},a.commentEnterValidation=function(){return a.FetchComments(),!0};var aa=function(b){z.open({templateUrl:"app/incident/form/incident-comment/incident-comment.html",controller:"IncidentCommentCtrl",windowClass:"modal-large",resolve:{incidentComment:function(){return b},incident:function(){return angular.copy(a.incident)}}}).result.then(function(b){var c="",d="";b?(c="success",d="Comment Saved Succesfully"):(c="danger",d="Save comment failed"),t.removeAlerts(),t.addAlerts(c,d),a.FetchComments()})};a.onViewComment=function(a){a.is_edited=!1,aa(a)},a.onAddComment=function(b){a.userSession=n.getSession();var c={incident_id:a.incident.incident_id,comment_type:b,comment_date:new Date,comment_by:a.userSession.name,user_id:a.userSession.user_id,is_active:!0};aa(c)},a.onCommentEdit=function(a){var b=a;aa(b)},a.onCommentDelete=function(b){var c=v.Delete(b,function(){var b=c.data;b.IsSuccess?(t.removeAlerts(),t.addAlerts("success","Data Deleted")):(t.removeAlerts(),t.addAlerts("danger","Delete comment failed")),a.FetchComments()})},a.onCommentAttachmentDownload=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,y.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(b.attachment_filename)+"&incidentId="+c)},a.calculateSAC=function(){a.sacScore="",a.sacScore=String(a.incident.sac_likelihood)+String(a.incident.sac_consequences)},a.sacEnterValidation=function(){return a.calculateSAC(),!0},a.fetchIncidentRca=function(){var b=a.incident.incident_id;null==b&&(b=0);var c=A.FetchAll({incidentId:b},function(){a.incident.RcaCategories=[],a.incident.RcaCategories=c.data})},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0;return angular.forEach(a.incident.RcaCategories,function(a,d){if(c){var e=!1;angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(e=!0)}),b=e,c=!b}}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()){a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,_(),a.dynamicFormScope.main_template_value&&(a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value)),a.main_template_supervisor_value&&(a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value));var b=i.Save(a.incident,function(){var c=b.data;if(c.IsSuccess){a.incident=c.Data;var d=i.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(t.removeAlerts(),t.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),j.set(a.incident),_(),m.path("/incident/track")):(_(),t.removeAlerts(),t.addAlerts("danger","Submit Failed. Error : "+c.Message))})}else t.removeAlerts(),t.addAlerts("danger","Save Failed. Error : "+c.Message),_()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()};var ba=function(){z.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",t.removeAlerts(),t.addAlerts(b,c),m.path("incident/track"))})},ca=function(){z.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),t.removeAlerts(),t.addAlerts(b,c),m.path("incident/track")})},da=function(){z.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",t.removeAlerts(),t.addAlerts(b,c),m.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),a.incident.is_anonymous?(t.removeAlerts(),t.addAlerts("danger","This incident can't be rerouted")):ba()},a.onCloseIncident=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),ca()},a.onReOpenIncident=function(){a.incident.main_template_value=JSON.stringify(a.dynamicFormScope.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),da()},a.onBack=function(){m.path("/incident/track")},a.onBackToMerged=function(){a.form.is_merged?m.path("/incident/merge/form"):m.path("/incident/merge")},a.onTest=function(){},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};var ea=B.FetchAll(function(){a.gcs=ea.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})});a.isInPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"I"==a.patient_type&&(b=!0)}),b},a.isAnyNearMiss=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){a.is_affected&&(b=!0)}),b},a.isPersonInvolvedIsExist=function(b,c){var d=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,e){c!=e&&a.person_category==b.person_category&&a.is_active&&("Staff"==b.person_category?b.fullname==a.fullname&&b.person_id==a.person_id&&(d=!0):b.fullname==a.fullname&&b.nric==a.nric&&(d=!0))}),d},a.isExceptStaff=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){("Patient"==a.person_category||"Visitor"==a.person_category||"Others"==a.person_category)&&(b=!0)}),b};var fa=function(b){z.open({templateUrl:"app/incident/form/search-person-involved-staff/search-person-involved-staff.html",controller:"SearchPersonInvolvedStaffCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;a.newPerson.fullname=c.employee_name,a.newPerson.person_id=c.employee_id,a.newPerson.gender=c.gender,a.newPerson.staff_designation_id=parseInt(c.DesignationMaster.designation_id),a.newPerson.staff_discipline_id=parseInt(c.DepartmentMaster.department_id),a.newPerson.service_long=c.service_long,c.service_long<3?a.newPerson.staff_years_of_service="less3mo":c.service_long<=6?a.newPerson.staff_years_of_service="36mo":c.service_long<=12?a.newPerson.staff_years_of_service="612mo":c.service_long<=24?a.newPerson.staff_years_of_service="12years":c.service_long<=60?a.newPerson.staff_years_of_service="25years":a.newPerson.staff_years_of_service="more5years"}})};a.onSearchStaff=function(){fa({})};var ga=function(b){z.open({templateUrl:"app/incident/form/search-person-involved-patient/search-person-involved-patient.html",controller:"SearchPersonInvolvedPatientCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;a.newPerson.fullname=c.PatientName,a.newPerson.case_number=c.CaseID,a.newPerson.gender=c.gender,a.newPerson.nric=c.IdentificationDocNo,a.newPerson.patient_bed_no=c.Bed,a.newPerson.age=c.Age,a.newPerson.patient_type=c.CaseType,a.newPerson.patient_admission_date=c.MovementDateTime,a.newPerson.patient_class=c.PatientClass,a.newPerson.patient_location=c.OrganizationalUnit,a.newPerson.patient_discipline=c.Department,a.newPerson.patient_consultant_in_charge=c.AttendingDoctor,a.hasSearch=!0}})};a.onSearchPatient=function(){ga({})};var ha=function(b){z.open({templateUrl:"app/incident/form/add-cc-sap-hr/add-cc-sap-hr.html",controller:"AddCcSapHrCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){var c=b,d={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:c.adid,addition_cc_type:1,email:c.email_address,name:c.employee_name};a.incident.AdditionalCcs.push(d)})};a.onAddCcSapHr=function(){ha({})};var ia=function(b){z.open({templateUrl:"app/incident/form/add-cc-user/add-cc-user.html",controller:"AddCcUserCtrl",windowClass:"modal-large"}).result.then(function(b){var c={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:b.adid,addition_cc_type:1,email:b.email,name:b.name},d=!1;angular.forEach(a.incident.AdditionalCcs,function(a,b){a.email==c.email&&(d=!0)}),d||a.incident.AdditionalCcs.push(c)})};a.onAddCcUser=function(){ia({})},a.onDeleteAdditionalCc=function(b){var c=a.incident.AdditionalCcs.indexOf(b);a.incident.AdditionalCcs.splice(c,1)},a.fetchHighestWorkflow=function(){u.showLoading();var b=r.FetchHighestWorkflow({employeeCategoryId:a.incident.employee_category_id,designationId:a.incident.designation_id,isAnonymous:a.incident.is_anonymous,departmentId:a.incident.department_id,locationId:a.incident.location_id},function(){var c=b.data;a.incident.current_tracking_order_level>=c.order?a.isHighest=!0:a.isHighest=!1,u.hideLoading()},function(){u.hideLoading()})},a.rcaEnterValidation=function(){return a.fetchHighestWorkflow(),$(".nav-incident-detail").onePageNav(),!0};var ja=function(){z.open({templateUrl:"app/incident/form/tooltip/incident-likelihood-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},ka=function(){z.open({templateUrl:"app/incident/form/tooltip/incident-consequences-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},la=function(){z.open({templateUrl:"app/incident/form/tooltip/incident-sre-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenConsequencesModal=function(){ka({})},a.onOpenSREModal=function(){la({})},a.onOpenLikelihoodModal=function(){ja({})}}]),angular.module("HITS").controller("CommitteelocationformCtrl",["$scope","LocationService","committeeGroup","CommitteeGroupService","$modalInstance",function(a,b,c,d,e){c.Locations||(c.Locations=[]),a.committeeGroup=c,a.select={},a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1;var f={};angular.forEach(a.committeeGroup.Locations,function(a,b){f[a.location_id]=a});var g=b.FetchAll(function(){a.locations=g.data,angular.forEach(a.locations,function(a,b){f[a.location_id]||c.Locations.push({committee_group_id:c.committee_group_id,location_id:a.location_id,is_active:!1,Location:a})})});a.select_all_location=function(){a.select.selectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!0,a.select.unselectAllLocation=!1),angular.forEach(a.committeeGroup.Locations,function(b){b.is_active=a.select.selectAllLocation})},a.unselect_all_location=function(){a.select.unselectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!0),a.select.unselectAllLocation&&angular.forEach(a.committeeGroup.Locations,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSubmit=function(a){e.close(a)},a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.committeeGroup.Locations);a.committeeGroup.Locations=[],angular.forEach(c,function(b,c){(b.committee_location_id||b.is_active)&&a.committeeGroup.Locations.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("CommitteedepartmentformCtrl",["$scope","DepartmentService","committeeGroup","CommitteeGroupService","$modalInstance",function(a,b,c,d,e){c.Departments||(c.Departments=[]),a.committeeGroup=c,a.select={},a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1;var f={};angular.forEach(a.committeeGroup.Departments,function(a,b){f[a.department_id]=a});var g=b.FetchAll(function(){a.departments=g.data,angular.forEach(a.departments,function(a,b){f[a.department_id]||c.Departments.push({committee_group_id:c.committee_group_id,department_id:a.department_id,is_active:!1,Department:a})})});a.select_all_department=function(){a.select.selectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!0,a.select.unselectAllDepartment=!1),angular.forEach(a.committeeGroup.Departments,function(b){b.is_active=a.select.selectAllDepartment})},a.unselect_all_department=function(){a.select.unselectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!0),a.select.unselectAllDepartment&&angular.forEach(a.committeeGroup.Departments,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSubmit=function(a){e.close(a)},a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.committeeGroup.Departments);a.committeeGroup.Departments=[],angular.forEach(c,function(b,c){(b.committee_department_id||b.is_active)&&a.committeeGroup.Departments.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("CommitteedisciplineformCtrl",["$scope","DisciplineService","committeeGroup","CommitteeGroupService","$modalInstance",function(a,b,c,d,e){c.Disciplines||(c.Disciplines=[]),a.committeeGroup=c,a.select={},a.select.selectAllDiscipline=!1,a.select.unselectAllDiscipline=!1;var f={};angular.forEach(a.committeeGroup.Disciplines,function(a,b){f[a.discipline_id]=a});var g=b.FetchAll(function(){a.disciplines=g.data,angular.forEach(a.disciplines,function(a,b){f[a.discipline_id]||c.Disciplines.push({committee_group_id:c.committee_group_id,discipline_id:a.discipline_id,is_active:!1,Discipline:a})})});a.select_all_discipline=function(){a.select.selectAllDiscipline?(a.select.selectAllDiscipline=!1,a.select.unselectAllDiscipline=!1):(a.select.selectAllDiscipline=!0,a.select.unselectAllDiscipline=!1),angular.forEach(a.committeeGroup.Disciplines,function(b){b.is_active=a.select.selectAllDiscipline})},a.unselect_all_discipline=function(){a.select.unselectAllDiscipline?(a.select.selectAllDiscipline=!1,a.select.unselectAllDiscipline=!1):(a.select.selectAllDiscipline=!1,a.select.unselectAllDiscipline=!0),a.select.unselectAllDiscipline&&angular.forEach(a.committeeGroup.Disciplines,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSubmit=function(a){e.close(a)},a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.committeeGroup.Disciplines);a.committeeGroup.Disciplines=[],angular.forEach(c,function(b,c){(b.committee_discipline_id||b.is_active)&&a.committeeGroup.Disciplines.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").directive("textAreaMaxlength",["$compile","$log",function(a,b){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){c.$set("ngTrim","false");var e=parseInt(c.textAreaMaxlength,10);d.$parsers.push(function(a){return a.length>e&&(a=a.substr(0,e),d.$setViewValue(a),d.$render()),a})}}}]),angular.module("HITS").controller("IncidentForwardHistoryFormCtrl",["$scope","$modalInstance","$modal","incidentData","IncidentForwardService","ToastMessageService",function(a,b,c,d,e,f){a.incidentForward={incident_forward_id:d.incident_forward_id,incident_id:d.incident_id,employee_id:d.employee_id,forward_to_name:d.forward_to_name,forward_to_email:d.forward_to_email,remarks:d.remarks,adid:d.adid,IncidentMainInfo:d.IncidentMainInfo}}]),angular.module("HITS").controller("RcaHistoryReportCtrl",["$scope","RCAHistoryReportService","$location","SessionService",function(a,b,c,d){d.setAcltoScope(a),a.currentAcl.AI_7_REPORT_VIEW||c.path("/unauthorized"),a.param={},a.control={},a.service=b}]),angular.module("HITS").controller("RawDataCtrl",["$scope","$window","$timeout","$location","RawDataService","IncidentTypeService","IncidentSubTypeService","RoutingGroupService","SessionService","LocationService","DepartmentService","UserAclSessionData","LoadingScreenService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){i.setAclSession(l),i.setAcltoScope(a),a.currentAcl.RAW_INCIDENT_EXTRACTION_VIEW||d.path("/unauthorized"),a.param={person_type:{}},a.flt={person_type:{}},a.isDateEnable=!0,a.datePickerOpen=function(a){c(function(){$("#"+a).focus()})},a.onChangeIncidentType=function(){angular.forEach(a.incidentSubTypes,function(a,b){a.is_selected=!1}),angular.forEach(a.incidentTypes,function(b,c){b.incident_type_id==a.param.incident_type_id&&(a.incidentTypeSelected=b)}),a.FetchLocation(),a.FetchDepartment()};var n=f.FetchAllByUserId(function(){a.incidentTypes=n.data}),o=g.FetchAll(function(){a.incidentSubTypes=o.data,a.hashIncidentSubType={},angular.forEach(a.incidentSubTypes,function(b,c){a.hashIncidentSubType[b.incident_sub_type_id]=b})});a.FetchLocation=function(){var b=j.FetchAllLocationByUserId({incidentTypeId:a.param.incident_type_id},function(){a.locations=b.data,a.hashLocation={},angular.forEach(a.locations,function(b,c){a.hashLocation[b.location_id]=b})})},a.FetchLocation(),a.FetchDepartment=function(){var b=k.FetchAllDepartmentByUserId({incidentTypeId:a.param.incident_type_id},function(){a.departments=b.data,a.hashDepartment={},angular.forEach(a.departments,function(b,c){a.hashDepartment[b.department_id]=b})})},a.FetchDepartment(),a.selectAll=function(a,b){angular.forEach(a,function(a,c){a.is_selected=b})},a.selectSubTypeAll=function(b,c){angular.forEach(b,function(b,d){b.incident_type_id==a.param.incident_type_id&&(b.is_selected=c)})},a.select=function(a,b,c){angular.forEach(a,function(a,d){b[a]&&(b[a].is_selected=c)})},a.personCategories=["Patient","Staff","Visitor","Others"],a.any=function(){var b=!1;return angular.forEach(a.incidentSubTypes,function(c,d){c.incident_type_id==a.param.incident_type_id&&(b=!0)}),b||(a.param.incident_sub_type_id=""),b};var p=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1};a.onClickPatient=function(){a.flt.person_type.patient||(null==a.flt.patient_type&&(a.flt.patient_type={}),a.flt.patient_type.inpatient=!1,a.flt.patient_type.outpatient=!1)},a.onGenerateXls=function(){if(a.clicked=!0,a.param.incident_type_id){if(a.locationNotValid=!1,a.param.SubTypes=[],angular.forEach(a.incidentSubTypes,function(b,c){b.is_selected&&a.param.SubTypes.push(b.incident_sub_type_id)}),a.param.Locations=[],angular.forEach(a.locations,function(b,c){b.is_selected&&a.param.Locations.push(b.location_id)}),a.param.Locations.length<=0)return void(a.locationNotValid=!0);a.action=!0,m.showLoading(),a.param.Departments=[],angular.forEach(a.departments,function(b,c){b.is_selected&&a.param.Departments.push(b.department_id)}),a.param.near_miss=a.flt.near_miss,p(a.param.near_miss)||(a.param.near_miss={yes:!0,no:!0}),a.param.person_type=a.flt.person_type,p(a.param.person_type)||(a.param.person_type={patient:!0,staff:!0,visitor:!0,other:!0}),a.param.patient_type={},a.param.person_type.patient&&(a.param.patient_type=a.flt.patient_type,p(a.param.patient_type)||(a.param.patient_type={inpatient:!0,outpatient:!0})),a.param.person_affected={},a.param.person_affected&&(a.param.person_affected=a.flt.person_affected,p(a.param.person_affected)||(a.param.person_affected={yes:!0,no:!0}));var c=e.GenerateXls(a.param,function(){var d=c.data;b.location.assign("/File/DownloadXls?name="+encodeURIComponent(d)),a.action=!1,m.hideLoading()},function(){a.action=!1,m.hideLoading()})}}}]),angular.module("HITS").controller("UamUserListingReportCtrl",["$scope","$timeout","UserListingReportService","$filter","RoleService","$window","$location","SessionService",function(a,b,c,d,e,f,g,h){h.setAcltoScope(a),a.currentAcl.UAM_USER_LISTING_REPORT_VIEW||g.path("/unauthorized"),a.param={Roles:[]},a.validation={},a.pdfLink="",a.selectAll=function(a,b){angular.forEach(a,function(a,c){a.is_selected=b})},a.select=function(a,b,c){angular.forEach(a,function(a,d){b[a]&&(b[a].is_selected=c)})};var i=e.FetchAll(function(){a.roles=i.data,a.hashRole={},angular.forEach(a.roles,function(b,c){a.hashRole[b.role_id]=b})});a.onGenerateXls=function(b){a.first=!0;var d=!0;if(a.pdfLink="",d)if(a.action=!0,a.param.Roles=[],angular.forEach(a.roles,function(b,c){b.is_selected&&a.param.Roles.push(b)}),"Xls"==b)var e=c.GenerateXls(a.param,function(){var b=e.data;f.location.assign("/File/DownloadXls?name="+encodeURIComponent(b)),a.action=!1});else var e=c.GeneratePdf(a.param,function(){var b=e.data;f.location.assign("/File/DownloadPdf?name="+encodeURIComponent(b)),a.action=!1})},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("UamAccessMatrixReportCtrl",["$scope","$timeout","UserAccessMatrixReportService","$filter","RoleService","$window","$location","SessionService",function(a,b,c,d,e,f,g,h){h.setAcltoScope(a),a.currentAcl.UAM_ACCESS_MATRIX_REPORT_VIEW||g.path("/unauthorized"),
a.param={Roles:[]},a.validation={},a.pdfLink="",a.selectAll=function(a,b){angular.forEach(a,function(a,c){a.is_selected=b})},a.select=function(a,b,c){angular.forEach(a,function(a,d){b[a]&&(b[a].is_selected=c)})};var i=e.FetchAll(function(){a.roles=i.data,a.hashRole={},angular.forEach(a.roles,function(b,c){a.hashRole[b.role_id]=b})});a.onGenerateXls=function(b){a.first=!0;var d=!0;if(a.pdfLink="",d)if(a.action=!0,a.param.Roles=[],angular.forEach(a.roles,function(b,c){b.is_selected&&a.param.Roles.push(b)}),"Xls"==b)var e=c.GenerateXls(a.param,function(){var b=e.data;f.location.assign("/File/DownloadXls?name="+encodeURIComponent(b)),a.action=!1});else var e=c.GeneratePdf(a.param,function(){var b=e.data;f.location.assign("/File/DownloadPdf?name="+encodeURIComponent(b)),a.action=!1})},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").directive("reportFilter",function(){return{restrict:"EA",replace:!0,scope:{param:"=",control:"=",service:"="},templateUrl:"directive/report-filter/report-filter.html",link:function(a,b,c,d){},controller:["$scope","RoutingGroupService","$filter","$timeout","$window","LoadingScreenService","IncidentTypeReportService","LocationService","DepartmentService",function(a,b,c,d,e,f,g,h,i){a.param={report_type:"Monthly",report_type_period:"1",report_from_date:new Date,report_to_date:new Date,incident_type_id:0,Locations:[],Departments:[],near_miss:{},person_type:{},patient_type:{},person_affected:{}},a.today=new Date,a.months=["January","February","March","April","May","June","July","August","September","October","November","December"],a.flt={},a.flt.month_year=a.today.getFullYear(),a.flt.month_year_to=a.today.getFullYear(),a.flt.month_from=1,0==a.flt.month_from&&(a.flt.month_from=12),a.flt.month_to=a.today.getMonth()+1,a.flt.q_year=a.today.getFullYear(),a.flt.q_year_to=a.today.getFullYear(),a.flt.q_from="1",a.flt.q_to="4",a.flt.hf_year=a.today.getFullYear(),a.flt.hf_year_to=a.today.getFullYear(),a.flt.hf_from="1",a.flt.hf_to="2",a.flt.year_from=a.today.getFullYear()-1,a.flt.year_to=a.today.getFullYear(),a.flt.is_all_location=!1,a.flt.is_all_department=!1,a.validation={},a.isDateEnable=!0,a.pdfLink="",a.datePickerOpen=function(a){d(function(){$("#"+a).focus()})},a.selectAll=function(a,b){angular.forEach(a,function(a,c){a.is_selected=b})},a.select=function(a,b,c){angular.forEach(a,function(a,d){b[a]&&(b[a].is_selected=c)})},a.incident_type_id=0,a.fetchIncidentTypeReport=function(){var b=g.FetchAllByUserId(function(){a.incidentTypeReports=[],a.incidentTypeReports=b.data})},a.fetchIncidentTypeReport(),a.onIncidentTypeReportChange=function(b){a.param.report_type_id=0,a.ReportTypes=[],angular.forEach(a.incidentTypeReports,function(c,d){c.incident_type_report_id==b&&(a.param.incident_type_id=c.incident_type_id,a.incident_type_id=c.incident_type_id,a.ReportTypes=c.ReportTypes)}),a.FetchLocation(),a.FetchDepartment()},a.FetchLocation=function(){var b=h.FetchAllLocationByUserId({incidentTypeId:a.incident_type_id},function(){a.locations=b.data,a.hashLocation={},angular.forEach(a.locations,function(b,c){a.hashLocation[b.location_id]=b})})},a.FetchLocation(),a.FetchDepartment=function(){var b=i.FetchAllDepartmentByUserId({incidentTypeId:a.incident_type_id},function(){a.departments=b.data,a.hashDepartment={},angular.forEach(a.departments,function(b,c){a.hashDepartment[b.department_id]=b})})},a.FetchDepartment(),a.onSelectAllLocation=function(){angular.forEach(a.locations,function(b,c){b.is_selected=a.flt.is_all_location})},a.onSelectAllDepartment=function(){angular.forEach(a.departments,function(b,c){b.is_selected=a.flt.is_all_department})},a.onClickPatient=function(){a.flt.person_type.patient||(null==a.flt.patient_type&&(a.flt.patient_type={}),a.flt.patient_type.inpatient=!1,a.flt.patient_type.outpatient=!1)},a.internalControl=a.control||{},a.internalControl.onGenerateXls=function(b){a.first=!0,a.locationNotValid=!1,a.validation.incident_type_report_id=!1,a.validation.report_type_id=!1;var d=!0;if(a.param.incident_type_report_id||(d=!1,a.validation.incident_type_report_id=!0),a.param.report_type_id||angular.forEach(a.incidentTypeReports,function(b,c){a.param.incident_type_report_id>0&&a.param.incident_type_report_id==b.incident_type_report_id&&b.ReportTypes.length>0&&(d=!1,a.validation.report_type_id=!0)}),"DateRange"==a.param.report_type?a.param.report_from_date>a.param.report_to_date?(d=!1,a.validation.date_period=!0):(a.param.report_type_period="Date Range",a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD")):"Monthly"==a.param.report_type?(a.param.report_from_date=new Date(a.flt.month_year,a.flt.month_from-1,1),a.param.report_to_date=new Date(a.flt.month_year_to,a.flt.month_to,0),a.param.report_from_date>a.param.report_to_date?(d=!1,a.validation.month_period=!0):(a.param.report_type_period="Monthly From "+a.months[a.flt.month_from-1]+" "+a.flt.month_year+" To "+a.months[a.flt.month_to-1]+" "+a.flt.month_year_to,a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))):"Quarterly"==a.param.report_type?(a.param.report_from_date=new Date(a.flt.q_year,3*(a.flt.q_from-1),1),a.param.report_to_date=new Date(a.flt.q_year_to,3*a.flt.q_to,0),a.param.report_from_date>a.param.report_to_date?(d=!1,a.validation.q_period=!0):(a.flt.q_from==a.flt.q_to?a.param.report_type_period="Quarterly, For Quarter "+a.flt.q_from+", "+a.flt.q_year:a.param.report_type_period="Quarterly From Quarter "+a.flt.q_from+" "+a.flt.month_year+" To Quarter "+a.flt.q_to+" "+a.flt.month_year_to,a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))):"HalfYearly"==a.param.report_type?(a.param.report_from_date=new Date(a.flt.hf_year,6*(a.flt.hf_from-1),1),a.param.report_to_date=new Date(a.flt.hf_year_to,6*a.flt.hf_to,0),a.param.report_from_date>a.param.report_to_date?(d=!1,a.validation.hf_period=!0):(a.flt.hf_from==a.flt.hf_to?1==a.flt.hf_from?a.param.report_type_period="Half-Yearly, Jan - Jun, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, Jul - Dec, "+a.flt.q_year:a.param.report_type_period="Half-Yearly, From Jan - June and Jul - Dec , "+a.flt.month_year,a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))):"Yearly"==a.param.report_type&&(a.flt.year_from>a.flt.year_to?(d=!1,a.validation.year_period=!0):(a.param.report_type_period="Yearly From "+a.flt.year_from+" To "+a.flt.year_to,a.param.report_from_date=new Date(a.flt.year_from,0,1),a.param.report_to_date=new Date(a.flt.year_to,12,0),a.param.report_from_date=c("momentDateFilter")(a.param.report_from_date,"YYYY-MM-DD"),a.param.report_to_date=c("momentDateFilter")(a.param.report_to_date,"YYYY-MM-DD"))),a.pdfLink="",d){if(a.param.Locations=[],angular.forEach(a.locations,function(b,c){b.is_selected&&a.param.Locations.push(b)}),a.param.Locations.length<=0)return void(a.locationNotValid=!0);if(a.param.Departments=[],angular.forEach(a.departments,function(b,c){b.is_selected&&a.param.Departments.push(b)}),a.param.near_miss=a.flt.near_miss,a.param.person_type=a.flt.person_type,a.param.person_affected=a.flt.person_affected,a.someSelected(a.param.person_affected)||(a.param.person_affected={yes:!0,no:!0}),a.param.patient_type=null,a.param.person_type&&a.param.person_type.patient&&(a.param.patient_type=a.flt.patient_type),a.someSelected(a.param.near_miss)||(a.param.near_miss=null),a.someSelected(a.param.person_type)||(a.param.person_type=null),a.someSelected(a.param.patient_type)||(a.param.patient_type=null),a.someSelected(a.param.person_affected)||(a.param.person_affected=null),a.action=!0,f.showLoading(),"Xls"==b)var g=a.service.GenerateXls(a.param,function(){var b=g.data;b?e.location.assign("/File/DownloadXls?name="+encodeURIComponent(b)):alert("This Report is not available in Excel"),a.action=!1,f.hideLoading()},function(){a.action=!1,f.hideLoading()});else var g=a.service.GeneratePdf(a.param,function(){var b=g.data;b?e.location.assign("/File/DownloadPdf?name="+encodeURIComponent(b)):alert("This Report is not available in PDF"),a.action=!1,f.hideLoading()},function(){a.action=!1,f.hideLoading()})}},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]}}),angular.module("HITS").controller("SessionReminderCtrl",["$scope","$modalInstance","SessionTimeoutData",function(a,b,c){a.sessionTimeout=c,a.onYes=function(){b.close(!0)},a.onNo=function(){b.close(!1)}}]),angular.module("HITS").controller("UnauthorizedCtrl",["$scope",function(a){}]),angular.module("HITS").controller("CommitteeGroupModalCtrl",["$scope","CommitteeGroupService","CommitteeGroups","$modalInstance","LoadingScreenService","userRolesData",function(a,b,c,d,e,f){a.userRolesData=f;var g={};g.CommitteeGroups=c,g.CommitteeGroups||(g.CommitteeGroups=[]),a.data=g,a.select={},a.select.selectAllCommitteeGroup=!1,a.select.unselectAllCommitteeGroup=!1;var h={};angular.forEach(a.data.CommitteeGroups,function(a,b){h[a.committee_group_id]=a}),e.showLoading();var i=b.FetchAll(function(){a.committeeGroups=i.data,angular.forEach(a.committeeGroups,function(b,c){if(!h[b.committee_group_id]){var d=!1;angular.forEach(a.userRolesData,function(a,c){b.role_id==a.role_id&&a.is_active&&(d=!0)}),d&&g.CommitteeGroups.push({committee_group_id:b.committee_group_id,is_active:!1,CommitteeGroup:b})}}),e.hideLoading()});a.select_all_committeeGroup=function(){a.select.selectAllCommitteeGroup?(a.select.selectAllCommitteeGroup=!1,a.select.unselectAllCommitteeGroup=!1):(a.select.selectAllCommitteeGroup=!0,a.select.unselectAllCommitteeGroup=!1),angular.forEach(a.data.CommitteeGroups,function(b){b.is_active=a.select.selectAllCommitteeGroup})},a.unselect_all_committeeGroup=function(){a.select.unselectAllCommitteeGroup?(a.select.selectAllCommitteeGroup=!1,a.select.unselectAllCommitteeGroup=!1):(a.select.selectAllCommitteeGroup=!1,a.select.unselectAllCommitteeGroup=!0),a.select.unselectAllCommitteeGroup&&angular.forEach(a.data.CommitteeGroups,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;a.onSubmit=function(a){d.close(a.CommitteeGroups)}}]),angular.module("HITS").controller("RoutingGroupModalCtrl",["$scope","RoutingGroupService","RoutingGroups","$modalInstance","LoadingScreenService","userRolesData",function(a,b,c,d,e,f){var g={};g.RoutingGroups=c,g.RoutingGroups||(g.RoutingGroups=[]),a.data=g,a.userRolesData=f,a.select={},a.select.selectAllRoutingGroup=!1,a.select.unselectAllRoutingGroup=!1;var h={};angular.forEach(a.data.RoutingGroups,function(a,b){h[a.routing_group_id]=a}),e.showLoading();var i=b.FetchAll(function(){a.routingGroups=i.data,angular.forEach(a.routingGroups,function(b,c){if(!h[b.routing_group_id]){var d=!1;angular.forEach(a.userRolesData,function(a,c){b.role_id==a.role_id&&a.is_active&&(d=!0)}),d&&g.RoutingGroups.push({routing_group_id:b.routing_group_id,is_active:!1,RoutingGroup:b})}}),e.hideLoading()});a.select_all_routingGroup=function(){a.select.selectAllRoutingGroup?(a.select.selectAllRoutingGroup=!1,a.select.unselectAllRoutingGroup=!1):(a.select.selectAllRoutingGroup=!0,a.select.unselectAllRoutingGroup=!1),angular.forEach(a.data.RoutingGroups,function(b){b.is_active=a.select.selectAllRoutingGroup})},a.unselect_all_routingGroup=function(){a.select.unselectAllRoutingGroup?(a.select.selectAllRoutingGroup=!1,a.select.unselectAllRoutingGroup=!1):(a.select.selectAllRoutingGroup=!1,a.select.unselectAllRoutingGroup=!0),a.select.unselectAllRoutingGroup&&angular.forEach(a.data.RoutingGroups,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;a.onSubmit=function(a){d.close(a.RoutingGroups)}}]),angular.module("HITS").controller("ConfirmationModalCtrl",["$scope","$modalInstance","bodyMessage",function(a,b,c){a.bodyMessage=c,a.result=!1,a.onConfirm=function(){a.result=!0,b.close(a.result)},a.onCancel=function(){a.result=!1,b.close(a.result)}}]),angular.module("HITS").controller("AlertModalCtrl",["$scope","$modalInstance","attr","$timeout",function(a,b,c,d){a.dynamicFormScope=a,a.attr=c,a.onClose=function(){b.close()}}]),angular.module("HITS").controller("AlertModalCtrl",["$scope","$modalInstance","attr",function(a,b,c){a.attr=c,a.onClose=function(){b.close()}}]),angular.module("HITS").controller("PersonInvolvedModalCtrl",["$scope","$modalInstance","attr","mainscope",function(a,b,c,d){a.attr=c,a.mainscope=d,a.onClose=function(){b.close()}}]),angular.module("HITS").controller("LandingPageHtmlCtrl",["$scope","$location","UserSessionData","UserAclSessionData","SessionService","IncidentService","IncidentFormService",function(a,b,c,d,e,f,g){var h=c;if("anonymous"==h.user_name&&e.setIsAnonymous(),e.isAnonymous())g.initialize(),b.path("/incident/form");else if(h.is_reporter)var i=f.IsAnyDraft(function(){var a=i.data;a?b.path(h.default_landing_page):b.path("/incident/form")});else b.path(h.default_landing_page)}]),angular.module("HITS").controller("IncidentNotFoundHtmlCtrl",["$scope","$location",function(a,b){a.onHomeClick=function(){b.path("/incident/track")}}]),angular.module("HITS").controller("ReleaseIncidentLockHtmlCtrl",["$scope","$location","IncidentLockService","SessionService","ToastMessageService",function(a,b,c,d,e){d.setAcltoScope(a),a.currentAcl.SM_RELEASE_LOCK_INCIDENT_VIEW||b.path("/unauthorized"),a.rows=[10,25,50,100],a.SearchQuery={page:1,row_per_page:10,sort_by:"incident_no",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["incident_no","locked_by"]}},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=c.FetchAllWithPagination(a.SearchQuery,function(){a.incidentLocks=[];var c=b.data.list;a.SearchQuery.total_data=b.data.totalData,a.incidentLocks=c})},a.onRowDelete=function(b){var d=confirm("Are you sure you want to delete the lock on "+b.incident_no+" ?");if(d)var f=c.DeleteLock({incidentLockId:b.incident_lock_id},function(){var b="",c="";f?(b="success",c="Data Deleted Succesfully"):(b="danger",c="Delete location failed"),e.addAlerts(b,c),a.Fetch()})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.Fetch()}]),angular.module("HITS").controller("CommitteepersoncategoryformCtrl",["$scope","committeeGroup","CommitteeGroupService","$modalInstance",function(a,b,c,d){b.PersonCategorys||(b.PersonCategorys=[]),a.committeeGroup=b,a.select={},a.select.selectAllPersonCategory=!1,a.select.unselectAllPersonCategory=!1;var e={};angular.forEach(a.committeeGroup.PersonCategorys,function(a,b){e[a.code]=a}),a.person_categorys=[{code:"I",label:"In-Patient"},{code:"O",label:"Out-Patient"},{code:"Staff",label:"Staff"},{code:"Visitor",label:"Visitor"},{code:"Others",label:"Others"}],angular.forEach(a.person_categorys,function(a,c){e[a.code]||b.PersonCategorys.push({committee_group_id:b.committee_group_id,label:a.label,code:a.code,is_active:!1,PersonCategory:a})}),a.select_all_person_category=function(){a.select.selectAllPersonCategory?(a.select.selectAllPersonCategory=!1,a.select.unselectAllPersonCategory=!1):(a.select.selectAllPersonCategory=!0,a.select.unselectAllPersonCategory=!1),angular.forEach(a.committeeGroup.PersonCategorys,function(b){b.is_active=a.select.selectAllPersonCategory})},a.unselect_all_person_category=function(){a.select.unselectAllPersonCategory?(a.select.selectAllPersonCategory=!1,a.select.unselectAllPersonCategory=!1):(a.select.selectAllPersonCategory=!1,a.select.unselectAllPersonCategory=!0),a.select.unselectAllPersonCategory&&angular.forEach(a.committeeGroup.PersonCategorys,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var f=function(){a.action=!a.action};a.onSubmit=function(a){d.close(a)},a.onSave=function(b){a.validate.button=!1,f();var e=angular.copy(a.committeeGroup.PersonCategorys);a.committeeGroup.PersonCategorys=[],angular.forEach(e,function(b,c){(b.committee_person_category_id||b.is_active)&&a.committeeGroup.PersonCategorys.push(b)});c.Save(b,function(){d.close(),f()})}}]),angular.module("HITS").controller("AuditTrailDetailCtrl",["$scope","$window","auditTrailId","UserAuditTrailService",function(a,b,c,d){b.scrollTo(0,0),a.mouseOverDescription=!1,a.dynamicFormScope=a,a.details={};var e=d.FetchDetailFor({id:c},function(){a.details=e.data})}]),angular.module("HITS").controller("GeneralInformationHtmlCtrl",["$scope","$timeout","$modal","$location","$q","$window","$sce","UserSessionData","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","IncidentSubTypeService","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","DisciplineService","PatientLocationService","LoadingScreenService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){a.user=h,a.wizard=k.getWizardData(),a.incident=k.get(),a.genInfo={},a.form=k.getStatusData(),a.btnState=k.getButtonStateData(),a.today=new Date,a.isAnonymous=a.incident.is_anonymous,a.action=!1,a.isDateEnable=!0,a.isShowLocationSpecify=!1,a.submitNextLevelValidation={},m.removeAlerts(),a.oldIncidentTypeId=a.incident.incident_type_id,a.oldIncidentSubTypeId=a.incident.incident_sub_type_id,a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.goToStep=function(b){var c=a.wizard.currentStep,e=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,d){a.order<b&&a.order!=c&&!a.completed&&(f=!1)}),f&&(b>c?a.generalValidation()&&(a.incident.incident_id>0&&a.autoSave(),k.set(a.incident),a.wizard.steps[c-1].validated=!0,a.wizard.steps[c-1].completed=!0,a.wizard.steps[c-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,k.setWizardData(a.wizard),d.path(e.url)):(a.incident.incident_id>0&&a.autoSave(),k.set(a.incident),a.wizard.steps[c-1].validated=a.generalValidation(),a.wizard.steps[c-1].completed=!0,a.wizard.steps[c-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,k.setWizardData(a.wizard),d.path(e.url)))},a.goToNextStep=function(){if(m.removeAlerts(),a.generalValidation()){a.incident.incident_id>0&&a.autoSave(),k.set(a.incident);var b=a.wizard.currentStep,c=a.wizard.steps[b];a.wizard.steps[b-1].validated=!0,a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b].selected=!0,a.wizard.currentStep++,k.setWizardData(a.wizard),d.path(c.url)}};var w=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBack=function(){d.path("/incident/track")},a.onBackToMerged=function(){a.form.is_merged?d.path("/incident/merge/form"):d.path("/incident/merge")};var x=function(a){c.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){x(a)},a.onForwardIncident=function(){y(a.incident)};var y=function(a){c.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";m.removeAlerts(),m.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){k.initialize();var b=k.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,k.setStatusData(b),k.set(a),d.path("/incident/form")};var z=function(){c.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track"))})},A=function(){c.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})},B=function(){c.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(m.removeAlerts(),m.addAlerts("danger","This incident can't be rerouted")):z()},a.onCloseIncident=function(){A()},a.onReOpenIncident=function(){B()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.oldIncidentTypeId!=a.incident.incident_type_id&&(a.incident.main_template_value="{}"),a.isSacScoreValid()&&a.isRcaValid()){var b=a.checkFormValidation();if(b>=0){var c=a.wizard.steps[b-1].title;return m.removeAlerts(),void m.addAlerts("danger",'Submit Failed. Please complete "'+c+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,f.scrollTo(0,0),a.$emit("autoSaveStop"),w(),a.isShowLocationSpecify||(a.incident.location_other_description="");var e=i.Save(a.incident,function(){var b=e.data;if(b.IsSuccess){a.incident=b.Data;var c=i.SubmitToNextLevel(a.incident,function(){var b=c.data;b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),k.set(a.incident),w(),d.path("/incident/track")):(w(),m.removeAlerts(),m.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else m.removeAlerts(),m.addAlerts("danger","Save Failed. Error : "+b.Message),w()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()},a.releaseLock=function(){var b=e.defer(),c=j.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=e.defer(),c=j.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,c,f){var g=!1,h=d.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),e.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=e.defer();a.isShowLocationSpecify||(a.incident.location_other_description="");var c=i.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,k.set(a.incident)),b.resolve(d)});return b.promise},a.onSave=function(){a.genInfo.validation={};var b=!0;a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.genInfo.validation.incidentTypeOther=!0,b=!1):(a.genInfo.validation.incidentType=!0,b=!1),angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==a.incident.incident_type_id&&c.MasterIncidentSubTypes.length>0&&(null==a.incident.incident_sub_type_id||0==a.incident.incident_sub_type_id?(a.genInfo.validation.incidentSubType=!0,b=!1):a.isSubtypeSpecified(a.incident.incident_sub_type_id)&&!a.incident.incident_sub_type_others_description&&(b=!1))}),b&&(null!=a.incident.incident_no&&""!=a.incident.incident_no?e.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(w(),v.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),w(),v.hideLoading()}))}):(w(),v.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),w(),v.hideLoading()})))},a.autoSave=function(){a.genInfo.validation={};var b=!0;a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.genInfo.validation.incidentTypeOther=!0,b=!1):(a.genInfo.validation.incidentType=!0,b=!1),angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==a.incident.incident_type_id&&c.MasterIncidentSubTypes.length>0&&(null==a.incident.incident_sub_type_id||0==a.incident.incident_sub_type_id?(a.genInfo.validation.incidentSubType=!0,b=!1):a.isSubtypeSpecified(a.incident.incident_sub_type_id)&&!a.incident.incident_sub_type_others_description&&(b=!1))}),b&&(a.isShowLocationSpecify||(a.incident.location_other_description=""),a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(w(),e.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),w()})))},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)e.all([a.lockIncident()]).then(function(b){var c=b[0];if(c.IsSuccess){i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}else m.removeAlerts(),m.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}}else C({})};var C=function(){c.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Delete Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})};a.onRestoreIncident=function(){D({})};var D=function(){c.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Restore Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})};a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.showItem=function(a,b){if(a){var c=a.display_name,d=!0;return angular.forEach(a.keywords,function(a,e){angular.lowercase(a).indexOf(angular.lowercase(b))>-1&&(d?(c=c+" - "+a,d=!1):c=c+" - "+a)}),c}return a},a.onIncidentSubTypeChange=function(b){null==a.incident.incident_sub_type_id&&(a.oldIncidentSubTypeId=a.incident.incident_sub_type_id),a.incident.IncidentSubType=b,a.incident.incident_sub_type_others_description=""},a.onIncidentTypeChange=function(b){null==a.incident.incident_type_id&&(a.oldIncidentTypeId=a.incident.incident_type_id),a.incident.IncidentSubType=null,a.incident.IncidentType=b,a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=null,"undefined"==typeof a.genInfo.validation&&(a.genInfo.validation={}),a.genInfo.validation.incidentSubType=!1,a.incident.incident_type_others="",a.incident.incident_sub_type_others_description="",a.genInfo.validation.incidentTypeOther=!1,6==a.incident.incident_type_id&&c.open({templateUrl:"app/incident/form/incident-additional-info/incident-additional-info.html",controller:"IncidentAdditionalInfoCtrl",windowClass:"modal-medium"})},a.onChangeDateOfOccurance=function(b){var c=new Date(a.incident.time_of_occurance);try{if(!isNaN(b.getTime())){var d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.incident.time_of_occurance=d}}catch(e){}},a.onWitnessedChange=function(b){b||(a.incident.witness_name="",a.incident.witness_relation_type=null,a.incident.witness_relation_other_description="",a.incident.witness_contact_no="",a.incident.witness_address="")};var E=i.FetchTopFIve(function(){a.topFives=E.data});a.onTopFiveChoosen=function(b){var c=a.form.is_edited;c&&(a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.incident_sub_type_id)};var F=o.FetchAll(function(){a.designations=F.data}),G=p.FetchAll(function(){a.departments=G.data}),H=q.FetchAll(function(){a.employeeCategorys=H.data}),I=r.FetchAllSimpleModel(function(){a.incidentTypes=I.data,a.incidentTypes1=[],a.incidentTypes2=[],angular.forEach(a.incidentTypes,function(b,c){c<a.incidentTypes.length/2?a.incidentTypes1.push(b):a.incidentTypes2.push(b)})});a.isSubtypeSpecified=function(b){var c=!1;return angular.forEach(a.incidentTypes,function(a,d){angular.forEach(a.MasterIncidentSubTypes,function(a,d){a.incident_sub_type_id==b&&a.is_specify&&(c=!0)})}),c};var J=n.FetchAll(function(){a.incidentSubTypes=J.data}),K=s.FetchAll(function(){a.temp_locations=K.data,a.locations=[];var b=null;angular.forEach(a.temp_locations,function(c,d){c.location_id==a.incident.location_id&&c.is_specify&&(a.isShowLocationSpecify=!0),"others"!=c.location_name.toLowerCase()?a.locations.push(c):b=c}),b&&a.locations.push(b)}),L=t.FetchAll(function(){a.disciplines=L.data}),M=u.FetchAll(function(){a.patientLocations=M.data}),N=r.FetchAllForSearchIncident(function(){a.incidentTypeFlats=N.data});a.onSelectSearchIncident=function(b){a.incident.incident_type_id=b.incident_type_id,a.incident.incident_sub_type_id=b.sub_incident_type_id},a.generalValidation=function(){a.genInfo.validation={};var b=!0;if(a.first_time=!1,a.incident.incident_type_id?14!==a.incident.incident_type_id||a.incident.incident_type_others||(a.genInfo.validation.incidentTypeOther=!0,b=!1):(a.genInfo.validation.incidentType=!0,b=!1),angular.forEach(a.incidentTypes,function(c,d){c.incident_type_id==a.incident.incident_type_id&&c.MasterIncidentSubTypes.length>0&&(null==a.incident.incident_sub_type_id||0==a.incident.incident_sub_type_id?(a.genInfo.validation.incidentSubType=!0,b=!1):a.isSubtypeSpecified(a.incident.incident_sub_type_id)&&!a.incident.incident_sub_type_others_description&&(b=!1))}),null===a.incident.is_near_miss&&(a.genInfo.validation.near_miss=!0,b=!1),a.incident.location_id?a.isShowLocationSpecify&&!a.incident.location_other_description&&(b=!1,a.genInfo.validation.location_other=!0):(a.genInfo.validation.location=!0,b=!1),a.incident.date_of_occurance?(a.today=new Date,a.incident.date_of_occurance>a.today&&(a.genInfo.validation.date=!0,b=!1)):(a.genInfo.validation.date=!0,b=!1),a.incident.time_of_occurance){if(a.incident.date_of_occurance){a.today=new Date;var d=new Date(a.incident.date_of_occurance),e=new Date(a.incident.time_of_occurance),f=new Date(d.getFullYear(),d.getMonth(),d.getDate(),e.getHours(),e.getMinutes(),0);f>a.today&&(a.genInfo.validation.time_max=!0,b=!1)}}else a.genInfo.validation.time=!0,b=!1;if(a.incident.reporter_name.length>200&&(b=!1),
!a.isAnonymous){var g=!0;angular.forEach(a.designations,function(b,c){g&&b.designation_id==a.incident.designation_id&&(g=!1)}),g?(a.genInfo.validation.designation=!0,a.incident.designation_id="",b=!1):a.incident.designation_id&&0!=a.incident.designation_id||(a.genInfo.validation.designation=!0,b=!1),g=!0,angular.forEach(a.departments,function(b,c){g&&b.department_id==a.incident.department_id&&(g=!1)}),g?(a.genInfo.validation.department=!0,a.incident.department_id="",b=!1):a.incident.department_id&&0!=a.incident.department_id||(a.genInfo.validation.department=!0,b=!1),g=!0,angular.forEach(a.employeeCategorys,function(b,c){g&&b.employee_category_id==a.incident.employee_category_id&&(g=!1)}),g?(a.genInfo.validation.employee_category=!0,a.incident.employee_category_id="",b=!1):a.incident.employee_category_id&&0!=a.incident.employee_category_id||(a.genInfo.validation.employee_category=!0,b=!1),a.incident.reporter_name||(a.genInfo.validation.reporter_name=!0,b=!1)}return b||setTimeout(function(){a.$apply(function(){var a="",b={};$(".validation-new:visible").each(function(c,d){b[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",b[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&c.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200),b},a.temp_routing_location_id=a.incident.routing_location_id,a.onLocationChange=function(){a.incident.routing_location_id=a.incident.location_id;var b={};angular.forEach(a.locations,function(c,d){c.location_id==a.incident.location_id&&(b=c)}),b.is_specify?a.isShowLocationSpecify=!0:a.isShowLocationSpecify=!1},a.tempIncident=angular.copy(a.incident),a.onPrint=function(){var b=d.protocol(),c=d.host(),e=d.port(),g="";g="80"!=e?b+"://"+c+":"+e+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+c+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,f.open(g)},a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};i.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),m.removeAlerts(),m.addAlerts("success",b)},function(){m.removeAlerts(),m.addAlerts("danger","Failed to flag incident")})}}]),angular.module("HITS").controller("IncidentFormMainHtmlCtrl",["$scope","$location","$timeout","$q","$routeParams","UserAclSessionData","UserSessionData","SessionService","IncidentService","IncidentFormService","LoadingScreenService","WorkflowService","ApplicationSettingService","AuthenticationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){h.setAclSession(f),h.setAcltoScope(a),a.incidentAcl={};var o=g;a.userSession=o;var p=!1;if(e.incident_id){j.initialize();var q={incident_id:e.incident_id},r=j.getStatusData();if(e.is_forwarded_to_you)if(r.is_forwarded_to_you=!0,p=!0,a.incidentAcl.INCIDENT_TRACK_INCIDENT_DESCRIPTION_SUPERVISOR)var s=!1,t=i.CheckIsResponsibleForIncident({userId:a.userSession.user_id,incidentId:e.incident_id},function(){t.data&&(s=!0),r.is_forwarded_to_you=!0,r.is_edited=s});else r.is_forwarded_to_you=!0,r.is_edited=!1;e.is_merged&&(r.is_merged=!0,r.is_edited=!1,r.access_from_link=!0),j.set(q),j.setStatusData(r)}a.incident=j.get(),a.wizard=j.getWizardData(),a.form=j.getStatusData(),a.isAnonymous=h.isAnonymous(),a.today=new Date,a.action=!1,a.form.is_read=a.incident.is_read,a.fetchRoleAcl=function(a,b){var c=d.defer(),e=n.GetRoleAcl({roleId:a,institutionId:b},function(){var a={},b=e.data;angular.forEach(b,function(b,c){a[b]=!0}),c.resolve(a)},function(){var a=[];c.resolve(a)});return c.promise},a.fetchIncidentAcl=function(){var b=d.defer(),c={};return a.form.is_custom_role?d.all([a.fetchRoleAcl(a.form.custom_role_id,a.userSession.institution_id)]).then(function(a){var d=a[0];c=d,b.resolve(c)},function(){b.resolve(c)}):(c=a.currentAcl,b.resolve(c)),b.promise},a.fetchHighestWorkflow=function(){var b=d.defer(),c=l.FetchHighestWorkflow({employeeCategoryId:a.incident.employee_category_id,designationId:a.incident.designation_id,isAnonymous:a.incident.is_anonymous,departmentId:a.incident.department_id,locationId:a.incident.location_id},function(){var a=c.data;b.resolve(a)});return b.promise},a.fetchMergedIncidents=function(){var b=d.defer();if(a.incident.incident_id>0)if("MERGED"==a.incident.current_tracking_status)var c=i.FetchMainIncidents({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)});else var e=i.FetchMergedIncidents({incidentId:a.incident.incident_id},function(){var a=e.data;b.resolve(a)});else var e=i.FetchMergedIncidents({incidentId:0},function(){var a=e.data;b.resolve(a)});return b.promise},a.fetchIsResponsibleForIncident=function(){var b=d.defer();if(a.incident.incident_no)var c=i.CheckIsResponsibleForIncident({userId:a.userSession.user_id,incidentId:a.incident.incident_id,routingGroupId:a.incident.routing_group_id},function(){var d=!0;d=c.data&&!a.form.is_forwarded_to_you?!0:!1,"DRAFT (RE-ROUTE)"==a.incident.current_tracking_status&&a.incident.created_by==a.userSession.user_id&&(d=!0),a.incident.is_active||(d=!1),b.resolve(d)});else{var e=a.form.is_edited;b.resolve(e)}return b.promise},a.fetchAutoPurgeIncident=function(){var a=d.defer(),b=m.FetchOneByKey({keyValue:"DAYS_TO_AUTO_PURGE_DRAFT_INCIDENT"},function(){var c=b.data.setting_value_default;a.resolve(c)});return a.promise},a.fetchAutoSaveInterval=function(){var a=d.defer(),b=m.FetchOneByKey({keyValue:"AUTO_SAVE_INCIDENT_FORM_INTERVAL"},function(){var c=b.data.setting_value_default;a.resolve(c)},function(){var b=0;a.resolve(b)});return a.promise},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.setButtonState=function(){var b=j.getButtonStateData(),c=a.incidentAcl,d=a.incident.created_by,e=!1;return d==a.userSession.user_id&&(e=!0),c.INCIDENT_TRACK_INCIDENT_ADD&&"CLOSED"!=a.incident.current_tracking_status&&a.form.is_edited&&(b.btnSaveDraft=!0),!a.form.is_merged&&!a.form.is_suspected_duplicate||a.form.access_from_link||(b.btnBackToMerge=!0),c.INCIDENT_TRACK_INCIDENT_PRINT&&"DRAFT"!=a.incident.current_tracking_status&&(b.btnPrint=!0),c.INCIDENT_FORWARD_INCIDENT_FORWARD_ADD&&"DRAFT"!=a.incident.current_tracking_status&&"CLOSED"!=a.incident.current_tracking_status&&"MERGED"!=a.incident.current_tracking_status&&a.incident.is_active&&!a.form.is_read_only&&(a.form.is_edited||a.form.is_forwarded_to_you)&&(b.btnForward=!0),c.INCIDENT_TRACK_INCIDENT_REROUTE&&"DRAFT"!=a.incident.current_tracking_status&&"DRAFT (RE-ROUTE)"!=a.incident.current_tracking_status&&"CLOSED"!=a.incident.current_tracking_status&&a.form.is_edited&&(b.btnReRoute=!0),!c.INCIDENT_TRACK_INCIDENT_SUBMIT||a.form.isHighest||!a.form.is_edited||"CLOSED"==a.incident.current_tracking_status||"DRAFT"!=a.incident.current_tracking_status&&"DRAFT (RE-ROUTE)"!=a.incident.current_tracking_status||(b.btnSubmit=!0),"Stage 3 (Administrator)"!=a.incident.current_tracking_status_holder&&"DRAFT (RE-ROUTE)"!=a.incident.current_tracking_status&&c.INCIDENT_TRACK_INCIDENT_SUBMIT&&!a.form.isHighest&&"DRAFT"!=a.incident.current_tracking_status&&"CLOSED"!=a.incident.current_tracking_status&&a.form.is_edited&&(b.btnSubmitToNextLevel=!0),"DRAFT"!=a.incident.current_tracking_status&&"CLOSED"!=a.incident.current_tracking_status&&"Stage 3 (Administrator)"==a.incident.current_tracking_status_holder&&c.INCIDENT_TRACK_INCIDENT_CLOSE&&!e&&(b.btnClose=!0),"CLOSED"==a.incident.current_tracking_status&&c.INCIDENT_TRACK_INCIDENT_REOPEN&&(b.btnReOpen=!0),"CLOSED"!=a.incident.current_tracking_status&&"MERGED"!=a.incident.current_tracking_status&&!a.form.is_read_only&&(a.form.is_forwarded_to_you||a.form.is_edited&&c.INCIDENT_TRACK_INCIDENT_COMMENT_ADD)&&a.incident.created_by!=a.userSession.user_id&&(b.btnAddComment=!0),"CLOSED"!=a.incident.current_tracking_status&&"MERGED"!=a.incident.current_tracking_status&&(a.form.is_forwarded_to_you||a.form.is_edited&&c.INCIDENT_TRACK_INCIDENT_CORRECTIVE_ACTION_ADD)&&a.incident.created_by!=a.userSession.user_id&&!a.form.is_read_only&&a.incident.is_active&&(b.btnAddCorrectiveAction=!0),"MERGED"!=a.incident.current_tracking_status&&c.INCIDENT_TRACK_INCIDENT_FOLLOW_UP_ADD&&!a.form.is_read_only&&a.incident.is_active&&(b.btnAddFollowUp=!0),"DRAFT"==a.incident.current_tracking_status&&c.INCIDENT_TRACK_INCIDENT_DELETE_DRAFT&&a.incident.incident_id>0&&a.incident.is_active?b.btnDelete=!0:c.INCIDENT_TRACK_INCIDENT_DELETE&&a.incident.incident_id>0&&a.incident.is_active&&"CLOSED"!=a.incident.current_tracking_status&&"MERGED"!=a.incident.current_tracking_status&&!a.form.is_read_only&&(b.btnDelete=!0),c.INCIDENT_TRACK_INCIDENT_DELETE&&!a.incident.is_active&&a.incident.incident_id>0&&(b.btnRestore=!0),a.incident.is_anonymous||b.btnBackToMerge||(b.btnBack=!0),a.incident.is_anonymous||"DRAFT"==a.incident.current_tracking_status||"pending"!=a.form.access_from||(b.btnRead=!0),a.form.is_read?b.btnReadLabel="Unread":b.btnReadLabel="Read",b},a.setWizardState=function(){(a.incidentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_VIEW&&"DRAFT"!=a.incident.current_tracking_status&&(a.incident.Comments.length>0||a.incidentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_ADD&&a.incident.created_by!=a.userSession.user_id)||a.form.is_forwarded_to_you)&&(a.wizard.steps[4].showed=!0),(a.incidentAcl.INCIDENT_TRACK_INCIDENT_SAC_VIEW&&a.incident.created_by!=a.userSession.user_id||a.form.is_forwarded_to_you)&&"DRAFT"!=a.incident.current_tracking_status&&(a.wizard.steps[5].showed=!0),(a.incidentAcl.INCIDENT_TRACK_INCIDENT_RCA_VIEW&&a.incident.created_by!=a.userSession.user_id||a.form.is_forwarded_to_you)&&"DRAFT"!=a.incident.current_tracking_status&&(a.wizard.steps[6].showed=!0),"DRAFT"!=a.incident.current_tracking_status&&(a.wizard.steps[0].validated=!0,a.wizard.steps[0].completed=!0,a.wizard.steps[1].validated=!0,a.wizard.steps[1].completed=!0,a.wizard.steps[2].validated=!0,a.wizard.steps[2].completed=!0,a.wizard.steps[3].validated=!0,a.wizard.steps[3].completed=!0,a.wizard.steps[4].validated=!0,a.wizard.steps[4].completed=!0,a.isSacScoreValid()&&(a.wizard.steps[5].validated=!0,a.wizard.steps[5].completed=!0),a.isRcaValid()&&(a.wizard.steps[6].validated=!0,a.wizard.steps[6].completed=!0));var b=0;angular.forEach(a.wizard.steps,function(a,c){a.showed&&b++}),a.wizard.totalSteps=b,a.wizard.stepIndicatorClass="steps-"+b},d.all([a.fetchIncidentAcl()]).then(function(c){if(a.incidentAcl=c[0],j.setIncidentAcl(a.incidentAcl),a.incident.incident_id>0){k.showLoading();var e=i.FetchOne({incidentId:a.incident.incident_id},function(){a.incident=e.data,a.main_template_supervisor_value=a.incident.main_template_supervisor_value,a.isAnonymous=a.incident.is_anonymous,d.all([a.fetchHighestWorkflow(),a.fetchMergedIncidents(),a.fetchIsResponsibleForIncident(),a.fetchAutoPurgeIncident(),a.fetchAutoSaveInterval()]).then(function(c){var d=c[0],e=c[1],f=c[2],g=c[3],i=c[4];a.incident.current_tracking_order_level>=d.order?a.form.isHighest=!0:a.form.isHighest=!1,a.form.is_edited=f,"CLOSED"==a.incident.current_tracking_status&&(a.form.is_edited=!1),a.incident.incident_id>0&&"MERGED"==a.incident.current_tracking_status?(a.form.is_edited=!1,a.incident.incident_main=e):a.incident.incident_merged=e,a.form.is_read_only&&(a.form.is_edited=!1),a.form.autopurge=g,a.incident.incident_id<=0&&b.url("/incident/notFound"),h.isAnonymous()||"CLOSED"==a.incident.current_tracking_status||a.$emit("autoSaveStart",i),j.set(a.incident),j.setButtonStateData(a.setButtonState()),a.setWizardState(),j.setWizardData(a.wizard),k.hideLoading(),p?b.url("/incident/form/response"):b.url("/incident/form/generalInformation")})},function(){k.hideLoading()})}else{k.showLoading();var e=i.FetchOne({incidentId:0},function(){a.incident=e.data,a.userSession=h.getSession(),a.incident.reporter_name=a.userSession.name,a.incident.designation_id=a.userSession.designation_id,a.incident.department_id=a.userSession.department_id,a.incident.employee_category_id=a.userSession.employee_category_id,a.incident.main_template_value={},a.incident.main_template_supervisor_value={},a.incident.AdditionalCcs=[],a.incident.incident_description="Situation:\n\nBackground:\n\nAssessment:\n\nRecommendations:\n\n",a.incident.date_of_occurance=angular.copy(a.today),a.incident.time_of_occurance=angular.copy(a.today),a.incident.is_witnessed=!1,a.incident.is_near_miss=null,a.incident.is_anonymous=a.isAnonymous,d.all([a.fetchMergedIncidents(),a.fetchAutoPurgeIncident(),a.fetchAutoSaveInterval()]).then(function(c){var d=c[0],e=c[1],f=c[2];a.form.isHighest=!1,a.incident.incident_id>0&&"MERGED"==a.incident.current_tracking_status?a.incident.incident_main=d:a.incident.incident_merged=d,a.form.autopurge=e,h.isAnonymous()||"CLOSED"==a.incident.current_tracking_status||a.$emit("autoSaveStart",f),j.set(a.incident),j.setButtonStateData(a.setButtonState()),a.setWizardState(),j.setWizardData(a.wizard),k.hideLoading(),p?b.url("/incident/form/response"):b.url("/incident/form/generalInformation")})},function(){k.hideLoading()})}})}]),angular.module("HITS").controller("PersonInvolvedCtrl",["$scope","$timeout","$modal","$location","$q","$window","UserSessionData","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","DepartmentService","PatientLocationService","PatientClassService","DesignationService","DisciplineService","LoadingScreenService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){a.user=g,l.removeAlerts(),a.wizard=j.getWizardData(),a.incident=j.get(),a.tempIncident=angular.copy(a.incident),a.form=j.getStatusData(),a.btnState=j.getButtonStateData(),a.today=new Date,a.isAnonymous=k.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.hasSearch=!1,a.isDateEnable=!0,a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.changeWizardStateOnNav=function(b,c){l.removeAlerts();var e=a.wizard.currentStep,f=b,g=b.order;a.wizard.steps[e-1].validated=c,a.wizard.steps[e-1].completed=!0,a.wizard.steps[e-1].selected=!1,a.wizard.steps[g-1].selected=!0,a.wizard.currentStep=g,j.setWizardData(a.wizard),j.set(a.incident),d.path(f.url)},a.goToStep=function(b){var c=a.wizard.currentStep,d=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,d){a.order<b&&a.order!=c&&!a.completed&&(f=!1)}),f&&(b>c?a.personInvolvedValidation(!0)&&(a.incident.incident_id>0?e.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(d,!0)}):a.changeWizardStateOnNav(d,!0)):a.incident.incident_id>0?e.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(d,a.personInvolvedValidation(!1))}):a.changeWizardStateOnNav(d,a.personInvolvedValidation(!1)))},a.goToPrevStep=function(){var b=a.wizard.currentStep,c=a.wizard.steps[b-2];a.incident.incident_id>0?e.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(c,a.personInvolvedValidation(!1))}):a.changeWizardStateOnNav(c,a.personInvolvedValidation(!1))},a.goToNextStep=function(){var b=a.wizard.currentStep,c=a.wizard.steps[b];a.personInvolvedValidation(!0)&&(a.incident.incident_id>0?e.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(c,!0)}):a.changeWizardStateOnNav(c,!0))};var s=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBack=function(){d.path("/incident/track")},a.onBackToMerged=function(){a.form.is_merged?d.path("/incident/merge/form"):d.path("/incident/merge")},a.onPrint=function(){var b=d.protocol(),c=d.host(),e=d.port(),g="";g="80"!=e?b+"://"+c+":"+e+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+c+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,f.open(g)};var t=function(a){c.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){t(a)},a.onForwardIncident=function(){u(a.incident)};var u=function(a){c.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";l.removeAlerts(),l.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){j.initialize();var b=j.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,j.setStatusData(b),j.set(a),d.path("/incident/form")};var v=function(){c.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",l.removeAlerts(),l.addAlerts(b,c),d.path("incident/track"))})},w=function(){c.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),l.removeAlerts(),l.addAlerts(b,c),d.path("incident/track")})},x=function(){c.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",l.removeAlerts(),l.addAlerts(b,c),d.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(l.removeAlerts(),l.addAlerts("danger","This incident can't be rerouted")):v()},a.onCloseIncident=function(){w()},a.onReOpenIncident=function(){x()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()&&a.personInvolvedValidation(!0)){var b=a.checkFormValidation();if(b>=0){var c=a.wizard.steps[b-1].title;return l.removeAlerts(),void l.addAlerts("danger",'Submit Failed. Please complete "'+c+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,f.scrollTo(0,0),a.$emit("autoSaveStop"),s();var e=h.Save(a.incident,function(){var b=e.data;if(b.IsSuccess){a.incident=b.Data;var c=h.SubmitToNextLevel(a.incident,function(){var b=c.data;b.IsSuccess?(l.removeAlerts(),l.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),j.set(a.incident),s(),d.path("/incident/track")):(s(),l.removeAlerts(),l.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else l.removeAlerts(),l.addAlerts("danger","Save Failed. Error : "+b.Message),s()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()},a.releaseLock=function(){var b=e.defer(),c=i.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=e.defer(),c=i.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,c,f){var g=!1,h=d.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),e.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=e.defer(),c=h.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,j.set(a.incident)),b.resolve(d)});return b.promise},a.onSave=function(){null!=a.incident.incident_no&&""!=a.incident.incident_no?e.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(s(),r.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(l.removeAlerts(),l.addAlerts("success","Data Saved Successfully")):(l.removeAlerts(),l.addAlerts("danger","Save draft incident failed")),s(),r.hideLoading()}))}):(s(),r.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(l.removeAlerts(),l.addAlerts("success","Data Saved Successfully")):(l.removeAlerts(),l.addAlerts("danger","Save draft incident failed")),s(),r.hideLoading()}))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(s(),e.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),s()}))},a.autoSaveOnNav=function(){var b=e.defer();return a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)?(s(),e.all([a.doSave()]).then(function(c){var d=c[0];a.tempIncident=angular.copy(a.incident),b.resolve(d.Data),s()})):b.resolve(a.incident),b.promise},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)e.all([a.lockIncident()]).then(function(b){var c=b[0];if(c.IsSuccess){h.Delete(a.incidentDeleteAction,function(){l.removeAlerts(),l.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}else l.removeAlerts(),l.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{h.Delete(a.incidentDeleteAction,function(){l.removeAlerts(),l.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}}else y({})};var y=function(){c.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Delete Incident Success"):(b="danger",c="Error Saving Data"),l.removeAlerts(),l.addAlerts(b,c),d.path("incident/track")})};a.onRestoreIncident=function(){z({})};var z=function(){c.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Restore Incident Success"):(b="danger",c="Error Saving Data"),l.removeAlerts(),l.addAlerts(b,c),d.path("incident/track")})};a.datePickerOpen=function(a){b(function(){$("#"+a).focus()})},a.first_time=!0,a.add=!1;var A=q.FetchAll(function(){a.disciplines=A.data}),B=m.FetchAll(function(){a.departments=B.data}),C=n.FetchAll(function(){a.patientLocations=C.data}),D=o.FetchAll(function(){a.patientClasses=D.data});a.patient="Patient",a.staff="Staff",a.visitor="Visitor",a.others="Others",a.personCategorys=[a.patient,a.staff,a.visitor,a.others],a.addPerson=function(){a.tempPerson=null,a.newPerson={is_active:!0,is_affected:null},a.personAddMode=!0,a.add=!a.add,a.hasSearch=!1},a.onPersonEdit=function(b){a.tempPerson=angular.copy(b),a.newPerson=angular.copy(b),a.editPersonIndex=a.incident.PersonInvolveds.indexOf(b),a.personAddMode=!1,a.add=!0,a.hasSearch=!0},a.onPersonDelete=function(a){var b=confirm("Are you sure you want to delete this record ?");b&&(l.addAlerts("success","Data Person Deleted Successfully"),a.is_active=!1)},a.onPersonCategoryChange=function(b){if("Visitor"==b||"Others"==b?a.hasSearch=!0:a.personAddMode?a.hasSearch=!1:a.hasSearch=!0,a.tempPerson&&a.tempPerson.person_category==b)a.newPerson=angular.copy(a.tempPerson);else{var c=null;c=a.tempPerson?a.tempPerson.is_affected:a.newPerson.is_affected,a.newPerson={person_category:b,is_active:!0,is_affected:c}}};var E=function(b){b.validation={};var d=!0,e=b.person_category==a.patient,f=b.person_category==a.staff,g=b.person_category==a.visitor;b.person_category==a.others;return b.person_category?b.person_category!=a.others||b.person_category_other_description||(b.validation.category_other=!0,d=!1):(b.validation.category=!0,d=!1),null===b.is_affected&&(b.validation.near_miss=!0,d=!1),b.fullname||(b.validation.name=!0,d=!1),f&&!b.person_id&&(b.validation.id=!0,d=!1),e&&!b.nric&&(b.validation.nric=!0,d=!1),e||f||g||b.contact_no||(b.validation.contact=!0,d=!1),b.contact_no&&b.contact_no.length<8&&(b.validation.contact_length=!0,d=!1),b.gender||!e&&!f||(b.validation.gender=!0,d=!1),e&&!b.age&&(b.validation.age=!0,d=!1),e&&!b.case_number&&(b.validation.case_number=!0,d=!1),e&&"I"==b.patient_type&&!b.patient_admission_date&&(b.validation.admission=!0,d=!1),e&&!b.patient_type&&(b.validation.patient_type=!0,d=!1),e&&"O"==b.patient_type&&!b.patient_visit_date&&(b.validation.visit=!0,d=!1),e&&!b.patient_discipline&&(b.validation.discipline=!0,d=!1),f&&11==a.incident.incident_type_id&&(b.staff_category||(b.validation.staff_category=!0,d=!1),"Others"!=b.staff_category||b.staff_category_other||(b.validation.staff_category_other=!0,d=!1),b.staff_years_of_service||(b.validation.staff_years_of_service=!0,d=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,d=!1)),f&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(b.staff_years_of_service||(b.validation.staff_years_of_service=!0,d=!1),"more5years"!=b.staff_years_of_service||b.staff_years_of_service_other||(b.validation.staff_years_of_service_other=!0,d=!1),b.staff_protective_is_other&&!b.staff_protective_is_other_description&&(b.validation.staff_protective_is_other_description=!0,d=!1),b.nric||(b.validation.nric=!0,d=!1)),e&&7==a.incident.incident_type_id&&a.incident.incident_sub_type_id>=18&&a.incident.incident_sub_type_id<=21&&(18==a.incident.incident_sub_type_id&&(b.patient_caused_injury_is_hypo_needle||b.patient_caused_injury_is_spinal_needle||b.patient_caused_injury_is_suture_needle||b.patient_caused_injury_is_catheter||b.patient_caused_injury_is_lancet||b.patient_caused_injury_is_other||(b.validation.patient_caused_injury=!0,d=!1)),b.patient_caused_injury_is_other&&!b.patient_caused_injury_other_description&&(b.validation.patient_caused_injury_other_description=!0,d=!1),b.patient_body_fluid_is_other&&!b.patient_body_fluid_other_description&&(b.validation.patient_body_fluid_other_description=!0,d=!1)),d||c.open({templateUrl:"app/modal/personInvolvedModal/person-involved-modal.html",controller:"PersonInvolvedModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary"}},mainscope:function(){return a}}}),d};a.onCancelSavePerson=function(){a.add=!1},a.savePerson=function(){a.incident||(a.incident={}),a.incident.PersonInvolveds||(a.incident.PersonInvolveds=[]),E(a.newPerson)&&(a.personAddMode?a.isPersonInvolvedIsExist(a.newPerson,null)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds.push(angular.copy(a.newPerson)),l.addAlerts("success","Data Person Saved Successfully"),a.personInvolvedDuplicate=!1,a.add=!1):a.isPersonInvolvedIsExist(a.newPerson,a.editPersonIndex)?a.personInvolvedDuplicate=!0:(a.incident.PersonInvolveds[a.editPersonIndex]=a.newPerson,l.addAlerts("success","Data Person Updated Successfully"),a.personInvolvedDuplicate=!1,a.add=!1))},a.personInvolvedValidation=function(b){if(!a.form.is_edited)return!0;a.personInvolvedNotValid=!0,a.personInvolvedNotValidNearMiss=!0,a.form.is_edited||(a.personInvolvedNotValidNearMiss=!1,a.personInvolvedNotValid=!1),angular.forEach(a.incident.PersonInvolveds,function(b,c){b.is_active&&(a.personInvolvedNotValid=!1)});var d=!a.personInvolvedNotValid&&!a.add&&a.form.is_edited||!a.form.is_edited;return!d&&b&&c.open({templateUrl:"app/modal/personInvolvedModal/person-involved-modal.html",controller:"PersonInvolvedModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary"}},mainscope:function(){return a}}}),d},a.isPersonInvolvedIsExist=function(b,c){var d=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,e){c!=e&&a.person_category==b.person_category&&a.is_active&&("Staff"==b.person_category?b.fullname==a.fullname&&b.person_id==a.person_id&&(d=!0):b.fullname==a.fullname&&b.nric==a.nric&&(d=!0))}),d};var F=p.FetchAll(function(){a.designations=F.data}),G=function(b){c.open({templateUrl:"app/incident/form/search-person-involved-staff/search-person-involved-staff.html",controller:"SearchPersonInvolvedStaffCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;if(a.newPerson.fullname=c.employee_name,a.newPerson.person_id=c.employee_id,a.newPerson.gender=c.gender,a.newPerson.Designation=c.DesignationMaster,a.newPerson.staff_designation_id=parseInt(c.DesignationMaster.designation_id),a.newPerson.service_long=c.service_long,c.service_long)if(c.service_long<3)a.newPerson.staff_years_of_service="less3mo";else if(c.service_long<=6)a.newPerson.staff_years_of_service="36mo";else if(c.service_long<=12)a.newPerson.staff_years_of_service="612mo";else if(c.service_long<=24)a.newPerson.staff_years_of_service="12years";else if(c.service_long<=60)a.newPerson.staff_years_of_service="25years";else{var d=Math.floor(c.service_long/12),e=c.service_long%12,f=d+" years";e>0&&(f+=e>1?" "+e+" months":" "+e+" month"),a.newPerson.staff_years_of_service_other=f,a.newPerson.staff_years_of_service="more5years"}a.newPerson.staff_category=b.designation_code,"Others"==a.newPerson.staff_category&&(a.newPerson.staff_category_other=b.designation)}})};a.onSearchStaff=function(){G({})};var H=function(b){c.open({templateUrl:"app/incident/form/search-person-involved-patient/search-person-involved-patient.html",controller:"SearchPersonInvolvedPatientCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return b}}}).result.then(function(b){if(a.hasSearch=!0,b){var c=b;a.newPerson.fullname=c.PatientName,a.newPerson.case_number=c.CaseID,a.newPerson.gender=c.gender,a.newPerson.nric=c.IdentificationDocNo,a.newPerson.patient_bed_no=c.Bed,c.Age>0&&(a.newPerson.age=c.Age),a.newPerson.patient_type=c.CaseType,a.newPerson.patient_admission_date=c.MovementDateTime,a.newPerson.patient_visit_date=c.MovementDateTime,a.newPerson.patient_class=c.PatientClass,a.newPerson.patient_location=c.OrganizationalUnit,a.newPerson.patient_discipline=null,angular.forEach(a.disciplines,function(b,d){b.discipline_code==c.Department&&(a.newPerson.patient_discipline=c.Department)}),a.newPerson.patient_consultant_in_charge=c.AttendingDoctor,a.hasSearch=!0}})};a.onSearchPatient=function(){H({})},a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};h.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),l.removeAlerts(),l.addAlerts("success",b)},function(){l.removeAlerts(),l.addAlerts("danger","Failed to flag incident")})}}]),angular.module("HITS").controller("IncidentDetailsCtrl",["$scope","$modal","$timeout","$location","$document","$q","$window","UserSessionData","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","LoadingScreenService","IncidentTypeService","GcsService","LocationService","MedicationNameService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){
a.user=h,m.removeAlerts(),a.wizard=k.getWizardData(),a.incident=k.get(),a.tempIncident=angular.copy(a.incident),a.form=k.getStatusData(),a.btnState=k.getButtonStateData(),a.today=new Date,a.isAnonymous=l.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.isDateEnable=!0,a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.changeWizardStateOnNav=function(b,c){m.removeAlerts();var e=a.wizard.currentStep,f=b,g=b.order;a.wizard.steps[e-1].validated=c,a.wizard.steps[e-1].completed=!0,a.wizard.steps[e-1].selected=!1,a.wizard.steps[g-1].selected=!0,a.wizard.currentStep=g,k.setWizardData(a.wizard),k.set(a.incident),d.path(f.url)},a.goToStep=function(b){var c=a.wizard.currentStep,d=a.wizard.steps[b-1],e=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,d){a.order<b&&a.order!=c&&!a.completed&&(e=!1)}),e&&(b>c?a.incidentDetailExitValidation()&&(a.incident.incident_id>0?f.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(d,!0)}):a.changeWizardStateOnNav(d,!0)):a.incident.incident_id>0?f.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(d,a.incidentDetailExitValidation())}):a.changeWizardStateOnNav(d,a.incidentDetailExitValidation()))},a.goToPrevStep=function(){var b=a.wizard.currentStep,c=a.wizard.steps[b-2];a.incidentDetailBeforeExit(),a.incident.incident_id>0?f.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(c,a.incidentDetailExitValidation())}):a.changeWizardStateOnNav(c,a.incidentDetailExitValidation())},a.goToNextStep=function(){var b=a.wizard.currentStep,c=a.wizard.steps[b];a.incidentDetailBeforeExit(),a.incidentDetailExitValidation()&&(a.incident.incident_id>0?f.all([a.autoSaveOnNav()]).then(function(b){a.changeWizardStateOnNav(c,!0)}):a.changeWizardStateOnNav(c,!0))};var s=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBack=function(){d.path("/incident/track")},a.onBackToMerged=function(){a.form.is_merged?d.path("/incident/merge/form"):d.path("/incident/merge")},a.onPrint=function(){var b=d.protocol(),c=d.host(),e=d.port(),f="";f="80"!=e?b+"://"+c+":"+e+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+c+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,g.open(f)};var t=function(a){b.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){t(a)},a.onForwardIncident=function(){u(a.incident)};var u=function(a){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";m.removeAlerts(),m.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){k.initialize();var b=k.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,k.setStatusData(b),k.set(a),d.path("/incident/form")};var v=function(){b.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a&&(b="success",c="ReRoute Success",m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track"))})},w=function(){b.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",c="";a?(b="success",c="Close Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})},x=function(){b.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="ReOpen Success",m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")):(b="danger",c="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(m.removeAlerts(),m.addAlerts("danger","This incident can't be rerouted")):v()},a.onCloseIncident=function(){w()},a.onReOpenIncident=function(){x()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()&&a.incidentDetailExitValidation()){var b=a.checkFormValidation();if(b>=0){var c=a.wizard.steps[b-1].title;return m.removeAlerts(),void m.addAlerts("danger",'Submit Failed. Please complete "'+c+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,g.scrollTo(0,0),a.$emit("autoSaveStop"),s(),a.incident.main_template_value=JSON.stringify(a.main_template_value),a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var e=i.Save(a.incident,function(){var b=e.data;if(b.IsSuccess){a.incident=b.Data;var c=i.SubmitToNextLevel(a.incident,function(){var b=c.data;b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),k.set(a.incident),s(),d.path("/incident/track")):(s(),m.removeAlerts(),m.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else m.removeAlerts(),m.addAlerts("danger","Save Failed. Error : "+b.Message),s()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()},a.releaseLock=function(){var b=f.defer(),c=j.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=f.defer(),c=j.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,c,e){var g=!1,h=d.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),f.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=f.defer();a.incident.main_template_value=JSON.stringify(a.main_template_value);var c=i.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,k.set(a.incident)),b.resolve(d)});return b.promise},a.onSave=function(){null!=a.incident.incident_no&&""!=a.incident.incident_no?a.incidentDetailExitValidation()&&f.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(s(),n.showLoading(),f.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),s(),n.hideLoading()}))}):(s(),n.showLoading(),f.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),s(),n.hideLoading()}))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(s(),f.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),s()}))},a.autoSaveOnNav=function(){var b=f.defer();return a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)?(s(),f.all([a.doSave()]).then(function(c){var d=c[0];a.tempIncident=angular.copy(a.incident),b.resolve(d.Data),s()})):b.resolve(a.incident),b.promise},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)f.all([a.lockIncident()]).then(function(b){var c=b[0];if(c.IsSuccess){i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}else m.removeAlerts(),m.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),d.path("/incident/track")})}}else y({})};var y=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Delete Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})};a.onRestoreIncident=function(){z({})};var z=function(){b.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",c="";a?(b="success",c="Restore Incident Success"):(b="danger",c="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,c),d.path("incident/track")})};a.datePickerOpen=function(a){c(function(){$("#"+a).focus()})},a.main_template={},a.templateSections=[],a.incident_detail={},a.dynamicFormScope=a,a.firstTimeDetails=!1;var A=q.FetchAll(function(){a.locations=A.data}),B=r.FetchAll(function(){a.medicationNames=B.data}),C=p.FetchAll(function(){a.gcs=C.data,angular.forEach(a.gcs,function(b,c){"E"==b.gcs_short_code?a.eyes=b.MasterGcsDetails:"V"==b.gcs_short_code?a.verbals=b.MasterGcsDetails:"M"==b.gcs_short_code&&(a.motors=b.MasterGcsDetails)})});a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1},a.isInPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"I"==a.patient_type&&a.is_active&&(b=!0)}),b},a.isOutPatient=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"O"==a.patient_type&&a.is_active&&(b=!0)}),b},a.isAnyNearMiss=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){a.is_affected&&a.is_active&&(b=!0)}),b},a.isExceptStaff=function(){var b=!1;return angular.forEach(a.incident.PersonInvolveds,function(a,c){"Patient"!=a.person_category&&"Visitor"!=a.person_category&&"Others"!=a.person_category||!a.is_active||(b=!0)}),b},a.fetchIncidentTemplate=function(){n.showLoading();var b=o.FetchIncidentTemplate({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id},function(){a.main_template_navigation=b.data.main_template_navigation,a.templateSections=b.data.DetailTemplates,a.main_template=b.data.main_template,n.hideLoading()},function(){n.hideLoading()})},a.tryParseJSON=function(a){try{var b=JSON.parse(a);if(b&&"object"==typeof b&&null!==b)return b}catch(c){}return null},a.incidentDetailEnterValidation=function(){return a.incident_detail.validation=!1,null==a.incident.incident_type_id?(alert("Please choose Incident Type and Incident Sub Type (if any) first!"),!1):(a.main_template_value=a.tryParseJSON(a.incident.main_template_value),null==a.main_template_value&&(a.main_template_value={}),a.main_template="",a.main_template_navigation="",a.templateSections=[],a.fetchIncidentTemplate(),!0)},a.incidentDetailBeforeExit=function(){a.incident.main_template_value=JSON.stringify(a.main_template_value)},a.incidentDetailExitValidation=function(){return a.incidentDetailBeforeExit(),a.form.is_edited?this.details.$valid?(e.unbind("click"),!0):(a.incident_detail.validation=!0,a.firstTimeDetails=!0,setTimeout(function(){a.$apply(function(){var a="",c={};$('form[name="details"] .validation-new:visible').each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200),!1):!0},a.onCheckRequiredDateElements=function(a,b){var c=!1;return a?"yes"==a&&(b?""==b&&(c=!0):c=!0):c=!0,c},a.onCheckRequiredRadioElements=function(a){var b=!1;return a||(b=!0),b},a.$on("$destroy",function(){a.dynamicFormScope&&(a.dynamicFormScope=null),a.$$watchers=null,a.$$listeners=null,e.unbind("scroll"),$(window).unbind("scroll"),$(window).unbind("resize")}),a.incidentDetailEnterValidation();var D=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-stage-tooltip.html",windowClass:"modal-fullscreen"}).result.then(function(a){})},E=function(){b.open({templateUrl:"app/incident/form/tooltip/ham-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenStageModal=function(){D()},a.onOpenHamModal=function(){E()},a.hamAutoPopulate=function(){var b=null,c=a.main_template_value;null!=c.drug_classification&&((c.drug_classification.nsaids_paracetamol||c.drug_classification.antibiotics||c.drug_classification.antiepileptics||c.drug_classification.antihypertensive||c.drug_classification.bronchodilators||c.drug_classification.diuretics||c.drug_classification.lipid_lowering_agent||c.drug_classification.other||c.drug_classification.contrast_media||c.drug_classification.maintenance_drips)&&(b="no"),(c.drug_classification.antithrombotics||c.drug_classification.concentrated_electrolyte_||c.drug_classification.cytotoxics||c.drug_classification.insulin||c.drug_classification.neuromuscular_blocker||c.drug_classification.opioids||c.drug_classification.oral_hypoglycemics||c.drug_classification.sedatives_hypnotics||c.drug_classification.thrombolytics_fibrinolytics||c.drug_classification.inotropes)&&(b="yes")),a.main_template_value.ham=b},a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};i.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),m.removeAlerts(),m.addAlerts("success",b)},function(){m.removeAlerts(),m.addAlerts("danger","Failed to flag incident")})},a.setMedicationIsSpecifyValue=function(b){angular.forEach(a.medicationNames,function(a,c){a.medication_name==b.name&&(b.medication_name_is_specify=a.is_specify)}),b.medication_name_is_specify||(b.name_other="")}}]),angular.module("HITS").controller("DescriptionCtrl",["$scope","$modal","$location","$window","$q","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","UserSessionData","UserAclSessionData","IncidentTypeService","LoadingScreenService","FileUploader","FileService","WorkflowService","RoutingGroupService","CommitteeGroupService","LocationService","ApplicationSettingService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){i.setAclSession(l),i.setAcltoScope(a),j.removeAlerts(),a.wizard=h.getWizardData(),a.incident=h.get(),a.tempIncident=angular.copy(a.incident),a.form=h.getStatusData(),a.btnState=h.getButtonStateData(),a.incidentAcl=h.getIncidentAcl(),a.today=new Date,a.isAnonymous=i.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.submitValid=!0,a.incident_description_invalid=!1,a.userSession=k,a.user=k,a.totalFileSize=0,a.dynamicFormScope=a,a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.goToStep=function(b){var d=a.wizard.currentStep,e=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,c){a.order<b&&a.order!=d&&!a.completed&&(f=!1)}),f&&(b>d?a.isDescriptionValid(!0)&&(a.incident.incident_id>0&&a.autoSave(),h.set(a.incident),a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,h.setWizardData(a.wizard),c.path(e.url)):(a.incident.incident_id>0&&a.autoSave(),h.set(a.incident),a.wizard.steps[d-1].validated=a.isDescriptionValid(!1),a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,h.setWizardData(a.wizard),c.path(e.url)))},a.goToPrevStep=function(){j.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b-2];a.wizard.steps[b-1].validated=a.isDescriptionValid(!1),a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b-2].selected=!0,a.wizard.currentStep--,h.setWizardData(a.wizard),h.set(a.incident),c.path(d.url)},a.goToNextStep=function(){if(j.removeAlerts(),a.isDescriptionValid(!0)){a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b];a.wizard.steps[b-1].validated=!0,a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b].selected=!0,a.wizard.currentStep++,h.set(a.incident),h.setWizardData(a.wizard),c.path(d.url)}};var v=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBackToMerged=function(){a.form.is_merged?c.path("/incident/merge/form"):c.path("/incident/merge")},a.onPrint=function(){var b=c.protocol(),e=c.host(),f=c.port(),g="";g="80"!=f?b+"://"+e+":"+f+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+e+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,d.open(g)};var w=function(a){b.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){w(a)},a.onForwardIncident=function(){x(a.incident)};var x=function(a){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";j.removeAlerts(),j.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){h.initialize();var b=h.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,h.setStatusData(b),h.set(a),c.path("/incident/form")};var y=function(){b.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a&&(b="success",d="ReRoute Success",j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track"))})},z=function(){b.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",d="";a?(b="success",d="Close Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})},A=function(){b.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="ReOpen Success",j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")):(b="danger",d="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(j.removeAlerts(),j.addAlerts("danger","This incident can't be rerouted")):y()},a.onCloseIncident=function(){z()},a.onReOpenIncident=function(){A()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()&&a.isDescriptionValid(!1)){var e=a.checkFormValidation();if(e>=0){var g=a.wizard.steps[e-1].title;return j.removeAlerts(),void j.addAlerts("danger",'Submit Failed. Please complete "'+g+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,d.scrollTo(0,0),a.$emit("autoSaveStop"),v();var i=f.Save(a.incident,function(){var b=i.data;if(b.IsSuccess){a.incident=b.Data;var d=f.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),h.set(a.incident),v(),c.path("/incident/track")):(v(),j.removeAlerts(),j.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else j.removeAlerts(),j.addAlerts("danger","Save Failed. Error : "+b.Message),v()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid(),setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div> <br />",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200)},a.releaseLock=function(){var b=e.defer(),c=g.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=e.defer(),c=g.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,d,f){var g=!1,h=c.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),e.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=e.defer();a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value);var c=f.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,h.set(a.incident)),b.resolve(d)});return b.promise},a.isSBARValidate=function(){var b=!0;return a.validate={},a.incident.situation&&a.incident.situation.length>1e3&&(b=!1,a.validate.situation=!0),a.incident.background&&a.incident.background.length>2e3&&(b=!1,a.validate.background=!0),a.incident.assessment&&a.incident.assessment.length>1e3&&(b=!1,a.validate.assessment=!0),a.incident.recommendations&&a.incident.recommendations.length>1e3&&(b=!1,a.validate.recommendations=!0),b},a.onSave=function(){a.isSBARValidate()&&(null!=a.incident.incident_no&&""!=a.incident.incident_no?e.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(v(),n.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Data Saved Successfully")):(j.removeAlerts(),j.addAlerts("danger","Save draft incident failed")),v(),n.hideLoading()}))}):(v(),n.showLoading(),e.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Data Saved Successfully")):(j.removeAlerts(),j.addAlerts("danger","Save draft incident failed")),v(),n.hideLoading()})))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(v(),e.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),v()}))},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)e.all([a.lockIncident()]).then(function(b){var d=b[0];if(d.IsSuccess){f.Delete(a.incidentDeleteAction,function(){j.removeAlerts(),j.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}else j.removeAlerts(),j.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{f.Delete(a.incidentDeleteAction,function(){j.removeAlerts(),j.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}}else B({})};var B=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Delete Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})};a.onRestoreIncident=function(){C({})};var C=function(){b.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Restore Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})};a.situation_invalid=!1,a.background_invalid=!1,a.assessment_invalid=!1,a.recommendations_invalid=!1,a.incident_description_invalid=!1,a.fileSizeLimit=2,a.totalFileSizeLimit=8;var D="";a.isDescriptionValid=function(c){a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value),a.incident_description_invalid=!1;var d=!0;return(!a.incident.situation||a.incident.situation.length<10)&&(a.situation_invalid=!0,d=!1),(!a.incident.background||a.incident.background.length<10)&&(a.background_invalid=!0,d=!1),(!a.incident.assessment||a.incident.assessment.length<10)&&(a.assessment_invalid=!0,d=!1),(!a.incident.recommendations||a.incident.recommendations.length<10)&&(a.recommendations_invalid=!0,d=!1),d||(a.incident_description_invalid=!0),!d&&c&&setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div> <br />",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200),d||setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+=$("<div>").append($(d).clone()).html()+"\n",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200),d},a.onSubmit=function(){if(a.wizard.steps[3].validated=!1,a.submitValid=!0,null==a.incident.is_witnessed&&(a.incident.is_witnessed=!1),a.incident_description_invalid=!1,a.situation_invalid=!1,a.background_invalid=!1,a.assessment_invalid=!1,a.recommendations_invalid=!1,null===a.incident.situation&&(a.incident.situation=""),null===a.incident.background&&(a.incident.background=""),null===a.incident.assessment&&(a.incident.assessment=""),null===a.incident.recommendations&&(a.incident.recommendations=""),a.incident.situation.length<10&&(a.situation_invalid=!0),a.incident.background.length<10&&(a.background_invalid=!0),a.incident.assessment.length<10&&(a.assessment_invalid=!0),a.incident.recommendations.length<10&&(a.recommendations_invalid=!0),a.isCommonArea&&a.routingUsers.length<=0&&(a.submitValid=!1),a.submitValid&&a.incident.situation.length>=10&&a.incident.background.length>=10&&a.incident.assessment.length>=10&&a.incident.recommendations.length>=10&&a.isSBARValidate()){a.wizard.steps[3].validated=!0;var e=a.checkFormValidation();if(e>=0&&4>=e){var g=a.wizard.steps[e-1].title;return j.removeAlerts(),void j.addAlerts("danger",'Submit Failed. Please complete "'+g+'" step first.')}a.incident_description_invalid=!1,a.submitValid=!0,d.scrollTo(0,0),a.$emit("autoSaveStop"),v(),n.showLoading(),a.main_template_supervisor_value&&(a.incident.main_template_supervisor_value=JSON.stringify(a.main_template_supervisor_value));var i=f.Save(a.incident,function(){var b=i.data;if(b.IsSuccess){n.showLoading(),a.incident=b.Data;var d=f.Submit(a.incident,function(){var b=d.data;b.IsSuccess?(a.incident=b.Data,h.set(a.incident),n.hideLoading(),c.path("/incident/form/reporterConfirmation"),v()):(n.hideLoading(),v(),j.removeAlerts(),j.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else v(),n.hideLoading(),j.removeAlerts(),j.addAlerts("danger","Submit incident failed")},function(){n.hideLoading(),v()})}else setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200)},a.fetchFileSizeLimit=function(){var a=e.defer(),b=u.FetchOneByKey({keyValue:"FILE_SIZE_LIMIT"},function(){var c=2;b.data&&(c=b.data.setting_value_default),a.resolve(c)});return a.promise},a.fetchTotalFileSizeLimit=function(){var a=e.defer(),b=u.FetchOneByKey({keyValue:"FILE_SIZE_TOTAL_LIMIT"},function(){var c=8;b.data&&(c=b.data.setting_value_default),a.resolve(c)});return a.promise},a.isCommonArea=!1,a.isManualRoutingEnabled=!1,a.isShowButtonManualRouting=!1,a.main_template_supervisor_value={},a.testFile={},a.calculateTotalSize=function(){a.totalFileSize=0,angular.forEach(a.incident.Attachments,function(b,c){b.is_active&&(a.totalFileSize+=b.filesize/1)}),a.totalFileSize=a.totalFileSize/1024/1024};var E=a.uploader=new o({url:"/File/UploadIncidentAttachment",autoUpload:!0,removeAfterUpload:!0});E.filters.push({name:"fileTypeFilter",fn:function(a,b){var c="|"+a.name.slice(a.name.lastIndexOf(".")+1)+"|",d="|jpg|png|jpeg|bmp|gif|txt|doc|docx|xls|xlsx|ppt|pptx|pdf|rtf|csv|zip|7z|rar|",e=-1!==d.indexOf(c.toLowerCase());return e||(j.removeAlerts(),j.addAlerts("danger","Please upload whitelisted file only (image, txt, doc, excel, pdf, zip)")),e}}),E.filters.push({name:"fileNameFilter",fn:function(b,c){var d=!1,e=b.name;return angular.forEach(a.incident.Attachments,function(a,b){a.is_active&&a.filename==e&&(d=!0)}),d&&(j.removeAlerts(),j.addAlerts("danger","File already exists.")),!d}}),E.onBeforeUploadItem=function(b){var c=0;angular.forEach(a.incident.Attachments,function(a,b){a.is_active&&(c+=a.filesize/1)}),b.formData.push({incidentId:a.incident.incident_id,totalSizeCurrentAttachment:c})},E.onSuccessItem=function(b,c,d,e){if(a.incident.Attachments||(a.incident.Attachments=[]),
c.Content){var f=c.Content.split("|"),d=f[0],g=f[2];if("1"==d)a.incident.Attachments.push({is_active:!0,filename:b.file.name,filesize:g}),a.successFile++,a.calculateTotalSize();else{var h=f[1];D=h,a.failedFile++}}else D=c.Message,a.failedFile++},E.onErrorItem=function(b,c,d,e){c.message?(b.errorMessage=c.message,D=c.message):(b.errorMessage=c.match(/<title[^>]*>[\s\S]*<\/title>/gi)[0],b.errorMessage=b.errorMessage.replace("<title>",""),b.errorMessage=b.errorMessage.replace("</title>","")),a.failedFile++},E.onAfterAddingAll=function(b){a.totalFile=b.length,a.successFile=0,a.failedFile=0},E.onCompleteAll=function(){j.removeAlerts();var b="";a.successFile>0&&(b+=a.successFile+"/"+a.totalFile+" uploaded successfully. "),a.failedFile>0&&(b+=a.failedFile+"/"+a.totalFile+" upload failed. "+D),a.failedFile>0?j.addAlerts("danger",b):j.addAlerts("success",b)},a.download=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,d.open("/File/DownloadIncidentAttachment?name="+encodeURIComponent(b.filename)+"&incidentId="+c)},a.onDeleteAttachment=function(b){confirm("Are you sure you want to delete this attachment?")&&(b.is_active=!1,j.addAlerts("success","File removed successfully"),a.calculateTotalSize())},a.onChangeRoutingGroup=function(b){a.routingUsers=[],angular.forEach(b.RoutingUsers,function(b,c){var d=!1;angular.forEach(b.RoutingLocations,function(c,e){c.location_id==a.incident.location_id&&c.is_active&&(a.routingUsers.push(b),d=!0)}),d||angular.forEach(b.RoutingDepartments,function(c,d){c.department_id==a.incident.department_id&&c.is_active&&a.routingUsers.push(b)})})},a.fetchRoutingGroup=function(){var b=1;a.incident.current_tracking_order_level&&(b=a.incident.current_tracking_order_level);var c=0;a.incident.workflow_id&&(c=a.incident.workflow_id);var d=q.FetchNextRoutingGroup({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:b,designationId:a.incident.designation_id,currentWorkflowId:c,locationId:a.incident.routing_location_id,departmentId:a.incident.department_id,isAnonymous:a.incident.is_anonymous,reporterId:a.incident.created_by},function(){a.routingGroups=d.data,a.routingUsers=[],a.routingGroup={};var b=!0;angular.forEach(a.routingGroups,function(c,d){b&&(a.routingGroup=c,a.routingUsers=c.RoutingUsers)})})},a.fetchCommitteeGroup=function(){var b=[],c=[];a.committeeGroups=[],angular.forEach(a.incident.PersonInvolveds,function(a,d){null!=a.patient_class&&b.push(a.patient_class),"patient"==a.person_category.toLowerCase()?c.push(a.patient_type):c.push(a.person_category)});var d=s.FetchAllForIncidentCc({incidentTypeId:a.incident.incident_type_id,incidentSubTypeId:a.incident.incident_sub_type_id,locationId:a.incident.location_id,departmentId:a.incident.department_id,listDisciplineCode:b,listPersonInvolved:c},function(){a.committeeGroups=d.data,a.incident.Ccs=[],angular.forEach(a.committeeGroups,function(b,c){a.incident.Ccs.push(b)})})},a.checkLocationIsCommonArea=function(){var b=e.defer(),c=t.CheckIsCommonArea({locationId:a.incident.location_id},function(){var a=c.data;b.resolve(a)});return b.promise},a.fetchNextWorkflow=function(){var b=e.defer(),c=1;a.incident.current_tracking_order_level&&(c=a.incident.current_tracking_order_level);var d=q.FetchNextWorkflow({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:c,designationId:a.incident.designation_id,isAnonymous:a.incident.is_anonymous,departmentId:a.incident.department_id,locationId:a.incident.location_id},function(){var a=d.data;if(a){var c=a.Workflow;b.resolve(c)}else b.resolve(null)});return b.promise},a.incidentDescriptionEnterValidation=function(){if(null==a.incident.incident_type_id)return alert("Please choose Incident Type and Location of Incident first!"),!1;a.fetchRoutingGroup(),a.fetchCommitteeGroup(),a.main_template="";var b=m.FetchOne({incidentTypeId:a.incident.incident_type_id},function(){var c=b.data;a.main_template_supervisor="",a.main_template_supervisor=c.main_template_supervisor,a.incident.main_template_supervisor=a.main_template_supervisor,a.main_template_supervisor_value=angular.fromJson(a.incident.main_template_supervisor_value),null==a.main_template_supervisor_value&&(a.main_template_supervisor_value={})});return e.all([a.checkLocationIsCommonArea(),a.fetchNextWorkflow(),a.fetchFileSizeLimit(),a.fetchTotalFileSizeLimit()]).then(function(b){var c=b[0],d=b[1],e=b[2],f=b[3];a.isCommonArea=c,d&&(a.isManualRoutingEnabled=d.is_manual_routing_enabled),a.isCommonArea&&a.isManualRoutingEnabled?a.isShowButtonManualRouting=!0:a.isShowButtonManualRouting=!1,a.fileSizeLimit=e,a.totalFileSizeLimit=f,a.calculateTotalSize()}),!0};var F=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-sre-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenSREModal=function(){F({})},a.incidentDescriptionEnterValidation();var G=function(c){b.open({templateUrl:"app/incident/form/add-cc-sap-hr/add-cc-sap-hr.html",controller:"AddCcSapHrCtrl",windowClass:"modal-large",resolve:{userSearchData:function(){return a.incident.AdditionalCcs}}}).result.then(function(b){var c=b,d={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:c.adid,addition_cc_type:1,email:c.email_address,name:c.employee_name};null==a.incident.AdditionalCcs&&(a.incident.AdditionalCcs=[]),a.incident.AdditionalCcs.push(d)})};a.onAddCcSapHr=function(){G({})};var H=function(c){b.open({templateUrl:"app/incident/form/add-cc-user/add-cc-user.html",controller:"AddCcUserCtrl",windowClass:"modal-large"}).result.then(function(b){var c={incident_additional_cc_id:0,incident_id:a.incident.incident_id,user_id:0,adid:b.adid,addition_cc_type:1,email:b.email,name:b.name};null==a.incident.AdditionalCcs&&(a.incident.AdditionalCcs=[]);var d=!1;angular.forEach(a.incident.AdditionalCcs,function(a,b){a.email==c.email&&(d=!0)}),d||a.incident.AdditionalCcs.push(c)})};a.onAddCcUser=function(){H({})},a.onDeleteAdditionalCc=function(b){var c=a.incident.AdditionalCcs.indexOf(b);a.incident.AdditionalCcs.splice(c,1)};var I=function(){b.open({templateUrl:"app/incident/form/add-dynamic-routing-user/add-dynamic-routing-user.html",controller:"AddDynamicRoutingUserCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident},routingUserData:function(){return a.routingUsers}}}).result.then(function(b){a.incident.routing_location_id=b,a.fetchRoutingGroup()})};a.onAddDynamicRoutingUser=function(){I()},a.$on("$destroy",function(){a.dynamicFormScope&&(a.dynamicFormScope=null),a.$$watchers=null,a.$$listeners=null}),a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};f.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),j.removeAlerts(),j.addAlerts("success",b)},function(){j.removeAlerts(),j.addAlerts("danger","Failed to flag incident")})}}]),angular.module("HITS").controller("CommentsCtrl",["$scope","$modal","$location","$q","$window","$timeout","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","IncidentCommentService","UserAclSessionData","UserSessionData","IncidentMorbidityReviewService","MedicationNameService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){j.setAclSession(m),j.setAcltoScope(a),k.removeAlerts(),a.wizard=i.getWizardData(),a.incident=i.get(),a.tempIncident=angular.copy(a.incident),a.form=i.getStatusData(),a.btnState=i.getButtonStateData(),a.incidentAcl=i.getIncidentAcl(),a.today=new Date,a.isAnonymous=j.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.hasSearch=!1,a.userSession=n,a.user=n,a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.goToStep=function(b){var d=a.wizard.currentStep,e=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,c){a.order<b&&a.order!=d&&!a.completed&&(f=!1)}),f&&(b>d?(a.incident.incident_id>0&&a.autoSave(),i.set(a.incident),a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,i.setWizardData(a.wizard),c.path(e.url)):(a.incident.incident_id>0&&a.autoSave(),i.set(a.incident),a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,i.setWizardData(a.wizard),c.path(e.url)))},a.goToPrevStep=function(){k.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b-2];a.wizard.steps[b-1].validated=!0,a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b-2].selected=!0,a.wizard.currentStep--,i.setWizardData(a.wizard),i.set(a.incident),c.path(d.url)},a.goToNextStep=function(){k.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b];a.wizard.steps[b-1].validated=!0,a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b].selected=!0,a.wizard.currentStep++,i.set(a.incident),i.setWizardData(a.wizard),c.path(d.url)};var q=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBackToMerged=function(){a.form.is_merged?c.path("/incident/merge/form"):c.path("/incident/merge")},a.onPrint=function(){var b=c.protocol(),d=c.host(),f=c.port(),g="";g="80"!=f?b+"://"+d+":"+f+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+d+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,e.open(g)};var r=function(a){b.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){r(a)},a.onForwardIncident=function(){s(a.incident)};var s=function(a){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";k.removeAlerts(),k.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){i.initialize();var b=i.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,i.setStatusData(b),i.set(a),c.path("/incident/form")};var t=function(){b.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a&&(b="success",d="ReRoute Success",k.removeAlerts(),k.addAlerts(b,d),c.path("incident/track"))})},u=function(){b.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",d="";a?(b="success",d="Close Incident Success"):(b="danger",d="Error Saving Data"),k.removeAlerts(),k.addAlerts(b,d),c.path("incident/track")})},v=function(){b.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="ReOpen Success",k.removeAlerts(),k.addAlerts(b,d),c.path("incident/track")):(b="danger",d="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(k.removeAlerts(),k.addAlerts("danger","This incident can't be rerouted")):t()},a.onCloseIncident=function(){u()},a.onReOpenIncident=function(){v()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()){var b=a.checkFormValidation();if(b>=0){var d=a.wizard.steps[b-1].title;return k.removeAlerts(),void k.addAlerts("danger",'Submit Failed. Please complete "'+d+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,e.scrollTo(0,0),a.$emit("autoSaveStop"),q();var f=g.Save(a.incident,function(){var b=f.data;if(b.IsSuccess){a.incident=b.Data;var d=g.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(k.removeAlerts(),k.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),i.set(a.incident),q(),c.path("/incident/track")):(q(),k.removeAlerts(),k.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else k.removeAlerts(),k.addAlerts("danger","Save Failed. Error : "+b.Message),q()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid()},a.releaseLock=function(){var b=d.defer(),c=h.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=d.defer(),c=h.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,e,f){var g=!1,h=c.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),d.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=d.defer(),c=g.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,i.set(a.incident)),b.resolve(d)});return b.promise},a.onSave=function(){null!=a.incident.incident_no&&""!=a.incident.incident_no?d.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(q(),d.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(k.removeAlerts(),k.addAlerts("success","Data Saved Successfully")):(k.removeAlerts(),k.addAlerts("danger","Save draft incident failed")),q()}))}):(q(),d.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(k.removeAlerts(),k.addAlerts("success","Data Saved Successfully")):(k.removeAlerts(),k.addAlerts("danger","Save draft incident failed")),q()}))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(q(),d.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),q()}))},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)d.all([a.lockIncident()]).then(function(b){var d=b[0];if(d.IsSuccess){g.Delete(a.incidentDeleteAction,function(){k.removeAlerts(),k.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}else k.removeAlerts(),k.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{g.Delete(a.incidentDeleteAction,function(){k.removeAlerts(),k.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}}else w({})};var w=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Delete Incident Success"):(b="danger",d="Error Saving Data"),k.removeAlerts(),k.addAlerts(b,d),c.path("incident/track")})};a.onRestoreIncident=function(){x({})};var x=function(){b.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Restore Incident Success"):(b="danger",d="Error Saving Data"),k.removeAlerts(),k.addAlerts(b,d),c.path("incident/track")})};a.fetchComments=function(){a.isReporter=!1;var b=a.incident.incident_id;if(null==b&&(b=0),a.incidentAcl.INCIDENT_TRACK_INCIDENT_COMMENT_VIEW_ALL){a.isReporter=!0;var c=l.FetchAll({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})})}else{a.isReporter=!1;var c=l.FetchAllWithReporterView({incidentId:b},function(){a.incident.Comments=[],a.incident.Comments=c.data,angular.forEach(a.incident.Comments,function(a,b){a.factors_minimizing_incident=JSON.parse(a.factors_minimizing_incident),a.how_to_prevent=JSON.parse(a.how_to_prevent)})})}},a.fetchComments(),a.commentEnterValidation=function(){return a.fetchComments(),!0};var y=function(c){b.open({templateUrl:"app/incident/form/incident-comment/incident-comment.html",controller:"IncidentCommentCtrl",windowClass:"modal-large",resolve:{incidentComment:function(){return c},incident:function(){return angular.copy(a.incident)}}}).result.then(function(b){var c="",d="";b?(c="success",d="Comment Saved Succesfully"):(c="danger",d="Save comment failed"),k.removeAlerts(),k.addAlerts(c,d),a.fetchComments()})};a.onViewComment=function(a){a.is_edited=!1,y(a)},a.onAddComment=function(b){a.userSession=j.getSession();var c={incident_id:a.incident.incident_id,comment_type:b,comment_date:new Date,comment_by:a.userSession.name,user_id:a.userSession.user_id,is_active:!0};y(c)},a.onCommentEdit=function(a){var b=a;b.is_edited=!0,y(b)},a.onCommentDelete=function(b){var c=l.Delete(b,function(){var b=c.data;b.IsSuccess?(k.removeAlerts(),k.addAlerts("success","Data Deleted")):(k.removeAlerts(),k.addAlerts("danger","Delete comment failed")),a.fetchComments()})},a.onCommentAttachmentDownload=function(b){var c=0;c=null==a.incident.incident_id?0:a.incident.incident_id,e.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(b.attachment_filename)+"&incidentId="+c)};var z=function(){b.open({templateUrl:"app/incident/form/incident-comment/view-all-comment/view-all-comment.html",controller:"ViewAllCommentCtrl",windowClass:"modal-large",resolve:{incidentComments:function(){return a.incident.Comments},incidentId:function(){return a.incident.incident_id}}}).result.then(function(a){})};a.onViewAllComment=function(){z()},a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};g.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),k.removeAlerts(),k.addAlerts("success",b)},function(){k.removeAlerts(),k.addAlerts("danger","Failed to flag incident")})},a.isDateEnable=!0,a.incidentMorbidityReview={Incident:{incident_no:a.incident.incident_no}};var A=o.FetchByIncidentId({incidentId:a.incident.incident_id},function(){var b=A.data;null==b?(a.incidentMorbidityReview.last_updated_date="-",a.incidentMorbidityReview.last_updated_by_username="-",8==a.incident.incident_type_id?(a.incidentMorbidityReview.fall_comment_by=a.user.name,a.incidentMorbidityReview.fall_comment_date=a.today):11==a.incident.incident_type_id&&(a.incidentMorbidityReview.me_comment_by=a.user.name,a.incidentMorbidityReview.me_comment_date=a.today)):(a.incidentMorbidityReview=b,a.setMedicationIsSpecifyValue(a.incidentMorbidityReview.medication_name_id))});a.validateFallMorbidityReview=function(){return!0},a.onSaveFallMorbidityReview=function(){if(a.validateFallMorbidityReview()){a.incidentMorbidityReview.incident_id=a.incident.incident_id;var b=o.Save(a.incidentMorbidityReview,function(){a.incidentMorbidityReview=b.data,k.removeAlerts(),k.addAlerts("success","Morbidity Review data saved")})}},a.datePickerOpen=function(a){f(function(){$("#"+a).focus()})},a.onOpenConsequencesModal=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-consequences-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},a.onOpenLikelihoodModal=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-likelihood-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})},a.calculateFallSAC=function(){a.incidentMorbidityReview.fall_sac_score="",a.incidentMorbidityReview.fall_sac_score=String(a.incidentMorbidityReview.fall_sac_likelihood)+String(a.incidentMorbidityReview.fall_sac_consequences)},a.calculateMeSAC=function(){a.incidentMorbidityReview.me_sac_score="",a.incidentMorbidityReview.me_sac_score=String(a.incidentMorbidityReview.me_sac_likelihood)+String(a.incidentMorbidityReview.me_sac_consequences)};var B=p.FetchAll(function(){a.medicationNames=B.data});a.setMedicationIsSpecifyValue=function(b){a.medicationNameIsSpecify=!1,angular.forEach(a.medicationNames,function(c,d){c.medication_name_id==b&&(a.medicationNameIsSpecify=c.is_specify)}),a.medicationNameIsSpecify||(a.incidentMorbidityReview.me_medication_name_other_description="")},a.validateMeMorbidityReview=function(){return!0},a.onSaveMeMorbidityReview=function(){if(a.validateMeMorbidityReview()){a.incidentMorbidityReview.incident_id=a.incident.incident_id;var b=o.Save(a.incidentMorbidityReview,function(){a.incidentMorbidityReview=b.data,k.removeAlerts(),k.addAlerts("success","Morbidity Review data saved")})}}}]),angular.module("HITS").controller("SacCtrl",["$scope","$modal","$location","$q","$window","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","UserAclSessionData","UserSessionData",function(a,b,c,d,e,f,g,h,i,j,k,l){i.setAclSession(k),i.setAcltoScope(a),a.wizard=h.getWizardData(),a.incident=h.get(),a.tempIncident=angular.copy(a.incident),a.form=h.getStatusData(),a.btnState=h.getButtonStateData(),a.incidentAcl=h.getIncidentAcl(),a.today=new Date,a.isAnonymous=i.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.hasSearch=!1,a.userSession=l,a.user=l,j.removeAlerts(),a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.goToStep=function(b){var d=a.wizard.currentStep,e=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,c){a.order<b&&a.order!=d&&!a.completed&&(f=!1)}),f&&(b>d?a.isSacScoreValid()?(a.incident.incident_id>0&&a.autoSave(),h.set(a.incident),a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,h.setWizardData(a.wizard),c.path(e.url)):(a.submitNextLevelValidation.sac_score=!0,a.invalid.firsttime=!0):(a.incident.incident_id>0&&a.autoSave(),h.set(a.incident),a.wizard.steps[d-1].validated=a.isSacScoreValid(),a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,h.setWizardData(a.wizard),c.path(e.url)))},a.goToPrevStep=function(){j.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b-2];a.wizard.steps[b-1].validated=a.isSacScoreValid(),a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b-2].selected=!0,a.wizard.currentStep--,h.setWizardData(a.wizard),h.set(a.incident),c.path(d.url)},a.invalid={},a.invalid.firsttime=!1,a.goToNextStep=function(){if(j.removeAlerts(),a.isSacScoreValid()){a.incident.incident_id>0&&a.autoSave(),a.submitNextLevelValidation.sac_score=!1;var d=a.wizard.currentStep,e=a.wizard.steps[d];a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[d].selected=!0,a.wizard.currentStep++,h.set(a.incident),h.setWizardData(a.wizard),c.path(e.url)}else a.submitNextLevelValidation.sac_score=!0,a.invalid.firsttime=!0,setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200)};var m=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBackToMerged=function(){a.form.is_merged?c.path("/incident/merge/form"):c.path("/incident/merge")},a.onPrint=function(){var b=c.protocol(),d=c.host(),f=c.port(),g="";g="80"!=f?b+"://"+d+":"+f+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+d+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,e.open(g)};var n=function(a){b.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){n(a)},a.onForwardIncident=function(){o(a.incident)};var o=function(a){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";j.removeAlerts(),j.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){h.initialize();var b=h.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,h.setStatusData(b),h.set(a),c.path("/incident/form")};var p=function(){b.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a&&(b="success",d="ReRoute Success",j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track"))})},q=function(){b.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",d="";a?(b="success",d="Close Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})},r=function(){b.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="ReOpen Success",j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")):(b="danger",d="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(j.removeAlerts(),j.addAlerts("danger","This incident can't be rerouted")):p()},a.onCloseIncident=function(){q()},a.onReOpenIncident=function(){r()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||!a.form.is_edited||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,e){c&&(angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)}),b=d)}),b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()){var d=a.checkFormValidation();if(d>=0){var g=a.wizard.steps[d-1].title;return j.removeAlerts(),void j.addAlerts("danger",'Submit Failed. Please complete "'+g+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,e.scrollTo(0,0),a.$emit("autoSaveStop"),m();var i=f.Save(a.incident,function(){var b=i.data;if(b.IsSuccess){a.incident=b.Data;var d=f.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),h.set(a.incident),m(),c.path("/incident/track")):(m(),j.removeAlerts(),j.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else j.removeAlerts(),j.addAlerts("danger","Save Failed. Error : "+b.Message),m()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid(),setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200)},a.releaseLock=function(){var b=d.defer(),c=g.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=d.defer(),c=g.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,e,f){var g=!1,h=c.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(g=!0,i=a)}),g?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),d.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=d.defer(),c=f.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,h.set(a.incident)),b.resolve(d)});return b.promise};var s=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-consequences-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenConsequencesModal=function(){s({})};var t=function(){b.open({templateUrl:"app/incident/form/tooltip/incident-likelihood-tooltip.html",windowClass:"modal-large"}).result.then(function(a){})};a.onOpenLikelihoodModal=function(){t({})},a.onSave=function(){null!=a.incident.incident_no&&""!=a.incident.incident_no?d.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(m(),d.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Data Saved Successfully")):(j.removeAlerts(),j.addAlerts("danger","Save draft incident failed")),m()}))}):(m(),d.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(j.removeAlerts(),j.addAlerts("success","Data Saved Successfully")):(j.removeAlerts(),j.addAlerts("danger","Save draft incident failed")),m()}))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(m(),d.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),m()}))},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)d.all([a.lockIncident()]).then(function(b){var d=b[0];if(d.IsSuccess){f.Delete(a.incidentDeleteAction,function(){j.removeAlerts(),j.addAlerts("success","Incident successfully deleted"),
c.path("/incident/track")})}else j.removeAlerts(),j.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{f.Delete(a.incidentDeleteAction,function(){j.removeAlerts(),j.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}}else u({})};var u=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Delete Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})};a.onRestoreIncident=function(){v({})};var v=function(){b.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Restore Incident Success"):(b="danger",d="Error Saving Data"),j.removeAlerts(),j.addAlerts(b,d),c.path("incident/track")})};a.calculateSAC=function(){a.sacScore="",a.sacScore=String(a.incident.sac_likelihood)+String(a.incident.sac_consequences)},a.sacEnterValidation=function(){return a.calculateSAC(),!0},a.sacEnterValidation(),a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};f.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),j.removeAlerts(),j.addAlerts("success",b)},function(){j.removeAlerts(),j.addAlerts("danger","Failed to flag incident")})}}]),angular.module("HITS").controller("RcaCtrl",["$scope","$modal","$location","$document","$window","$timeout","$q","UserSessionData","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.wizard=k.getWizardData(),a.incident=k.get(),a.tempIncident=angular.copy(a.incident),a.form=k.getStatusData(),a.btnState=k.getButtonStateData(),a.today=new Date,a.isAnonymous=l.isAnonymous(),a.action=!1,a.submitNextLevelValidation={},a.hasSearch=!1,a.user=h,m.removeAlerts(),a.checkFormValidation=function(){var b=-1;return angular.forEach(a.wizard.steps,function(a,c){!a.validated&&0>b&&(b=a.order)}),b},a.goToStep=function(b){var d=a.wizard.currentStep,e=a.wizard.steps[b-1],f=!0;"DRAFT"==a.incident.current_tracking_status&&angular.forEach(a.wizard.steps,function(a,c){a.order<b&&a.order!=d&&!a.completed&&(f=!1)}),f&&(b>d?(a.incident.incident_id>0&&a.autoSave(),k.set(a.incident),a.wizard.steps[d-1].validated=!0,a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,k.setWizardData(a.wizard),c.path(e.url)):(a.incident.incident_id>0&&a.autoSave(),k.set(a.incident),a.wizard.steps[d-1].validated=a.isRcaValid(),a.wizard.steps[d-1].completed=!0,a.wizard.steps[d-1].selected=!1,a.wizard.steps[b-1].selected=!0,a.wizard.currentStep=b,k.setWizardData(a.wizard),c.path(e.url)))},a.goToPrevStep=function(){m.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b-2];a.wizard.steps[b-1].validated=a.isRcaValid(),a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b-2].selected=!0,a.wizard.currentStep--,k.setWizardData(a.wizard),k.set(a.incident),c.path(d.url)},a.goToNextStep=function(){m.removeAlerts(),a.incident.incident_id>0&&a.autoSave();var b=a.wizard.currentStep,d=a.wizard.steps[b];a.wizard.steps[b-1].validated=!0,a.wizard.steps[b-1].completed=!0,a.wizard.steps[b-1].selected=!1,a.wizard.steps[b].selected=!0,a.wizard.currentStep++,k.set(a.incident),k.setWizardData(a.wizard),c.path(d.url)};var n=function(){a.action=!a.action};a.isButtonShow=function(b){var c=!1;return a.btnState[b]&&(c=a.btnState[b]),c},a.onBackToMerged=function(){a.form.is_merged?c.path("/incident/merge/form"):c.path("/incident/merge")},a.onPrint=function(){var b=c.protocol(),d=c.host(),f=c.port(),g="";g="80"!=f?b+"://"+d+":"+f+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id:b+"://"+d+"/Web/printIncidentPage.html#/?incident_id="+a.incident.incident_id,e.open(g)};var o=function(a){b.open({templateUrl:"app/incident/track/incident-status-movement/incident-status-movement.html",controller:"IncidentStatusMovementCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){})};a.onViewStatusMovement=function(a){o(a)},a.onForwardIncident=function(){p(a.incident)};var p=function(a){b.open({templateUrl:"app/incident/forward/incident-forward/form/incident-forward-form.html",controller:"IncidentForwardFormCtrl",windowClass:"modal-fullscreen",resolve:{incidentData:function(){return a}}}).result.then(function(a){if(a.IsSuccess){var b="Forward Incident Success";m.removeAlerts(),m.addAlerts("success",b)}})};a.onViewIncidentMerged=function(a){k.initialize();var b=k.getStatusData();"MERGED"==a.current_tracking_status?b.is_edited=!1:b.is_edited=!0,b.is_merged=!1,k.setStatusData(b),k.set(a),c.path("/incident/form")};var q=function(){b.open({templateUrl:"app/incident/form/incident-re-route/incident-re-route.html",controller:"IncidentReRouteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a&&(b="success",d="ReRoute Success",m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track"))})},r=function(){b.open({templateUrl:"app/incident/form/incident-close/incident-close.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident},isSacScoreValid:function(){return a.isSacScoreValid()},isRcaValid:function(){return a.isRcaValid()}}}).result.then(function(a){var b="",d="";a?(b="success",d="Close Incident Success"):(b="danger",d="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track")})},s=function(){b.open({templateUrl:"app/incident/form/incident-re-open/incident-re-open.html",controller:"IncidentReOpenCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="ReOpen Success",m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track")):(b="danger",d="Error Saving Data")})};a.onReRoute=function(){a.incident.is_anonymous?(m.removeAlerts(),m.addAlerts("danger","This incident can't be rerouted")):q()},a.onCloseIncident=function(){r()},a.onReOpenIncident=function(){s()},a.isSacScoreValid=function(){var b=!0;return a.incident.sac_likelihood&&a.incident.sac_consequences||(b=!1),b},a.isRcaValid=function(){var b=!1,c=!0,d=!1;return angular.forEach(a.incident.RcaCategories,function(a,b){c&&angular.forEach(a.IncidentRcas,function(a,b){a.is_selected&&(a.show_freetext?a.show_freetext&&a.free_text?d=!0:(c=!1,d=!1):d=!0)})}),b=d,a.wizard.steps[6].validated=b,b},a.onSubmitToNextLevel=function(){if(a.isSacScoreValid()&&a.isRcaValid()){var d=a.checkFormValidation();if(d>=0){var f=a.wizard.steps[d-1].title;return m.removeAlerts(),void m.addAlerts("danger",'Submit Failed. Please complete "'+f+'" step first.')}a.submitNextLevelValidation.sac_score=!1,a.submitNextLevelValidation.rca=!1,e.scrollTo(0,0),a.$emit("autoSaveStop"),n();var g=i.Save(a.incident,function(){var b=g.data;if(b.IsSuccess){a.incident=b.Data;var d=i.SubmitToNextLevel(a.incident,function(){var b=d.data;b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Incident "+a.incident.incident_no+" successfully submitted to next level"),k.set(a.incident),n(),c.path("/incident/track")):(n(),m.removeAlerts(),m.addAlerts("danger","Submit Failed. Error : "+b.Message))})}else m.removeAlerts(),m.addAlerts("danger","Save Failed. Error : "+b.Message),n()})}else a.submitNextLevelValidation.sac_score=!a.isSacScoreValid(),a.submitNextLevelValidation.rca=!a.isRcaValid(),setTimeout(function(){a.$apply(function(){var a="",c={};$(".validation-new:visible").each(function(b,d){c[$(d).text().trim()]||(a+="<div class='validation-new'>"+$(d).text().trim()+"</div>",c[$(d).text().trim()]=$("<div>").append($(d).clone()).html())}),a&&b.open({templateUrl:"app/modal/alert-modal/alert-modal.html",controller:"AlertModalCtrl",backdrop:"static",resolve:{attr:function(){return{title:"Validation Errors",btnClass:"btn btn-primary",bodyHtml:a,isHtml:!0}}}})})},200)},a.releaseLock=function(){var b=g.defer(),c=j.ReleaseLock({incidentId:a.incident.incident_id},function(){var a=c.data;b.resolve(a)},function(){});return b.promise},a.lockIncident=function(){var b=g.defer(),c=j.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=c.data;b.resolve(a)});return b.promise},a.$on("$locationChangeStart",function(b,d,e){var f=!1,h=c.path(),i={};angular.forEach(a.wizard.steps,function(a,b){a.url==h&&(f=!0,i=a)}),f?(a.wizard.steps[a.wizard.currentStep-1].selected=!1,a.wizard.steps[i.order-1].selected=!0,a.wizard.currentStep=i.order):(a.$emit("autoSaveStop"),g.all([a.releaseLock()]).then(function(a){}))}),a.doSave=function(){var b=g.defer(),c=i.Save(a.incident,function(){var d=c.data;d.IsSuccess&&(a.incident=d.Data,k.set(a.incident)),b.resolve(d)});return b.promise},a.onSave=function(){null!=a.incident.incident_no&&""!=a.incident.incident_no?g.all([a.lockIncident()]).then(function(b){var c=b[0];c.IsSuccess&&(n(),g.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),n()}))}):(n(),g.all([a.doSave()]).then(function(a){var b=a[0];b.IsSuccess?(m.removeAlerts(),m.addAlerts("success","Data Saved Successfully")):(m.removeAlerts(),m.addAlerts("danger","Save draft incident failed")),n()}))},a.autoSave=function(){a.form.is_edited&&!angular.equals(a.incident,a.tempIncident)&&(n(),g.all([a.doSave()]).then(function(b){b[0];a.tempIncident=angular.copy(a.incident),n()}))},a.$on("doAutoSave",function(){a.action||a.autoSave()}),a.onDeleteIncident=function(){if("DRAFT"==a.incident.current_tracking_status){var b=confirm("Are you sure you want to delete the Incident?");if(b)if(a.incidentDeleteAction={Incident:a.incident,DeleteRemarks:""},null!=a.incident.incident_no&&""!=a.incident.incident_no)g.all([a.lockIncident()]).then(function(b){var d=b[0];if(d.IsSuccess){i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}else m.removeAlerts(),m.addAlerts("danger","Cannot Delete Incident. Incident is being processed by another User.")});else{i.Delete(a.incidentDeleteAction,function(){m.removeAlerts(),m.addAlerts("success","Incident successfully deleted"),c.path("/incident/track")})}}else t({})};var t=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentDeleteCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Delete Incident Success"):(b="danger",d="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track")})},t=function(){b.open({templateUrl:"app/incident/form/incident-delete/incident-delete.html",controller:"IncidentCloseCtrl",windowClass:"modal-small",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Delete Incident Success"):(b="danger",d="Error Delete Data"),m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track")})};a.onRestoreIncident=function(){u({})};var u=function(){b.open({templateUrl:"app/incident/form/incident-restore/incident-restore.html",controller:"IncidentRestoreCtrl",windowClass:"modal-large",resolve:{incidentData:function(){return a.incident}}}).result.then(function(a){var b="",d="";a?(b="success",d="Restore Incident Success"):(b="danger",d="Error Saving Data"),m.removeAlerts(),m.addAlerts(b,d),c.path("incident/track")})};a.rcaEnterValidation=function(){return f(function(){$(".nav-incident-detail").onePageNav()},2e3),!0},a.rcaEnterValidation(),a.$on("$destroy",function(){a.$$watchers=null,a.$$listeners=null,d.unbind("scroll"),$(window).unbind("scroll"),$(window).unbind("resize")}),a.onReadIncident=function(){a.form.is_read=!a.form.is_read;var b={incident_id:a.incident.incident_id,user_id:a.user.user_id,is_read:a.form.is_read};i.UpdateReadStatus({data:b},function(){var b="";a.form.is_read?(a.btnState.btnReadLabel="Unread",b="Incident flagged as Read"):(a.btnState.btnReadLabel="Read",b="Incident flagged as Unread"),m.removeAlerts(),m.addAlerts("success",b)},function(){m.removeAlerts(),m.addAlerts("danger","Failed to flag incident")})}}]),angular.module("HITS").controller("IncidentReportCtrl",["$scope","$location","SessionService","IncidentReportService","UserAclSessionData",function(a,b,c,d,e){c.setAclSession(e),c.setAcltoScope(a),a.currentAcl.FALLS_REPORT_VIEW||a.currentAcl.ME_REPORT_VIEW||a.currentAcl.ENS_REPORT_VIEW||a.currentAcl.AI_REPORT_VIEW||a.currentAcl.BHV_REPORT_VIEW||a.currentAcl.PSI_REPORT_VIEW||b.path("/unauthorized"),a.param={},a.control={},a.service=d}]),angular.module("HITS").directive("userActivityWatcher",["SessionService",function(a){return{scope:{},restrict:"A",link:function(b,c,d,e){var f="userActivityWatcher",g=[],h=[];$.each(d.userActivityWatcher.split(" "),function(a,b){""!=b&&(g.push(b),h.push(b+"."+f))});var i=function(){$(document).on(h.join(" "),function(){a.resetReminder()})};setInterval(function(){var a=$._data(document,"events"),b=!1;$.each(g,function(c,d){return b=!1,a[d]&&$.each(a[d],function(a,c){return c.namespace==f?(b=!0,!1):void 0}),b}),b||($(document).unbind(".userActivityWatcher"),i())},1e3),i()}}}]),angular.module("HITS").controller("AddDynamicRoutingUserCtrl",["$scope","$modalInstance","$timeout","incidentData","routingUserData","WorkflowService","LocationService",function(a,b,c,d,e,f,g){a.incident=d,a.routingUser=e,a.data={},a.data.temp_routing_location_id=a.incident.routing_location_id,a.select={},a.select.selectAllUser=!1,a.select.unselectAllUser=!1,a.validate={},a.validate.button=!0,a.listUser=[];var h=g.FetchAllLocationByCommonArea({isCommonArea:!1},function(){a.locations=h.data});a.onSave=function(){a.validate.button=!1,b.close(a.data.temp_routing_location_id)},a.fetchRoutingGroup=function(){var b=1;a.incident.current_tracking_order_level&&(b=a.incident.current_tracking_order_level);var c=0;a.incident.workflow_id&&(c=a.incident.workflow_id);var d=f.FetchNextRoutingGroup({employeeCategoryId:a.incident.employee_category_id,currentTrackingOrderLevel:b,designationId:a.incident.designation_id,currentWorkflowId:c,locationId:a.data.temp_routing_location_id,departmentId:a.incident.department_id,isAnonymous:a.incident.is_anonymous,reporterId:a.incident.created_by},function(){a.routingGroups=d.data,a.routingUsers=[],a.routingGroup={};var b=!0;angular.forEach(a.routingGroups,function(c,d){b&&(a.routingGroup=c,a.routingUsers=c.RoutingUsers)})})},a.onChangeRoutingLocation=function(){c(function(){a.fetchRoutingGroup()},100)},a.fetchRoutingGroup()}]),angular.module("HITS").controller("AddNewIncidentCtrl",["$scope","IncidentFormService","LoadingScreenService","$timeout","$location",function(a,b,c,d,e){a.redirectToIncidentForm=function(){b.initialize(),c.showLoading(),d(function(){e.path("/incident/form")},500)},a.redirectToIncidentForm()}]),angular.module("HITS").controller("LocationModalCtrl",["$scope","LocationService","Locations","RoutingUser","$modalInstance","LoadingScreenService",function(a,b,c,d,e,f){var g={};g.Locations=c,g.Locations||(g.Locations=[]),a.data=g,a.routingUser=d,a.select={},a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1;var h={};angular.forEach(a.data.Locations,function(a,b){h[a.location_id]=a}),f.showLoading();var i=b.FetchAll(function(){a.locations=i.data,angular.forEach(a.locations,function(a,b){h[a.location_id]||g.Locations.push({location_id:a.location_id,is_active:!1,Location:a})}),f.hideLoading()});a.select_all_location=function(){a.select.selectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!0,a.select.unselectAllLocation=!1),angular.forEach(a.data.Locations,function(b){b.is_active=a.select.selectAllLocation})},a.unselect_all_location=function(){a.select.unselectAllLocation?(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!1):(a.select.selectAllLocation=!1,a.select.unselectAllLocation=!0),a.select.unselectAllLocation&&angular.forEach(a.data.Locations,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;a.onSubmit=function(a){e.close(a.Locations)}}]),angular.module("HITS").controller("DepartmentModalCtrl",["$scope","DepartmentService","Departments","RoutingUser","$modalInstance","LoadingScreenService",function(a,b,c,d,e,f){var g={};g.Departments=c,g.Departments||(g.Departments=[]),a.data=g,a.routingUser=d,a.select={},a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1;var h={};angular.forEach(a.data.Departments,function(a,b){h[a.department_id]=a}),f.showLoading();var i=b.FetchAll(function(){a.departments=i.data,angular.forEach(a.departments,function(a,b){h[a.department_id]||g.Departments.push({department_id:a.department_id,is_active:!1,Department:a})}),f.hideLoading()});a.select_all_department=function(){a.select.selectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!0,a.select.unselectAllDepartment=!1),angular.forEach(a.data.Departments,function(b){b.is_active=a.select.selectAllDepartment})},a.unselect_all_department=function(){a.select.unselectAllDepartment?(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!1):(a.select.selectAllDepartment=!1,a.select.unselectAllDepartment=!0),a.select.unselectAllDepartment&&angular.forEach(a.data.Departments,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;a.onSubmit=function(a){e.close(a.Departments)}}]),angular.module("HITS").directive("autoWidthSelect",function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){var e;b.each(function(){e=$(this),e.data("origWidth",e.outerWidth())}),b.bind("click",function(a){b.css("width","auto")}),b.bind("blur change",function(){b.css("width",e.data("origWidth"))})}}}}),angular.module("HITS").controller("UserManagementCtrl",["$scope","$location","AclService","$http","SessionService","UserAclSessionData",function(a,b,c,d,e,f){e.setAclSession(f),e.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT||b.path("/unauthorized");var g=e.getSession();a.institutionId=g.institution_id,a.userTabTemplate="",a.roleTabTemplate="",a.aclTabTemplate="",a.mainScope=a,a.onFetchUserTab=function(){if(a.userTabTemplate.length<=0){var b="app/master/userManagement/templates/user-list-template.html";d.get(b).then(function(b){var c=b.data;a.userTabTemplate=c})}},a.onFetchRoleTab=function(){if(a.roleTabTemplate.length<=0){var b="app/master/userManagement/templates/role-list-template.html";d.get(b).then(function(b){var c=b.data;a.roleTabTemplate=c})}},a.onFetchAclTab=function(){if(a.aclTabTemplate.length<=0){var b="app/master/userManagement/templates/acl-list-template.html";d.get(b).then(function(b){var c=b.data;a.aclTabTemplate=c})}},a.onFetchUserTab(),a.$on("$destroy",function(){var a=document.getElementById("user-management-content");if(a){var b=$("#user-management-content");b.each(function(a,b){b.parentNode&&b.parentNode.removeChild(b)}),b.empty(),b.remove()}})}]),angular.module("HITS").controller("MasterDataCtrl",["$scope","$location","AclService","$http","SessionService","UserAclSessionData",function(a,b,c,d,e,f){e.setAclSession(f),e.setAcltoScope(a),a.currentAcl.SM_USER_MANAGEMENT||b.path("/unauthorized");var g=e.getSession();a.institutionId=g.institution_id,a.masterDataTemplate="",a.mainScope=a,a.mastertab=0,a.onFetchAEAttendanceTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/ae-attendance-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchDepartmentTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/department-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchDesignationTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/designation-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchDisciplineTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/discipline-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchEmployeeCategoryTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/employeeCategory-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchLocationTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/location-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchPatientClassTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/patientClass-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchPatientDaysTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/patient-days-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchPatientLocationTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/patient-location-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchShiftTimingTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/shift-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchAdmissionDaysTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/admission-days-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchDesignationGroupTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/designation-group-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchMedicationNameTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/medication-name-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onFetchOperationDaysTab=function(){if(a.masterDataTemplate="",a.masterDataTemplate.length<=0){var b="app/master/masterData/templates/operation-days-list-template.html";d.get(b).then(function(b){var c=b.data;a.masterDataTemplate=c})}},a.onTabChanged=function(){1==a.mastertab?a.onFetchAEAttendanceTab():2==a.mastertab?a.onFetchDepartmentTab():3==a.mastertab?a.onFetchDesignationTab():4==a.mastertab?a.onFetchDisciplineTab():5==a.mastertab?a.onFetchEmployeeCategoryTab():6==a.mastertab?a.onFetchLocationTab():7==a.mastertab?a.onFetchPatientClassTab():8==a.mastertab?a.onFetchPatientDaysTab():9==a.mastertab?a.onFetchPatientLocationTab():10==a.mastertab?a.onFetchShiftTimingTab():11==a.mastertab?a.onFetchAdmissionDaysTab():12==a.mastertab?a.onFetchDesignationGroupTab():13==a.mastertab?a.onFetchMedicationNameTab():14==a.mastertab?a.onFetchOperationDaysTab():a.masterDataTemplate=""},a.$on("$destroy",function(){var a=document.getElementById("master-data-content");if(a){var b=$("#master-data-content");b.each(function(a,b){b.parentNode&&b.parentNode.removeChild(b)}),b.empty(),b.remove()}})}]),angular.module("HITS").controller("UamReportCtrl",["$scope","$timeout","UserListingReportService","UserAccessMatrixReportService","$filter","RoleService","$window","$location","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j){i.setAclSession(j),i.setAcltoScope(a),a.currentAcl.UAM_USER_LISTING_REPORT_VIEW||scope.currentAcl.UAM_ACCESS_MATRIX_REPORT_VIEW||h.path("/unauthorized"),a.param={Roles:[]},a.ReportService=null,a.currentAcl.UAM_USER_LISTING_REPORT_VIEW?(a.report_type=1,a.ReportService=d):(a.report_type=2,a.ReportService=c),a.onReportTypeChanged=function(){1==a.report_type?(a.ReportService=d,angular.forEach(a.roles,function(a,b){a.is_hidden=!1})):2==a.report_type&&(a.ReportService=c,angular.forEach(a.roles,function(a,b){("REPORTER"==a.role_name||"GUEST"==a.role_name||"ANONYMOUS REPORTER"==a.role_name||"ADDITIONAL CC"==a.role_name)&&(a.is_hidden=!0,a.is_selected=!1)}))},a.validation={},a.validation.role=!1,a.pdfLink="",a.selectAll=function(a,b){angular.forEach(a,function(a,c){a.is_selected=b})},a.select=function(a,b,c){angular.forEach(a,function(a,d){b[a]&&(b[a].is_selected=c)})};var k=f.FetchAll(function(){a.roles=k.data,a.hashRole={},angular.forEach(a.roles,function(b,c){a.hashRole[b.role_id]=b,b.is_hidden=!1})});a.isValid=function(){a.validation.role=!1;var b=!1;return angular.forEach(a.roles,function(a,c){a.is_selected&&(b=!0)}),b||(a.validation.role=!0),b},a.onGenerateXls=function(b){a.first=!0;if(a.pdfLink="",a.isValid())if(a.action=!0,a.param.Roles=[],angular.forEach(a.roles,function(b,c){b.is_selected&&!b.is_hidden&&a.param.Roles.push(b)}),"Xls"==b)var c=a.ReportService.GenerateXls(a.param,function(){var b=c.data;g.location.assign("/File/DownloadXls?name="+encodeURIComponent(b)),a.action=!1});else var c=a.ReportService.GeneratePdf(a.param,function(){var b=c.data;g.location.assign("/File/DownloadPdf?name="+encodeURIComponent(b)),a.action=!1})},a.someSelected=function(a){return a?Object.keys(a).some(function(b){return a[b]}):!1}}]),angular.module("HITS").controller("AdmissionDaysCtrl",["$rootScope","$scope","$resource","$location","$modal","AdmissionDaysService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i){h.setAclSession(i),h.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_ADMISSION_DAYS_VIEW||d.path("/unauthorized");var j=function(a){e.open({templateUrl:"app/master/admissionDays/admissionDaysForm/admission-days-form.html",controller:"AdmissionDaysFormCtrl",resolve:{admissionDaysData:function(){return a}}}).result.then(function(a){b.Fetch()})};b.SearchQuery={page:1,row_per_page:10,sort_by:"default",is_sort_asc:!1,total_data:0,search:{keyword:b.keyword,fields:["year","month","Discipline.discipline_name"]}};var k=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months={};for(var l in k){var m=k[l],n=+l+1;b.months[n]=m}b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=f.FetchAllWithPagination(b.SearchQuery,function(){b.admissionDays=[];var c=a.data.list;b.admissionDays=c,b.SearchQuery.total_data=a.data.totalData})},b.onCreateNew=function(){j({})},b.onRowEdit=function(a){j(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Admission Days ["+a.year+" "+a.month+"] ?");if(c){f.Delete(a,function(){b.Fetch()})}},b.onSearch=function(){b.SearchQuery.sort_by="default",b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]),angular.module("HITS").controller("AdmissionDaysFormCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","DisciplineService","AdmissionDaysService","ToastMessageService","admissionDaysData",function(a,b,c,d,e,f,g,h,i){b.admissionDays=i,b.admissionDays.admission_days_id||(b.admissionDays.admission_days_id=0),b.FetchAllDiscipline=function(){var a=f.FetchAll(function(){b.disciplines=[],b.disciplines=a.data})},b.FetchAllDiscipline(),b.validate={},b.validate.button=!0,b.admissionDays.year&&(b.validate.year=!1),b.admissionDays.month&&(b.validate.month=!1),b.admissionDays.total&&(b.validate.total=!1),b.admissionDays.discipline_id&&(b.validate.discipline_id=!1),b.isValid=function(){return b.admissionDays.year?b.validate.year=!1:b.validate.year=!0,b.admissionDays.month?b.validate.month=!1:b.validate.month=!0,b.admissionDays.total?b.validate.total=!1:b.validate.total=!0,b.admissionDays.discipline_id?b.validate.discipline_id=!1:b.validate.discipline_id=!0,b.validate.year||b.validate.month||b.validate.total||b.validate.discipline_id?!1:!0},b.onChangeDiscipline=function(){b.admissionDays.Discipline={},b.admissionDays.discipline_id&&angular.forEach(b.disciplines,function(a,c){a.discipline_id==b.admissionDays.discipline_id&&(b.admissionDays.Discipline=a)})},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;var c=g.Save(a,function(){c.data?(h.addAlerts("success","Data Saved Succesfully"),e.close()):(b.validate.button=!0,h.addAlerts("danger","There is a record found for the year and month entered. Please update the existing record"))})}};var j=["January","February","March","April","May","June","July","August","September","October","November","December"];b.months=[];for(var k in j){var l=j[k],m=+k+1;b.months.push({key:m,name:l})}b.years=[];for(var n=(new Date).getFullYear(),o=2030;n>o;)o+=15;for(var k=2015;o>=k;k++)b.years.push(k)}]),angular.module("HITS").controller("IncidentDeleteCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e){a.incidentDeleteAction={Incident:b,DeleteRemarks:""},a.message={},a.validate={},a.isValid=function(){var b=!1;return a.incidentDeleteAction.DeleteRemarks?a.validate.DeleteRemarks=!1:a.validate.DeleteRemarks=!0,b=!a.validate.DeleteRemarks},a.onSave=function(b){if(a.isValid())var d=c.Delete(b,function(){d.data&&e.close(!0)})}}]),angular.module("HITS").controller("IncidentMassDeleteCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e){a.incidentMassDeleteAction={Incidents:b,DeleteRemarks:""},a.inAction=!1,a.onSave=function(b){a.inAction=!0;var d=c.MassDelete(b,function(){e.close(d.data),a.inAction=!1})}}]),angular.module("HITS").controller("IncidentRestoreCtrl",["$scope","incidentData","IncidentService","WorkflowService","$modalInstance",function(a,b,c,d,e){a.incidentRestoreAction={Incident:b,RestoreRemarks:""},a.inAction=!1,a.message={},a.validate={},a.isValid=function(){var b=!1;return a.incidentRestoreAction.RestoreRemarks?a.validate.RestoreRemarks=!1:a.validate.RestoreRemarks=!0,b=!a.validate.RestoreRemarks},a.onSave=function(b){if(a.isValid()){a.inAction=!0;var d=c.Restore(b,function(){d.data&&(e.close(!0),a.inAction=!1)})}}}]),angular.module("HITS").directive("timeFormatInput",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&(d.$parsers.push(function(a){var b=a.replace(/[^0-9:]+/g,"");return a!==b&&(d.$setViewValue(b),d.$render()),b}),b.bind("keypress",function(a){32===a.keyCode&&a.preventDefault()}))}}}),angular.module("HITS").controller("IncidentPrintCtrl",["$scope","$modal","$location","$q","$window","$document","$timeout","UserAclSessionData","IncidentService","IncidentLockService","IncidentFormService","SessionService","ToastMessageService","IncidentSubTypeService","DesignationService","DepartmentService","EmployeeCategoryService","IncidentTypeService","LocationService","DisciplineService","PatientLocationService","PatientClassService","LoadingScreenService","GcsService","WorkflowService","CommitteeGroupService","FileUploader","FileService","ApplicationSettingService","IncidentCommentService","IncidentPrintService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){
l.setAclSession(h),l.setAcltoScope(a),a.wizard=k.getWizardData(),a.incident=k.get(),a.genInfo={},a.form=angular.copy(k.getStatusData()),a.form.is_edited=!1,a.btnState=k.getButtonStateData(),a.today=new Date,a.isAnonymous=a.incident.is_anonymous,a.action=!1,a.submitNextLevelValidation={},a.hasSearch=!1,a.printed=!0,a.isDateEnable=!0,a.incidentPrint={},a.donwloadImage=function(){w.showLoading();var b=E.Print({incidentId:a.incident.incident_id},function(){var c=b.data;if(c.IsSuccess){var d="/File/DownloadPdf?name="+encodeURIComponent(c.Data);a.incidentPrint.imageUrl=d}else m.removeAlerts(),m.addAlerts("danger","Print incident failed. Error : "+c.Message);w.hideLoading()})},a.onPrint=function(){e.print()},a.donwloadImage()}]),angular.module("HITS").directive("dateFix",["dateFilter","datepickerPopupConfig",function(a,b){return{restrict:"EA",require:"ngModel",link:function(b,c,d,e){var f=d.datepickerPopup,g=b[d.max],h=b[d.min],i=e;e.$parsers.push(function(a){var b=i.$viewValue,c=null;if("object"==typeof b||""==b)return b;if("dd-MM-yyyy"===f){var d=b.split("-"),e=parseInt(d[1])-1;c=new Date(d[2],e,d[0]),isNaN(c.getTime())?c=null:(g&&c>g&&(c=g),h&&h>c&&(c=h),i.$setValidity("date",!0),i.$setViewValue(c))}return c?c:a}),c.on("keydown",{scope:b,varOpen:d.isOpen},function(a){var b=!0,c=a.data.scope,d=a.data.varOpen;switch(a.keyCode){case 13:c[d]=!c[d],c.$$phase||c.$apply(),b=!1;break;case 9:c[d]=!1,c.$$phase||c.$apply()}return b}),c.on("blur",{scope:b},function(b){"object"==typeof i.$viewValue&&(c.context.value=isNaN(i.$viewValue)?"":a(i.$viewValue,f),""==c.context.value&&i.$setValidity("required",!1));var d=i.$viewValue;if("object"!=typeof d&&""!=d&&"dd-MM-yyyy"===f){var e=d.split("-"),g=parseInt(e[1])-1,h=new Date(e[2],g,e[0]);isNaN(h.getTime())&&(i.$setViewValue(""),i.$render())}})}}}]),angular.module("HITS").directive("tabRightClick",["$parse",function(a){return function(b,c,d){var e=a(d.tabRightClick);c.bind("contextmenu",function(a){b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]),angular.module("HITS").controller("CommitteeEmpCategoryFormCtrl",["$scope","EmployeeCategoryService","committeeGroup","CommitteeGroupService","$modalInstance",function(a,b,c,d,e){c.EmployeeCategories||(c.EmployeeCategories=[]),a.committeeGroup=c,a.select={},a.select.selectAllEmpCat=!1,a.select.unselectAllEmpCat=!1;var f={};angular.forEach(a.committeeGroup.EmployeeCategories,function(a,b){f[a.employee_category_id]=a});var g=b.FetchAll(function(){a.employeeCategories=g.data,angular.forEach(a.employeeCategories,function(a,b){f[a.employee_category_id]||c.EmployeeCategories.push({committee_group_id:c.committee_group_id,employee_category_id:a.employee_category_id,is_active:!1,EmployeeCategory:a})})});a.selectAllEmpCat=function(){a.select.selectAllEmpCat?(a.select.selectAllEmpCat=!1,a.select.unselectAllEmpCat=!1):(a.select.selectAllEmpCat=!0,a.select.unselectAllEmpCat=!1),angular.forEach(a.committeeGroup.EmployeeCategories,function(b){b.is_active=a.select.selectAllEmpCat})},a.unselectAllEmpCat=function(){a.select.unselectAllDiscipline?(a.select.selectAllEmpCat=!1,a.select.unselectAllEmpCat=!1):(a.select.selectAllEmpCat=!1,a.select.unselectAllEmpCat=!0),a.select.unselectAllEmpCat&&angular.forEach(a.committeeGroup.EmployeeCategories,function(a){a.is_active=!1})},a.validate={},a.validate.button=!0;var h=function(){a.action=!a.action};a.onSubmit=function(a){e.close(a)},a.onSave=function(b){a.validate.button=!1,h();var c=angular.copy(a.committeeGroup.EmployeeCategories);a.committeeGroup.EmployeeCategories=[],angular.forEach(c,function(b,c){(b.employee_category_id||b.is_active)&&a.committeeGroup.EmployeeCategories.push(b)});d.Save(b,function(){e.close(),h()})}}]),angular.module("HITS").controller("EmailQueueCtrl",["$scope","$modal","$location","EmailQueueService","SessionService","UserAclSessionData",function(a,b,c,d,e,f){e.setAclSession(f),e.setAcltoScope(a),a.currentAcl.SM_MASTER_DATA_SM_INCIDENT_SETUP_INCIDENT_DATA_VIEW||c.path("/unauthorized"),a.SearchQueryQueue={page:1,row_per_page:10,sort_by:"last_sent_attempt",is_sort_asc:!1,total_data:0,search:{keyword:a.keywordQueue,fields:["to"]}},a.Fetch=function(){a.SearchQueryQueue.search.keyword=a.keywordQueue;var b=d.FetchAllWithPagination(a.SearchQueryQueue,function(){a.emailQueue=b.data.list,a.SearchQueryQueue.total_data=b.data.totalData})},a.onSearchQueue=function(){a.Fetch()},a.onKeyPress=function(b){13===b.keyCode&&a.onSearchQueue()},a.onPageChanged=function(b){a.SearchQueryQueue.page=b,a.Fetch()},a.onSort=function(b){a.SearchQueryQueue.sort_by==b?a.SearchQueryQueue.is_sort_asc=!a.SearchQueryQueue.is_sort_asc:a.SearchQueryQueue.is_sort_asc=!0,a.SearchQueryQueue.sort_by=b,a.Fetch()},a.Fetch()}]),angular.module("HITS").controller("IncidentUnmergeCtrl",["$scope","$modal","$modalInstance","$location","incidentMergeData","IncidentMergeFormService","IncidentMergeService","ToastMessageService",function(a,b,c,d,e,f,g,h){a.incidentMerge=e,a.inAction=!1,a.validate={},a.validate.UnmergeRemarks=!1,a.onConfirm=function(){var b=!0;if(a.validate.UnmergeRemarks=!1,""==a.incidentMerge.unmerge_remarks||null==a.incidentMerge.unmerge_remarks)return a.validate.UnmergeRemarks=!0,void(b=!1);if(b){if(a.inAction=!0,0!=a.incidentMerge.incident_id&&a.incidentMerge.IncidentMergeDetails.length>0)var d=g.Unmerge(a.incidentMerge,function(){a.inAction=!1;var b=d.data,e="";b.IsSuccess?(e="Unmerge Incidents Success! Redirecting now...",h.removeAlerts(),h.addAlerts("success",e),c.close(!0)):(e="Unmerge incident failed",h.removeAlerts(),h.addAlerts("danger",e),c.close(!1))},function(){a.inAction=!1});a.inAction=!1}}}]),angular.module("HITS").controller("IncidentOpenTabCtrl",["$scope","$q","$location","$interval","IncidentFormService","IncidentFollowUpFormService","IncidentLockService","IncidentCommentService",function(a,b,c,d,e,f,g,h){e.initialize();var i=c.search().formRouteUrl;a.incident=e.get(),a.incident.incident_id=c.search().incident_id,"null"!=c.search().incident_no&&(a.incident.incident_no=c.search().incident_no),a.incident.current_tracking_status=c.search().current_tracking_status,e.set(a.incident),a.statusData=e.getStatusData(),null!=c.search().is_read_only&&(a.statusData.is_read_only="true"==c.search().is_read_only),null!=c.search().is_edited&&(a.statusData.is_edited="true"==c.search().is_edited),null!=c.search().is_forwarded_to_you&&(a.statusData.is_forwarded_to_you="true"==c.search().is_forwarded_to_you),null!=c.search().is_custom_role&&(a.statusData.is_custom_role="true"==c.search().is_custom_role),null!=c.search().custom_role_id&&(a.statusData.custom_role_id=c.search().custom_role_id),e.setStatusData(a.statusData),a.lockIncident=function(){var c=b.defer(),d=g.LockIncident({incidentId:a.incident.incident_id,incidentNo:a.incident.incident_no},function(){var a=d.data;c.resolve(a)});return c.promise},a.fetchFollowUp=function(a){var c=b.defer(),d=h.FetchOne({incidentCommentId:a},function(){var a=d.data;c.resolve(a)});return c.promise};var j=0;null!=c.search().lock&&(j=c.search().lock);var k=0;null!=c.search().incident_comment_id&&(k=c.search().incident_comment_id),j>0?b.all([a.lockIncident()]).then(function(b){var d=b[0];if(d.IsSuccess)c.url(i);else{var f=d.Data;confirm("Incident is being processed by another User ("+f+"). Do you want to open the incident in view/read-only mode?")?(e.getStatusData().is_read_only=!0,e.getStatusData().is_edited=!1,e.getStatusData().is_forwarded_to_you=!1,e.getStatusData().is_custom_role=a.statusData.is_custom_role,e.getStatusData().custom_role_id=a.statusData.custom_role_id,c.url(i)):c.url("/incident/track")}}):k>0?b.all([a.fetchFollowUp(k)]).then(function(a){var b=a[0];null!=c.search().from_page&&(b.from_page=c.search().from_page),f.set(b),c.url(i)}):c.url(i)}]),angular.module("HITS").controller("LoggingListCtrl",["$scope","$location","$timeout","LogService","SessionService","ToastMessageService",function(a,b,c,d,e,f){e.setAcltoScope(a),a.currentAcl.SM_LOG_VIEW||b.path("/unauthorized"),a.today=new Date,a.filter={},a.filter.level="ALL",a.rows=[10,25,50,100],a.SearchQuery={page:1,row_per_page:10,sort_by:"Date",is_sort_asc:!0,total_data:0,search:{keyword:a.keyword,fields:["Date","Level","Logger","Message","Exception"]}},a.datePickerOpen=function(a){c(function(){$("#"+a).focus()})},a.Fetch=function(){a.SearchQuery.search.keyword=a.keyword;var b=d.FetchAllWithPagination({searchQuery:a.SearchQuery,level:a.filter.level,from:a.filter.from_date,to:a.filter.to_date},function(){a.logs=[];var c=b.data.list;a.SearchQuery.total_data=b.data.totalData,a.logs=c})},a.onSearch=function(){a.Fetch()},a.onPageChanged=function(b){a.SearchQuery.page=b,a.Fetch()},a.onSort=function(b){a.SearchQuery.sort_by==b?a.SearchQuery.is_sort_asc=!a.SearchQuery.is_sort_asc:a.SearchQuery.is_sort_asc=!0,a.SearchQuery.sort_by=b,a.Fetch()},a.onLevelChange=function(){a.Fetch()},a.Fetch()}]),angular.module("HITS").controller("ViewAllCommentCtrl",["$scope","$window","incidentComments","incidentId",function(a,b,c,d){a.incidentComments=c,a.incidentId=d,a.onDownloadAttachment=function(c){var d=0;d=null==a.incidentId?0:a.incidentId,b.open("/File/DownloadIncidentCommentAttachment?name="+encodeURIComponent(c.attachment_filename)+"&incidentId="+d)}}]),angular.module("HITS").controller("IncidentDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService",function(a,b,c,d,e,f){a.labels=[],a.labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var g=f.GetIncidentMonthlyData({year:2015},function(){var b=g.data;console.log(b),angular.forEach(b,function(b,c){"Laboratory and Pathology"==b.incident_type?(a.lab_pat_data=a.getGraphData(b),a.lab_pat_legend=["Laboratory and Pathology"]):"Falls"==b.incident_type?(a.falls_data=a.getGraphData(b),a.falls_legend=["Falls"]):"Security"==b.incident_type?(a.security_data=a.getGraphData(b),a.security_legend=["Security"]):"Others"==b.incident_type?(a.others_data=a.getGraphData(b),a.others_legend=["Others"]):"Pressure Injury"==b.incident_type?(a.pressure_injury_data=a.getGraphData(b),a.pressure_injury_legend=["Pressure Injury"]):"Blood Product Transfusion"==b.incident_type?(a.blood_transfusion_data=a.getGraphData(b),a.blood_transfusion_legend=["Blood Product Transfusion"]):"Clinical Assessment & Treatment"==b.incident_type?(a.clinical_assessment_data=a.getGraphData(b),a.clinical_assessment_legend=["Clinical Assessment & Treatment"]):"Medication Events"==b.incident_type?(a.medical_events_data=a.getGraphData(b),a.medical_events_legend=["Medication Events"]):"Peripheral Venous Complications"==b.incident_type?(a.peripheral_venous_data=a.getGraphData(b),a.peripheral_venous_legend=["Peripheral Venous Complications"]):"Documentation"==b.incident_type?(a.documentation_data=a.getGraphData(b),a.documentation_legend=["Documentation"]):"Environment & Safety"==b.incident_type?(a.env_safety_data=a.getGraphData(b),a.env_safety_legend=["Environment & Safety"]):"Anaesthesia"==b.incident_type?(a.anaesthesia_data=a.getGraphData(b),a.anaesthesia_legend=["Anaesthesia"]):"Behaviour"==b.incident_type?(a.behaviour_data=a.getGraphData(b),a.behaviour_legend=["Behaviour"]):"Device or Equipment"==b.incident_type&&(a.device_equipment_data=a.getGraphData(b),a.device_equipment_legend=["Device or Equipment"])})});a.getGraphData=function(a){return[[a.jan,a.feb,a.mar,a.apr,a.may,a.jun,a.jul,a.aug,a.sep,a.oct,a.nov,a.dec]]},a.onClick=function(a,b){console.log(a,b)},a.onHover=function(a){a.length>0?console.log("Point",a[0].value):console.log("No point")},a.onClick=function(){points.length>0?console.log("Point",points[0].value):console.log("wala ni agi diri")}}]),angular.module("HITS").controller("DashboardCtrl",["$scope","$http","$location",function(a,b,c){if(a.tabActive=[!0,!1,!1,!1,!1,!1],a.mainScope=a,a.monthlyIncidentDashboardTemplate="",a.incidentRateDashboardTemplate="",a.sharpInjuryDashboardTemplate="",a.yearlyIncidentRateDashboardTemplate="",a.outstandingCaseDashboardTemplate="",a.followUpDashboardTemplate="",a.isAnySharpInjury=!0,null!=c.search().tabActive)for(var d=c.search().tabActive,e=0;6>e;e++)a.tabActive[e]=e==d;a.onFetchMonthlyIncidentDashboard=function(){if(a.monthlyIncidentDashboardTemplate.length<=0){var c="app/dashboard/monthly-incident-dashboard/monthly-incident-dashboard.html";b.get(c).then(function(b){var c=b.data;a.monthlyIncidentDashboardTemplate=c})}},a.onFetchIncidentRateDashboard=function(){if(a.incidentRateDashboardTemplate.length<=0){var c="app/dashboard/incident-rate-dashboard/incident-rate-dashboard.html";b.get(c).then(function(b){var c=b.data;a.incidentRateDashboardTemplate=c})}},a.onFetchSharpInjuryDashboard=function(){if(a.sharpInjuryDashboardTemplate.length<=0){var c="app/dashboard/sharp-injury-dashboard/sharp-injury-dashboard.html";b.get(c).then(function(b){var c=b.data;a.sharpInjuryDashboardTemplate=c})}},a.onFetchYearlyIncidentRateDashboard=function(){if(a.yearlyIncidentRateDashboardTemplate.length<=0){var c="app/dashboard/yearly-incident-rate-dashboard/yearly-incident-rate-dashboard.html";b.get(c).then(function(b){var c=b.data;a.yearlyIncidentRateDashboardTemplate=c})}},a.onFetchFollowUpDashboard=function(){if(a.followUpDashboardTemplate.length<=0){var c="app/dashboard/follow-up-dashboard/follow-up-dashboard.html";b.get(c).then(function(b){var c=b.data;a.followUpDashboardTemplate=c})}},a.onFetchOutstandingCaseDashboard=function(){if(a.outstandingCaseDashboardTemplate.length<=0){var c="app/dashboard/outstanding-case-dashboard/outstanding-case-dashboard.html";b.get(c).then(function(b){var c=b.data;a.outstandingCaseDashboardTemplate=c})}},a.onFetchMonthlyIncidentDashboard(),a.onFetchSharpInjuryDashboard(),a.onFetchFollowUpDashboard()}]),angular.module("HITS").controller("MonthlyIncidentDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService","LoadingScreenService",function(a,b,c,d,e,f,g){a.labels=[],a.labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.series=[],a.colors=["#66c2ff","#ff3333","#00ADF9","#46BFBD","#FDB45C","#949FB1","#4D5360"],a.chartLineOption={elements:{line:{fill:!1,tension:.2}},title:{display:!0,text:"Title"}},a.chartLineOptions=[],a.yearOptions=[];var h=new Date,i=h.getFullYear();a.yearParam=i,a.year="'"+(""+a.yearParam).substr(2);for(var j=0;10>j;j++)a.yearOptions.push(i-j);a.total={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,total:0},a.tableData=[],a.FetchData=function(){var b=f.GetIncidentMonthlyData({year:a.yearParam},function(){var c=b.data;a.tableData=angular.copy(c),a.series=[],a.total={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,total:0},a.chartLineOptions=[],angular.forEach(c,function(b,c){if(b.mean=parseFloat(Math.round(100*b.mean)/100).toFixed(2),""==b.incident_sub_type){a.series.push({data:a.getGraphData(b),legend:["Number of Incident","Mean"],name:b.incident_type});var d=angular.copy(a.chartLineOption);d.title.text=b.incident_type+" (Year: "+a.yearParam+")",a.chartLineOptions.push(d),a.total.jan+=b.jan,a.total.feb+=b.feb,a.total.mar+=b.mar,a.total.apr+=b.apr,a.total.may+=b.may,a.total.jun+=b.jun,a.total.jul+=b.jul,a.total.aug+=b.aug,a.total.sep+=b.sep,a.total.oct+=b.oct,a.total.nov+=b.nov,a.total.dec+=b.dec,a.total.total+=b.total}})})},a.onRefresh=function(){a.year="'"+(""+a.yearParam).substr(2),a.FetchData()},a.FetchData(),a.getGraphData=function(a){return[[a.jan,a.feb,a.mar,a.apr,a.may,a.jun,a.jul,a.aug,a.sep,a.oct,a.nov,a.dec],[a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean]]},a.onExportToXls=function(){g.showLoading();var b=f.GenerateIncidentMonthlyXls({year:a.yearParam},function(){var a=b.data;a?d.location.assign("/File/DownloadXls?name="+encodeURIComponent(a)):alert("This Report is not available in Excel"),g.hideLoading()},function(){g.hideLoading()})}}]),angular.module("HITS").controller("IncidentRateDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService","LoadingScreenService",function(a,b,c,d,e,f,g){a.labels=[],a.labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.series=[],a.yearOptions=[],a.colors=["#66c2ff","#ff3333","#00ADF9","#46BFBD","#FDB45C","#949FB1","#4D5360"],a.chartLineOption={elements:{line:{fill:!1,tension:.2}},title:{display:!0,text:"Title"},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Rate per 1000 inpatient days"}}]}},a.chartLineOptions=[];var h=new Date,i=h.getFullYear();a.yearParam=i,a.year="'"+(""+a.yearParam).substr(2);for(var j=0;10>j;j++)a.yearOptions.push(i-j);a.tableData=[],a.FetchData=function(){var b=f.GetIncidentRateMonthlyData({year:a.yearParam},function(){var c=b.data;a.series=[],a.chartLineOptions=[],angular.forEach(c,function(b,c){b=a.roundValue(b),a.series.push({data:a.getGraphData(b),legend:["Incident Rate","Mean"],name:b.incident_type});var d=angular.copy(a.chartLineOption);d.title.text=b.incident_type,b.y_axis_label&&(d.scales.yAxes[0].scaleLabel.labelString=b.y_axis_label),a.chartLineOptions.push(d)}),a.tableData=angular.copy(c)})},a.onRefresh=function(){a.year="'"+(""+a.yearParam).substr(2),a.FetchData()},a.FetchData(),a.getGraphData=function(a){return[[a.jan,a.feb,a.mar,a.apr,a.may,a.jun,a.jul,a.aug,a.sep,a.oct,a.nov,a.dec],[a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean]]},a.roundValue=function(a){return a.mean=parseFloat(Math.round(100*a.mean)/100).toFixed(2),a.jan=parseFloat(Math.round(100*a.jan)/100).toFixed(2),a.feb=parseFloat(Math.round(100*a.feb)/100).toFixed(2),a.mar=parseFloat(Math.round(100*a.mar)/100).toFixed(2),a.apr=parseFloat(Math.round(100*a.apr)/100).toFixed(2),a.may=parseFloat(Math.round(100*a.may)/100).toFixed(2),a.jun=parseFloat(Math.round(100*a.jun)/100).toFixed(2),a.jul=parseFloat(Math.round(100*a.jul)/100).toFixed(2),a.aug=parseFloat(Math.round(100*a.aug)/100).toFixed(2),a.sep=parseFloat(Math.round(100*a.sep)/100).toFixed(2),a.oct=parseFloat(Math.round(100*a.oct)/100).toFixed(2),a.nov=parseFloat(Math.round(100*a.nov)/100).toFixed(2),a.dec=parseFloat(Math.round(100*a.dec)/100).toFixed(2),a},a.onExportToXls=function(){g.showLoading();var b=f.GenerateIncidentRateMonthlyXls({year:a.yearParam},function(){var a=b.data;a?d.location.assign("/File/DownloadXls?name="+encodeURIComponent(a)):alert("This Report is not available in Excel"),g.hideLoading()},function(){g.hideLoading()})}}]),angular.module("HITS").controller("OutstandingCaseDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService","LoadingScreenService",function(a,b,c,d,e,f,g){a.labels=[],a.labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.series=[],a.yearOptions=[];var h=new Date,i=h.getFullYear();a.yearParam=i,a.year="'"+(""+a.yearParam).substr(2);for(var j=0;10>j;j++)a.yearOptions.push(i-j);a.tableData=[],a.FetchData=function(){var b=f.GetIncidentOutstandingData({year:a.yearParam},function(){var c=b.data;a.tableData=angular.copy(c)})},a.onRefresh=function(){a.year="'"+(""+a.yearParam).substr(2),a.FetchData()},a.FetchData(),a.onExportToXls=function(){g.showLoading();var b=f.GetIncidentOutstandingXls({year:a.yearParam},function(){var a=b.data;a?d.location.assign("/File/DownloadXls?name="+encodeURIComponent(a)):alert("This Report is not available in Excel"),g.hideLoading()},function(){g.hideLoading()})},a.goToTrackIncident=function(){b.path("/incident/track")}}]),angular.module("HITS").controller("FollowUpDashboardCtrl",["$scope","$location","UserSessionData","UserAclSessionData","IncidentCommentService","IncidentFollowUpFormService","SessionService",function(a,b,c,d,e,f,g){a.user=c;var h=d;g.setAclSession(h),g.setAcltoScope(a),a.isDateEnable=!0,a.isConfirmed=0,a.SearchQueryFollowUp={page:1,row_per_page:10,sort_by:"IncidentMainInfo.incident_no",is_sort_asc:!0,total_data:0,search:{keyword:"",fields:["IncidentMainInfo.incident_no"]}},a.FetchFollowUp=function(){var b=a.user.user_id,c=a.isConfirmed,d=e.FetchFollowUpByUser({userId:b,isConfirmed:c,searchQuery:a.SearchQueryFollowUp},function(){a.incidentFollowUps=[],a.incidentFollowUps=d.data.list,a.SearchQueryFollowUp.total_data=d.data.totalData,angular.forEach(a.incidentFollowUps,function(b,c){var d="/Web/index.html#/incident/form/tab";b.url=d,b.url=a.appendURL(b.url,"incident_id",b.IncidentMainInfo.incident_id),b.url=a.appendURL(b.url,"incident_no",b.IncidentMainInfo.incident_no),b.url=a.appendURL(b.url,"current_tracking_status",b.IncidentMainInfo.current_tracking_status),b.url=a.appendURL(b.url,"lock","0"),b.url=a.appendURL(b.url,"incident_comment_id",b.incident_comment_id),b.url=a.appendURL(b.url,"from_page","dashboard"),b.url=a.appendURL(b.url,"formRouteUrl","/incident/followUp")})})},a.onPageFollowUpChanged=function(b){a.SearchQueryFollowUp.page=b,a.FetchFollowUp()},a.onSortFollowUp=function(b){a.SearchQueryFollowUp.sort_by==b?a.SearchQueryFollowUp.is_sort_asc=!a.SearchQueryFollowUp.is_sort_asc:a.SearchQueryFollowUp.is_sort_asc=!0,a.SearchQueryFollowUp.sort_by=b,a.FetchFollowUp()},a.incidentFollowUp=f.get(),a.onRefreshFollowUp=function(b){a.isConfirmed=b,a.FetchFollowUp()},a.onEditFollowUp=function(a,c){a.preventDefault(),c.from_page="dashboard",f.set(c),b.path("/incident/followUp")},a.appendURL=function(a,b,c){return a.indexOf("?")>=0?a+"&"+b+"="+c:a+"?"+b+"="+c},a.FetchFollowUpSent=function(){var b=a.user.user_id,c=a.isConfirmed,d=e.FetchFollowUpSentByUser({userId:b,isConfirmed:c,searchQuery:a.SearchQueryFollowUpSent},function(){a.incidentFollowUpSents=[],a.incidentFollowUpSents=d.data.list,a.SearchQueryFollowUpSent.total_data=d.data.totalData;var b="/Web/index.html#/incident/form/tab";angular.forEach(a.incidentFollowUpSents,function(c,d){c.url=b,c.url=a.appendURL(c.url,"incident_id",c.incident_id),c.url=a.appendURL(c.url,"incident_no",c.incident_no),c.url=a.appendURL(c.url,"current_tracking_status",c.current_tracking_status),c.can_edit?(c.url=a.appendURL(c.url,"is_edited","CLOSED"!=c.current_tracking_status),c.url=a.appendURL(c.url,"lock","1"),c.url=a.appendURL(c.url,"is_read_only",c.is_read_only),c.url=a.appendURL(c.url,"is_read",c.is_read)):(c.url=a.appendURL(c.url,"is_edited","false"),"CLOSED"==c.current_tracking_status?c.url=a.appendURL(c.url,"is_forwarded_to_you","false"):c.url=a.appendURL(c.url,"is_forwarded_to_you","true"),c.url=a.appendURL(c.url,"is_read_only",c.is_read_only),c.url=a.appendURL(c.url,"is_read",c.is_read),c.url=a.appendURL(c.url,"is_custom_role",c.is_custom_role),c.url=a.appendURL(c.url,"custom_role_id",c.custom_role_id),c.url=a.appendURL(c.url,"lock","0")),c.url=a.appendURL(c.url,"formRouteUrl","/incident/form")})})},a.SearchQueryFollowUpSent={page:1,row_per_page:10,sort_by:"IncidentMainInfo.incident_no",is_sort_asc:!1,total_data:0,search:{keyword:"",fields:["IncidentMainInfo.incident_no"]}},a.onPageFollowUpSentChanged=function(b){a.SearchQueryFollowUpSent.page=b,a.FetchFollowUpSent()},a.onSortFollowUpSent=function(b){a.SearchQueryFollowUpSent.sort_by==b?a.SearchQueryFollowUpSent.is_sort_asc=!a.SearchQueryFollowUpSent.is_sort_asc:a.SearchQueryFollowUpSent.is_sort_asc=!0,a.SearchQueryFollowUpSent.sort_by=b,a.FetchFollowUpSent()},a.onRefreshFollowUpSent=function(b){a.isConfirmed=b,a.FetchFollowUpSent()},a.FetchFollowUp(),a.FetchFollowUpSent(),a.appendURL=function(a,b,c){return a.indexOf("?")>=0?a+"&"+b+"="+c:a+"?"+b+"="+c}}]),angular.module("HITS").controller("SharpInjuryDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService","LoadingScreenService",function(a,b,c,d,e,f,g){a.labels=[],a.labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.series=[],a.colors=["#66c2ff","#ff3333","#00ADF9","#46BFBD","#FDB45C","#949FB1","#4D5360"],a.chartLineOption={elements:{line:{fill:!1,tension:.2}},title:{display:!0,text:"Title"}},a.chartLineOptions=[],a.yearOptions=[];var h=new Date,i=h.getFullYear();a.yearParam=i,a.year="'"+(""+a.yearParam).substr(2);for(var j=0;10>j;j++)a.yearOptions.push(i-j);a.tableData=[],a.FetchData=function(){var b=f.GetContaminatedSharpInjuryData({year:a.yearParam},function(){var c=b.data;a.series=[],a.chartLineOptions=[],angular.forEach(c,function(b,c){if(b.mean=parseFloat(Math.round(100*b.mean)/100).toFixed(2),"Total number of contaminated sharp injury (Infection Control)"==b.incident_type){a.series.push({data:a.getGraphData(b),legend:["Number of Sharp Injury","Mean"],name:b.incident_type});var d=angular.copy(a.chartLineOption);d.title.text=b.incident_type+" (Year: "+a.yearParam+")",a.chartLineOptions.push(d)}}),a.tableData=angular.copy(c)})},a.onRefresh=function(){a.year="'"+(""+a.yearParam).substr(2),a.FetchData()},a.FetchData(),a.getGraphData=function(a){return[[a.jan,a.feb,a.mar,a.apr,a.may,a.jun,a.jul,a.aug,a.sep,a.oct,a.nov,a.dec],[a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean,a.mean]]},a.onExportToXls=function(){g.showLoading();var b=f.GetContaminatedSharpInjuryXls({year:a.yearParam},function(){var a=b.data;a?d.location.assign("/File/DownloadXls?name="+encodeURIComponent(a)):alert("This Report is not available in Excel"),g.hideLoading()},function(){g.hideLoading()})}}]),angular.module("HITS").controller("YearlyIncidentRateDashboardCtrl",["$scope","$location","$timeout","$window","$routeParams","DashboardService","LoadingScreenService",function(a,b,c,d,e,f,g){a.labels=[],a.series=[],a.colors=["#66c2ff","#ff3333","#00ADF9","#46BFBD","#FDB45C","#949FB1","#4D5360"],a.chartBarOption={elements:{},title:{display:!0,text:"Title"}},a.chartBarOptions=[],a.startYear=2015,a.endYear=2015,a.yearOptions=[];var h=new Date,i=h.getFullYear();a.yearParam=i,a.year="'"+(""+a.yearParam).substr(2);for(var j=0;10>j;j++)a.yearOptions.push(i-j);a.FetchData=function(){var b=f.GetIncidentRateYearlyData({year:a.yearParam},function(){var c=b.data,d=c.years.length-1;c.data.sort(function(a,b){return b.incident_count[d]-a.incident_count[d]}),a.dashboardData=c,a.series=[],a.labels=[],a.mean=[],a.chartBarOptions=[],a.barData=[],angular.forEach(a.dashboardData.years,function(b,c){a.barData.push([])}),angular.forEach(a.dashboardData.data,function(b,c){a.labels.push(b.title),angular.forEach(b.incident_count,function(b,c){a.barData[c].push(b)})}),a.series.push({data:angular.copy(a.barData).reverse(),legend:angular.copy(a.dashboardData.years).reverse()}),a.startYear=a.dashboardData.years[0],a.endYear=a.dashboardData.years[a.dashboardData.years.length-1];var e=angular.copy(a.chartBarOption);e.title.text="Total Number of Incident (Year: "+a.startYear+" - "+a.endYear+")",a.chartBarOptions.push(e)})},a.onRefresh=function(){a.year="'"+(""+a.yearParam).substr(2),a.FetchData()},a.FetchData(),a.onExportToXls=function(){g.showLoading();var b=f.GetIncidentRateYearlyXls({year:a.yearParam},function(){var a=b.data;a?d.location.assign("/File/DownloadXls?name="+encodeURIComponent(a)):alert("This Report is not available in Excel"),g.hideLoading()},function(){g.hideLoading()})}}]),angular.module("HITS").controller("MedicationNameCtrl",["$rootScope","$scope","$resource","$location","$modalInstance","MedicationNameService","medicationData",function(a,b,c,d,e,f,g){b.medication=g,b.validate={},b.validate.button=!0,b.medication.medication_name&&(b.validate.medication_name=!1),b.isValid=function(){return b.validate.medication_name=!b.medication.medication_name,!b.validate.medication_name},b.onSave=function(a){if(b.isValid()){b.validate.button=!1;f.Save(a,function(){var a=!0;e.close(a)})}}}]),angular.module("HITS").controller("MedicationNameListCtrl",["$rootScope","$scope","$resource","$location","$modal","$timeout","MedicationNameService","ToastMessageService","SessionService","UserAclSessionData",function(a,b,c,d,e,f,g,h,i,j){i.setAclSession(j),i.setAcltoScope(b),b.currentAcl.SM_MASTER_DATA_MEDICATION_NAME_VIEW||d.path("/unauthorized");var k=function(a){e.open({templateUrl:"app/master/medication-name/form/medication-name.html",controller:"MedicationNameCtrl",resolve:{medicationData:function(){return a}}}).result.then(function(a){var c="",d="";a?(c="success",d="Data Saved Succesfully"):(c="danger",d="Save Medication Name failed"),h.addAlerts(c,d),b.Fetch()})};b.rows=[10,25,50,100],b.SearchQuery={page:1,row_per_page:10,sort_by:"medication_name",is_sort_asc:!0,total_data:0,search:{keyword:b.keyword,fields:["medication_name"]}},b.Fetch=function(){b.SearchQuery.search.keyword=b.keyword;var a=g.FetchAllWithPagination(b.SearchQuery,function(){b.medications=[];var c=a.data.list;b.SearchQuery.total_data=a.data.totalData,b.medications=c})},b.onCreateNew=function(){k({})},b.onRowEdit=function(a){k(angular.copy(a))},b.onRowDelete=function(a){var c=confirm("Are you sure you want to delete the Medication Name ["+a.medication_name+"] ?");if(c)var d=g.Delete(a,function(){var a="",c="";d?(a="success",c="Data Deleted Succesfully"):(a="danger",c="Delete Medication Name failed"),h.addAlerts(a,c),b.Fetch()})},b.onSearch=function(){b.Fetch()},b.onPageChanged=function(a){b.SearchQuery.page=a,b.Fetch()},b.onSort=function(a){b.SearchQuery.sort_by==a?b.SearchQuery.is_sort_asc=!b.SearchQuery.is_sort_asc:b.SearchQuery.is_sort_asc=!0,b.SearchQuery.sort_by=a,b.Fetch()},b.onKeyPress=function(a){13===a.keyCode&&b.onSearch()},b.Fetch()}]);